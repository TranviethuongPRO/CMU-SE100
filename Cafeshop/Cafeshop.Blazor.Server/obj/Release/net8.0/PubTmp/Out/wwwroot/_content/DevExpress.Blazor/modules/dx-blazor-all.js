import{c as e,g as t,a as i}from"./_commonjsHelpers-f0e2db5e.js";class n{static setLoaded(e){this.setAttribute(e,n.loaded)}static removeLoaded(e){this.removeAttribute(e,n.loaded)}static hasLoaded(e){return null!==e.getAttribute(n.prefix+n.loaded)}static setAttribute(e,t,i=null){e.setAttribute(n.prefix+t,null!=i?i:"")}static removeAttribute(e,t){e.removeAttribute(n.prefix+t)}}n.prefix="data-qa-dxbl-",n.loaded="loaded";var s,r,o;!function(e){e[e.Default=-1]="Default",e[e.None=0]="None",e[e.Dragging=150]="Dragging"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Click=1]="Click",e[e.DblClick=2]="DblClick",e[e.Dragging=4]="Dragging"}(r||(r={})),function(e){e[e.Stopped=0]="Stopped",e[e.WaitingForDragging=1]="WaitingForDragging",e[e.Dragging=2]="Dragging"}(o||(o={}));class a extends CustomEvent{constructor(e){super(a.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}a.eventName="dxpointerdragstart";class l extends CustomEvent{constructor(e){super(l.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}l.eventName="dxpointerdragstop";class A extends Event{constructor(){super(A.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}A.eventName="dxpointerdragcancel";class d extends CustomEvent{constructor(e){super(d.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}d.eventName="dxclick";class c extends CustomEvent{constructor(e){super(c.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}c.eventName="dxdblclick";var h=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;var i=function(){function e(){}return e.IdentUserAgent=function(t,i){void 0===i&&(i=!1);var n=["Mozilla","IE","Firefox","Netscape","Safari","Chrome","Opera","Opera10","Edge"],s="IE",r="Win",o={Safari:2,Chrome:.1,Mozilla:1.9,Netscape:8,Firefox:2,Opera:9,IE:6,Edge:12};if(t&&0!==t.length){t=t.toLowerCase(),e.indentPlatformMajorVersion(t);try{for(var a={Windows:"Win",Macintosh:"Mac","Mac OS":"Mac",Mac_PowerPC:"Mac","cpu os":"MacMobile","cpu iphone os":"MacMobile",Android:"Android","!Windows Phone":"WinPhone","!WPDesktop":"WinPhone","!ZuneWP":"WinPhone"},l="(?:/|\\s*)?",A="(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)0*?)?",d="(?:"+A+")?",c={Safari:"applewebkit(?:.*?(?:version/"+A+"[\\.\\w\\d]*?(?:\\s+mobile/\\S*)?\\s+safari))?",Chrome:"(?:chrome|crios)(?!frame)"+l+d,Mozilla:"mozilla(?:.*rv:"+d+".*Gecko)?",Netscape:"(?:netscape|navigator)\\d*/?\\s*"+d,Firefox:"firefox"+l+d,Opera:"(?:opera|\\sopr)"+l+d,Opera10:"opera.*\\s*version"+l+d,IE:"msie\\s*"+d,Edge:"edge"+l+d},h=null,u=-1,p=0;p<n.length;p++){var m=n[p],g=new RegExp(c[m],"i").exec(t);if(g&&g.index>=0){if("IE"===h&&u>=11&&"Safari"===m)continue;"Opera10"===(h=m)&&(h="Opera"),u=e.GetBrowserVersion(t,g,"trident"+l+d,e.getIECompatibleVersionString()),"Mozilla"===h&&u>=11&&(h="IE")}}h||(h=s);var C=-1!==u;C||(u=o[h]);var f=null,v=Number.MAX_VALUE;for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var w="!"===b.substr(0,1),y=t.indexOf((w?b.substr(1):b).toLowerCase());y>=0&&(y<v||w)&&(v=w?0:y,f=a[b])}var B=t.toUpperCase().match("SM-[A-Z]"),E=B&&B.length>0;"WinPhone"===f&&u<9&&(u=Math.floor(e.getVersionFromTrident(t,"trident"+l+d))),!i&&"IE"===h&&u>7&&document.documentMode<u&&(u=document.documentMode),"WinPhone"===f&&(u=Math.max(9,u)),f||(f=r),f!==a["cpu os"]||C||(u=4),e.fillUserAgentInfo(n,h,u,f,E)}catch(t){e.fillUserAgentInfo(n,s,o[s],r)}}else e.fillUserAgentInfo(n,s,o[s],r)},e.GetBrowserVersion=function(t,i,n,s){var r=e.getVersionFromMatches(i);if(s){var o=e.getVersionFromTrident(t,n);if("edge"===s||parseInt(s)===o)return o}return r},e.getIECompatibleVersionString=function(){if(document.compatible)for(var e=0;e<document.compatible.length;e++)if("IE"===document.compatible[e].userAgent&&document.compatible[e].version)return document.compatible[e].version.toLowerCase();return""},e.isTouchEnabled=function(){return e.hasTouchStart()||e.hasMaxTouchPoints()||e.hasMsMaxTouchPoints()},e.hasTouchStart=function(){return"ontouchstart"in window},e.hasMaxTouchPoints=function(){return navigator.maxTouchPoints>0},e.hasMsMaxTouchPoints=function(){return navigator.msMaxTouchPoints>0},e.hasNavigator=function(){return"undefined"!=typeof navigator},e.fillUserAgentInfo=function(t,i,n,s,r){void 0===r&&(r=!1);for(var o=0;o<t.length;o++){var a=t[o];e[a]=a===i}e.Version=Math.floor(10*n)/10,e.MajorVersion=Math.floor(e.Version),e.WindowsPlatform="Win"===s||"WinPhone"===s,e.MacOSMobilePlatform="MacMobile"===s||"Mac"===s&&e.isTouchEnabled(),e.MacOSPlatform="Mac"===s&&!e.MacOSMobilePlatform,e.AndroidMobilePlatform="Android"===s,e.WindowsPhonePlatform="WinPhone"===s,e.WebKitFamily=e.Safari||e.Chrome||e.Opera&&e.MajorVersion>=15,e.NetscapeFamily=e.Netscape||e.Mozilla||e.Firefox,e.WebKitTouchUI=e.MacOSMobilePlatform||e.AndroidMobilePlatform;var l=e.IE&&e.MajorVersion>9&&e.WindowsPlatform&&e.UserAgent.toLowerCase().indexOf("touch")>=0;if(e.MSTouchUI=l||e.Edge&&!!window.navigator.maxTouchPoints,e.TouchUI=e.WebKitTouchUI||e.MSTouchUI,e.MobileUI=e.WebKitTouchUI||e.WindowsPhonePlatform,e.AndroidDefaultBrowser=e.AndroidMobilePlatform&&!e.Chrome,e.AndroidChromeBrowser=e.AndroidMobilePlatform&&e.Chrome,r&&(e.SamsungAndroidDevice=r),e.MSTouchUI){var A=e.UserAgent.toLowerCase().indexOf("arm;")>-1;e.VirtualKeyboardSupported=A||e.WindowsPhonePlatform}else e.VirtualKeyboardSupported=e.WebKitTouchUI;e.fillDocumentElementBrowserTypeClassNames(t)},e.indentPlatformMajorVersion=function(t){var i=/(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\d+)(?:[-0-9_.])*/.exec(t);i&&(e.PlaformMajorVersion=i[1])},e.getVersionFromMatches=function(e){var t=-1,i="";return e&&(e[1]&&(i+=e[1],e[2]&&(i+="."+e[2])),""!==i&&(t=parseFloat(i),isNaN(t)&&(t=-1))),t},e.getVersionFromTrident=function(t,i){var n=new RegExp(i,"i").exec(t);return e.getVersionFromMatches(n)+4},e.fillDocumentElementBrowserTypeClassNames=function(t){for(var i="",n=t.concat(["WindowsPlatform","MacOSPlatform","MacOSMobilePlatform","AndroidMobilePlatform","WindowsPhonePlatform","WebKitFamily","WebKitTouchUI","MSTouchUI","TouchUI","AndroidDefaultBrowser"]),s=0;s<n.length;s++){var r=n[s];e[r]&&(i+="dx"+r+" ")}i+="dxBrowserVersion-"+e.MajorVersion,"undefined"!=typeof document&&document&&document.documentElement&&(""!==document.documentElement.className&&(i=" "+i),document.documentElement.className+=i,e.Info=i)},e.getUserAgent=function(){return e.hasNavigator()&&navigator.userAgent?navigator.userAgent.toLowerCase():""},e.UserAgent=e.getUserAgent(),e._foo=e.IdentUserAgent(e.UserAgent),e}();t.Browser=i}));t(h);var u=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;var i=function(){function e(){}return e.isAlpha=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},e.isDigit=function(e){return e>="0"&&e<="9"},e.stringHashCode=function(e){var t=0;if(0===e.length)return t;for(var i=e.length,n=0;n<i;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},e.endsAt=function(e,t){var i=e.length-1,n=t.length-1,s=i-n;if(s<0)return!1;for(;i>=s;i--,n--)if(e[i]!==t[n])return!1;return!0},e.startsAt=function(e,t){return e.substr(0,t.length)===t},e.stringInLowerCase=function(e){return e.toLowerCase()===e},e.stringInUpperCase=function(e){return e.toUpperCase()===e},e.atLeastOneSymbolInUpperCase=function(t){for(var i=0,n=void 0;n=t[i];i++)if(e.stringInUpperCase(n)&&!e.stringInLowerCase(n))return!0;return!1},e.getSymbolFromEnd=function(e,t){return e[e.length-t]},e.trim=function(t,i){if(void 0===i)return e.trimInternal(t,!0,!0);var n=i.join("");return t.replace(new RegExp("(^["+n+"]*)|(["+n+"]*$)","g"),"")},e.trimStart=function(t,i){if(void 0===i)return e.trimInternal(t,!0,!1);var n=i.join("");return t.replace(new RegExp("^["+n+"]*","g"),"")},e.trimEnd=function(t,i){if(void 0===i)return e.trimInternal(t,!1,!0);var n=i.join("");return t.replace(new RegExp("["+n+"]*$","g"),"")},e.getDecimalSeparator=function(){return 1.1.toLocaleString().substr(1,1)},e.repeat=function(e,t){return new Array(t<=0?0:t+1).join(e)},e.isNullOrEmpty=function(e){return!e||!e.length},e.padLeft=function(t,i,n){return e.repeat(n,Math.max(0,i-t.length))+t},e.trimInternal=function(e,t,i){var n=e.length;if(!n)return e;if(n<764833){var s=e;return t&&(s=s.replace(/^\s+/,"")),i&&(s=s.replace(/\s+$/,"")),s}var r=0;if(i)for(;n>0&&/\s/.test(e[n-1]);)n--;if(t&&n>0)for(;r<n&&/\s/.test(e[r]);)r++;return e.substring(r,n)},e}();t.StringUtils=i}));t(u);var p=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.numberToStringHex=t.numberToStringBin=t.isOdd=t.isEven=t.isNonNullString=t.isString=t.isNumber=t.boolToString=t.boolToInt=t.isDefined=void 0,t.isDefined=function(e){return null!=e},t.boolToInt=function(e){return e?1:0},t.boolToString=function(e){return e?"1":"0"},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isNonNullString=function(e){return!!e},t.isEven=function(e){return e%2!=0},t.isOdd=function(e){return e%2==0},t.numberToStringBin=function(e,t){return void 0===t&&(t=0),u.StringUtils.padLeft(e.toString(2),t,"0")},t.numberToStringHex=function(e,t){return void 0===t&&(t=0),u.StringUtils.padLeft(e.toString(16),t,"0")}}));t(p);var m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},m(e,t)};var g=function(){return g=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},g.apply(this,arguments)};function C(e,t,i,n){var s,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,i,o):s(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o}var f=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]};function v(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,s,r=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(s)throw s.error}}return o}function w(e){return this instanceof w?(this.v=e,this):new w(e)}var y=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};const B=Object.freeze({__proto__:null,__extends:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},get __assign(){return g},__rest:function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i},__decorate:C,__param:function(e,t){return function(i,n){t(i,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))},__generator:function(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},__createBinding:f,__exportStar:function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||f(t,e,i)},__values:v,__read:b,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<i;t++)for(var r=arguments[t],o=0,a=r.length;o<a;o++,s++)n[s]=r[o];return n},__spreadArray:function(e,t,i){if(i||2===arguments.length)for(var n,s=0,r=t.length;s<r;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},__await:w,__asyncGenerator:function(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(e,t||[]),r=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){s[e]&&(n[e]=function(t){return new Promise((function(i,n){r.push([e,t,i,n])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof w?Promise.resolve(e.value.v).then(l,A):d(r[0][2],e)}(s[e](t))}catch(e){d(r[0][3],e)}}function l(e){a("next",e)}function A(e){a("throw",e)}function d(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}},__asyncDelegator:function(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(i=!i)?{value:w(e[n](t)),done:"return"===n}:s?s(t):t}:s}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,s,(t=e[i](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&f(t,e,i);return y(t,e),t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet:function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i}}),E=i(B);var I=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedMinMax=t.ExtendedMax=t.ExtendedMin=t.MinMaxNumber=t.MinMax=void 0;var i=function(e,t){this.minElement=e,this.maxElement=t};t.MinMax=i;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E.__extends(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.maxElement-this.minElement},enumerable:!1,configurable:!0}),t}(i);t.MinMaxNumber=n,t.ExtendedMin=function(e,t){this.minElement=e,this.minValue=t},t.ExtendedMax=function(e,t){this.maxElement=e,this.maxValue=t};var s=function(e){function t(t,i,n,s){var r=e.call(this,t,n)||this;return r.minValue=i,r.maxValue=s,r}return E.__extends(t,e),t}(i);t.ExtendedMinMax=s}));t(I);var S=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Equals=t.Comparers=void 0;var i=function(){function e(){}return e.number=function(e,t){return e-t},e.string=function(e,t){return e===t?0:e>t?1:-1},e.stringIgnoreCase=function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:e>t?1:-1},e}();t.Comparers=i;var n=function(){function e(){}return e.simpleType=function(e,t){return e===t},e.object=function(e,t){return e&&t&&(e===t||e.equals(t))},e}();t.Equals=n}));t(S);var x=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ListUtils=void 0;var i=function(){function e(){}return e.remove=function(e,t){var i=e.indexOf(t,0);i>=0&&e.splice(i,1)},e.removeBy=function(e,t){for(var i=e.length,n=0;n<i;n++)if(t(e[n],n))return e.splice(n,1)[0];return null},e.shallowCopy=function(e){return e.slice()},e.deepCopy=function(t){return e.map(t,(function(e){return e.clone()}))},e.initByValue=function(e,t){for(var i=[];e>0;e--)i.push(t);return i},e.initByCallback=function(e,t){for(var i=[],n=0;n<e;n++)i.push(t(n));return i},e.forEachOnInterval=function(e,t){for(var i=e.end,n=e.start;n<i;n++)t(n)},e.reverseForEachOnInterval=function(e,t){for(var i=e.start,n=e.end-1;n>=i;n--)t(n)},e.reducedMap=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=[],r=i;r<n;r++){var o=t(e[r],r);null!==o&&s.push(o)}return s},e.filter=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=[],r=i;r<n;r++){var o=e[r];t(o,r)&&s.push(o)}return s},e.map=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=[],r=i;r<n;r++)s.push(t(e[r],r));return s},e.indexBy=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)if(t(e[s],s))return s;return-1},e.reverseIndexBy=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)if(t(e[s],s))return s;return-1},e.elementBy=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.indexBy(t,i,n,s);return r<0?null:t[r]},e.reverseElementBy=function(t,i,n,s){void 0===n&&(n=t.length-1),void 0===s&&(s=0);var r=e.reverseIndexBy(t,i,n,s);return r<0?null:t[r]},e.last=function(e){return e[e.length-1]},e.setLast=function(e,t){return e[e.length-1]=t},e.incLast=function(e){return++e[e.length-1]},e.decLast=function(e){return--e[e.length-1]},e.equals=function(t,i){return t.length===i.length&&e.allOf2(t,i,(function(e,t){return e.equals(t)}))},e.equalsByReference=function(e,t){var i=e.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0},e.unique=function(t,i,n,s){void 0===n&&(n=i),void 0===s&&(s=function(){});var r=t.length;if(0===r)return[];var o=(t=t.sort(i))[0],a=e.reducedMap(t,(function(e){return 0!==n(o,e)?(o=e,e):(s(e),null)}),1,r);return a.unshift(t[0]),a},e.uniqueNumber=function(e){e=e.sort(S.Comparers.number);for(var t=Number.NaN,i=e.length-1;i>=0;i--)t===e[i]?e.splice(i,1):t=e[i];return e},e.forEach=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)t(e[s],s)},e.forEach2=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=n;r<s;r++)i(e[r],t[r],r)},e.reverseForEach=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)t(e[s],s)},e.reverseIndexOf=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)if(e[s]===t)return s;return-1},e.accumulate=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=t,o=n;o<s;o++)r=i(r,e[o],o);return r},e.accumulateNumber=function(e,t,i,n,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=i,o=n;o<s;o++)r+=t(e[o],o,r);return r},e.anyOf=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)if(t(e[s],s))return!0;return!1},e.unsafeAnyOf=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++){var r=t(e[s],s);if(r)return r}return null},e.reverseAnyOf=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--)if(t(e[s],s))return!0;return!1},e.unsafeReverseAnyOf=function(e,t,i,n){void 0===i&&(i=e.length-1),void 0===n&&(n=0);for(var s=i;s>=n;s--){var r=t(e[s],s);if(r)return r}return null},e.anyOf2=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=n;r<s;r++)if(i(e[r],t[r],r))return!0;return!1},e.allOf=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=e.length);for(var s=i;s<n;s++)if(!t(e[s],s))return!1;return!0},e.allOf2=function(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=e.length);for(var r=n;r<s;r++)if(!i(e[r],t[r],r))return!1;return!0},e.allOfOnInterval=function(e,t){for(var i=e.end,n=e.start;n<i;n++)if(!t(n))return!1;return!0},e.addListOnTail=function(e,t){for(var i=0,n=void 0;n=t[i];i++)e.push(n);return e},e.joinLists=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return e.accumulate(i,[],(function(i,n){return e.addListOnTail(i,t(n)),i}))},e.push=function(e,t){return e.push(t),e},e.countIf=function(t,i){return e.accumulateNumber(t,(function(e,t){return i(e,t)?1:0}))},e.clear=function(e){e.splice(0)},e.merge=function(e,t,i,n,s,r){if(void 0===s&&(s=0),void 0===r&&(r=e.length),e=e.slice(s,r),r-s<2)return e;for(var o=(e=e.sort(t))[s],a=[o],l=s+1;l<r;l++){var A=e[l];i(o,A)?n(o,A):a.push(o=A)}return a},e.min=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.minExtended(t,i,n,s);return r?r.minElement:null},e.max=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.maxExtended(t,i,n,s);return r?r.maxElement:null},e.minMax=function(t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=t.length);var r=e.minMaxExtended(t,i,n,s);return r?new I.MinMax(r.minElement,r.maxElement):null},e.minExtended=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=t(s),o=i+1;o<n;o++){var a=e[o],l=t(a);l<r&&(r=l,s=a)}return new I.ExtendedMin(s,r)},e.maxExtended=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=t(s),o=i+1;o<n;o++){var a=e[o],l=t(a);l>r&&(r=l,s=a)}return new I.ExtendedMax(s,r)},e.minMaxExtended=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=s,o=t(s),a=o,l=i+1;l<n;l++){var A=e[l],d=t(A);d<o?(o=d,s=A):d>a&&(a=d,r=A)}return new I.ExtendedMinMax(s,o,r,a)},e.minByCmp=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=i+1;r<n;r++){var o=e[r];t(o,s)<0&&(s=o)}return s},e.maxByCmp=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=i+1;r<n;r++){var o=e[r];t(o,s)>0&&(s=o)}return s},e.minMaxByCmp=function(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),0===e.length)return null;for(var s=e[i],r=s,o=i+1;o<n;o++){var a=e[o],l=t(a,s);l>0?r=a:l<0&&(s=a)}return new I.MinMax(s,r)},e}();t.ListUtils=i}));t(x);var D=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0;var i=function(){function e(){}return e.round=function(t,i){void 0===i&&(i=0);var n=e.powFactor[i];return Math.round(t*n)/n},e.numberCloseTo=function(e,t,i){return void 0===i&&(i=1e-5),Math.abs(e-t)<i},e.restrictValue=function(e,t,i){return i<t&&(i=t),e>i?i:e<t?t:e},e.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.generateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.powFactor=x.ListUtils.initByCallback(20,(function(e){return Math.pow(10,e)})),e.somePrimes=[1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003],e}();t.MathUtils=i}));t(D);var F,T=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=void 0;var i=function(){function e(){}return e.clearInnerHtml=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},e.setStylePosition=function(e,t){e.left=D.MathUtils.round(t.x,3)+"px",e.top=D.MathUtils.round(t.y,3)+"px"},e.setStyleSize=function(e,t){e.width=D.MathUtils.round(t.width,3)+"px",e.height=D.MathUtils.round(t.height,3)+"px"},e.setStyleSizeAndPosition=function(t,i){e.setStylePosition(t,i),e.setStyleSize(t,i)},e.hideNode=function(e){if(e){var t=e.parentNode;t&&t.removeChild(e)}},e.isHTMLElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},e.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},e.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},e.isHTMLTableRowElement=function(e){return"TR"===e.tagName},e.isItParent=function(e,t){if(!e||!t)return!1;for(;t;){if(t===e)return!0;if("BODY"===t.tagName)return!1;t=t.parentNode}return!1},e.getParentByTagName=function(e,t){for(t=t.toUpperCase();e;){if("BODY"===e.tagName)return null;if(e.tagName===t)return e;e=e.parentNode}return null},e.getDocumentScrollTop=function(){var t=h.Browser.IE&&"hidden"===e.getCurrentStyle(document.body).overflow&&document.body.scrollTop>0;return h.Browser.WebKitFamily||h.Browser.Edge||t?h.Browser.MacOSMobilePlatform?window.pageYOffset:h.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop},e.getDocumentScrollLeft=function(){var t=h.Browser.IE&&"hidden"===e.getCurrentStyle(document.body).overflow&&document.body.scrollLeft>0;return h.Browser.Edge||t?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:h.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft},e.getCurrentStyle=function(e){if(e.currentStyle)return e.currentStyle;if(document.defaultView&&document.defaultView.getComputedStyle){var t=document.defaultView.getComputedStyle(e,null);if(!t&&h.Browser.Firefox&&window.frameElement){for(var i=[],n=window.frameElement;!(t=document.defaultView.getComputedStyle(e,null));)i.push([n,n.style.display]),n.style.setProperty("display","block","important"),n="BODY"===n.tagName?n.ownerDocument.defaultView.frameElement:n.parentNode;t=function(e){if("object"!=typeof e||!p.isDefined(e))return e;var t={};for(var i in e)t[i]=e[i];return t}(t);for(var s=void 0,r=0;s=i[r];r++)s[0].style.display=s[1]}return t}return window.getComputedStyle(e,null)},e.setFocus=function(e){function t(){try{e.focus(),h.Browser.IE&&document.activeElement!==e&&e.focus()}catch(e){}}h.Browser.MacOSMobilePlatform?t():setTimeout((function(){t()}),100)},e.hasClassName=function(e,t){try{var i=t.split(" "),n=e.classList;if(n){for(var s=i.length-1;s>=0;s--)if(!n.contains(i[s]))return!1}else{var r=e.getAttribute&&e.getAttribute("class");if(!r)return!1;var o=r.split(" ");for(s=i.length-1;s>=0;s--)if(o.indexOf(i[s])<0)return!1}return!0}catch(e){return!1}},e.addClassName=function(t,i){if(!e.hasClassName(t,i)){var n=t.getAttribute&&t.getAttribute("class");t.setAttribute("class",""===n?i:n+" "+i)}},e.removeClassName=function(e,t){var i=" "+(e.getAttribute&&e.getAttribute("class"))+" ",n=i.replace(" "+t+" "," ");i.length!==n.length&&e.setAttribute("class",u.StringUtils.trim(n))},e.toggleClassName=function(t,i,n){void 0===n?e.hasClassName(t,i)?e.removeClassName(t,i):e.addClassName(t,i):n?e.addClassName(t,i):e.removeClassName(t,i)},e.pxToInt=function(e){return n(e,parseInt)},e.pxToFloat=function(e){return n(e,parseFloat)},e.getAbsolutePositionY=function(t){function i(t){return Math.round(t.getBoundingClientRect().top+e.getDocumentScrollTop())}return t?h.Browser.IE?function(t){return h.Browser.IE&&null===t.parentNode?0:t.getBoundingClientRect().top+e.getDocumentScrollTop()}(t):h.Browser.Firefox&&h.Browser.Version>=3?i(t):h.Browser.Opera?function(t){var i=!0;t&&e.isHTMLTableRowElement(t)&&t.cells.length>0&&(t=t.cells[0]);for(var n=s(t,!1);null!=t;)n+=t.offsetTop,i||(n-=t.scrollTop),t=t.offsetParent,i=!1;return n+=document.body.scrollTop}(t):h.Browser.NetscapeFamily&&(!h.Browser.Firefox||h.Browser.Version<3)?function(t){for(var i=s(t,!1),n=!0;null!=t;){if(i+=t.offsetTop,n||null==t.offsetParent||(i-=t.scrollTop),!n&&h.Browser.Firefox){var r=e.getCurrentStyle(t);"DIV"===t.tagName&&"visible"!==r.overflow&&(i+=e.pxToInt(r.borderTopWidth))}n=!1,t=t.offsetParent}return i}(t):h.Browser.WebKitFamily||h.Browser.Edge?i(t):function(e){for(var t=0,i=!0;null!=e;)t+=e.offsetTop,i||null==e.offsetParent||(t-=e.scrollTop),i=!1,e=e.offsetParent;return t}(t):0},e.getAbsolutePositionX=function(t){function i(t){return Math.round(t.getBoundingClientRect().left+e.getDocumentScrollLeft())}return t?h.Browser.IE?function(t){return h.Browser.IE&&null===t.parentNode?0:t.getBoundingClientRect().left+e.getDocumentScrollLeft()}(t):h.Browser.Firefox&&h.Browser.Version>=3?i(t):h.Browser.Opera&&h.Browser.Version<=12?function(e){for(var t=!0,i=s(e,!0);null!=e;)i+=e.offsetLeft,t||(i-=e.scrollLeft),e=e.offsetParent,t=!1;return i+=document.body.scrollLeft}(t):h.Browser.NetscapeFamily&&(!h.Browser.Firefox||h.Browser.Version<3)?function(t){for(var i=s(t,!0),n=!0;null!=t;){if(i+=t.offsetLeft,n||null==t.offsetParent||(i-=t.scrollLeft),!n&&h.Browser.Firefox){var r=e.getCurrentStyle(t);"DIV"===t.tagName&&"visible"!==r.overflow&&(i+=e.pxToInt(r.borderLeftWidth))}n=!1,t=t.offsetParent}return i}(t):h.Browser.WebKitFamily||h.Browser.Edge?i(t):function(e){for(var t=0,i=!0;null!=e;)t+=e.offsetLeft,i||null==e.offsetParent||(t-=e.scrollLeft),i=!1,e=e.offsetParent;return t}(t):0},e.isInteractiveControl=function(e){return["A","INPUT","SELECT","OPTION","TEXTAREA","BUTTON","IFRAME"].indexOf(e.tagName)>-1},e.getClearClientHeight=function(t){return t.offsetHeight-(e.getTopBottomPaddings(t)+e.getVerticalBordersWidth(t))},e.getTopBottomPaddings=function(t,i){var n=i||e.getCurrentStyle(t);return e.pxToInt(n.paddingTop)+e.pxToInt(n.paddingBottom)},e.getVerticalBordersWidth=function(t,i){p.isDefined(i)||(i=h.Browser.IE&&9!==h.Browser.MajorVersion&&window.getComputedStyle?window.getComputedStyle(t):e.getCurrentStyle(t));var n=0;return"none"!==i.borderTopStyle&&(n+=e.pxToFloat(i.borderTopWidth)),"none"!==i.borderBottomStyle&&(n+=e.pxToFloat(i.borderBottomWidth)),n},e.getNodes=function(e,t){for(var i=e.all||e.getElementsByTagName("*"),n=[],s=0;s<i.length;s++){var r=i[s];t(r)&&n.push(r)}return n},e.getChildNodes=function(e,t){for(var i=e.childNodes,n=[],s=0;s<i.length;s++){var r=i[s];t(r)&&n.push(r)}return n},e.getNodesByClassName=function(t,i){if(t.querySelectorAll){var n=t.querySelectorAll("."+i),s=[];return n.forEach((function(e){return s.push(e)})),s}return e.getNodes(t,(function(t){return e.hasClassName(t,i)}))},e.getChildNodesByClassName=function(t,i){return t.querySelectorAll?function(e,t){for(var i=[],n=0;n<e.length;n++){var s=e[n];t(s)&&i.push(s)}return i}(t.querySelectorAll("."+i),(function(e){return e.parentNode===t})):e.getChildNodes(t,(function(t){return!!e.isElementNode(t)&&(p.isNonNullString(t.className)&&e.hasClassName(t,t.className))}))},e.getVerticalScrollBarWidth=function(){if(void 0===e.verticalScrollBarWidth){var t=document.createElement("DIV");t.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(t);var i=document.createElement("P");t.appendChild(i),i.style.cssText="width: 100%; height: 200px;";var n=i.offsetWidth;t.style.overflow="scroll";var s=i.offsetWidth;n===s&&(s=t.clientWidth),e.verticalScrollBarWidth=n-s,document.body.removeChild(t)}return e.verticalScrollBarWidth},e.getHorizontalBordersWidth=function(t,i){p.isDefined(i)||(i=h.Browser.IE&&window.getComputedStyle?window.getComputedStyle(t):e.getCurrentStyle(t));var n=0;return"none"!==i.borderLeftStyle&&(n+=e.pxToFloat(i.borderLeftWidth)),"none"!==i.borderRightStyle&&(n+=e.pxToFloat(i.borderRightWidth)),n},e.getFontFamiliesFromCssString=function(e){return e.split(",").map((function(e){return u.StringUtils.trim(e.replace(/'|"/gi,""))}))},e.getInnerText=function(t){if(h.Browser.Safari&&h.Browser.MajorVersion<=5){null===e.html2PlainTextFilter&&((e.html2PlainTextFilter=document.createElement("DIV")).style.width="0",e.html2PlainTextFilter.style.height="0",e.html2PlainTextFilter.style.overflow="visible",e.html2PlainTextFilter.style.display="none",document.body.appendChild(e.html2PlainTextFilter));var i=e.html2PlainTextFilter;i.innerHTML=t.innerHTML,i.style.display="";var n=i.innerText;return i.style.display="none",n}return h.Browser.NetscapeFamily||h.Browser.WebKitFamily||h.Browser.IE&&h.Browser.Version>=9||h.Browser.Edge?t.textContent:t.innerText},e.html2PlainTextFilter=null,e.verticalScrollBarWidth=void 0,e}();function n(e,t){var i=0;if(p.isDefined(e)&&""!==e)try{var n=e.indexOf("px");n>-1&&(i=t(e.substr(0,n)))}catch(e){}return i}function s(e,t){for(var n=0,s=!0;null!=e&&"BODY"!==e.tagName;){var r=i.getCurrentStyle(e);if("absolute"===r.position)break;s||"DIV"!==e.tagName||""!==r.position&&"static"!==r.position||(n-=t?e.scrollLeft:e.scrollTop),e=e.parentNode,s=!1}return n}t.DomUtils=i}));t(T);class H{static markHandled(e,t=!0){e.cancelable&&e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}static stopPropagation(e){e.stopPropagation(),e.stopImmediatePropagation()}static getOriginalSource(e){return e.composedPath()[0]}static containsInComposedPath(e,t){const i=e.composedPath();for(const e in i)if(t(i[e]))return!0;return!1}static getEventSource(e){var t;return null!==(t=e.srcElement)&&void 0!==t?t:e.target}}class U{}U.visible="visible",U.hidden="hidden",U.collapse="collapse";class P{}P.block="block",P.inline="inline",P.inlineBlock="inline-block",P.inlineTable="inline-table",P.listItem="list-item",P.none="none",P.runIn="run-in",P.table="table",P.tableCaption="table-caption",P.tableCell="table-cell",P.tableColumnGroup="table-column-group",P.tableColumn="table-column",P.tableFooterGroup="table-footer-group",P.tableHeaderGroup="table-header-group",P.tableRow="table-row",P.tableRowGroup="table-row-group",P.flex="flex";class Q{}Q.input="INPUT",Q.textarea="TEXTAREA",Q.video="VIDEO",Q.audio="AUDIO",Q.details="DETAILS",Q.textArea="TEXTAREA",Q.table="table",Q.tableCell="td",Q.tableHeaderCell="th",Q.mark="mark";class N{}F=N,N.aria="aria",N.ariaExpanded=`${F.aria}-expanded`,N.ariaLevel=`${F.aria}-level`,N.ariaChecked=`${F.aria}-checked`,N.ariaSelected=`${F.aria}-selected`,N.ariaLabel=`${F.aria}-label`,N.ariaValuenow=`${F.aria}-valuenow`,N.ariaValuetext=`${F.aria}-valuetext`;class R{}R.hidden="hidden";class L{}L.textTrimmed="text-trimmed",L.title="title";class M{}M.ellipsis="ellipsis";const k="a[href], input:not([disabled]), button:not([disabled]), textarea:not([disabled]), select:not([disabled]), area[href], iframe, object, embed, [tabindex]:not([tabindex='-1'])";class K{static containsInComposedPath(e,t){const i=e.composedPath();for(const e in i)if(i[e]===t)return!0;return!1}}const O=function(e,t,i=null){return!(!e||!e.matches(t))&&(getComputedStyle(e).textOverflow===M.ellipsis&&(!!_(e,i)&&!(!e.hasAttribute(L.textTrimmed)&&e.getAttribute(L.title))))},_=function(e,t=null){for(let i=0;i<e.children.length;i++)if(!(getComputedStyle(e.children[i]).display===P.inline||t&&e.children[i].matches(t)))return!1;return!0};class V{static isHoverableDevice(){return window.matchMedia("(hover: hover) and (pointer: fine)").matches}}class z{constructor(e,t,i,n=!1){this.isMobileDevice=!1,this.hasAccurateInput=!1,this.isMac=!1,this.isTouchDevice=!1,this.clientMinutesOffset=-(new Date).getTimezoneOffset(),this.isMobileDevice=e,this.hasAccurateInput=t,this.isMac=i,this.isTouchDevice=n}}class W{constructor(e,t){this.useUAData=null,this.useNativeDetection=null,this.useUAData=e,this.useNativeDetection=t}getInfo(){return new z(this.isMobile(),window.matchMedia("(pointer:fine)").matches,/Mac/.test(navigator.userAgent),window.navigator.maxTouchPoints>0)}isMobile(){const e=window.navigator.userAgentData;if(this.useUAData&&e)return!!e.mobile;const t=this.isMobileByUserAgent(window.navigator.userAgent);if(this.useNativeDetection){const e=window.navigator.maxTouchPoints>0&&window.matchMedia("(pointer:coarse)").matches;return t||e}return t}isMobileByUserAgent(e){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)}}function $(e=!0,t=!0){return new W(e,t).getInfo()}const G={DeviceInfo:z,DeviceInfoService:W,DeviceHelper:V,getDeviceInfo:$};class q{constructor(e){this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this.boundOnPointerMoveHandler=this.onPointerMove.bind(this),this.boundOnPointerUpHandler=this.onPointerUp.bind(this),this.boundOnPointerCancelHandler=this.onPointerCancel.bind(this),this.boundOnDraggingKeyDownHandler=this.onDraggingKeyDown.bind(this),this.boundOnDraggingWindowBlurHandler=this.onDraggingWindowBlur.bind(this),this.boundOnDraggingContextMenuHandler=this.onDraggingContextMenu.bind(this),this.boundOnGotPointerCaptureHandler=this.onGotPointerCapture.bind(this),this.boundOnPointerClickHandler=this.onPointerClick.bind(this),this.boundOnPointerDblClickHandler=this.onPointerDblClick.bind(this),this.element=e,this.state=o.Stopped;const t=e.hoverTitleElementsSelector,i=e.bypassNonInlineHoverTitleElementChildSelector;t&&V.isHoverableDevice()&&(this.boundOnPointerOverHandler=e=>function(e,t,i=null){const n=e.target;O(n,t,i)&&(n.offsetWidth<n.scrollWidth?(n.setAttribute(L.title,n.innerText),n.setAttribute(L.textTrimmed,"")):(n.removeAttribute(L.title),n.removeAttribute(L.textTrimmed)))}(e,t,i))}initialize(){this.addPointerEventsSubscriptions()}dispose(){this.removePointerEventsSubscriptions()}reinitialize(e){this.removePointerEventsSubscriptions(),this.element=e,this.addPointerEventsSubscriptions()}static preventDefaultBrowserBehaviour(e){e.cancelable&&e.preventDefault()}onGotPointerCapture(e){if(!this.shouldProcessPointerEvent(e))return;if(!this.pointerDownContext||!this.pointerDownContext.isLongTap&&this.state!==o.WaitingForDragging)return;const t=e.target;t&&t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId)}get handlePointerEventsMode(){return this.element.handlePointerEventsMode}get handlePointerEventsTarget(){var e;return null===(e=this.element)||void 0===e?void 0:e.handlePointerEventsTarget}handlePointerEventsDelay(e){const t=this.element.handlePointerEventsDelay(e);return t!==s.Default?t:e===r.Dragging?s.Dragging:s.None}shouldProcessPointerEvent(e){return H.containsInComposedPath(e,(e=>e===this.handlePointerEventsTarget))&&this.element.shouldProcessPointerEvent(e)}addPointerEventsSubscriptions(){const e=this.handlePointerEventsTarget;if(e){if(this.element!==e&&this.element.contains(e))throw new Error("Specify the handlePointerEventsTarget property as web component or it parent.");e.addEventListener("click",this.boundOnPointerClickHandler),e.addEventListener("dblclick",this.boundOnPointerDblClickHandler),e.addEventListener("pointerdown",this.boundOnPointerDownHandler),e.addEventListener("gotpointercapture",this.boundOnGotPointerCaptureHandler),this.boundOnPointerOverHandler&&e.addEventListener("pointerover",this.boundOnPointerOverHandler)}}removePointerEventsSubscriptions(){const e=this.handlePointerEventsTarget;e&&(e.removeEventListener("click",this.boundOnPointerClickHandler),e.removeEventListener("dblclick",this.boundOnPointerDblClickHandler),e.removeEventListener("pointerdown",this.boundOnPointerDownHandler),e.removeEventListener("gotpointercapture",this.boundOnGotPointerCaptureHandler),this.boundOnPointerOverHandler&&e.removeEventListener("pointerover",this.boundOnPointerOverHandler))}onPointerDown(e){var t;if(q.preventClickEvent=!1,!this.shouldProcessPointerEvent(e))return;const i="touch"===e.pointerType;i&&this.state===o.Dragging||(this.pointerDownContext={source:e,isTouch:i,isLongTap:!1},0!=(this.handlePointerEventsMode&r.Dragging)?0===e.button&&(this.state=o.WaitingForDragging,i&&(this.touchDeviceInteractionTimer=setTimeout(this.onTouchDeviceInteractionTimerTimeout.bind(this),this.handlePointerEventsDelay(r.Dragging))),document.addEventListener("pointermove",this.boundOnPointerMoveHandler),document.addEventListener("pointerup",this.boundOnPointerUpHandler),document.addEventListener("pointercancel",this.boundOnPointerCancelHandler),document.addEventListener("keydown",this.boundOnDraggingKeyDownHandler),document.addEventListener("contextmenu",this.boundOnDraggingContextMenuHandler),window.addEventListener("blur",this.boundOnDraggingWindowBlurHandler),T.DomUtils.addClassName(document.body,"dx-prevent-selection")):e.shiftKey&&(null===(t=null===document||void 0===document?void 0:document.getSelection())||void 0===t||t.removeAllRanges()))}onPointerMove(e){var t;if(this.state===o.Stopped)return;if(0===e.buttons)return this.state===o.Dragging&&this.stopPointerDrag(e,!1),this.stopPointerInteraction(),void this.element.releasePointerCapture(e.pointerId);this.state===o.WaitingForDragging&&this.isDistanceExceedLimit(e)&&((null===(t=this.pointerDownContext)||void 0===t?void 0:t.isTouch)?this.handlePointerEventsDelay(r.Dragging)>0&&this.stopPointerInteraction():this.tryStartPointerInteraction())}stopPointerDrag(e,t){if(this.pointerDownContext){const t=new l({source:e,isTouch:this.pointerDownContext.isTouch,isLongTap:this.pointerDownContext.isLongTap});this.element.dispatchEvent(t),this.pointerDownContext.isTouch||(q.preventClickEvent=!0)}}onPointerCancel(e){if(this.state===o.Stopped)return;this.stopPointerInteraction();const t=new A;this.element.dispatchEvent(t)}onDraggingKeyDown(e){if(this.state!==o.Stopped&&"Escape"===e.key){this.stopPointerInteraction();const e=new A;this.element.dispatchEvent(e)}}onDraggingWindowBlur(e){if(this.state===o.Stopped)return;this.stopPointerInteraction();const t=new A;this.element.dispatchEvent(t)}onDraggingContextMenu(e){this.state!==o.Stopped&&(e.preventDefault(),e.stopPropagation())}onPointerUp(e){this.state===o.Dragging&&this.stopPointerDrag(e,!0),this.stopPointerInteraction(),this.element.releasePointerCapture(e.pointerId)}onPointerClick(e){0!=(this.handlePointerEventsMode&r.Click)&&this.shouldProcessPointerEvent(e)&&(q.preventClickEvent||0!==e.button||this.isDistanceExceedLimit(e)?e.stopPropagation():(this.raiseDxPointerEvent(e,new d({source:e,isTouch:!!this.pointerDownContext&&this.pointerDownContext.isTouch}),d.eventName),delete this.pointerDownContext))}onPointerDblClick(e){0!=(this.handlePointerEventsMode&r.DblClick)&&this.shouldProcessPointerEvent(e)&&(0!==e.button||this.isDistanceExceedLimit(e)?e.stopPropagation():this.raiseDxPointerEvent(e,new c({source:e,isTouch:!!this.pointerDownContext&&this.pointerDownContext.isTouch}),c.eventName))}raiseDxPointerEvent(e,t,i){e[i]||(this.element.dispatchEvent(t),e[i]=!0)}tryStartPointerInteraction(){q.pointerInteractionElement?this.state=o.Stopped:this.startPointerInteraction()}startPointerInteraction(){this.state=o.Dragging,q.pointerInteractionElement=this.element,document.addEventListener("touchmove",q.preventDefaultBrowserBehaviour,{passive:!1}),this.raisePointerDragStartEvent()}stopPointerInteraction(){this.clearTouchDeviceInteractionTimer(),this.state===o.Dragging&&(delete q.pointerInteractionElement,this.state=o.Stopped),document.removeEventListener("touchmove",q.preventDefaultBrowserBehaviour),document.removeEventListener("pointermove",this.boundOnPointerMoveHandler),document.removeEventListener("pointerup",this.boundOnPointerUpHandler),document.removeEventListener("pointercancel",this.boundOnPointerCancelHandler),document.removeEventListener("keydown",this.boundOnDraggingKeyDownHandler),document.removeEventListener("contextmenu",this.boundOnDraggingContextMenuHandler),window.removeEventListener("blur",this.boundOnDraggingWindowBlurHandler),T.DomUtils.removeClassName(document.body,"dx-prevent-selection"),delete this.pointerDownContext}clearTouchDeviceInteractionTimer(){this.touchDeviceInteractionTimer&&(clearTimeout(this.touchDeviceInteractionTimer),delete this.touchDeviceInteractionTimer)}onTouchDeviceInteractionTimerTimeout(){this.state===o.WaitingForDragging&&this.pointerDownContext&&this.pointerDownContext.isTouch&&(this.pointerDownContext.isLongTap=!0,this.tryStartPointerInteraction(),this.clearTouchDeviceInteractionTimer())}isDistanceExceedLimit(e){return!!this.pointerDownContext&&(Math.abs(this.pointerDownContext.source.clientX-e.clientX)>4||Math.abs(this.pointerDownContext.source.clientY-e.clientY)>4)}raisePointerDragStartEvent(){if(!this.pointerDownContext)return;const e=new a({source:this.pointerDownContext.source,isTouch:this.pointerDownContext.isTouch,isLongTap:this.pointerDownContext.isLongTap});this.element.dispatchEvent(e)}}q.preventClickEvent=!1;const X="undefined"!=typeof HTMLElement&&"undefined"!=typeof customElements?HTMLElement:class{},Y="dx-license-trigger",J=Y,j="dx-license",Z={buyNow:"buy-now",licensingDoc:"licensing-doc",version:"version",subscriptions:"subscriptions"},ee={opacity:"1",visibility:"visible","clip-path":"none",filter:"none"},te={...ee,width:"100%",height:"auto","line-height":"normal",display:"block","z-index":"1500",position:"static",transform:"translate(0px, 0px)","background-color":"#FF7200",border:"none",margin:"auto","box-sizing":"border-box","text-align":"center"},ie={...te,display:"flex","align-items":"center","flex-direction":"row",position:"relative",top:"0px",left:"0px",padding:"0.5rem"},ne={width:"1rem",cursor:"pointer",height:"1rem"},se={...ee,display:"inline",position:"static",padding:"0px",margin:"0px",color:"white","font-family":'"Segoe UI","Open Sans Condensed",-apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,Cantarell,Ubuntu,roboto,noto,arial,sans-serif',"font-size":"0.875rem","font-wight":"600"};function re(e,t){const i=t?{...e,...t}:e;return Object.keys(i).reduce(((e,t)=>`${e}${[t,`${i[t]} !important;`].join(": ")}`),"")}class oe extends X{_getSubscriptionsArray(e){var t;return null!==(t=null==e?void 0:e.split(",").map((e=>e.trim())))&&void 0!==t?t:[]}updateSubscriptions(e){if(!this._subscriptionsSpan||!e)return;const t=this._getSubscriptionsArray(this.getAttribute(Z.subscriptions));if(!t.length)return void this._updateSubscriptionsText(e);const i=this._getSubscriptionsArray(e),n=[];for(let e=0;e<i.length;e++)t.some((t=>t===i[e]))&&n.push(i[e]);this._updateSubscriptionsText(0!==n.length?n.join(", "):[...t,...i].join(", "))}constructor(){var e,t,i,n,s;super(),this._observer=null,this._inReassign=!1,this._spanStyles=re(se,null===(e=oe.customStyles)||void 0===e?void 0:e.textStyles),this._linkStyles=re(se,null===(t=oe.customStyles)||void 0===t?void 0:t.linkStyles),this._containerStyles=re(ie,null===(i=oe.customStyles)||void 0===i?void 0:i.containerStyles),this._contentStyles=re(te,null===(n=oe.customStyles)||void 0===n?void 0:n.contentStyles),this._buttonStyles=re(ne,null===(s=oe.customStyles)||void 0===s?void 0:s.contentStyles)}_createSpan(e){const t=document.createElement("span");return t.innerText=e,t.style.cssText=this._spanStyles,t}_updateSubscriptionsText(e){e&&(this.setAttribute(Z.subscriptions,e),this._subscriptionsSpan.innerText=` Included in Subscriptions: ${e}`)}_createSubsctionSpan(){return this._subscriptionsSpan=this._createSpan(""),this._updateSubscriptionsText(this.getAttribute(Z.subscriptions)),this._subscriptionsSpan}_createLink(e,t){const i=document.createElement("a");return i.innerText=e,i.style.cssText=this._linkStyles,i.href=t,i.target="_blank",i}_createButton(){const e=document.createElement("div");e.style.cssText=this._buttonStyles;const t=document.createElementNS("http://www.w3.org/2000/svg","polygon"),i=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("points","13.4 12.7 8.7 8 13.4 3.4 12.6 2.6 8 7.3 3.4 2.6 2.6 3.4 7.3 8 2.6 12.6 3.4 13.4 8 8.7 12.7 13.4 13.4 12.7"),t.style.cssText=re({fill:"#fff",opacity:".5","stroke-width":"0px"}),i.setAttribute("id","Layer_1"),i.setAttribute("data-name","Layer 1"),i.setAttribute("version","1.1"),i.setAttribute("viewBox","0 0 16 16"),i.style.cssText=re({"vertical-align":"baseline"}),i.appendChild(t),e.appendChild(i),e.onclick=()=>{oe.closed=!0,this.style.cssText=re({display:"none"})},e}_createContentContainer(){const e=document.createElement("div");return e.style.cssText=this._contentStyles,e.append(this._createSpan("For evaluation purposes only. Redistribution prohibited. Please "),this._createLink("register",this.getAttribute(Z.licensingDoc)),this._createSpan(" an existing license or "),this._createLink("purchase a new license",this.getAttribute(Z.buyNow)),this._createSpan(` to continue use of DevExpress product libraries (v${this.getAttribute(Z.version)}).`),this._createSubsctionSpan()),e}_reassignComponent(){this.innerHTML="",this.style.cssText=this._containerStyles,this.append(this._createContentContainer(),this._createButton())}connectedCallback(){this._reassignComponent(),this._observer||(this._observer=new MutationObserver((()=>{var e;oe.closed?null===(e=this._observer)||void 0===e||e.disconnect():this._inReassign?this._inReassign=!1:(this._inReassign=!0,this._reassignComponent())})),this._observer.observe(this,{childList:!0,attributes:!0,subtree:!0}))}disconnectedCallback(){oe.closed||Promise.resolve().then((()=>{if(void 0===document)return;document.getElementsByTagName(j).length||document.body.prepend(this)}))}}oe.customStyles=void 0,oe.closed=!1;class ae extends X{connectedCallback(){this.style.cssText=re({display:"none"});const e=document.getElementsByTagName(j);if(!oe.closed)if(e.length)e[0].updateSubscriptions(this.getAttribute(Z.subscriptions));else{const e=document.createElement(j);Object.values(Z).forEach((t=>{this.hasAttribute(t)&&e.setAttribute(t,this.getAttribute(t))})),e.setAttribute("data-permanent",""),document.body.prepend(e)}}}function le(e){customElements.get(J)||(oe.customStyles=e,customElements.define(j,oe),customElements.define(J,ae))}window.DevExpress=window.DevExpress||{},window.DevExpress.config?window.DevExpress.config(JSON.parse(atob("eyJsaWNlbnNlS2V5IjoiZXdvZ0lDSm1iM0p0WVhRaU9pQXhMQW9nSUNKcGJuUmxjbTVoYkZWellXZGxTV1FpT2lBaVlsazVPRlJPUVZWWlVXMXBibEZLTjBWNFp6TlpUQ0lLZlE9PS5ucG1OMWs2dHNkdHJZaGE2Mi9ISVlUaDA0amhYR1BvVzZLOTQvSHphRDhDOHM0R0xITTlISXNHcHp3OUUxZkZQOXViRFpIMGpOajRPT1JkSFErUlAvcXFsalFCbnhmamlQSFdWWnRDSjdERjkzUS9DbGNwWnplN3NCWEJiTU5LbTlZMDZ4Zz09In0="))):window.DevExpress.config=JSON.parse(atob("eyJsaWNlbnNlS2V5IjoiZXdvZ0lDSm1iM0p0WVhRaU9pQXhMQW9nSUNKcGJuUmxjbTVoYkZWellXZGxTV1FpT2lBaVlsazVPRlJPUVZWWlVXMXBibEZLTjBWNFp6TlpUQ0lLZlE9PS5ucG1OMWs2dHNkdHJZaGE2Mi9ISVlUaDA0amhYR1BvVzZLOTQvSHphRDhDOHM0R0xITTlISXNHcHp3OUUxZkZQOXViRFpIMGpOajRPT1JkSFErUlAvcXFsalFCbnhmamlQSFdWWnRDSjdERjkzUS9DbGNwWnplN3NCWEJiTU5LbTlZMDZ4Zz09In0=")),le();const Ae=document.createElement("template");Ae.innerHTML="<slot />";class de extends HTMLElement{constructor(){super(),this._handlePointerEventsMode=r.None,this._isInitialized=!1,this._isDisconnected=!1,this.pointerEventsHelper=new q(this),this.contentChangedObserver=null,this.prepareComponent()}get isInitialized(){return this._isInitialized}get useShadowDom(){return!0}connectedCallback(){!this.useShadowDom&&this.childElementCount>0&&this.componentContentChanged(),this.useShadowDom&&this._isDisconnected&&this.componentContentChanged(),this.pointerEventsHelper.initialize(),n.setLoaded(this),this._isDisconnected=!1}disconnectedCallback(){n.removeLoaded(this),this.pointerEventsHelper.dispose(),this.disposeComponent(),this._isDisconnected=!0}initializeComponent(){}afterInitialize(){}disposeComponent(){var e;null===(e=this.contentChangedObserver)||void 0===e||e.disconnect()}getContentTemplate(){return Ae}componentContentChanged(){this.initializeComponent(),this._isInitialized=!0,this.afterInitialize()}prepareComponent(){this.useShadowDom?this.prepareShadowDom():(this.contentChangedObserver=new MutationObserver(this.componentContentChanged.bind(this)),this.contentChangedObserver.observe(this,{childList:!0}))}prepareShadowDom(){const e=this.attachShadow({mode:"open"});e.appendChild(this.getContentTemplate().content.cloneNode(!0));e.querySelector("slot").addEventListener("slotchange",this.componentContentChanged.bind(this))}get handlePointerEventsMode(){return this._handlePointerEventsMode}set handlePointerEventsMode(e){this._handlePointerEventsMode=e}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}var ce;class he{}ce=he,he.Prefix="dxbl",he.Focused=he.Prefix+"-focused",he.Disabled=he.Prefix+"-disabled",he.ReadOnly=he.Prefix+"-readonly",he.Active=he.Prefix+"-active",he.Touch=he.Prefix+"-touch",he.GrabbingCursor=he.Prefix+"-grabbing-cursor",he.ResizeCursor=he.Prefix+"-resize-cursor",he.Image=he.Prefix+"-image",he.Text=he.Prefix+"-text",he.Button=he.Prefix+"-btn",he.DisplayNone=he.Prefix+"-display-none",he.Invisible=he.Prefix+"-invisible",he.InvisibleOffScreen=he.Invisible+"-off-screen",he.Visible=he.Prefix+"-visible",he.Loaded=he.Prefix+"-loaded",he.SkeletonBaseClassName=he.Prefix+"-skeleton",he.SkeletonAnimateClassName=ce.SkeletonBaseClassName+"-animate",he.VirtualSpacerPatternClassName=he.Prefix+"-virtual-items-container-pattern",he.Dragging=he.Prefix+"-dragging",he.DropTargetIndicator=he.Prefix+"-drop-target-indicator";class ue{}ue.ClassName=he.Prefix+"-grid",ue.DataTableClassName=ue.ClassName+"-table",ue.DataTableNoScrollClassName=ue.DataTableClassName+"-no-scroll",ue.TopPanelClassName=ue.ClassName+"-top-panel",ue.BottomPanelClassName=ue.ClassName+"-bottom-panel",ue.ToolbarContainerClassName=ue.ClassName+"-toolbar-container",ue.PagerPanelClassName="dxbl-pager-container",ue.GroupPanelContentContainerClassName=ue.ClassName+"-group-panel-container",ue.SearchBoxContainerClassName=ue.ClassName+"-search-box-container",ue.SearchBoxClassName=ue.ClassName+"-search-box",ue.EmptyHeaderCellContentContainerClassName=ue.ClassName+"-empty-header",ue.GroupContentFreeSpaceClassName=ue.ClassName+"-group-panel-free-space",ue.HeaderRowClassName=ue.ClassName+"-header-row",ue.EditRowClassName=ue.ClassName+"-edit-row",ue.FilterRowClassName=ue.ClassName+"-filter-row",ue.GroupRowClassName=ue.ClassName+"-group-row",ue.FooterRowClassName=ue.ClassName+"-footer-row",ue.GroupFooterRowClassName=ue.ClassName+"-group-footer-row",ue.PagerRowClassName=ue.ClassName+"-pager-row",ue.EmptyRowClassName=ue.ClassName+"-empty-row",ue.ArmRowClassName=ue.ClassName+"-arm-row",ue.HeaderElementClassName=ue.ClassName+"-header",ue.HeaderContentClassName=ue.ClassName+"-header-content",ue.AllowDragClassName=ue.ClassName+"-action",ue.DraggableHeaderClassName=ue.ClassName+"-draggable-header",ue.SelectionCellClassName=ue.ClassName+"-selection-cell",ue.CommandCellClassName=ue.ClassName+"-command-cell",ue.FixedCellClassName=ue.ClassName+"-fixed-cell",ue.LastLeftFixedCellClassName=ue.ClassName+"-last-fixed-left-cell",ue.IndentCellClassName=ue.ClassName+"-indent-cell",ue.HeaderIndentCellClassName=ue.ClassName+"-header-indent-cell",ue.GroupFooterIndentCellClassName=ue.ClassName+"-group-footer-indent-cell",ue.ExpandButtonCellClassName=ue.ClassName+"-expand-button-cell",ue.DetailCellClassName=ue.ClassName+"-detail-cell",ue.EmptyDataRowCellClassName=ue.ClassName+"-empty-data-area",ue.EmptyCellClassName=ue.ClassName+"-empty-cell",ue.EditFormClassName=ue.ClassName+"-edit-form",ue.EditNewItemRowClassName=ue.ClassName+"-edit-new-item-row",ue.EditNewItemRowInplaceClassName=ue.ClassName+"-edit-new-item-row-inplace",ue.TopFixedBodyClassName=ue.ClassName+"-top-fixed-body",ue.SelectedRowClassName=ue.ClassName+"-selected-row",ue.TouchSelectionClassName=ue.ClassName+"-touch-selection",ue.TouchSelectionEdgeClassName=ue.ClassName+"-touch-selection-edge",ue.MoveCursorCssClassName=ue.ClassName+"-move-cursor",ue.DraggingDownTargetClassName=ue.ClassName+"-dragging-down-target",ue.DraggingUpTargetClassName=ue.ClassName+"-dragging-up-target",ue.ColumnsResizeAnchorClassName=ue.ClassName+"-column-resize-anchor",ue.ColumnsSeparatorClassName=ue.ClassName+"-columns-separator",ue.HiddenEmptyCellClassName=ue.ClassName+"-hidden-empty-cell",ue.RowDragHintClassName=ue.ClassName+"-row-drag-hint",ue.RowDragHintPortalClassName=ue.ClassName+"-row-drag-hint-portal",ue.RowDragAnchorClassName=ue.ClassName+"-row-drag-anchor-cell",ue.DropTargetIndicatorClassName=ue.ClassName+"-drop-target-indicator",ue.ColumnChooserItemClassName=ue.ClassName+"-column-chooser-item",ue.ColumnChooserDraggingItemClassName=ue.ClassName+"-column-chooser-dragging-item",ue.ColumnChooserDraggingItemNextSiblingClassName=ue.ClassName+"-column-chooser-dragging-item-next-sibling",ue.ColumnChooserItemDragAnchorClassName=ue.ClassName+"-column-chooser-item-drag-anchor",ue.ColumnChooserItemDragLockClassName=ue.ClassName+"-column-chooser-item-drag-lock",ue.HighlightedTextClassName=ue.ClassName+"-highlighted-text",ue.CalculateContentWidthsClassName=ue.DataTableClassName+"-content-fit-calc";const pe="dxbl-grid-header-content";const me="dxbl-ui-handlers-bridge";class ge{constructor(e,t){this.id=e,this.result=t}processedBy(e){return this.id===e}}class Ce extends HTMLElement{constructor(){super(),this.pendingCommands=new Map,this._value=null}disposeComponent(){this.pendingCommands.clear()}get value(){return this._value}send(e,t,i=null){try{const n=this.nextCommandId();return this.pendingCommands.set(n,i),this._value=JSON.stringify([n.toString(),e,t]),this.dispatchEvent(new Event("change",{bubbles:!0})),n}finally{this._value=null}}static get observedAttributes(){return["command-results"]}attributeChangedCallback(e,t,i){if("command-results"===e)setTimeout((()=>this.processCommandResults(i)),0)}processCommandResults(e){const t=this.parseCommandResults(e);for(const e of t){const t=this.pendingCommands.get(e.id);this.pendingCommands.delete(e.id),t&&t(e)}}parseCommandResults(e){const t=new Array,i=JSON.parse(e);for(const e of i.CommandResults)t.push(new ge(parseInt(e.Id),e.Result));return t.sort(((e,t)=>e.id===t.id?0:e.id>t.id?1:-1))}nextCommandId(){if(0===this.pendingCommands.size)return 0;let e=0;for(const t of this.pendingCommands.keys())t>e&&(e=t);return e+1}}customElements.define(me,Ce);class fe{get previousColumnUid(){return this._previousColumnUid}get nextColumnUid(){return this._nextColumnUid}get nextVisibleColumnUid(){return this._nextVisibleColumnUid}constructor(e,t,i){this._previousColumnUid=e,this._nextColumnUid=t,this._nextVisibleColumnUid=i}}class ve{get uID(){return this._uID}get parentUID(){return this._parentUID}get allowGroup(){return this._allowGroup}get allowReorder(){return this._allowReorder}get dragRestrictions(){return this._dragRestrictions}get width(){return this._width}get minWidth(){return this._minWidth}get hasWidth(){return!!this._width}get isFreeWidth(){return!this.width&&!this.isIndent&&!this.isEmpty}get isPercentWidth(){return this.hasWidth&&-1!==this.width.indexOf("%")}get isAbsoluteWidth(){return this.hasWidth&&!this.isPercentWidth||this.isIndent}get colElementWidth(){return this._colElementWidth}set colElementWidth(e){this._colElementWidth=e}get isIndent(){return this._isIndent}get isEmpty(){return this._isEmpty}get isDetail(){return this._isDetail}get isEditable(){return this._isEditable}get fixedPosition(){return this._fixedPosition}get headerRowIndex(){return this._headerRowIndex}get headerCellIndex(){return this._headerCellIndex}get leafIndex(){return this._leafIndex}get parent(){return this._parent}get parentPath(){return this._parentPath}get isRoot(){return this.parentUID<0}get hasLeafs(){return this._leafs.length>0}constructor(e,t,i,n,s,r,o=!1,a=!1,l=!1,A=!1,d=!0,c=null){this._parent=null,this._parentPath=[],this._leafs=[],this._leafIndex=-1,this._headerRowIndex=-1,this._headerCellIndex=-1,this._uID=e,this._parentUID=t,this._allowGroup=i,this._allowReorder=d,this._dragRestrictions=c,this._width=n,this._colElementWidth=n,this._minWidth=s,this._isIndent=o,this._isEmpty=a,this._isDetail=l,this._isEditable=A,this._fixedPosition=r}getPercents(){return this.isPercentWidth?parseFloat(this.width.replace("%","")):0}updateWidth(e){this._width=e,this._colElementWidth=e}updateHeaderLayoutInfo(e,t){this._headerRowIndex=e,this._headerCellIndex=t}attachParent(e){var t,i;this._parent=e,this._parentPath=[...null!==(i=null===(t=this.parent)||void 0===t?void 0:t.parentPath)&&void 0!==i?i:[],e]}attachLeaf(e){this._leafs.push(e)}updateLeafIndex(e){this._leafIndex=e}containsLeaf(e){return this.hasLeafs?this._leafs.findIndex((t=>t.uID===e))>=0:this.uID===e}getLeftLeaf(){return this.hasLeafs?this._leafs[0]:null}getRightLeaf(){return this.hasLeafs?this._leafs[this._leafs.length-1]:null}}const be="dxbl-drop-restrictions-info",we="data";customElements.define(be,class extends de{constructor(){super(...arguments),this._dataCache=null,this._allowedComponentsCache=null,this._reorderDeniedRangesCache=null}get allowedComponents(){var e;return this._allowedComponentsCache||(this._allowedComponentsCache=null!==(e=this.data["allowed-components"])&&void 0!==e?e:[]),this._allowedComponentsCache}get reorderDeniedRanges(){var e;return this._reorderDeniedRangesCache||(this._reorderDeniedRangesCache=null!==(e=this.data["reorder-denied-ranges"])&&void 0!==e?e:[]),this._reorderDeniedRangesCache}get data(){if(!this._dataCache){const e=this.getAttribute(we);this._dataCache=e?JSON.parse(e):{}}return this._dataCache}invalidateCaches(){this._dataCache=null,this._allowedComponentsCache=null,this._reorderDeniedRangesCache=null}static get observedAttributes(){return[we]}attributeChangedCallback(e,t,i){this.invalidateCaches()}});var ye=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EncodeUtils=void 0;var i=function(){function e(){}return e.encodeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.decodeHtml=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},e.prepareTextForRequest=function(e){return e.replace(/%/g,"%25").replace(/&/g,"%26amp;").replace(/\+/g,"%2B").replace(/</g,"%26lt;").replace(/>/g,"%26gt;").replace(/"/g,"%26quot;")},e.prepareTextForCallBackRequest=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.decodeViaTextArea=function(e){var t=document.createElement("TEXTAREA");return t.innerHTML=e,t.value},e}();t.EncodeUtils=i}));t(ye);var Be=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCode=t.ModifierKey=t.KeyUtils=void 0;var i,n,s=function(){function e(){}return e.getKeyModifiers=function(e){var t=0;return e.altKey&&(t|=i.Alt),e.ctrlKey&&(t|=i.Ctrl),e.shiftKey&&(t|=i.Shift),e.metaKey&&(t|=i.Meta),t},e.getShortcutCode=function(e,t,n,s,r){var o=e;return o|=t?i.Ctrl:0,o|=n?i.Shift:0,o|=s?i.Alt:0,o|=r?i.Meta:0},e.getShortcutCodeByEvent=function(t){return e.getShortcutCode(e.getEventKeyCode(t),t.ctrlKey,t.shiftKey,t.altKey,!!h.Browser.MacOSPlatform&&t.metaKey)},e.getEventKeyCode=function(e){return h.Browser.NetscapeFamily||h.Browser.Opera?e.which:e.keyCode},e.parseShortcutString=function(t){if(!t)return 0;var i=!1,s=!1,r=!1,o=!1,a=null,l=t.toString().split("+");if(l.length>0)for(var A=0;A<l.length;A++){var d=u.StringUtils.trim(l[A].toUpperCase());switch(d){case"CONTROL":case"CONTROLKEY":case"CTRL":i=!0;break;case"SHIFT":case"SHIFTKEY":s=!0;break;case"ALT":r=!0;break;case"CMD":o=!0;break;case"F1":a=n.F1;break;case"F2":a=n.F2;break;case"F3":a=n.F3;break;case"F4":a=n.F4;break;case"F5":a=n.F5;break;case"F6":a=n.F6;break;case"F7":a=n.F7;break;case"F8":a=n.F8;break;case"F9":a=n.F9;break;case"F10":a=n.F10;break;case"F11":a=n.F11;break;case"F12":a=n.F12;break;case"RETURN":case"ENTER":a=n.Enter;break;case"HOME":a=n.Home;break;case"END":a=n.End;break;case"LEFT":a=n.Left;break;case"RIGHT":a=n.Right;break;case"UP":a=n.Up;break;case"DOWN":a=n.Down;break;case"PAGEUP":a=n.PageUp;break;case"PAGEDOWN":a=n.PageDown;break;case"SPACE":a=n.Space;break;case"TAB":a=n.Tab;break;case"BACKSPACE":case"BACK":a=n.Backspace;break;case"CONTEXT":a=n.ContextMenu;break;case"ESCAPE":case"ESC":a=n.Esc;break;case"DELETE":case"DEL":a=n.Delete;break;case"INSERT":case"INS":a=n.Insert;break;case"PLUS":a="+".charCodeAt(0);break;default:a=d.charCodeAt(0)}}else alert(ye.EncodeUtils.decodeViaTextArea("Invalid shortcut"));return e.getShortcutCode(a,i,s,r,o)},e}();t.KeyUtils=s,function(e){e[e.None=0]="None",e[e.Ctrl=65536]="Ctrl",e[e.Shift=262144]="Shift",e[e.Alt=1048576]="Alt",e[e.Meta=16777216]="Meta"}(i=t.ModifierKey||(t.ModifierKey={})),function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Pause=19]="Pause",e[e.CapsLock=20]="CapsLock",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Key_0=48]="Key_0",e[e.Key_1=49]="Key_1",e[e.Key_2=50]="Key_2",e[e.Key_3=51]="Key_3",e[e.Key_4=52]="Key_4",e[e.Key_5=53]="Key_5",e[e.Key_6=54]="Key_6",e[e.Key_7=55]="Key_7",e[e.Key_8=56]="Key_8",e[e.Key_9=57]="Key_9",e[e.Key_a=65]="Key_a",e[e.Key_b=66]="Key_b",e[e.Key_c=67]="Key_c",e[e.Key_d=68]="Key_d",e[e.Key_e=69]="Key_e",e[e.Key_f=70]="Key_f",e[e.Key_g=71]="Key_g",e[e.Key_h=72]="Key_h",e[e.Key_i=73]="Key_i",e[e.Key_j=74]="Key_j",e[e.Key_k=75]="Key_k",e[e.Key_l=76]="Key_l",e[e.Key_m=77]="Key_m",e[e.Key_n=78]="Key_n",e[e.Key_o=79]="Key_o",e[e.Key_p=80]="Key_p",e[e.Key_q=81]="Key_q",e[e.Key_r=82]="Key_r",e[e.Key_s=83]="Key_s",e[e.Key_t=84]="Key_t",e[e.Key_u=85]="Key_u",e[e.Key_v=86]="Key_v",e[e.Key_w=87]="Key_w",e[e.Key_x=88]="Key_x",e[e.Key_y=89]="Key_y",e[e.Key_z=90]="Key_z",e[e.Windows=91]="Windows",e[e.ContextMenu=93]="ContextMenu",e[e.Numpad_0=96]="Numpad_0",e[e.Numpad_1=97]="Numpad_1",e[e.Numpad_2=98]="Numpad_2",e[e.Numpad_3=99]="Numpad_3",e[e.Numpad_4=100]="Numpad_4",e[e.Numpad_5=101]="Numpad_5",e[e.Numpad_6=102]="Numpad_6",e[e.Numpad_7=103]="Numpad_7",e[e.Numpad_8=104]="Numpad_8",e[e.Numpad_9=105]="Numpad_9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.Decimal=110]="Decimal",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.Semicolon=186]="Semicolon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.ForwardSlash=191]="ForwardSlash",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.BackSlash=220]="BackSlash",e[e.CloseBracket=221]="CloseBracket",e[e.SingleQuote=222]="SingleQuote"}(n=t.KeyCode||(t.KeyCode={}))}));t(Be);class Ee{constructor(){this._visible=!1,this._contentElementInfo={scrollStart:0,clientSize:0,scrollSize:0},this._scrollBarStart=0,this._scrollBarEnd=0,this._scrollBarOffset=0,this._scrollBarThickness=0,this._thumbStart=0,this._thumbEnd=0}get visible(){return this._visible}set visible(e){this._visible=e}get contentElementInfo(){return this._contentElementInfo}set contentElementInfo(e){this._contentElementInfo=e}get scrollBarStart(){return this._scrollBarStart}set scrollBarStart(e){this._scrollBarStart=e}get scrollBarEnd(){return this._scrollBarEnd}set scrollBarEnd(e){this._scrollBarEnd=e}get scrollBarOffset(){return this._scrollBarOffset}set scrollBarOffset(e){this._scrollBarOffset=e}get scrollBarThickness(){return this._scrollBarThickness}set scrollBarThickness(e){this._scrollBarThickness=e}get thumbStart(){return this._thumbStart}set thumbStart(e){this._thumbStart=e}get thumbEnd(){return this._thumbEnd}set thumbEnd(e){this._thumbEnd=e}}class Ie{get scrollBarInfo(){return this._scrollBarInfo}get contentElementInfo(){return this.scrollBarInfo.contentElementInfo}constructor(e){this._scrollBarInfo=e,this.thumbSize=20,this._scrollBarInfo.scrollBarEnd=this._scrollBarInfo.contentElementInfo.clientSize,this.recalculate()}scrollByPointerClick(e){const t=this.contentElementInfo.scrollSize-this.contentElementInfo.clientSize;this.contentElementInfo.scrollStart=t*e/this.getScrollBarSize(),this.contentElementInfo.scrollStart=Math.max(0,this.contentElementInfo.scrollStart),this.contentElementInfo.scrollStart=Math.min(t,this.contentElementInfo.scrollStart),this.recalculate()}scrollByPointerMove(e){const t=this.contentElementInfo.scrollSize-this.contentElementInfo.clientSize,i=t/(this.getScrollBarSize()-this.thumbSize);this.contentElementInfo.scrollStart=this.contentElementInfo.scrollStart+e*i,this.contentElementInfo.scrollStart=Math.max(0,this.contentElementInfo.scrollStart),this.contentElementInfo.scrollStart=Math.min(t,this.contentElementInfo.scrollStart),this.recalculate()}recalculate(){this.recalculateThumb()}recalculateThumb(){this.thumbSize=this.calculateThumbSize(),this._scrollBarInfo.visible=this.scrollBarInfo.contentElementInfo.scrollSize>this.scrollBarInfo.contentElementInfo.clientSize,this._scrollBarInfo.thumbStart=this.calculateThumbStart(),this._scrollBarInfo.thumbEnd=this._scrollBarInfo.thumbStart+this.thumbSize}calculateThumbSize(){const e=this.getScrollBarSize(),t=e*this.scrollBarInfo.contentElementInfo.clientSize/this.scrollBarInfo.contentElementInfo.scrollSize;return e>20?Math.max(t,20):t}calculateThumbStart(){const e=(this.getScrollBarSize()-this.thumbSize)/(this.scrollBarInfo.contentElementInfo.scrollSize-this.scrollBarInfo.contentElementInfo.clientSize);return this.scrollBarInfo.contentElementInfo.scrollStart*e}getScrollBarSize(){return this._scrollBarInfo.scrollBarEnd-this._scrollBarInfo.scrollBarStart}}class Se{constructor(e){this._offsets={left:0,right:0,top:0,bottom:0},this._verticalScrollBarInfo=new Ee,this._horizontalScrollBarInfo=new Ee,this._verticalThumbCalculator=new Ie(this._verticalScrollBarInfo),this._horizontalThumbCalculator=new Ie(this._horizontalScrollBarInfo),this.updateScrollableElementInfo(e)}get verticalScrollBarInfo(){return this._verticalScrollBarInfo}get horizontalScrollBarInfo(){return this._horizontalScrollBarInfo}updateScrollableElementInfo(e){this._verticalScrollBarInfo.contentElementInfo.scrollStart=e.scrollTop||0,this._verticalScrollBarInfo.contentElementInfo.scrollSize=e.scrollHeight||0;const t=e.getBoundingClientRect();this._verticalScrollBarInfo.contentElementInfo.clientSize=Math.ceil(t.height),this._horizontalScrollBarInfo.contentElementInfo.scrollStart=e.scrollLeft||0,this._horizontalScrollBarInfo.contentElementInfo.scrollSize=e.scrollWidth||0,this._horizontalScrollBarInfo.contentElementInfo.clientSize=e.clientWidth||0,this.recalculate()}initScrollBarsThickness(e,t){this._verticalScrollBarInfo.scrollBarThickness=e,this._horizontalScrollBarInfo.scrollBarThickness=t}updateTopPanelHeight(e){this._offsets.top=e,this.recalculate()}updateBottomPanelHeight(e){this._offsets.bottom=e,this.recalculate()}updateLeftPanelWidth(e){this._offsets.left=e,this.recalculate()}updateRightPanelWidth(e){this._offsets.right=e,this.recalculate()}vertScrollByPointerMove(e){this._verticalThumbCalculator.scrollByPointerMove(e),this.recalculate()}vertScrollByPointerClick(e){this._verticalThumbCalculator.scrollByPointerClick(e),this.recalculate()}horScrollByPointerMove(e){this._horizontalThumbCalculator.scrollByPointerMove(e),this.recalculate()}horScrollByPointerClick(e){this._horizontalThumbCalculator.scrollByPointerClick(e),this.recalculate()}recalculate(){this._verticalScrollBarInfo.scrollBarStart=this._offsets.top,this._verticalScrollBarInfo.scrollBarEnd=this._verticalScrollBarInfo.contentElementInfo.clientSize-this._offsets.bottom,this._horizontalScrollBarInfo.scrollBarStart=this._offsets.left,this._horizontalScrollBarInfo.scrollBarEnd=this._horizontalScrollBarInfo.contentElementInfo.clientSize-this._offsets.right,this._verticalScrollBarInfo.scrollBarOffset=this._offsets.right,this._horizontalScrollBarInfo.scrollBarOffset=this._offsets.bottom,this._verticalThumbCalculator.recalculate(),this._horizontalThumbCalculator.recalculate(),this._horizontalScrollBarInfo.visible&&(this._verticalScrollBarInfo.thumbEnd-=this._horizontalScrollBarInfo.scrollBarThickness)}}class xe{}var De;xe.ClassName=he.Prefix+"-scroll-viewer",xe.ContentContainerClassName=xe.ClassName+"-content",xe.VerticalScrollBarClassName=xe.ClassName+"-vert-scroll-bar",xe.HorizontalScrollBarClassName=xe.ClassName+"-hor-scroll-bar",xe.ScrollBarThumbClassName=xe.ClassName+"-scroll-thumb",xe.ScrollBarActiveClassName=he.Active,function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(De||(De={}));class Fe extends de{constructor(){super(),this.thumbElement=null,this._mode=De.Vertical,this._info=null}initializeComponent(){super.initializeComponent(),this.thumbElement=this.getThumbElement(),this.thumbElement.addEventListener("click",Fe.onThumbElementClick)}disposeComponent(){super.disposeComponent(),this.thumbElement&&this.thumbElement.removeEventListener("click",Fe.onThumbElementClick)}get mode(){return this._mode}set mode(e){this._mode=e}get info(){return this._info}set info(e){this._info=e,this.applyUIChanges()}getThumbThickness(){if(!this.thumbElement)return 0;const e=T.DomUtils.getCurrentStyle(this.thumbElement);return parseInt(this.mode===De.Vertical?e.width:e.height)}applyUIChanges(){if(!this.isInitialized)return;if(!this.info||!this.info.visible)return void T.DomUtils.removeClassName(this,xe.ScrollBarActiveClassName);const e=this.info.thumbEnd-this.info.thumbStart+"px";this.mode===De.Vertical?this.applyVerticalScrollUIChanges(e):this.applyHorizontalScrollUIChanges(e),T.DomUtils.addClassName(this,xe.ScrollBarActiveClassName)}applyVerticalScrollUIChanges(e){this.thumbElement&&this.info&&(this.thumbElement.style.height=e,this.thumbElement.style.transform=`translateY(${this.info.thumbStart}px)`,this.style.top=this.info.scrollBarStart+"px",this.style.bottom=this.info.contentElementInfo.clientSize-this.info.scrollBarEnd+"px",this.style.right=this.info.scrollBarOffset+"px")}applyHorizontalScrollUIChanges(e){this.thumbElement&&this.info&&(this.thumbElement.style.width=e,this.thumbElement.style.transform=`translateX(${this.info.thumbStart}px)`,this.style.left=this.info.scrollBarStart+"px",this.style.right=this.info.contentElementInfo.clientSize-this.info.scrollBarEnd+"px",this.style.bottom=this.info.scrollBarOffset+"px")}getThumbElement(){return this.querySelector(`.${xe.ScrollBarThumbClassName}`)}static onThumbElementClick(e){e.stopPropagation()}}class Te{static isAbsolutePositioning(e){return"absolute"===window.getComputedStyle(e).getPropertyValue("position")}static isFixedPositioning(e){return"fixed"===window.getComputedStyle(e).getPropertyValue("position")}static isScrollable(e){const{overflow:t,overflowX:i,overflowY:n}=window.getComputedStyle(e);return/auto|scroll|overlay|hidden/.test(t+i+n)}static setBooleanAttribute(e,t,i){i?e.setAttribute(t,""):e.removeAttribute(t)}static isOverflown(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}static isTableElement(e){var t;return[Q.table,Q.tableCell,Q.tableHeaderCell].indexOf(null!==(t=Te.getNodeName(e))&&void 0!==t?t:"")>=0}static isTextInput(e){return e.tagName===Q.input||e.tagName===Q.textArea}static isMultipleRowInput(e){const t=e.getAttribute("contenteditable");return t?"false"!==t.toLowerCase():e.tagName===Q.textArea}static toPx(e){return Math.floor(e)+"px"}static getNodeName(e){return e?(e.nodeName||"").toLowerCase():null}static getVerticalScrollbarWidth(e=null){return null==e?window.innerWidth-document.body.getBoundingClientRect().width:e.offsetWidth-e.clientWidth}static matches(e,t){return e.matches(t)}static isHidden(e,t){const i=getComputedStyle(e).visibility;if(i===U.hidden||i===U.collapse||e.closest('[inert="true"]'))return!0;let n=e;for(;n&&n!==t;){if(getComputedStyle(n).display===P.none)return!0;n=n.parentElement}return!1}static getAttributeIntValue(e,t,i){return Te.getAttributeParsedNumberValue(e,t,parseInt,i)}static getAttributeParsedNumberValue(e,t,i,n){const s=e.getAttribute(t);return s?i(s):n}}const He=40;var Ue,Pe,Qe,Ne,Re,Le,Me;!function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom"}(Ue||(Ue={})),function(e){e[e.None=0]="None",e[e.Left=1]="Left",e[e.Right=2]="Right"}(Pe||(Pe={})),function(e){e[e.All=0]="All",e[e.ScrollBars=1]="ScrollBars",e[e.ScrollPosition=2]="ScrollPosition"}(Qe||(Qe={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Both=2]="Both"}(Ne||(Ne={}));class ke extends CustomEvent{constructor(){super(ke.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}ke.eventName="dxscrollviewerupdate";class Ke extends CustomEvent{constructor(e,t){super(Ke.eventName,{detail:{element:e,isFocusRequired:t},bubbles:!0,composed:!1})}}Ke.eventName="dxscrollviewervisibleelementchanged";class Oe extends de{constructor(){super(),this.scrollAttributeLifespanTimeoutId=null,this.pendingRefreshUi=null,this.currentMakeElementVisibleTimeoutId=-1,this.autoScrollingMode=null,this.autoScrollingRect=null,this.autoScrollingRafID=-1,this.autoScrollingCallback=null,this.contentContainerScrollingCallback=null,this.boundOnContentScrollHandler=this.onContentScroll.bind(this),this.boundOnVerticalScrollBarClickHandler=this.onVerticalScrollBarClick.bind(this),this.boundOnVerticalScrollThumbMoveHandler=this.onVerticalScrollThumbMove.bind(this),this.boundOnHorizontalScrollBarClickHandler=this.onHorizontalScrollBarClick.bind(this),this.boundOnHorizontalScrollThumbMoveHandler=this.onHorizontalScrollThumbMove.bind(this),this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.preventScrollEvent=!1,this.contentContainerElement=null,this.verticalScrollBarElement=null,this.horizontalScrollBarElement=null,this.scrollController=null,this.contentResizeObserver=new ResizeObserver(this.onContentSizeChanged.bind(this)),this.headerResizeObserver=new ResizeObserver(this.onHeaderSizeChanged.bind(this)),this.footerResizeObserver=new ResizeObserver(this.onFooterSizeChanged.bind(this)),this.leftResizeObserver=new ResizeObserver(this.onLeftSizeChanged.bind(this)),this.rightResizeObserver=new ResizeObserver(this.onRightSizeChanged.bind(this))}get useShadowDom(){return!1}get headerSelector(){return this.getAttribute("header-selector")}get footerSelector(){return this.getAttribute("footer-selector")}get leftSelector(){return this.getAttribute("left-selector")}get rightSelector(){return this.getAttribute("right-selector")}get canMakeElementVisible(){return!this.isRefreshUIRequested&&(!!this.contentContainerElement&&this.contentContainerElement.isConnected)}getContentContainerElement(){return this.contentContainerElement}getVerticalScrollBarElement(){return this.verticalScrollBarElement}getHorizontalScrollBarElement(){return this.horizontalScrollBarElement}get isRefreshUIRequested(){return!!this.pendingRefreshUi}get hasHorizontalScrollBar(){var e,t;return!!(null===(t=null===(e=this.getHorizontalScrollBarElement())||void 0===e?void 0:e.info)||void 0===t?void 0:t.visible)}get hasVerticalScrollBar(){var e,t;return!!(null===(t=null===(e=this.getVerticalScrollBarElement())||void 0===e?void 0:e.info)||void 0===t?void 0:t.visible)}initializeComponent(){super.initializeComponent(),this.initializeInnerHTMLElements(),this.initializeScrollController(),this.connectResizeObservers()}afterInitialize(){super.afterInitialize(),this.refreshScrollPosition()}disposeComponent(){super.disposeComponent(),this.releaseInnerHTMLElements(),this.scrollController=null,this.contentResizeObserver.disconnect(),this.headerResizeObserver.disconnect(),this.footerResizeObserver.disconnect(),this.leftResizeObserver.disconnect(),this.rightResizeObserver.disconnect()}getRectangle(){const{left:e,top:t,width:i,height:n}=this.getBoundingClientRect();return{x:e,y:t,width:i,height:n}}getDataAreaRectangle(){const e=this.getRectangle(),t=this.getElementsRectangle(this.getHeaderElements());if(t){const i=t.height;e.height-=i,e.y+=i}const i=this.getElementsRectangle(this.getLeftElements());if(i){const t=i.width;e.width-=t,e.x+=t}const n=this.getElementsRectangle(this.getRightElements());n&&(e.width-=n.width);const s=this.getElementsRectangle(this.getFooterElements());return s&&(e.height-=s.height),e}static calculateBoundingRectangle(e){if(1===e.length)return e[0];let t=-1,i=-1,n=-1,s=-1;return e.forEach((function(e){(e.x<t||-1===t)&&(t=e.x),(e.y<i||-1===i)&&(i=e.y),(e.x+e.width>n||-1===n)&&(n=e.x+e.width),(e.y+e.height>s||-1===s)&&(s=e.y+e.height)})),{x:t,y:i,width:n-t,height:s-i}}onDocumentMouseMove(e){this.performAutoScrolling(e)}startAutoScrolling(e,t=null,i=null){this.autoScrollingMode=e,this.autoScrollingCallback=t;const n=this.getRectangle();i&&i(n),this.autoScrollingRect=n,document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler)}stopAutoScrolling(){document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),this.stopAutoScrollingTimer(),this.autoScrollingCallback=null,this.autoScrollingRect=null,this.autoScrollingMode=null}subscribeToScroll(e=null){this.contentContainerScrollingCallback=e}unsubscribeFromScroll(){this.contentContainerScrollingCallback=null}get isHorizontalAutoScrollingEnabled(){return this.autoScrollingMode===Ne.Horizontal||this.autoScrollingMode===Ne.Both}get isVerticalAutoScrollingEnabled(){return this.autoScrollingMode===Ne.Vertical||this.autoScrollingMode===Ne.Both}performAutoScrolling(e){if(this.stopAutoScrollingTimer(),void 0!==this.autoScrollingMode&&this.autoScrollingRect){const t=this.autoScrollingRect,i=t.x<=e.pageX&&e.pageX<=t.x+t.width,n=t.y<=e.pageY&&e.pageY<=t.y+t.height;let s=0,r=0;if(this.isHorizontalAutoScrollingEnabled&&i&&n){const i=e.pageX-t.x;0<=i&&i<=He&&(s=-(He-i)/2);const n=t.x+t.width-e.pageX;0<=n&&n<=He&&(s=(He-n)/2)}if(this.isVerticalAutoScrollingEnabled&&i&&n){const i=e.pageY-t.y;0<=i&&i<=He&&(r=-(He-i)/2);const n=t.y+t.height-e.pageY;0<=n&&n<=He&&(r=(He-n)/2)}0===s&&0===r||this.startAutoScrollingTimer(e,s,r)}}startAutoScrollingTimer(e,t,i){this.autoScrollingRafID=requestAnimationFrame((()=>{this.contentContainerElement&&(this.contentContainerElement.scrollBy(t,i),this.refresh(Qe.ScrollBars)),this.autoScrollingCallback&&this.autoScrollingCallback(e),this.performAutoScrolling(e)}))}stopAutoScrollingTimer(){this.autoScrollingRafID>-1&&(cancelAnimationFrame(this.autoScrollingRafID),this.autoScrollingRafID=-1)}releaseInnerHTMLElements(){this.contentContainerElement&&this.contentContainerElement.removeEventListener("scroll",this.boundOnContentScrollHandler),this.verticalScrollBarElement&&this.unsubscribeEvents(this.verticalScrollBarElement,this.boundOnVerticalScrollBarClickHandler,this.boundOnVerticalScrollThumbMoveHandler),this.horizontalScrollBarElement&&this.unsubscribeEvents(this.horizontalScrollBarElement,this.boundOnHorizontalScrollBarClickHandler,this.boundOnHorizontalScrollThumbMoveHandler),this.contentContainerElement=null,this.verticalScrollBarElement=null,this.horizontalScrollBarElement=null,-1!==this.currentMakeElementVisibleTimeoutId&&clearTimeout(this.currentMakeElementVisibleTimeoutId)}getHeaderElements(){return this.getElements(this.headerSelector)}getFooterElements(){return this.getElements(this.footerSelector)}getLeftElements(){return this.getElements(this.leftSelector)}getRightElements(){return this.getElements(this.rightSelector)}getElementsRectangle(e){if(null===e||0===e.length)return null;const t=Array.from(e);return Oe.calculateBoundingRectangle(t.map((e=>e.getBoundingClientRect())))}getElements(e){return e&&this.contentContainerElement?this.contentContainerElement.querySelectorAll(e):null}subscribeEvents(e,t,i){e.addEventListener("click",t),e.addEventListener("dxthumbdragdelta",i)}unsubscribeEvents(e,t,i){e.removeEventListener("click",t),e.removeEventListener("dxthumbdragdelta",i)}refreshUI(){this.refresh(Qe.All),this.dispatchEvent(new ke)}refreshScrollPosition(){this.refresh(Qe.ScrollPosition),this.dispatchEvent(new ke)}refresh(e){if(!this.isHidden())if(this.pendingRefreshUi){e===Qe.ScrollBars&&e!==this.pendingRefreshUi.refreshType&&this.contentContainerElement&&(this.pendingRefreshUi.scrollTop=this.contentContainerElement.scrollTop,this.pendingRefreshUi.scrollLeft=this.contentContainerElement.scrollLeft,this.pendingRefreshUi.refreshType===Qe.ScrollPosition&&(this.pendingRefreshUi.refreshType=Qe.All))}else this.pendingRefreshUi={refreshType:e},requestAnimationFrame((()=>{const{refreshType:e,scrollTop:t,scrollLeft:i}=this.pendingRefreshUi;if(this.pendingRefreshUi=null,!this.scrollController)return;const n=this.scrollController.verticalScrollBarInfo,s=this.scrollController.horizontalScrollBarInfo;this.contentContainerElement&&(e!==Qe.All&&e!==Qe.ScrollPosition||(this.contentContainerElement.scrollTop=null!=t?t:n.contentElementInfo.scrollStart,this.contentContainerElement.scrollLeft=null!=i?i:s.contentElementInfo.scrollStart),e!==Qe.All&&e!==Qe.ScrollBars||this.updateScrollableElementInfo(this.contentContainerElement)),this.verticalScrollBarElement&&(this.verticalScrollBarElement.info=n),this.horizontalScrollBarElement&&(this.horizontalScrollBarElement.info=s),this.contentContainerElement&&this.onRefresh(this.contentContainerElement.scrollTop,this.contentContainerElement.scrollLeft),this.preventScrollEvent=!1}))}onRefresh(e,t){this.contentContainerScrollingCallback&&this.contentContainerScrollingCallback(e,t)}isHidden(){return Te.isHidden(this)}initializeInnerHTMLElements(){this.contentContainerElement=this.querySelector(`.${xe.ContentContainerClassName}`),this.contentContainerElement.addEventListener("scroll",this.boundOnContentScrollHandler),this.verticalScrollBarElement=this.getScrollElement(xe.VerticalScrollBarClassName),this.verticalScrollBarElement.mode=De.Vertical,this.subscribeEvents(this.verticalScrollBarElement,this.boundOnVerticalScrollBarClickHandler,this.boundOnVerticalScrollThumbMoveHandler),this.horizontalScrollBarElement=this.getScrollElement(xe.HorizontalScrollBarClassName),this.horizontalScrollBarElement.mode=De.Horizontal,this.subscribeEvents(this.horizontalScrollBarElement,this.boundOnHorizontalScrollBarClickHandler,this.boundOnHorizontalScrollThumbMoveHandler)}initializeScrollController(){if(this.contentContainerElement&&this.verticalScrollBarElement&&this.horizontalScrollBarElement&&(this.scrollController=new Se(this.contentContainerElement),this.verticalScrollBarElement instanceof Fe&&this.horizontalScrollBarElement instanceof Fe)){const e=this.verticalScrollBarElement.getThumbThickness(),t=this.horizontalScrollBarElement.getThumbThickness();this.scrollController.initScrollBarsThickness(e,t)}}updateScrollableElementInfo(e){this.scrollController&&e&&this.scrollController.updateScrollableElementInfo(e)}connectResizeObservers(){if(this.contentContainerElement){this.contentResizeObserver.observe(this);for(let e=0;e<this.contentContainerElement.children.length;e++)this.contentResizeObserver.observe(this.contentContainerElement.children[e]);this.connectHeaderResizeObserver(),this.connectFooterResizeObserver(),this.connectLeftResizeObserver(),this.connectRightResizeObserver()}}connectHeaderResizeObserver(){const e=this.getHeaderElements();e&&e.forEach((e=>{this.headerResizeObserver.observe(e)}))}connectFooterResizeObserver(){const e=this.getFooterElements();e&&e.forEach((e=>{this.footerResizeObserver.observe(e)}))}connectLeftResizeObserver(){const e=this.getLeftElements();e&&e.forEach((e=>{this.leftResizeObserver.observe(e)}))}connectRightResizeObserver(){const e=this.getRightElements();e&&e.forEach((e=>{this.rightResizeObserver.observe(e)}))}reconnectResizeObservers(){this.reconnectLeftResizeObserver(),this.reconnectRightResizeObserver(),this.reconnectHeaderResizeObserver(),this.reconnectFooterResizeObserver()}reconnectHeaderResizeObserver(){this.headerResizeObserver.disconnect(),this.connectHeaderResizeObserver()}reconnectFooterResizeObserver(){this.footerResizeObserver.disconnect(),this.connectFooterResizeObserver()}reconnectLeftResizeObserver(){this.leftResizeObserver.disconnect(),this.connectLeftResizeObserver()}reconnectRightResizeObserver(){this.rightResizeObserver.disconnect(),this.connectRightResizeObserver()}onContentScroll(e){this.preventScrollEvent||(this.refresh(Qe.ScrollBars),this.setScrollAttribute())}setScrollAttribute(){const e="scrolling";n.setAttribute(this,e),this.scrollAttributeLifespanTimeoutId&&clearTimeout(this.scrollAttributeLifespanTimeoutId),this.scrollAttributeLifespanTimeoutId=setTimeout((()=>{n.removeAttribute(this,e)}),2e3)}onVerticalScrollBarClick(e){this.scrollController&&(this.scrollController.vertScrollByPointerClick(e.offsetY),this.refreshScrollPosition())}onHorizontalScrollBarClick(e){this.scrollController&&(this.scrollController.horScrollByPointerClick(e.offsetX),this.refreshScrollPosition())}onVerticalScrollThumbMove(e){this.preventScrollEvent=!0,this.scrollController&&(this.scrollController.vertScrollByPointerMove(e.detail.deltaY),this.refreshScrollPosition())}onHorizontalScrollThumbMove(e){this.preventScrollEvent=!0,this.scrollController&&(this.scrollController.horScrollByPointerMove(e.detail.deltaX),this.refreshScrollPosition())}getScrollElement(e){return this.querySelector(`:scope > .${e}`)}onContentSizeChanged(e,t){this.refreshUI()}onHeaderSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectHeaderResizeObserver();const i=this.getElementsRectangle(this.getHeaderElements());i&&this.scrollController.updateTopPanelHeight(i.height),this.refreshScrollPosition()}onFooterSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectFooterResizeObserver();const i=this.getElementsRectangle(this.getFooterElements());i&&this.scrollController.updateBottomPanelHeight(i.height),this.refreshScrollPosition()}onLeftSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectLeftResizeObserver();const i=this.getElementsRectangle(this.getLeftElements());i&&this.scrollController.updateLeftPanelWidth(i.width),this.refreshScrollPosition()}onRightSizeChanged(e,t){if(e.length<1||!this.scrollController)return;if(!e[0].target.isConnected)return void this.reconnectRightResizeObserver();const i=this.getElementsRectangle(this.getRightElements());i&&this.scrollController.updateRightPanelWidth(i.width),this.refreshScrollPosition()}processRequestMakeElementVisible(e){if(!e)return;const t=JSON.parse(e);if(3===t.length){const e=t[0];let i=null,n=null;null!==t[1]&&(i=t[1]),null!==t[2]&&(n=t[2]),e?this.execRequestMakeElementVisible(e,i,n):this.cancelRequestMakeElementVisible()}}execRequestMakeElementVisible(e,t,i){this.scheduleMakeElementVisible(e,t,i)}cancelRequestMakeElementVisible(){-1!==this.currentMakeElementVisibleTimeoutId&&clearTimeout(this.currentMakeElementVisibleTimeoutId)}scheduleMakeElementVisible(e,t,i){-1!==this.currentMakeElementVisibleTimeoutId&&clearTimeout(this.currentMakeElementVisibleTimeoutId),this.currentMakeElementVisibleTimeoutId=setTimeout((()=>{this.canMakeElementVisible?this.makeElementVisible(e,t,i):this.scheduleMakeElementVisible(e,t,i)}))}makeElementVisible(e,t,i){if(!this.contentContainerElement)return;const n=this.contentContainerElement.querySelector(e);n?(Oe.scrollToElementRelyOnStickyDescendants(n,t,i,this),this.dispatchEvent(new Ke(n,!0))):this.makeUnrenderedElementVisible(e,t,i)}makeUnrenderedElementVisible(e,t,i){}static scrollToElementRelyOnStickyDescendants(e,t,i,n){if(n.contentContainerElement){const s=n.getDataAreaRectangle(),r=s.y,o=s.x,a=s.y+s.height,l=s.x+s.width,A=e.getBoundingClientRect(),d=this.calcScrollOffset(r,a,A.top,A.bottom,t),c=this.calcScrollOffset(o,l,A.left,A.right,i),h=n.contentContainerElement.scrollTop,u=n.contentContainerElement.scrollLeft,p=Math.round(h+d),m=Math.round(u+c);p===Math.round(h)&&m===Math.round(u)||(n.contentContainerElement.scrollTo(m,p),n.refresh(Qe.ScrollBars))}const s=Oe.findClosestViewer(n);s&&Oe.scrollToElementRelyOnStickyDescendants(e,null,null,s)}static calcScrollOffset(e,t,i,n,s){switch(s){case Ue.Top||Pe.Left:return i-e;case Ue.Bottom||Pe.Right:return n-t;case Ue.None||Pe.None:return 0}return e>i?i-e:t<n?Math.min(n-t,i-e):0}static findClosestViewer(e){return e.parentElement?e.parentElement.closest(`.${xe.ClassName}`):null}static get observedAttributes(){return["reset-v-scroll-guid","reset-h-scroll-guid","request-make-element-visible","header-selector","footer-selector","left-selector","right-selector"]}attributeChangedCallback(e,t,i){switch(e){case"reset-v-scroll-guid":this.contentContainerElement&&i&&(this.contentContainerElement.scrollTop=0,this.refresh(Qe.ScrollBars));break;case"reset-h-scroll-guid":this.contentContainerElement&&i&&(this.contentContainerElement.scrollLeft=0,this.refresh(Qe.ScrollBars));break;case"header-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectHeaderResizeObserver()));break;case"footer-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectFooterResizeObserver()));break;case"left-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectLeftResizeObserver()));break;case"right-selector":this.contentContainerElement&&setTimeout((()=>this.reconnectRightResizeObserver()));break;case"request-make-element-visible":this.processRequestMakeElementVisible(i)}}}customElements.define("dxbl-scroll-bar",Fe),customElements.define("dxbl-scroll-viewer",Oe),function(e){e[e.ColumnsChanged=0]="ColumnsChanged",e[e.GridResize=1]="GridResize"}(Re||(Re={}));class _e{constructor(e){this.grid=e}correctWidths(e){if(0===this.grid.columnsInfo.length)return!1;const t=this.grid.getDataTable();return!!t&&("fixed"===window.getComputedStyle(t).tableLayout&&(requestAnimationFrame((()=>{const t=this.grid.columnsInfo,i=this.grid.getColElements();if(e===Re.ColumnsChanged&&_e.resetColumnWidths(t,i),!_e.canAcquireAbsoluteColumnWidths(this.grid))return;this.updateEmptyColumnVisibility();const n=new Map;for(let e=0;e<this.grid.columnsInfo.length;++e){const t=this.grid.columnsInfo[e];if(t.isAbsoluteWidth){const i=this.grid.getColElementOffsetWidth(e);null!==i&&n.set(t,Math.round(i))}}const s={columnsInfo:this.grid.columnsInfo,columnCurrentWidths:new Map,tableWidth:this.grid.getTableContainerWidth(),absoluteColumnWidths:n,percentColumns:this.grid.columnsInfo.filter((e=>e.isPercentWidth)),freeColumns:this.grid.columnsInfo.filter((e=>e.isFreeWidth)),emptyColumn:this.grid.columnsInfo.filter((e=>e.isEmpty))[0]};_e.doDistributionWaves(s),_e.applyColumnWidths(s,i),this.updateEmptyColumnVisibility(),this.grid.styleGenerator.updateFixedCellsStyle()})),!0))}autoFitColumnWidths(){const e=_e.calculateContentWidths(this.grid);let t=0,i=0;for(const[n,s]of e)n.isIndent||(t+=s,n.isAbsoluteWidth&&(i+=s));const n=t-i,s=[],r=[];for(const[t,i]of e){const e=t.isPercentWidth||t.isFreeWidth?i/n*100+"%":`${i}px`;t.updateWidth(e),s.push(t.uID),r.push(e)}this.grid.notifyColumnsChanged(this.grid.columnsInfo,this.grid.headerLayout),this.grid.onColumnWidthsChanged(s,r)}autoFitColumnWidthsLegacy(e=!1){const t=_e.calculateContentWidths(this.grid);let i=0;for(const[e,n]of t)e.isIndent||(i+=n);const n=[],s=[];for(const[r,o]of t){const t=e?o/i*100+"%":`${o}px`;r.updateWidth(t),n.push(r.uID),s.push(t)}this.grid.notifyColumnsChanged(this.grid.columnsInfo,this.grid.headerLayout),this.grid.onColumnWidthsChanged(n,s)}static calculateContentWidths(e){const t=new Map,i=e.getDataTable();if(i){i.classList.add(ue.CalculateContentWidthsClassName);const n=e.getColElements();for(let i=0;i<n.length;i++){const n=e.columnsInfo[i];if(n&&-1!==n.uID){const s=e.getColElementOffsetWidth(i),r=s?Math.ceil(s)+1:0;t.set(n,r)}}i.classList.remove(ue.CalculateContentWidthsClassName)}return t}updateEmptyColumnVisibility(){const e=this.grid.getColElements(),t=e[e.length-1];_e.hasAnyDataColumnWithEmptyWidth(this.grid.columnsInfo,e)?t.classList.add(ue.HiddenEmptyCellClassName):t.classList.remove(ue.HiddenEmptyCellClassName)}static resetColumnWidths(e,t){for(let i=0;i<t.length;i++){const n=e[i];!n||n.isIndent||n.isEmpty||(t[i].style.width=n.width)}}static doDistributionWaves(e){let t=!1,i=0;do{_e.performAllColumnsRealWidthCalculation(e),t=_e.evaluateColumnMinWidthCorrection(e)}while(t&&++i<=e.columnsInfo.length)}static performAllColumnsRealWidthCalculation(e){e.columnCurrentWidths=new Map;const t=_e.calculateAbsoluteColumnWidths(e);let i=Math.max(0,e.tableWidth-t);i=_e.calculatePercentColumnWidths(e,i),i=_e.calculateFreeColumnWidths(e,i),_e.calculateEmptyColumnWidth(e,i)}static calculateAbsoluteColumnWidths(e){let t=0;for(const i of e.absoluteColumnWidths.keys()){const n=e.absoluteColumnWidths.get(i);t+=n,e.columnCurrentWidths.set(i,n)}return t}static calculatePercentColumnWidths(e,t){let i=0;for(const t of e.percentColumns)i+=t.getPercents();let n=e.tableWidth;const s=i>100?100/i:1,r=n*(i*s)/100;n*=t<r?t/r:1;let o=0;for(const t of e.percentColumns){const i=n*(t.getPercents()*s/100);e.columnCurrentWidths.set(t,i),o+=i}return t-o}static calculateFreeColumnWidths(e,t){if(e.freeColumns.length>0){const i=t/e.freeColumns.length;for(const t of e.freeColumns)e.columnCurrentWidths.set(t,i);return 0}return t}static calculateEmptyColumnWidth(e,t){e.emptyColumn&&e.columnCurrentWidths.set(e.emptyColumn,t)}static evaluateColumnMinWidthCorrection(e){const t=e.absoluteColumnWidths.size;for(const t of e.columnCurrentWidths.keys())Math.round(e.columnCurrentWidths.get(t))>t.minWidth||0===t.minWidth||e.absoluteColumnWidths.set(t,t.minWidth);return e.percentColumns=e.percentColumns.filter((t=>!e.absoluteColumnWidths.has(t))),e.freeColumns=e.freeColumns.filter((t=>!e.absoluteColumnWidths.has(t))),t!==e.absoluteColumnWidths.size}static applyColumnWidths(e,t){for(let i=0;i<e.columnsInfo.length;++i){const n=e.columnsInfo[i];if(n.isIndent)continue;const s=e.absoluteColumnWidths.has(n)?`${e.absoluteColumnWidths.get(n)}px`:n.width;e.columnsInfo[i].colElementWidth=s,t[i].style.width=s}}static hasAnyDataColumnWithEmptyWidth(e,t){let i=0;for(let n=0;n<e.length;n++){const s=e[n];if(!s.isIndent&&!s.isEmpty&&(++i,!t[n].style.width))return!0}return 0===i}static canAcquireAbsoluteColumnWidths(e){for(let t=0;t<e.columnsInfo.length;++t){if(e.columnsInfo[t].isAbsoluteWidth&&null===e.getColElementOffsetWidth(t))return!1}return!0}}!function(e){e[e.Mouse=1]="Mouse",e[e.Keyboard=2]="Keyboard",e[e.DblClick=3]="DblClick"}(Le||(Le={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(Me||(Me={}));class Ve{get isResizing(){return!!this.resizeReason}get columnIndex(){return this._columnIndex}get columnsInfo(){return this.grid.columnsInfo}get tableContainerWidth(){return this._tableContainerWidth}get currentColumnInfo(){return this.columnsInfo[this.columnIndex]}constructor(e){this.startMousePosition=-1,this.startHeaderCellPosition=-1,this.timeoutId=null,this.initialColumnWidths=new Map,this.boundOnDocumentPointerMoveHandler=this.onPointerMove.bind(this),this.getColumnOffsetWidth=e=>this.grid.getColElementOffsetWidth(e),this.setColumnWidth=(e,t)=>{this.grid.getColElements()[e].style.width=t},this.grid=e,this.columnResizeSeparator=e.getColumnResizeSeparator()}startDrag(e,t){var i;this.initializeResizing(e),this.resizeReason=Le.Mouse,this.startMousePosition=t,this.startHeaderCellPosition=this.getHeaderCellPosition(this.columnIndex),document.addEventListener("pointermove",this.boundOnDocumentPointerMoveHandler),document.body.classList.add(he.ResizeCursor),null===(i=this.grid.getScrollViewer())||void 0===i||i.startAutoScrolling(Ne.Horizontal,this.boundOnDocumentPointerMoveHandler)}autoFitColumnWidth(e){if(this.isResizing)return;const t=_e.calculateContentWidths(this.grid).get(this.columnsInfo[e]);if(void 0!==t){this.resizeReason=Le.DblClick,this.initializeResizing(e);const i=t-this.getColumnOffsetWidth(e),n=i>1?Math.ceil(i):Math.floor(i);this.performResize(n),requestAnimationFrame((()=>setTimeout((()=>this.finalizeResizing(!1)))))}}anchorFocused(e){this.resizeReason=Le.Keyboard,this.initializeResizing(e)}anchorUnfocused(){this.finalizeResizing(!1)}stopDrag(){this.finalizeResizing(!1)}cancelDrag(){this.timeoutId&&clearTimeout(this.timeoutId),this.finalizeResizing(!0)}performMoveStep(e){if(this.resizeReason===Le.Mouse)return;let t=e===Me.Right?1:-1;this.isReverseResizing&&(t*=-1);const i=this.calculateDiffByMoveStep(t);this.performResize(i),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>this.createNotificationAction()()),500)}initializeResizing(e){var t;this._tableContainerWidth=this.grid.getTableContainerWidth(),this.columnResizeSeparator=this.grid.getColumnResizeSeparator(),e=this.calculateResizingColumnIndex(e),this._columnIndex=e,this.initialColumnWidths.clear();const i=this.grid.getColElements();for(let e=0;e<i.length;++e)this.initialColumnWidths.set(e,i[e].style.width);this.initializeResizingCore();const n=this.columnsInfo[e],s=null!==(t=n.parentPath.find((e=>e.getRightLeaf()===n)))&&void 0!==t?t:n,r=this.grid.getHeaderCell(s.headerRowIndex,s.headerCellIndex);r&&this.columnResizeSeparator.show(r,this.isReverseResizing),this.grid.updateEmptyColumnVisibility()}performResize(e){var t;e=Math.round(e),this.performResizeCore(e),requestAnimationFrame((()=>this.grid.styleGenerator.updateFixedCellsStyle())),null===(t=this.columnResizeSeparator)||void 0===t||t.render()}finalizeResizing(e){var t,i;if(!this.resizeReason)return;this.resizeReason===Le.Mouse&&(document.removeEventListener("pointermove",this.boundOnDocumentPointerMoveHandler),document.body.classList.remove(he.ResizeCursor),null===(t=this.grid.getScrollViewer())||void 0===t||t.stopAutoScrolling(),this.startMousePosition=-1,this.startHeaderCellPosition=-1),null===(i=this.columnResizeSeparator)||void 0===i||i.hide();let n=null;if(e){this.cancelResizeCore();const e=this.grid.getColElements();this.initialColumnWidths.forEach(((t,i)=>{t!==e[i].style.width&&(e[i].style.width=t)})),this.initialColumnWidths.clear(),requestAnimationFrame((()=>this.grid.styleGenerator.updateFixedCellsStyle()))}else n=this.createNotificationAction(),this.finalizeResizeCore();this.grid.updateEmptyColumnVisibility(),this.resizeReason=void 0,this._columnIndex=void 0,this._tableContainerWidth=void 0,this.timeoutId&&clearTimeout(this.timeoutId),n&&n()}createNotificationAction(){const e=this.applyResizingAndGetChangedColumns(),t=e.map((e=>e.uID)),i=e.map((e=>e.width));return()=>{this.grid.onColumnWidthsChanged(t,i)}}getHeaderCellPosition(e){var t;const i=this.grid.findHeaderCellByColumnIndex(e);return null!==(t=null==i?void 0:i.getBoundingClientRect().x)&&void 0!==t?t:-1}onPointerMove(e){const t=this.getHeaderCellPosition(this.columnIndex);let i=e.pageX-this.startMousePosition;if(this.isReverseResizing)i*=-1;else{i+=this.startHeaderCellPosition-t}this.performResize(i)}calculateResizingColumnIndex(e){return e}}class ze extends Ve{constructor(){super(...arguments),this.columnInitialWidth=-1,this.columnNewWidth=-1,this.nextColumnInitialWidth=-1,this.nextColumnNewWidth=-1,this.nextColumnIndex=-1,this.totalPercents=0,this.totalFreeWidth=0}get nextColumnInfo(){return this.columnsInfo[this.nextColumnIndex]}get isReverseResizing(){return!1}calculateDiffByMoveStep(e){return this.columnNewWidth-this.columnInitialWidth+Math.min(5,Math.ceil((this.columnInitialWidth+this.nextColumnInitialWidth)/100))*e}initializeResizingCore(){this.columnInitialWidth=this.getColumnOffsetWidth(this.columnIndex),this.columnNewWidth=this.columnInitialWidth,this.nextColumnIndex=this.columnIndex+1,this.nextColumnInitialWidth=this.getColumnOffsetWidth(this.nextColumnIndex),this.nextColumnNewWidth=this.nextColumnInitialWidth;for(let e=0;e<this.columnsInfo.length;++e){const t=this.columnsInfo[e];t.isPercentWidth&&(this.totalPercents+=t.getPercents()),t.isFreeWidth&&(this.totalFreeWidth+=this.getColumnOffsetWidth(e))}}performResizeCore(e){this.columnNewWidth=this.columnInitialWidth+e,this.columnNewWidth<this.currentColumnInfo.minWidth&&(this.columnNewWidth=this.currentColumnInfo.minWidth),this.nextColumnNewWidth=this.columnInitialWidth+this.nextColumnInitialWidth-this.columnNewWidth;const t=this.columnInitialWidth+this.nextColumnInitialWidth-this.nextColumnInfo.minWidth;this.columnNewWidth>t&&(this.columnNewWidth=t,this.nextColumnNewWidth=this.nextColumnInfo.minWidth),requestAnimationFrame((()=>{this.isResizing&&(this.setColumnWidth(this.columnIndex,`${this.columnNewWidth}px`),this.setColumnWidth(this.nextColumnIndex,`${this.nextColumnNewWidth}px`))}))}cancelResizeCore(){this.reset()}applyResizingAndGetChangedColumns(){const e=[];if(this.currentColumnInfo.isPercentWidth||this.nextColumnInfo.isPercentWidth)return this.currentColumnInfo.isPercentWidth?this.calculateNewWidthsForPercentColumn(this.currentColumnInfo,this.columnNewWidth,this.columnInitialWidth,this.nextColumnInfo,this.nextColumnNewWidth,this.nextColumnInitialWidth):this.calculateNewWidthsForPercentColumn(this.nextColumnInfo,this.nextColumnNewWidth,this.nextColumnInitialWidth,this.currentColumnInfo,this.columnNewWidth,this.columnInitialWidth);{const t=0!==this.totalPercents,i=(this.currentColumnInfo.isFreeWidth||this.nextColumnInfo.isFreeWidth)&&!t;if((this.currentColumnInfo.isAbsoluteWidth||this.currentColumnInfo.isFreeWidth&&t)&&(this.currentColumnInfo.updateWidth(`${this.columnNewWidth}px`),e.push(this.currentColumnInfo)),i){const t=this.totalFreeWidth+(this.currentColumnInfo.isFreeWidth?this.columnNewWidth-this.columnInitialWidth:0)+(this.nextColumnInfo.isFreeWidth?this.nextColumnNewWidth-this.nextColumnInitialWidth:0);for(let i=0;i<this.columnsInfo.length;++i){const n=this.columnsInfo[i];n.isFreeWidth&&(n.updateWidth(100*this.getColumnOffsetWidth(i)/t+"%"),e.push(n))}}}return e.includes(this.nextColumnInfo)||(this.nextColumnInfo.updateWidth(`${this.nextColumnNewWidth}px`),e.push(this.nextColumnInfo)),e}calculateNewWidthsForPercentColumn(e,t,i,n,s,r){const o=[],a=(e,t,i)=>e*t/i,l=e.getPercents(),A=a(l,t,i);if(e.updateWidth(e.colElementWidth===e.width?`${A}%`:`${t}px`),o.push(e),n.isPercentWidth)n.updateWidth(`${a(n.getPercents(),s,r)}%`),o.push(n);else{n.updateWidth(`${s}px`),o.push(n);const t=this.totalPercents-l+A;if(t>100){const i=t/this.totalPercents;for(let t=0;t<this.columnsInfo.length;++t){const n=this.columnsInfo[t];n.isPercentWidth&&(n.updateWidth(n.getPercents()/i+"%"),n!==e&&o.push(n))}}}return o}finalizeResizeCore(){this.reset()}reset(){this.columnInitialWidth=-1,this.columnNewWidth=-1,this.nextColumnInitialWidth=-1,this.nextColumnNewWidth=-1,this.nextColumnIndex=-1,this.totalFreeWidth=0,this.totalPercents=0}}class We extends Ve{constructor(){super(...arguments),this.enforcedColumnWidths=new Map,this.columnInitialWidth=-1,this.columnsInitialTotalWidth=-1,this.columnNewWidth=-1}get isReverseResizing(){return"right"===this.currentColumnInfo.fixedPosition}calculateDiffByMoveStep(e){return this.columnNewWidth-this.columnInitialWidth+Math.min(5,Math.ceil(2*this.columnInitialWidth/100))*e}initializeResizingCore(){if(this.columnInitialWidth=this.getColumnOffsetWidth(this.columnIndex),this.columnNewWidth=this.columnInitialWidth,this.currentColumnInfo.fixedPosition){let e=this.tableContainerWidth;for(let t=0;t<this.columnsInfo.length;++t){const i=this.columnsInfo[t];i!==this.currentColumnInfo&&i.fixedPosition&&(e-=this.getColumnOffsetWidth(t))}this.columnMaxWidth=Math.max(this.columnInitialWidth,e)}this.enforcedColumnWidths.clear();for(let e=0;e<this.columnsInfo.length;++e){const t=this.columnsInfo[e];if(!t.isIndent&&!t.isEmpty&&!t.isAbsoluteWidth){const t=`${this.getColumnOffsetWidth(e)}px`;this.setColumnWidth(e,t),this.enforcedColumnWidths.set(e,t)}}}performResizeCore(e){let t=this.columnInitialWidth+e;if(t<this.currentColumnInfo.minWidth&&(t=this.currentColumnInfo.minWidth),this.columnMaxWidth&&t>this.columnMaxWidth&&(t=this.columnMaxWidth),this.isReverseResizing){const e=this.columnsInitialTotalWidth-this.columnInitialWidth;e+t<this.tableContainerWidth&&(t=this.tableContainerWidth-e)}this.columnNewWidth=t;const i=this.columnIndex;requestAnimationFrame((()=>{this.isResizing&&this.setColumnWidth(i,`${t}px`)}))}cancelResizeCore(){this.reset()}applyResizingAndGetChangedColumns(){const e=[],t=this.columnsInfo,i=t[this.columnIndex];return i.updateWidth(`${this.columnNewWidth}px`),e.push(i),this.enforcedColumnWidths.forEach(((n,s)=>{const r=t[s];r!==i&&(r.updateWidth(n),e.push(r))})),e}calculateResizingColumnIndex(e){if("right"===this.columnsInfo[e].fixedPosition){let t=0;for(let e=0;e<this.columnsInfo.length;++e)this.columnsInfo[e].isEmpty||(t+=this.getColumnOffsetWidth(e));if(this.columnsInitialTotalWidth=t,t<this.tableContainerWidth)return e-1}return e}finalizeResizeCore(){this.reset()}reset(){this.columnInitialWidth=-1,this.columnsInitialTotalWidth=-1,this.columnNewWidth=-1,this.enforcedColumnWidths.clear(),this.columnMaxWidth=void 0}}class $e extends de{constructor(){super(),this.cell=null,this.leftSide=!1,this.parentWidth=0,this.tableContainerResizeObserver=new ResizeObserver(this.onTableContainerSizeChanged.bind(this)),this.boundOnTableContainerScroll=this.onTableContainerScroll.bind(this)}get tableContainer(){return this._tableContainer}initializeComponent(){super.initializeComponent(),this.initializeTableContainer(),this.tableContainer.addEventListener("scroll",this.boundOnTableContainerScroll),this.tableContainerResizeObserver.observe(this.tableContainer)}initializeTableContainer(){this._tableContainer=this.closest(`.${xe.ContentContainerClassName}`)}disposeComponent(){super.disposeComponent(),this.tableContainer.removeEventListener("scroll",this.boundOnTableContainerScroll),this.tableContainerResizeObserver.unobserve(this.tableContainer)}show(e,t){this.cell=e,this.leftSide=t,this.classList.add($e.ActiveColumnResizeSeparator),this.render()}hide(){this.cell=null,this.leftSide=!1,this.classList.remove($e.ActiveColumnResizeSeparator),this.style.transform="none"}render(){requestAnimationFrame((()=>{if(!this.cell)return;const e=this.getColumnSeparatorPosition(this.cell),t=this.getBorderWidth(this.cell),i=$e.getCenteredByBorderPosition(e,this.offsetWidth,t),n=this.getActualHeight(),s=this.cell.offsetTop;this.style.transform=s>0?`translate(${i},${s}px)`:`translateX(${i})`,n>0&&(this.style.height=n-s+"px")}))}onTableContainerScroll(){this.render()}onTableContainerSizeChanged(e){const t=e[0].contentRect.width;this.parentWidth!==t&&(this.parentWidth=t,this.render())}getColumnSeparatorPosition(e){const t=e.offsetLeft-this.tableContainer.scrollLeft;return this.leftSide?t:t+e.offsetWidth}getActualHeight(){const e=this.tableContainer.querySelector(`.${ue.DataTableClassName} > tfoot`);if(!e)return 0;const t=e.getBoundingClientRect().height;return this.tableContainer.getBoundingClientRect().height-t}getBorderWidth(e){var t;const i=$e.getBorderWidthByElement(e,"border-right-width");if(i>0)return i;const n=null===(t=this.cell)||void 0===t?void 0:t.nextElementSibling;return n&&$e.getBorderWidthByElement(n,"border-left-width")}static getBorderWidthByElement(e,t){const i=getComputedStyle(e),n=i.getPropertyValue(t);return parseFloat(n)||parseFloat(i.borderWidth)}static getCenteredByBorderPosition(e,t,i){return e-(t-i)/2+"px"}}$e.ActiveColumnResizeSeparator=he.Active;const Ge="data-column-uid",qe="data-parent-column-uid";var Xe;!function(e){e[e.ItemMoving=0]="ItemMoving",e[e.Stop=1]="Stop",e[e.Cancel=2]="Cancel"}(Xe||(Xe={}));class Ye{constructor(e){this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.reorderContext=null,this.reorderingCallback=e}start(e,t,i){const n=e.map((e=>e.getBoundingClientRect())),s=e.map((e=>e.getAttribute(Ge))),r=e.map((e=>e.getAttribute(qe))),o=e.map((e=>e.getAttribute("data-column-fixed-position"))),a=e.indexOf(t),l=Ye.populateItemGroup(a,s,r),A=t.parentElement,d=Ye.calcOffsetParentY(A),c=Ye.calculateReorderIntervals(n,l,s,r,o),h=Ye.findInterval(c,0);this.reorderContext={state:Xe.ItemMoving,startY:i.y,currentY:i.y,offsetParentStartY:d,offsetParent:A,draggingItemIndices:l,draggingItem:t,items:e,intervals:c,initialInterval:h,currentInterval:h},this.refreshUI(),document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler)}stop(){this.end(Xe.Stop)}cancel(){this.end(Xe.Cancel)}end(e){null!=this.reorderContext&&(this.reorderContext.state=e,this.refreshUI(),document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler))}onDocumentMouseMove(e){null!=this.reorderContext&&(this.reorderContext.currentY=e.y,this.refreshUI())}refreshUI(){if(null==this.reorderContext)return;const e=this.reorderContext.offsetParentStartY-Ye.calcOffsetParentY(this.reorderContext.offsetParent),t=this.reorderContext.currentY-this.reorderContext.startY+e;let i=Ye.findInterval(this.reorderContext.intervals,t);this.reorderContext.state===Xe.Cancel&&(i=this.reorderContext.initialInterval),this.reorderContext.currentInterval=i,this.applyTransformations(t)}applyTransformations(e){requestAnimationFrame((()=>{if(null==this.reorderContext)return;const t=this.reorderContext.currentInterval;if(null==t)return;const i=this.reorderContext.state===Xe.ItemMoving&&e>=t.top&&e<=t.bottom;for(let n=0;n<t.transforms.length;n++){let s=t.transforms[n];this.reorderContext.draggingItemIndices.includes(n)&&i&&(s=e),this.reorderContext.items[n].style.transform="translate(0, "+s+"px)"}this.reorderingCallback(this.reorderContext.items,t.itemIndices,this.reorderContext.draggingItemIndices,this.reorderContext.state)}))}static calcOffsetParentY(e){return e.getBoundingClientRect().y-e.scrollTop}static calculateReorderIntervals(e,t,i,n,s){const r=t[0],o=t.length,a=Ye.calcIntervalBounds(e,r,i,n,s),l=Array.from(Array(e.length).keys());l.splice(r,o);const A=Math.ceil(Ye.calculateTotalGroupHeight(t,e)/o),d=a.map((e=>{const i=Array.from(l),n=e.itemIndex>r?1:0,s=e.itemIndex!==r?i.indexOf(e.itemIndex)+n:e.itemIndex;return i.splice(s,0,...t),{top:e.top,bottom:e.bottom,itemIndices:i,transforms:this.calcItemsTransformations(i,A),itemIndex:e.itemIndex}}));return d}static calcIntervalBounds(e,t,i,n,s){const r=Array.from(Array(e.length).keys()),o=s[t],a=n[t];let l=0!==t?r.slice(0,t).reverse():[],A=t!==r.length-1?r.slice(t+1):[];s.some((e=>null!==e))&&(l=l.filter((e=>s[e]===o)),A=A.filter((e=>s[e]===o))),n.some((e=>null!==e))&&(l=l.filter((e=>n[e]===a)),A=A.filter((e=>n[e]===a)));const d=l.map((e=>Ye.populateItemGroup(e,i,n))),c=A.map((e=>Ye.populateItemGroup(e,i,n))),h=this.calcIntervalBoundsCore(e,d,!0),u=this.calcIntervalBoundsCore(e,c,!1),p=[];h.reverse();for(let e=0;e<h.length;e++){const t=h[e];p.push({top:-1*t.bottom,bottom:-1*t.top,itemIndex:t.itemIndex})}return p.push({top:p.length>0?p[p.length-1].bottom+1:0,bottom:u.length>0?u[0].top-1:0,itemIndex:t}),p.concat(u)}static calcIntervalBoundsCore(e,t,i=!0){if(0===t.length)return[];let n=0;const s=[];for(let i=0;i<t.length;i++){const r=Ye.calculateTotalGroupHeight(t[i],e);s.push(n+Math.ceil(r/2)),n+=r}s.push(n);const r=[];for(let e=0;e<s.length-1;e++){const n=t[e];r.push({top:1+s[e],bottom:s[e+1],itemIndex:n[i?0:n.length-1]})}return r}static calcItemsTransformations(e,t){const i=[];for(let n=0;n<e.length;n++){let s=0;const r=e.indexOf(n)-n;0!==r&&(s=t*r),i.push(s)}return i}static findInterval(e,t){for(let i=0;i<e.length;i++)if(t>=e[i].top&&t<=e[i].bottom)return e[i];return t<e[0].top?e[0]:t>e[e.length-1].bottom?e[e.length-1]:null}static populateItemGroup(e,t,i){const n=[e],s=new Set;s.add(t[e]);for(let r=e+1;r<t.length;r++){const e=i[r];e&&s.has(e)&&(n.push(r),s.add(t[r]))}return n}static calculateTotalGroupHeight(e,t){return e.reduce(((e,i)=>e+t[i].height),0)}}class Je{constructor(){this.action=null,this.handle=null}execute(e){this.cancel(),this.action=e,this.handle=setTimeout((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.handle=null,this.action=null}),0)}cancel(){this.handle&&(clearTimeout(this.handle),this.action=null,this.handle=null)}}class je{static isZero(e){return Math.abs(e)<Number.EPSILON}static areClose(e,t){if(e===t)return!0;const i=(Math.abs(e)+Math.abs(t)+10)*Number.EPSILON,n=e-t;return-i<n&&i>n}static greaterThan(e,t){return e>t&&!je.areClose(e,t)}static lessThan(e,t){return e<t&&!je.areClose(e,t)}static lessThanOrClose(e,t){return!(e>=t)||je.areClose(e,t)}static greaterThanOrClose(e,t){return!(e<=t)||je.areClose(e,t)}static toRange(e,t,i){const n=Math.min(t,i),s=Math.max(t,i);return Math.min(Math.max(e,n),s)}static findNumber(e){if(null==e)return null;const t=e.match(/\d+/);return t&&(null==t?void 0:t.length)>0?parseInt(t[0]):null}}class Ze{get x(){return this._x}get y(){return this._y}constructor(e,t){this._x=e,this._y=t}}Ze.zero=new Ze(0,0);class et{static areClose(e,t){return je.areClose(e.x,t.x)&&je.areClose(e.y,t.y)}static equals(e,t){return e.x===t.x&&e.y===t.y}static add(e,t){return new Ze(e.x+t.x,e.y+t.y)}static sub(e,t){return new Ze(e.x-t.x,e.y-t.y)}}class tt{get width(){return this.widthField}get height(){return this.heightField}constructor(e,t){this.widthField=e,this.heightField=t}}tt.Empty=new tt(0,0);class it{get end(){return this._end}get start(){return this._start}get size(){return Math.abs(this.end-this.start)}constructor(e,t){this._start=e,this._end=t}static rectToRange(e,t){return t?new it(e.left,e.right):new it(e.top,e.bottom)}}class nt{get topLeft(){return new Ze(this.x,this.y)}get topRight(){return new Ze(this.x+this.width,this.y)}get bottomLeft(){return new Ze(this.x,this.y+this.height)}get bottomRight(){return new Ze(this.x+this.width,this.y+this.height)}get x(){return this.xField}get y(){return this.yField}get width(){return this.widthField}get height(){return this.heightField}get isEmpty(){return je.lessThanOrClose(this.width,0)||je.lessThanOrClose(this.height,0)}get left(){return this.x}get top(){return this.y}get right(){return this.isEmpty?Number.NEGATIVE_INFINITY:this.x+this.width}get bottom(){return this.isEmpty?Number.NEGATIVE_INFINITY:this.y+this.height}get size(){return new tt(this.width,this.height)}constructor(e,t,i,n){this.xField=e,this.yField=t,this.widthField=i,this.heightField=n}static create(e,t){return new nt(e.x,e.y,t.width,t.height)}static createFromPoints(e,t){return new nt(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.abs(e.x-t.x),Math.abs(e.y-t.y))}}nt.Empty=new nt(0,0,0,0);class st{static fromDomRect(e){return new nt(e.left,e.top,e.width,e.height)}static offset(e,t){return new nt(e.x+t.x,e.y+t.y,e.width,e.height)}static areSame(e,t){return je.areClose(e.x,t.x)&&je.areClose(e.y,t.y)&&je.areClose(e.width,t.width)&&je.areClose(e.height,t.height)}static intersectsWith(e,t){return!e.isEmpty&&!t.isEmpty&&(t.left<=e.right&&t.right>=e.left&&t.top<=e.bottom&&t.bottom>=e.top)}static intersect(e,t){if(!st.intersectsWith(e,t))return nt.Empty;const i=Math.max(e.left,t.left),n=Math.max(e.top,t.top),s=Math.max(Math.min(e.right,t.right)-i,0),r=Math.max(Math.min(e.bottom,t.bottom)-n,0);return new nt(i,n,s,r)}static contains(e,t){return!e.isEmpty&&(t.x>=e.x&&t.x-e.width<=e.x&&t.y>=e.y&&t.y-e.height<=e.y)}static parse(e){const t=e.split(",");if(4!==t.length)throw new Error("incorrect parameters number");return new nt(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]))}}class rt{static getRelativeElementRect(e,t=null){const i=null!=t?st.fromDomRect(t.getBoundingClientRect()):nt.Empty,n=st.fromDomRect(e.getBoundingClientRect());return new nt(n.x-i.x+window.scrollX,n.y-i.y+window.scrollY,n.width,n.height)}static getParent(e,t){const i=this.getParentCore(e,t);return"html"===(null==i?void 0:i.nodeName.toLowerCase())?null:i}static getParentCore(e,t){if(t){if(e&&e.assignedSlot)return e.assignedSlot}if(e.parentNode)return e.parentNode;return e&&e.host?e.host:null}static findParent(e,t,i=!0){let n=rt.getParent(e,i);for(;n;){if(n&&t(n))return n;n=rt.getParent(n,i)}return null}static*getRootPathAndSelf(e,t=null,i=!0){yield e;for(const n of rt.getRootPath(e,t,i))yield n}static*getRootPath(e,t=null,i=!0){let n=rt.getParent(e,i);for(;n&&n!==t;)yield n,n=rt.getParent(n,i)}static getScrollParent(e){var t;return e?["html","body","#document"].indexOf(null!==(t=Te.getNodeName(e))&&void 0!==t?t:"")>=0?null:e instanceof HTMLElement&&Te.isScrollable(e)?e:rt.getScrollParent(rt.getParent(e,!0)):null}static getRealOffsetParent(e){return e instanceof HTMLElement&&!Te.isFixedPositioning(e)?e.offsetParent:null}static getOffsetParent(e){let t=rt.getRealOffsetParent(e);for(;t&&Te.isTableElement(t)&&"static"===getComputedStyle(t).position;)t=rt.getRealOffsetParent(t);return t}static containsElement(e,t){var i;if(!t)return!1;const n=t.getRootNode();if(e.contains(t))return!0;if(n&&n instanceof ShadowRoot){let n=t;do{if(n&&e.isSameNode(n))return!0;n=null!==(i=null==n?void 0:n.parentNode)&&void 0!==i?i:null}while(n)}return!1}static getScrollParents(e){if(!e)return[];const t=rt.getScrollParent(e);if(!t)return[];const i=new Array(t),n=rt.getParent(t,!0);if(!n)return i;const s=this.getScrollParents(n);return i.concat(s)}static getClippingRoot(e){return rt.findParent(e,(e=>e instanceof HTMLElement&&Te.isFixedPositioning(e)),!0)}static getClippingParents(e){const t=rt.getScrollParents(rt.getParent(e,!0)),i=rt.getClippingRoot(e);return t.filter(i?e=>e instanceof HTMLElement&&e!==i&&!rt.containsElement(e,i):e=>e instanceof HTMLElement)}}function ot(e){return ht(e,["popup","addEventListener","removeEventListener"])}function at(e){return ht(e,["closeAsync","processCapturedPointerAsync","addEventListener","removeEventListener","contains","focus","positionChanged","renderedVisible"])}function lt(e){return ht(e,["logicalParent"])}function At(e){return ht(e,["logicalChildren","addLogicalChild","removeLogicalChild"])}function dt(e){return ht(e,["adaptivityEnabled"])}function ct(e){return ht(e,["processCapturedPointerAsync","processCapturedKeyDownAsync"])}function ht(e,t){if(0===t.length)throw new Error("empty interface");for(const i of t)if(!(i in e))return!1;return!0}class ut{static getParent(e,t){var i;return lt(e)&&null!==(i=e.logicalParent)&&void 0!==i?i:rt.getParent(e,t)}static findParent(e,t,i=!0){for(const n of ut.getRootPath(e,null,i)){if(n&&t(n))return n}return null}static containsElement(e,t){return!!t&&null!==ut.findParent(t,(t=>t===e))}static*getRootPath(e,t=null,i=!0){let n=ut.getParent(e,i);for(;n&&n!==t;)yield n,n=ut.getParent(n,i)}}class pt{static isFocused(e){return e===document.activeElement}static isFocusWithin(e,t=!1){return t?ut.containsElement(e,document.activeElement):rt.containsElement(e,document.activeElement)}static restoreFocus(e){e.focus({preventScroll:!1})}static cancelRestoreFocus(){this.restoreFocusAction.cancel()}static unfocus(){pt.cancelRestoreFocus();const e=document.activeElement;e&&e.blur()}}pt.restoreFocusAction=new Je;class mt{static register(e,t){var i;null===(i=window.Blazor)||void 0===i||i.registerCustomEventType(e,{createEventArgs:t})}}class gt extends CustomEvent{constructor(e,t){super(gt.eventName,{detail:new Ct(e,t),bubbles:!0,composed:!0,cancelable:!0})}}gt.eventName="dxbl-keyboard-navigator.shortcut";class Ct{constructor(e,t){this.Event=e,this.Info=JSON.stringify(t)}}mt.register(gt.eventName,(e=>{const t=e.detail;return{Key:t.Event.key,Code:t.Event.code,CtrlKey:t.Event.ctrlKey,AltKey:t.Event.altKey,ShiftKey:t.Event.shiftKey,MetaKey:t.Event.metaKey,Info:t.Info}}));let ft=-1;function vt(){return function(){if(ft>-1)return ft;const e=document.createElement("DIV");e.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(e);const t=document.createElement("P");e.appendChild(t),t.style.cssText="width: 100%; height: 200px;";const i=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;return i===n&&(n=e.clientWidth),ft=(i-n)*window.devicePixelRatio,document.body.removeChild(e),ft}()/window.devicePixelRatio}class bt{constructor(e=-1,t=-1){this.width=e,this.height=t}static getDimentionValue(e,t){let i=-1;if(t in e){const n=parseFloat(e[t]);i=Number.isNaN(n)?-1:n}return i}static from(e){if(!e)return new bt;const t=this.getDimentionValue(e,"width"),i=this.getDimentionValue(e,"height");return new bt(t,i)}}function wt(e){return t=e,h.Browser.IE?function(e){return null==e||h.Browser.IE&&null==e.parentNode?0:e.getBoundingClientRect().left+di()}(t):h.Browser.Firefox&&h.Browser.Version>=3||h.Browser.WebKitFamily||h.Browser.Edge?Bt(t):window.getAbsolutePositionX_Other(t);var t}function yt(e){return function(e){if(h.Browser.IE)return function(e){return null==e||h.Browser.IE&&null==e.parentNode?0:e.getBoundingClientRect().top+ci()}(e);return h.Browser.Firefox&&h.Browser.Version>=3||h.Browser.WebKitFamily||h.Browser.Edge?Et(e):window.getAbsolutePositionY_Other(e)}(e)}function Bt(e){if(null==e)return 0;return e.getBoundingClientRect().left+di()}function Et(e){if(null==e)return 0;return e.getBoundingClientRect().top+ci()}function It(e,t,i){return e-=function(e,t){return function(e,t){const i=function(e){const t=document.createElement("DIV");return t.style.top="0px",t.style.left="0px",t.visibility="hidden",t.style.position=T.DomUtils.getCurrentStyle(e).position,t}(e);"static"===i.style.position&&(i.style.position="absolute");e.parentNode.appendChild(i);const n=t?wt(i):yt(i);return e.parentNode.removeChild(i),n}(e,t)}(t,i),e}function St(e,t){try{let i;const n=xt(e);if(!n){const t=Dt(e);if(!t)return!1;i=t.split(" ")}const s=t.split(" ");for(let e=s.length-1;e>=0;e--)if(n){if(-1===n.indexOf(s[e]))return!1}else if(i.indexOf(s[e])<0)return!1;return!0}catch(e){return!1}}function xt(e){return e.classList?[].slice.call(e.classList):Dt(e).replace(/^\s+|\s+$/g,"").split(/\s+/)}function Dt(e){return"svg"===e.tagName?e.className.baseVal:e.className}function Ft(e,t){return t||(t=0),null!=e&&e.length>t?e[t]:null}function Tt(e,t,i){if(null!=e){const n=function(e,t){const i=t.toUpperCase();let n=null;return e&&(e.getElementsByTagName?(n=e.getElementsByTagName(i),0===n.length&&(n=e.getElementsByTagName(t))):e.all&&void 0!==e.all.tags&&(n=h.Browser.Netscape?e.all.tags[i]:e.all.tags(i))),n}(e,t);return Ft(n,i)}return null}let Ht=null;function Ut(){return Ht&&![...document.styleSheets].every((e=>e!==Ht))||(Ht=function(e){if(!e.createStyleSheet){const t=e.createElement("STYLE");return Tt(e,"HEAD",0).appendChild(t),t.sheet}try{return e.createStyleSheet()}catch(e){throw new Error("The CSS link limit (31) has been exceeded. Please enable CSS merging or reduce the number of CSS files on the page. For details, see https://supportcenter.devexpress.com/ticket/details/k18487/.")}}(document)),Ht}function Pt(e,t,i){for(;null!=e;){if("BODY"===e.tagName||"#document"===e.nodeName)return null;if(i(e,t))return e;e=e.parentNode}return null}function Qt(e,t,i){return Pt(e,t,i)}function Nt(e,t){return Pt(e,t,St)}function Rt(e,t,i){e&&(e[t]=i)}function Lt(e){if(!e)return null;let t=null;if("string"==typeof e){const i=document.querySelector("#"+e);if(i)e=i;else try{const i=JSON.parse(e);i&&i.__internalId&&(t=i.__internalId)}catch(e){}}if(!t&&e.__internalId&&(t=e.__internalId),t){e=document.querySelector("["+("_bl_"+t)+"]")}return e&&e.tagName&&null!==e.parentNode||(e=null),e}function Mt(e,t){e.removeAttribute?e.removeAttribute(t):e.removeProperty&&e.removeProperty(t)}function kt(e,t,i){i?Rt(e,t,i):Mt(e,t)}function Kt(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return T.DomUtils.pxToInt(i.marginLeft)+T.DomUtils.pxToInt(i.marginRight)}function Ot(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return T.DomUtils.pxToInt(i.marginTop)+T.DomUtils.pxToInt(i.marginBottom)}function _t(e,t){return function(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return parseInt(i.paddingLeft)+parseInt(i.paddingRight)}(e,t)+zt(e,t)}function Vt(e,t){return function(e,t){const i=t||T.DomUtils.getCurrentStyle(e);return parseInt(i.paddingTop)+parseInt(i.paddingBottom)}(e,t)+function(e,t){t||(t=h.Browser.IE&&9!==h.Browser.MajorVersion&&window.getComputedStyle?window.getComputedStyle(e):T.DomUtils.getCurrentStyle(e));let i=0;"none"!==t.borderTopStyle&&(i+=parseFloat(t.borderTopWidth));"none"!==t.borderBottomStyle&&(i+=parseFloat(t.borderBottomWidth));return i}(e,t)}function zt(e,t){t||(t=h.Browser.IE&&window.getComputedStyle?window.getComputedStyle(e):T.DomUtils.getCurrentStyle(e));let i=0;return"none"!==t.borderLeftStyle&&(i+=parseFloat(t.borderLeftWidth)),"none"!==t.borderRightStyle&&(i+=parseFloat(t.borderRightWidth)),i}const Wt=window.requestAnimationFrame||function(e){e()};function $t(e){return Wt(e)}const Gt=function(e){this.requestFrame=e,this.cache=[[]],this.isInFrame=!1,this.frameTimestamp=null,this.isWaiting=!1,this.getBuffer=function(e){return e||(e=0),this.cache.length<=e&&(this.cache[e]=[]),this.cache[e]},this.execute=function(e,t){if(!this.isInFrame)return!1;let i=this.cache[t||0];return null===i?e(qt,this.frameTimestamp):(i=this.getBuffer(t)).push(e),!0},this.runAll=function(e){this.isWaiting=!1,this.isInFrame=!0,this.frameTimestamp=e;for(let e=0;e<this.cache.length;e++){const t=this.cache[e];if(t)for(this.cache[e]=null;t.length;)t.shift()(qt,this.frameTimestamp)}this.waitNextFrame()},this.waitNextFrame=function(){this.cache=[[]],this.isInFrame=!1,this.isWaiting=!1},this.requestExecution=function(e,t){const i=this;return new Promise((function(n){function s(t,i){n(e(t,i))}i.execute(s,t)||(i.getBuffer(t).push(s),!1===i.isWaiting&&(i.isWaiting=!0,i.requestFrame(i.runAll.bind(i))))}))}};let qt=null;function Xt(e){const t=new Gt(e);return t.requestExecution.bind(t)}const Yt=Xt((function(e){return qt=$t(e)})),Jt=Xt((function(e){return Yt((function(){setTimeout(e)}))}));function jt(e){return Yt(e)}function Zt(e){return Jt(e)}let ei=[];const ti=50;function ii(e){const t=ei.indexOf(e);t<0||ei.splice(t,1)}function ni(e,t){const i=function(e,t,i){return function(){if(e.compareDocumentPosition(document.body)&window.Node.DOCUMENT_POSITION_DISCONNECTED)return!1;const n=T.DomUtils.getCurrentStyle(e);if("auto"===n.width)return!0;const s=Math.ceil(parseFloat(n.width))-_t(e),r=Math.ceil(parseFloat(n.height))-Vt(e);if(i.width!==s||i.height!==r){var o=bt.from(i);i.width=s,i.height=r,t(i,o)}return!0}}(e,t,{width:-1,height:-1});return function(e){0===ei.length?(ei.push(e),Zt(si)):ei.push(e)}(i),i}function si(){ei=ei.filter((function(e){return e()})),ei.length>0&&setTimeout((function(){Zt(si)}),ti)}function ri(e,t){null===t.inlineStyles?Mt(e,"style"):function(e,t){const i=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push({attr:e,value:t[e]});if(1===i.length)e.style[i[0].attr]=i[0].value;else{let n="";if(e.style.cssText){const i=e.style.cssText.split(";").map((function(e){return e.trim().split(":")}));for(let e=0;e<i.length;e++){const s=i[e];2===s.length&&void 0===t[s[0]]&&(n+=s[0]+":"+s[1].trim()+";")}}for(let e=0;e<i.length;e++){const t=i[e];""!==t.value&&(n+=t.attr+":"+t.value+";")}kt(e,"style",n)}}(e,t.inlineStyles);for(const i in t.attributes)Object.prototype.hasOwnProperty.call(t,i)&&kt(e,i,t.attributes[i]);const i=xt(t);if(i){const n=t.cssClassToggleInfo,s=i.filter((function(e){return!1!==n[e]}));for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&n[e]&&-1===s.indexOf(e)&&s.push(e);const r=s.join(" ");r?function(e,t){"svg"===e.tagName?e.className.baseVal=t.trim():e.className=t.trim()}(e,r):Mt(e,"class")}}function oi(e,t){if(void 0!==e.length){for(let i=0;i<e.length;i++)oi(e[i],t);return}const i=e;i._dxCurrentFrameElementStateInfo?t(i._dxCurrentFrameElementStateInfo):(t(i._dxCurrentFrameElementStateInfo=function(e){return{inlineStyles:{},cssClassToggleInfo:{},className:Dt(e),attributes:{}}}(i)),jt((function(){ri(i,i._dxCurrentFrameElementStateInfo),i._dxCurrentFrameElementStateInfo=null})))}function ai(e){oi(e,(function(e){e.inlineStyles=null,e.cssClassToggleInfo[he.InvisibleOffScreen]=!1}))}function li(e,t,i){oi(e,(function(e){e.cssClassToggleInfo[t]=i}))}function Ai(e,t){if(!e)return null;if(e.closest)return e.closest(t);do{if((e.matches||e.msMatchesSelector).call(e,t))return e;e=e.parentElement||e.parentNode}while(e&&"BODY"!==e.tagName);return null}function di(){return h.Browser.Edge?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:h.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft}function ci(){return h.Browser.WebKitFamily||h.Browser.Edge?h.Browser.MacOSMobilePlatform?window.pageYOffset:h.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop}function hi(e){return e+"px"}function ui(e){return Boolean(e.compareDocumentPosition(document.body)&window.Node.DOCUMENT_POSITION_DISCONNECTED)}function pi(e){if(!e.style)return!1;return function(e){return"static"!==e.position||function(e){return!("none"===e.transform&&!e["will-change"].includes("transform"))||(!("none"===e.perspective&&!e["will-change"].includes("perspective"))||(!("none"===e.filter&&!e["will-change"].includes("filter"))||!!e.contain?.includes("paint")))}(e)}(window.getComputedStyle(e))}function mi(e){return"svg"===e.tagName?e.getBoundingClientRect().width:e.offsetWidth}const gi={focusElement:function(e){"string"==typeof e&&(e=document.querySelector(e)),e&&e.focus()},setInputAttribute:function(e,t,i){(e=Lt(e))&&Rt(e,t,i)},setCheckInputIndeterminate:function(e,t){e&&(e.indeterminate=t)}};class Ci{static isFocusedElement(e){return e===document.activeElement}static scheduleResetTabIndex(e){Ci.resetTabIndexAction.cancel(),Ci.elementsToResetTabIndex.push(e),Ci.resetTabIndexAction.execute((()=>{Ci.elementsToResetTabIndex.forEach((e=>Ci.removeTabIndex(e))),Ci.elementsToResetTabIndex.splice(0)}))}static focusElement(e,t=!1){e&&e.focus({preventScroll:t})}static makeElementFocusable(e){e.tabIndex<0&&!e.hasAttribute("tabIndex")&&kt(e,"tabIndex","0")}static removeTabIndex(e){e.tabIndex>=0&&kt(e,"tabIndex")}static findPrevFocusableElement(e){const t=Ci.findFocusableElements(document),i=t.findIndex((t=>t===e)),n=i-1;return n>=0?t[n]:null}static findNextFocusableNotChildElement(e){const t=Ci.findFocusableElements(document),i=Ci.findFocusableElements(e),n=t.findIndex((t=>t===e)),s=n+i.length+1;return s<t.length?t[s]:null}static findFocusableElementInRootPath(e){var t;return null!==(t=[...rt.getRootPathAndSelf(e)].find((e=>e.tabIndex>-1||this.isRootWidget(e))))&&void 0!==t?t:null}static isRootWidget(e){return"string"==typeof e.className&&e.className.includes("dxbl-kbn-root-widget")}static findFocusableElements(e){return Array.from(e.querySelectorAll(k)).filter(((e,t,i)=>Ci.isElementFocusable(e,i)))}static isElementFocusable(e,t){if(e.tabIndex>-1&&Ci.isElementVisible(e)&&!Te.isHidden(e)){const i=e;return"radio"!==(null==i?void 0:i.type)||Ci.isRadioButtonFocusable(i,t)}return!1}static isElementVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}static isRadioButtonFocusable(e,t){return!!e.checked||!((t=t.filter((t=>(null==t?void 0:t.name)===e.name))).findIndex((t=>e!==t&&t.checked))>0)&&e===t[0]}static findItemElementIndexByChild(e,t){const i=e.findIndex((e=>e===t));return i>-1?i:e.findIndex((e=>rt.containsElement(e,t)))}}function fi(e,t){return function(e,t){const i=[];for(let n=0;n<e.length;n++){const s=e[n];if(t.has(s)){const e=t.get(s);e&&i.push(e)}}return i}([...rt.getRootPathAndSelf(e)],t)}Ci.elementsToResetTabIndex=[],Ci.resetTabIndexAction=new Je;class vi{constructor(...e){this.dispose=()=>{this.dispose=()=>{},e.forEach((e=>{"function"==typeof e?e():e&&e.dispose()}))}}}const bi=new WeakMap;function wi(e){const t=bi.get(e);t&&(bi.delete(e),t())}function yi(e,t){return bi.set(e,t),new vi((()=>wi(e)))}const Bi="data-dx-focus-hidden";function Ei(e){e.setAttribute(Bi,"")}function Ii(e){e.removeAttribute(Bi)}function Si(e){return null!==e.getAttribute(Bi)}function xi(e){let t=e;function i(e){const i="mousedown"===e.type&&0===e.detail,n=null==t?void 0:t.hasAttribute(Bi);i||!t||n||ut.containsElement(t,e.target)&&Ei(t)}function n(e){if(!t)return;const i=e.relatedTarget;i&&!ut.containsElement(t,i)&&document.hasFocus()&&Ii(t)}function s(e){t&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&Ii(t)}const r=document.documentElement;return r.addEventListener("touchstart",i),r.addEventListener("mousedown",i),t.addEventListener("keydown",s),t.addEventListener("focusout",n),()=>{r.removeEventListener("touchstart",i),r.removeEventListener("mousedown",i),null==t||t.removeEventListener("keydown",s),null==t||t.removeEventListener("focusout",n),t=null}}function Di(e){if(!e)return;wi(e);yi(e,xi(e))}function Fi(e){return null!==e&&e.matches(k)}var Ti;!function(e){e[e.MouseDown=0]="MouseDown",e[e.KeyDown=1]="KeyDown",e[e.KeyUp=2]="KeyUp"}(Ti||(Ti={}));function Hi(e){return"getPortal"in e}const Ui=new class{get keyboardEventProcessed(){return this._keyboardEventProcessed}get processingKeyCode(){return this._processingKeyCode}constructor(){this.lastInputMethod=null,this.boundOnKeyDownHandler=this.handleKeyDown.bind(this),this.boundOnKeyUpHandler=this.handleKeyUp.bind(this),this.boundOnMouseDownHandler=this.handleMouseDown.bind(this),this.boundOnFocusInHandler=this.handleFocusIn.bind(this),this.navigators=new Map,this.lockTreeLineActivation=!1,this.leavingToDocument=!1,this._keyboardEventProcessed=!1,this._processingKeyCode=null,setTimeout(this.addEventSubscriptions.bind(this))}register(e){const t=e.targetElement;this.navigators.has(t)||this.navigators.set(t,e)}remove(e){const t=e.targetElement;this.navigators.has(t)&&this.navigators.delete(t)}addFocusHiddenAttributes(e){this.forEachNavigatorInTreeLine(e,(e=>e.addFocusHiddenAttribute()))}removeFocusHiddenAttributes(e){this.forEachNavigatorInTreeLine(e,(e=>!e.removeFocusHiddenAttribute()))}addEventSubscriptions(){document.addEventListener("keydown",this.boundOnKeyDownHandler,{capture:!0}),document.addEventListener("keyup",this.boundOnKeyUpHandler,{capture:!0}),document.addEventListener("mousedown",this.boundOnMouseDownHandler,{capture:!0}),document.addEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}handleKeyDown(e){this.lastInputMethod=Ti.KeyDown,this._processingKeyCode=Be.KeyUtils.getEventKeyCode(e),this.handleKeyboardEvent(e,((t,i)=>t.onKeyDown(e,i)))}handleKeyUp(e){this.lastInputMethod=Ti.KeyUp,this.handleKeyboardEvent(e,((t,i)=>t.onKeyUp(e,i))),this._processingKeyCode=null}handleKeyboardEvent(e,t){this._keyboardEventProcessed=!0,this.forEachNavigatorInTreeLine(e.target,((i,n,s,r)=>{if(t(i,n)){let t=!0;if(i.leaveDirection!==Qi.None){t=this.leaveFromNavigator(i,s<r.length-1?r[s+1]:null)}return t&&H.markHandled(e,!1),this.removeFocusHiddenAttributes(n),!0}return i.getIsNestedContentSelected(n)}))}handleMouseDown(e){this.lastInputMethod=Ti.MouseDown,this.activateTreeLine(e,!1),function(e){const t=e.target;return!!t&&(t.scrollHeight>t.clientHeight&&e.offsetX>=t.clientWidth||t.scrollWidth>t.clientWidth&&e.offsetY>=t.clientHeight)}(e)||this.updateActiveState(e.target)}handleFocusIn(e){this.leavingToDocument||(this.updateActiveState(e.target),this.activateTreeLine(e,!0),this._keyboardEventProcessed=!1)}getNavigatorsTreeLine(e){return function(e,t){let i=[];do{const n=fi(e,t),s=n[n.length-1];i=i.concat(...n),e=s&&Hi(s)?s.getPortal():null}while(e);return i}(e,this.navigators)}activateTreeLine(e,t){if(this.lockTreeLineActivation)return;this.lockTreeLineActivation=!0;this.activateTreeLineCore(e,e.target,t),this.lockTreeLineActivation=!1}activateTreeLineCore(e,t,i){this.forEachNavigatorInTreeLine(t,((n,s,r)=>{if(n.updateSelectedItems(s,t,e),0!==r)return!1;n.activateStrategyTreeLine(e,t,i,this.lastInputMethod);const o=n.findLastSelectedStrategy();return!(!o||!o.isTransitContainer||Hi(n))&&(this.lockTreeLineActivation=!1,o.switchToNestedContent(),!0)}))}forEachNavigatorInTreeLine(e,t){var i;const n=this.getNavigatorsTreeLine(e);for(let s=0;s<n.length;s++){const r=n[s];if(t(r,e,s,n))break;const o=Hi(r)?r:null;o&&(e=null!==(i=o.getPortal())&&void 0!==i?i:e)}}updateActiveState(e){let t=null;if(null!==(i=e)&&null!==i.closest(k)){const i=fi(e,this.navigators);t=i.length>0?i[0]:null}var i;this.navigators.forEach((e=>{e.isActive=e===t}))}leaveFromNavigator(e,t){const i=e.leaveDirection===Qi.Backward,n=(i?Ci.findPrevFocusableElement:Ci.findNextFocusableNotChildElement)(e.targetElement),s=e.getSelectedItemElement(),r=null==t?void 0:t.getSelectedItemElement(),o=!s||r&&r.contains(s)?r:null;if(n&&(!o||o.contains(n)&&o!==n))Ci.focusElement(n);else{if(!t)return this.leaveToDocument(e,i),!1;t.captureFocus(e.leaveDirection)}return!0}leaveToDocument(e,t){const i=Ci.findFocusableElements(e.targetElement),n=t||0===i.length?e.targetElement:i[i.length-1];Ci.isFocusedElement(n)||(this.leavingToDocument=!0,Ci.focusElement(n,!0),this.leavingToDocument=!1)}},Pi="dxbl-keyboard-navigator";var Qi,Ni;!function(e){e[e.None=0]="None",e[e.Backward=1]="Backward",e[e.Forward=2]="Forward"}(Qi||(Qi={})),function(e){e.NearestItem="NearestItem",e.LastActiveItem="LastActiveItem"}(Ni||(Ni={}));class Ri extends HTMLElement{constructor(){super(),this._isActive=!1,this._initialized=!1,this._leaveDirection=Qi.None,this._owner=null,this._rootStrategy=null,this.unsubscribeFocusHiding=null,this.strategies=new Map,this._componentReactivateMode=Ni.LastActiveItem,this._focusedFromForwardElement=!1,this.contentChangedObserver=new MutationObserver(this.onContentChanged.bind(this))}get rootStrategy(){return this._rootStrategy}get isActive(){return this._isActive}set isActive(e){this.updateActiveState(e)}get leaveDirection(){return this._leaveDirection}get initialized(){return this._initialized&&!!this._rootStrategy}get targetElement(){return this.owner}get owner(){return this._owner}get focusedFromForwardElement(){return this._focusedFromForwardElement}get preventScrollOnFocus(){return!Ui.keyboardEventProcessed}attributeChangedCallback(e,t,i){"reactivate-mode"===e&&(this._componentReactivateMode=Ni[i])}initialize(e,t,i=null){this._initialized=!1,this._owner=e,this._rootStrategy=t,Ci.makeElementFocusable(this.targetElement),this.register(i),this.unsubscribeFocusHiding=xi(this.targetElement),this.attachStrategy(this._rootStrategy),this._rootStrategy.initialize(),pt.isFocusWithin(this.targetElement)&&this.updateSelectedItems(document.activeElement),this._initialized=!0}reinitialize(){this._initialized=!1,this._rootStrategy&&(this._rootStrategy.initialize(),this.isActive&&this._rootStrategy.activate()),this._initialized=!0}disconnectedCallback(){this.disposeComponent()}disposeComponent(){var e;this.disposeStrategies(),this._rootStrategy=null,this.contentChangedObserver.disconnect(),null===(e=this.unsubscribeFocusHiding)||void 0===e||e.call(this),this.removeFocusHiddenAttribute(),Ui.remove(this)}attachStrategy(e){e&&this.strategies.set(e.targetElement,e)}getStrategy(e){var t;return e&&this.strategies.has(e)&&null!==(t=this.strategies.get(e))&&void 0!==t?t:null}getIsNestedContentSelected(e){const t=this.getStrategiesPath(e).findIndex((e=>e.nestedContentSelected));return t>=0}onKeyDown(e,t){return this.handleKeyboardEvent(t,(t=>t.handleKeyDown(e)))}onKeyUp(e,t){return this.handleKeyboardEvent(t,(t=>t.handleKeyUp(e)))}dispatchShortcutEvent(e){const t=this.collectShortcutInfo(e);this.dispatchEvent(new gt(e,t))}captureFocus(e=Qi.None){var t;null===(t=this.findLastSelectedStrategy())||void 0===t||t.captureFocus(e)}leaveFocus(e){this._leaveDirection=e?Qi.Backward:Qi.Forward}leaveFromNavigator(){Ui.leaveFromNavigator(this,null)}leaveTransitContainer(e){var t;const i=null===(t=this.findLastSelectedStrategy())||void 0===t?void 0:t.targetElement;if(!i)return;const n=this.getStrategiesPath(i),s=n.length>1?n[1]:null;null==s||s.handleTransitNavigation(e)}getSelectedItemElement(){var e;return null===(e=this.findLastSelectedStrategy())||void 0===e?void 0:e.selectedItemElement}addFocusHiddenAttribute(){return Ei(this.targetElement),!0}removeFocusHiddenAttribute(){return this.targetElement&&Ii(this.targetElement),!0}passFocusHiddenAttribute(e){Ui.addFocusHiddenAttributes(e)}updateSelectedItems(e,t=e,i=null){const n=this.getStrategiesPath(e);for(let s=0;s<n.length;s++){const r=0===s,o=n[s];o.updateSelectedItemByChildElement(e,i),e===t&&o.canSwitchToNestedContentMode()&&(o.nestedContentSelected=r)}}activateStrategyTreeLine(e,t,i,n){if(i&&this.tryActivateFromPreviousFocusedSibling(e,n))return;const s=this.getStrategiesPath(t);if(0===s.length)return;const r=s[0],o=r===this._rootStrategy;o&&r.activate(),o&&1!==s.length||this.handleSelectedItemFocus(r,t)}tryActivateFromPreviousFocusedSibling(e,t){const i=e.relatedTarget;if(!i||this.targetElement.contains(i))return!1;const n=e.target,s=Ci.findPrevFocusableElement(n),r=Ci.findNextFocusableNotChildElement(n);if(i!==s&&i!==r)return!1;if(i===r&&(null==s?void 0:s.contains(n))&&t===Ti.MouseDown)return!1;const o=this.getStrategiesPath(n);return 0!==o.length&&(this.updateAndActivateRootStrategy(o[0],i,r),!0)}handleSelectedItemFocus(e,t){var i;let n=e.selectedItemElement===t;if(!n){const s=Ci.findFocusableElementInRootPath(t);e.selectedItemElement!==s&&(null===(i=e.selectedItemElement)||void 0===i?void 0:i.contains(s))||(n=!0)}n&&(e.resetNestedContentSelectedRecursive(),e.focusSelectedItem())}updateAndActivateRootStrategy(e,t,i){if(e.resetNestedContentSelectedRecursive(),this._rootStrategy){if(this._focusedFromForwardElement=t===i,this._componentReactivateMode===Ni.NearestItem){this._rootStrategy.updateSelectedItemByIndex(t===i?this._rootStrategy.itemCount-1:0)}this._rootStrategy.activate()}}updateActiveState(e){this._isActive!==e&&(this._isActive=e,this.strategies.forEach((t=>t.onActiveStateChanged(e))))}register(e){const t=["disabled"];e&&t.push(e),this.contentChangedObserver.observe(this.targetElement,{childList:!0,subtree:!0,attributeFilter:t}),Ui.register(this)}onContentChanged(){this.detachDisconnectedStrategies(),this.reinitialize()}getStrategiesPath(e){return fi(e,this.strategies)}findLastSelectedStrategy(){var e,t;return null!==(t=null===(e=this._rootStrategy)||void 0===e?void 0:e.findLastSelectedStrategy())&&void 0!==t?t:null}handleKeyboardEvent(e,t){this._leaveDirection=Qi.None;const i=this.getStrategiesPath(e);for(let e=0;e<i.length;e++){const n=i[e];if(t(n))return!0;if(n.nestedContentSelected)return!1}return!1}detachDisconnectedStrategies(){var e;const t=Array.from(this.strategies.keys()).filter((e=>!e.isConnected));for(const i of t)null===(e=this.strategies.get(i))||void 0===e||e.onDispose(),this.strategies.delete(i)}disposeStrategies(){this.strategies.forEach((e=>e.onDispose()))}collectShortcutInfo(e){const t=this.getStrategiesPath(e.target).map((e=>e.getShortcutContext()));return Object.assign({},...t)}}customElements.define(Pi,Ri);class Li{constructor(e,t,i=!1){this._isTransitContainer=!1,this._nestedContentSelected=!1,this._selectedItemIndex=0,this._savedSelectedItemElement=null,this._leaveDirection=Qi.None,this._navigator=e,this._targetElement=t,this._items=[],this._isTransitContainer=i,this._isMacOSPlatform=$().isMac}get navigator(){return this._navigator}get targetElement(){return this._targetElement}get itemCount(){return this.items.length}get selectedItemElement(){return this.items[this.selectedItemIndex]}get nestedContentSelected(){return this._nestedContentSelected}set nestedContentSelected(e){this._nestedContentSelected=e&&this.canFocusSelectedItem()}get preventScrollOnFocus(){return this._navigator.preventScrollOnFocus}get nearestVisibleSelectedIndex(){const e=this.findVisibleItemIndex(this.selectedItemIndex,!0,!0);return e>=0?e:this.findVisibleItemIndex(this.selectedItemIndex,!1,!1)}get selectedItemIndex(){return this._selectedItemIndex}set selectedItemIndex(e){this._selectedItemIndex=e}get isTransitContainer(){return this._isTransitContainer}get leaveDirection(){return this._leaveDirection}get items(){return this._items}get firstItemSelected(){return this.findVisibleItemIndex(this.selectedItemIndex,!1,!1)<0}get lastItemSelected(){return this.findVisibleItemIndex(this.selectedItemIndex,!0,!1)<0}get isObsolete(){return!1}get isMacOSPlatform(){return this._isMacOSPlatform}getShortcutContext(){return{}}initialize(){this.storeSelection(),this.items.splice(0);const e=this.queryItems().filter((e=>!!e));0===e.length&&e.push(this.targetElement),e.forEach((e=>this.initializeItemStrategy(e))),this.tryRestoreSelection()}activate(){this.selectItem(this.nearestVisibleSelectedIndex)}onDispose(){var e;(null===(e=this.selectedItemElement)||void 0===e?void 0:e.isConnected)&&Ci.removeTabIndex(this.selectedItemElement)}getItem(e){return this.items[e]}getSelectedItemStrategy(){return this.navigator.getStrategy(this.selectedItemElement)}focusSelectedItem(){this.canFocusSelectedItem()&&(!this.preventScrollOnFocus&&this.selectedItemElement&&this.selectedItemElement.scrollIntoView({block:"nearest"}),Ci.focusElement(this.selectedItemElement,this.preventScrollOnFocus))}isIndexWithinBoundaries(e){return e>=0&&e<this.itemCount}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(this.nestedContentSelected){if(t===Be.KeyCode.Esc)return this.processEscapeKeyDown();if(t===Be.KeyCode.Tab)return this.processTabKeyDown(e.shiftKey);this.isImmediatelyClickEnabled()&&this.hasSingleFocusableElement()&&this.leaveFromNestedContent()}return!this.nestedContentSelected&&t===Be.KeyCode.Enter&&this.processEnter(e)}handleKeyUp(e){return!1}switchToNestedContent(){if(this.nestedContentSelected&&this.isNestedElementFocused())return!0;if(this.selectedItemElement){const e=this.getNestedContentElement();if(e)return this.nestedContentSelected=!0,Ci.focusElement(e,this.preventScrollOnFocus),!0}return!1}leaveFromNestedContent(e=Qi.None){this.nestedContentSelected=!1,this.isTransitContainer?(this._leaveDirection=e,this.navigator.isActive=!0,this.leaveDirection!==Qi.None&&this.leaveTransitContainer(this.leaveDirection),this._leaveDirection=Qi.None):this.focusSelectedItem()}resetNestedContentSelectedRecursive(){this.nestedContentSelected=!1;if(!(this.targetElement===this.selectedItemElement)){const e=this.getSelectedItemStrategy();null==e||e.resetNestedContentSelectedRecursive()}}captureFocus(e=Qi.None){this.nestedContentSelected&&this.leaveFromNestedContent(e)}findLastSelectedStrategy(){const e=this.getSelectedItemStrategy();return e&&e!==this?e.findLastSelectedStrategy():this}updateSelectedItemByIndex(e){const t=this.selectedItemElement;this.selectedItemIndex=this.validateItemIndex(e),t&&this.selectedItemElement!==t&&(this.canManageTabIndex(t)&&Ci.scheduleResetTabIndex(t),this.nestedContentSelected=!1),this.selectedItemElement&&this.canFocusSelectedItem()&&this.canManageTabIndex(this.selectedItemElement)&&Ci.makeElementFocusable(this.selectedItemElement)}canManageTabIndex(e){return!0}updateSelectedItemByChildElement(e,t=null){const i=this.findItemElementIndexByChild(e);(i>-1||e===this.targetElement)&&this.updateSelectedItemByIndex(i)}canSwitchToNestedContentMode(){return!1}onActiveStateChanged(e){}handleTransitNavigation(e){const t=e===Qi.Backward,i=t?this.moveToPrevItem:this.moveToNextItem;(t?this.firstItemSelected:this.lastItemSelected)?((t?this.leaveBackward:this.leaveForward).call(this),this.navigator.leaveFromNavigator()):i.call(this)}leaveTransitContainer(e){this.navigator.leaveTransitContainer(e)}createItemStrategy(e){return null}getItemStrategy(e){const t=this.validateItemIndex(e);return this.navigator.getStrategy(this.getItem(t))}queryItems(){return new Array}queryItemsBySelector(e){return Array.from(this.targetElement.querySelectorAll(e))}selectItem(e){var t;this.updateSelectedItemByIndex(e),this.canFocusSelectedItem()?this.navigator.isActive&&!this.isNestedElementFocused()&&this.focusSelectedItem():null===(t=this.getItemStrategy(this.nearestVisibleSelectedIndex))||void 0===t||t.activate()}moveToPrevItem(e=!1){const t=this.findVisibleItemIndex(this.selectedItemIndex,!1,!1);t>=0?this.selectItem(t):e&&this.moveToLastItem()}moveToNextItem(e=!1){const t=this.findVisibleItemIndex(this.selectedItemIndex,!0,!1);t>=0?this.selectItem(t):e&&this.moveToFirstItem()}moveToFirstItem(){const e=this.findVisibleItemIndex(0,!0,!0);e>=0&&this.selectItem(e)}moveToLastItem(){const e=this.findVisibleItemIndex(this.itemCount,!1,!1);e>=0&&this.selectItem(e)}isImmediatelyClickEnabled(){return!1}raiseClickEvent(e,t,i,n){const s=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:t,metaKey:i,shiftKey:n});e.dispatchEvent(s)}performShortcutEvent(e){this.navigator.dispatchShortcutEvent(e)}validateItemIndex(e){return e=Math.max(e,0),Math.min(e,this.itemCount-1)}leaveBackward(){this.navigator.leaveFocus(!0)}leaveForward(){this.navigator.leaveFocus(!1)}getNestedContentContainer(){return this.selectedItemElement}getNestedContentElement(){const e=this.findFocusableElements();return e.length>0?e[0]:null}findItemElementIndexByChild(e){return Ci.findItemElementIndexByChild(this.items,e)}tryRestoreSelectedItem(e){if(e.isConnected){const t=this.items.indexOf(e);t>-1&&(this.selectedItemIndex=t)}}isVisibleItem(e){const t=this.getItem(e);return!!t&&!Te.isHidden(t,this.navigator.targetElement)}findVisibleItemIndex(e,t,i){const n=i?e:e+(t?1:-1);return n<0||n>=this.itemCount?-1:this.isVisibleItem(n)?n:this.findVisibleItemIndex(n,t,!1)}initializeItemStrategy(e){this.items.push(e);let t=this.navigator.getStrategy(e);t&&!t.isObsolete||(null==t||t.onDispose(),t=this.createItemStrategy(e),this.navigator.attachStrategy(t)),t&&t!==this&&t.initialize()}canFocusSelectedItem(){return this.targetElement===this.selectedItemElement||!this.getSelectedItemStrategy()}processEnter(e){return!(!this.isImmediatelyClickEnabled()||!this.processImmediatellyClick(e))||this.switchToNestedContent()}processEscapeKeyDown(){return this.leaveFromNestedContent(Qi.None),!0}processTabKeyDown(e){if(this.selectedItemElement){const t=this.findFocusableElements();if(t.length>0){const i=Ci.isFocusedElement(t[0]),n=Ci.isFocusedElement(t[t.length-1]);let s=null;if(e&&i&&(s=Qi.Backward),!e&&n&&(s=Qi.Forward),s)return this.leaveFromNestedContent(s),!0}}return!1}findFocusableElements(){return Ci.findFocusableElements(this.getNestedContentContainer())}processImmediatellyClick(e){const t=this.getNestedContentElement();return!(!t||!this.hasSingleFocusableElement())&&(this.raiseClickEvent(t,e.ctrlKey,e.metaKey,e.shiftKey),!0)}hasSingleFocusableElement(){return 1===this.findFocusableElements().length}isNestedElementFocused(){if(!document.activeElement||!this.nestedContentSelected)return!1;return Ci.findItemElementIndexByChild(this.items,document.activeElement)===this.selectedItemIndex}storeSelection(){this._savedSelectedItemElement=this.selectedItemElement}tryRestoreSelection(){return!!this._savedSelectedItemElement&&(this.tryRestoreSelectedItem(this._savedSelectedItemElement),this._savedSelectedItemElement=null,!0)}}class Mi{get x(){return this._x}get y(){return this._y}get source(){return this._source}constructor(e,t,i){this._source=i,this._y=t,this._x=e}}class ki extends Mi{get deltaX(){return this.deltaXField}get deltaY(){return this.deltaYField}constructor(e,t,i,n,s){super(i,n,s),this.deltaXField=e,this.deltaYField=t}}class Ki extends CustomEvent{constructor(e,t){super(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0})}}class Oi extends Ki{constructor(e){super(Oi.eventName,e)}}Oi.eventName="dxthumbdragstarted";class _i extends Ki{constructor(e){super(_i.eventName,e)}}_i.eventName="dxthumbdragdelta";class Vi extends Ki{constructor(e){super(Vi.eventName,e)}}Vi.eventName="dxthumbdragcompleted";class zi{constructor(e){this.outsideClickHandler=this.handleOutsideClick.bind(this),this.thumbElement=e}preventOutsideClick(e){h.Browser.Firefox&&0===e.button&&document.addEventListener("click",this.outsideClickHandler,{capture:!0,once:!0})}cancelOutsideClickPrevention(){document.removeEventListener("click",this.outsideClickHandler,{capture:!0})}handleOutsideClick(e){document.elementFromPoint(e.clientX,e.clientY)!==this.thumbElement&&H.markHandled(e)}}class Wi extends HTMLElement{constructor(){super(...arguments),this.pointerDownHandler=this.handlePointerDown.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.pointerLostCaptureHandler=this.lostPointerCapture.bind(this),this.pointerGotCaptureHandler=this.pointerGotCapture.bind(this),this.pointerMoveHandler=this.pointerMove.bind(this),this.pointerCancelHandler=this.pointerCancel.bind(this),this.touchStartHandler=this.touchStart.bind(this),this.visibilityChangeHandler=this.handleVisibilityChange.bind(this),this._isDragging=!1,this._isCaptured=!1,this.capturedPointer=null,this.previousPoint=new Ze(0,0),this.firefoxOutsideClickHandler=new zi(this)}connectedCallback(){n.setLoaded(this),this.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),this.addEventListener("pointerup",this.pointerUpHandler,{capture:!0}),this.addEventListener("lostpointercapture",this.pointerLostCaptureHandler,{capture:!0}),this.addEventListener("gotpointercapture",this.pointerGotCaptureHandler,{capture:!0}),this.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),this.addEventListener("pointercancel",this.pointerCancelHandler,{capture:!0}),this.addEventListener("touchstart",this.touchStartHandler,{capture:!0,passive:!1}),document.addEventListener("visibilitychange",this.visibilityChangeHandler)}disconnectedCallback(){n.removeLoaded(this),this.removeEventListener("pointerdown",this.pointerDownHandler),this.removeEventListener("pointerup",this.pointerUpHandler),this.removeEventListener("lostpointercapture",this.pointerLostCaptureHandler),this.removeEventListener("gotpointercapture",this.pointerGotCaptureHandler),this.removeEventListener("pointermove",this.pointerMoveHandler),this.removeEventListener("pointercancel",this.pointerCancelHandler),this.removeEventListener("touchstart",this.touchStartHandler),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.firefoxOutsideClickHandler.cancelOutsideClickPrevention()}get isDragging(){return this._isDragging}get isCaptured(){return this._isCaptured}cancelDrag(e=null){if(this.isDragging){this._isDragging=!1,e?this.releaseCapture(e.pointerId):this.capturedPointer&&this.releaseCapture(this.capturedPointer),n.removeAttribute(this,Wi.dragging);const t=e?new Ze(e.pageX,e.pageY):this.previousPoint,i=new Vi(new Mi(t.x,t.y,e));this.dispatchEvent(i)}}markHandled(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}handleVisibilityChange(e){this.isDragging&&"visible"!==document.visibilityState&&this.cancelDrag()}touchStart(e){this.isDragging&&e.cancelable&&e.preventDefault()}pointerGotCapture(e){if(e.target===this)return;if(!this.isDragging)return;const t=e.target;null==t||t.releasePointerCapture(e.pointerId),this._isCaptured=!1,this.pointerCapture(e)}pointerCancel(e){e.target===this&&(this.hasPointerCapture(e.pointerId)||this.cancelDrag(e))}pointerCapture(e){this._isCaptured||(this.setPointerCapture(e.pointerId),this._isCaptured=!0,this.capturedPointer=e.pointerId)}releaseCapture(e){this._isCaptured&&(this.releasePointerCapture(e),this._isCaptured=!1,this.capturedPointer=null)}handlePointerDown(e){if(this.isDragging)return;const t=e.target;(null==t?void 0:t.hasPointerCapture(e.pointerId))&&t.releasePointerCapture(e.pointerId),n.setAttribute(this,Wi.dragging),H.markHandled(e),this.focus(),this.pointerCapture(e),this._isDragging=!0,this.previousPoint=new Ze(e.pageX,e.pageY);const i=new Oi(new Mi(e.pageX,e.pageY,e));this.dispatchEvent(i),this.firefoxOutsideClickHandler.preventOutsideClick(e)}handlePointerUp(e){this.isDragging&&this.isCaptured&&(H.markHandled(e),this.cancelDrag(e))}lostPointerCapture(e){e.target===this&&(this.hasPointerCapture(e.pointerId)||this.cancelDrag(e))}pointerMove(e){this.isDragging&&e.isPrimary&&this.processMove(e)}processMove(e){const t=new Ze(e.pageX,e.pageY);if(!et.areClose(t,this.previousPoint)){H.markHandled(e);const i=new _i(new ki(t.x-this.previousPoint.x,t.y-this.previousPoint.y,e.pageX,e.pageY,e));this.dispatchEvent(i),this.previousPoint=t}}}Wi.dragging="dragging",customElements.define("dxbl-thumb",Wi);const $i="data-virtual-item-index",Gi="dxbl-top-virtual-spacer-element",qi="dxbl-bottom-virtual-spacer-element",Xi="dxbl-skeleton-with-variants-data-type";class Yi extends CustomEvent{constructor(e){super(Yi.eventName,{detail:new Ji(e),bubbles:!0,composed:!0,cancelable:!0})}}Yi.eventName="dxbl-virtual-scroll-viewer.scroll";class Ji{constructor(e){this.Position=e}}class ji extends CustomEvent{constructor(e){super(ji.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}ji.eventName="dxbl-virtual-scroll-viewer.scrollparamschanged";class Zi{constructor(e,t,i,n,s,r,o){this.AverageHeight=e,this.Heights=t,this.ViewportHeight=i,this.ContentHeightConstraint=n,this.SkeletonHeight=s,this.HeaderElementHeight=r,this.FooterElementHeight=o}equals(e){return!!e&&(e.AverageHeight===this.AverageHeight&&(e.ViewportHeight===this.ViewportHeight&&(e.ContentHeightConstraint===this.ContentHeightConstraint&&(!!this.sequenceEquals(e.Heights,this.Heights)&&e.SkeletonHeight===this.SkeletonHeight))))}sequenceEquals(e,t){if(!e)return!1;if(!t)return!1;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}}class en extends CustomEvent{constructor(e,t,i){super(en.eventName,{detail:new tn(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}en.eventName="dxbl-virtual-scroll-viewer.intersectioncallback";class tn{constructor(e,t,i){this.Position=e,this.SpacerHeight=t,this.RenderStateHashCode=i}}mt.register(Yi.eventName,(e=>e.detail)),mt.register(ji.eventName,(e=>e.detail)),mt.register(en.eventName,(e=>e.detail));class nn extends Oe{constructor(){super(),this.skeletonScrollContainers=new Set,this.positionUpdateLocked=!1,this._rootMargin="0px",this._renderStateHashCode=-1,this._scrollTop=-1,this._viewportHeight=0,this._isThumbDragging=!1,this._averageItemHeight=-1,this._contentHeightConstraint=-1,this._thumbMoveTimerId=-1,this._scrollParams=null,this._renderTypeChanged=!1,this._requireInitialize=!1,this._totalItemCount=0,this._skeletonViewportItemsCount=0,this._skeletonPatternContainerClasses=null,this._skeletonHeight=0,this._headerElementHeight=0,this._footerElementHeight=0,this._lastExpectedTopVisibleIndex=0,this.pendingMakeElementVisibleParams=null,this.boundOnThumbMoveStarted=this.onThumbMoveStarted.bind(this),this.boundOnThumbMove=this.onThumbMove.bind(this),this.boundOnThumbMoveCompleted=this.onThumbMoveCompleted.bind(this),this.visibleElementMutationObserver=new MutationObserver(this.visibleElementMutationCallback.bind(this))}initializeComponent(){super.initializeComponent(),this.subscribeScrollBarEvents(),this.initialize()&&this.dispatchScrollParams()}disposeComponent(){var e,t,i;super.disposeComponent(),this.unsubscribeScrollBarEvents(),this.reset(),null===(e=this.spacerIntersectionObserver)||void 0===e||e.disconnect(),null===(t=this.spacerResizeObserver)||void 0===t||t.disconnect(),null===(i=this.contentContainerResizeObserver)||void 0===i||i.disconnect(),this.visibleElementMutationObserver.disconnect()}initialize(){if(this.contentContainer=this.getContentContainerElement(),this.itemsContainer=this.getItemsContainerElement(),this.spacerTop=this.getTopSpacer(),this.spacerBottom=this.getBottomSpacer(),this._headerElementHeight=0,this._footerElementHeight=0,this._averageItemHeight=-1,this.updateHeaderElementHeight(),this.updateFooterElementHeight(),this.contentContainer&&this.spacerTop&&this.spacerBottom){this._viewportHeight=this.contentContainer.getBoundingClientRect().height,this.contentContainerResizeObserver&&(this.contentContainerResizeObserver.disconnect(),this.contentContainerResizeObserver=void 0),this.contentContainerResizeObserver=this.createContentContainerResizeObserver(this.contentContainer),this.spacerIntersectionObserver&&(this.spacerIntersectionObserver.disconnect(),this.spacerIntersectionObserver=void 0);const e={root:this.contentContainer,rootMargin:this._rootMargin};return this.spacerIntersectionObserver=new IntersectionObserver(this.intersectionCallback.bind(this),e),this.spacerIntersectionObserver.observe(this.spacerTop),this.spacerIntersectionObserver.observe(this.spacerBottom),this.spacerResizeObserver&&(this.spacerResizeObserver.disconnect(),this.spacerResizeObserver=void 0),this.spacerResizeObserver=new ResizeObserver(this.resizeObserverCallback.bind(this)),this.spacerResizeObserver.observe(this.spacerTop),this.spacerResizeObserver.observe(this.spacerBottom),!0}return!1}get averageHeight(){return this._averageItemHeight}get skeletonHeight(){return this._skeletonHeight}get viewportHeight(){return this._viewportHeight}get totalItemCount(){return this._totalItemCount}getItemsContainerElement(){return this.querySelector("[data-virtual-items-container]")}getTopSpacer(){return this.querySelector(`[${Gi}]`)}getBottomSpacer(){return this.querySelector(`[${qi}]`)}findContentHeightConstraint(){if(this._contentHeightConstraint<0){const e=document.createElement("div");e.setAttribute("style","overflow: auto; height: 0; visibility: hidden;");const t=document.createElement("div");t.setAttribute("style","position: relative;"),e.appendChild(t),document.body.appendChild(e),this._contentHeightConstraint=this.findElementMaximumHeight(t)/2,document.body.removeChild(e)}return this._contentHeightConstraint}queryElementsSizeArray(){const e=new Array;if(this.itemsContainer){let t=0;const i=this.groupElements(this.itemsContainer.children);let n=0,s=0;for(const[r,o]of i){let a=0;for(let e=0;e<o.length;e++)a+=this.queryElementHeight(o[e]);e.push(r),e.push(a),0!==n&&n!==i.size-1&&(t+=a,s++),n++}this._averageItemHeight<0&&s>0&&t>0&&(this._averageItemHeight=nn.roundHeight(t/s))}return e}queryElementHeight(e){if(!e)return 0;const t=e.getBoundingClientRect().height;return nn.roundHeight(t)}findElementMaximumHeight(e){let t=1e6;const i=h.Browser.Firefox?8e6:Number.MAX_VALUE;for(;;){const n=2*t;e.style.height=`${n}px`;const s=e.getBoundingClientRect().height;if(n>i||s!==n)break;t=n}return t}groupElements(e){const t=new Map;let i=[];for(let n=0;n<e.length;n++){const s=e[n],r=s.getAttribute($i);this.skipElement(r)||(r&&(i=[],t.set(parseInt(r),i)),i&&i.push(s))}return t}canDispatchPositionUpdate(){return!this._isThumbDragging&&!this.positionUpdateLocked}skipElement(e){return!!e&&parseInt(e)<0}clearSelection(){if(null!==document.activeElement&&("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName))return;const e=window.getSelection?window.getSelection():document.getSelection();e&&e.rangeCount>0&&!e.isCollapsed&&e.collapseToStart()}onRefresh(e,t){super.onRefresh(e,t);const i=Math.ceil(e);Math.abs(this._scrollTop-i)>1&&(this.dispatchScrollEvent(i),this._scrollTop=i,this.clearSelection(),this.shiftSkeletonContainers())}intersectionCallback(e){for(let t=0;t<e.length;t++){const i=e[t];if(i.isIntersecting&&this.canDispatchPositionUpdate()){if(i.target===this.spacerTop){this.dispatchEvent(new en(0,i.intersectionRect.top-i.boundingClientRect.top,this._renderStateHashCode)),this.clearSelection()}if(i.target===this.spacerBottom){this.dispatchEvent(new en(1,i.boundingClientRect.bottom-i.intersectionRect.bottom,this._renderStateHashCode)),this.clearSelection()}}}}resizeObserverCallback(e){for(let t=0;t<e.length;t++){const i=e[t].target;i.hasAttribute(Gi)&&this.reconnectIntersectionObserver(this.spacerTop),i.hasAttribute(qi)&&this.reconnectIntersectionObserver(this.spacerBottom)}}reconnectIntersectionObserver(e){e&&this.spacerIntersectionObserver&&(this.spacerIntersectionObserver.unobserve(e),this.spacerIntersectionObserver.observe(e))}reconnectSpacerContentIntersectionObserver(){if(this._spacerContentIntersectionObserver&&(this._spacerContentIntersectionObserver.disconnect(),this._spacerContentIntersectionObserver=void 0,this.skeletonScrollContainers=new Set),!this.contentContainer||!this.itemsContainer)return;const e=this.itemsContainer.getBoundingClientRect().width,t=Math.max(0,this._skeletonHeight-this._headerElementHeight)+1,i=Math.max(0,this._skeletonViewportItemsCount*this._skeletonHeight+this._headerElementHeight-this._viewportHeight)+1,n={root:this.contentContainer,rootMargin:`${t}px ${e}px ${i}px ${e}px`,threshold:.999};this._spacerContentIntersectionObserver=new IntersectionObserver(this.intersectionSkeletonsCallback.bind(this),n),this.observeSkeletonContainers(this.spacerTop),this.observeSkeletonContainers(this.spacerBottom)}observeSkeletonContainers(e){if(e&&this._spacerContentIntersectionObserver){const t=e.querySelectorAll("[dxbl-skeleton-items-container]");for(const e of t)this._spacerContentIntersectionObserver.observe(e)}}lockSpacersIntersection(){this.positionUpdateLocked=!0}unlockSpacersIntersection(){this.positionUpdateLocked=!1,this.reconnectIntersectionObserver(this.spacerTop),this.reconnectIntersectionObserver(this.spacerBottom)}reconnectHeaderResizeObserver(){super.reconnectHeaderResizeObserver(),setTimeout((()=>this.updateHeaderElementHeight()))}reconnectFooterResizeObserver(){super.reconnectFooterResizeObserver(),setTimeout((()=>this.updateFooterElementHeight()))}scheduleMakeElementVisible(e,t,i){this.lockSpacersIntersection(),super.scheduleMakeElementVisible(e,t,i)}makeElementVisible(e,t,i){super.makeElementVisible(e,t,i),this.unlockSpacersIntersection()}makeUnrenderedElementVisible(e,t,i){super.makeUnrenderedElementVisible(e,t,i),this.pendingMakeElementVisibleParams={elementSelector:e,alignVert:t,alignHor:i}}createContentContainerResizeObserver(e){const t=new ResizeObserver((e=>{this._viewportHeight=e[0].contentRect.height,this.dispatchScrollParams(),this.dispatchScrollEvent(this._scrollTop)}));return t.observe(e),t}subscribeScrollBarEvents(){const e=this.getVerticalScrollBarElement();e&&this.subscribeThumbEvents(e,this.boundOnThumbMoveStarted,this.boundOnThumbMove,this.boundOnThumbMoveCompleted)}unsubscribeScrollBarEvents(){const e=this.getVerticalScrollBarElement();e&&this.unsubscribeThumbEvents(e,this.boundOnThumbMoveStarted,this.boundOnThumbMove,this.boundOnThumbMoveCompleted)}subscribeThumbEvents(e,t,i,n){e.addEventListener(Oi.eventName,t),e.addEventListener(_i.eventName,i),e.addEventListener(Vi.eventName,n)}unsubscribeThumbEvents(e,t,i,n){e.removeEventListener(Oi.eventName,t),e.removeEventListener(_i.eventName,i),e.removeEventListener(Vi.eventName,n)}onThumbMoveStarted(e){this._isThumbDragging=!0}onThumbMove(e){-1!==this._thumbMoveTimerId&&clearTimeout(this._thumbMoveTimerId);this._thumbMoveTimerId=setTimeout((()=>{this.dispatchPositionUpdate()}).bind(this),700),this._isThumbDragging=!0}onThumbMoveCompleted(e){this.dispatchPositionUpdate()}dispatchPositionUpdate(){this._isThumbDragging=!1,clearTimeout(this._thumbMoveTimerId),this._thumbMoveTimerId=-1,this.dispatchScrollEvent(this._scrollTop),this.reconnectIntersectionObserver(this.spacerTop),this.reconnectIntersectionObserver(this.spacerBottom)}dispatchScrollEvent(e){!this.canDispatchPositionUpdate()||e<0||this.dispatchEvent(new Yi(e))}dispatchScrollParams(){if(this.isHidden())return;const e=this.queryElementsSizeArray(),t=this.findContentHeightConstraint(),i=new Zi(this._averageItemHeight,e,this._viewportHeight,t,this._skeletonHeight,this._headerElementHeight,this._footerElementHeight);i.equals(this._scrollParams)||(this._scrollParams=i,this.dispatchEvent(new ji(this._scrollParams)))}onStateChanged(e){e&&(this._renderTypeChanged&&(this._requireInitialize&&this.initialize(),this.calculateSkeletonHeight(),this._renderTypeChanged=!1),this.reconnectSpacerContentIntersectionObserver(),this.rerunSkeletonAnimation(),this.dispatchScrollParams())}rerunSkeletonAnimation(){this.classList.remove(he.SkeletonAnimateClassName),setTimeout((()=>this.classList.add(he.SkeletonAnimateClassName)))}onRenderStateChanged(e){e&&(this._renderStateHashCode=parseInt(e))}reset(){this._scrollParams=null}calculateSkeletonHeight(){if(!this._skeletonPatternContainerClasses)return;const e=document.createElement("div");e.innerHTML="&nbsp;";const t=document.createElement("div");t.appendChild(e);const i=document.createElement("div");i.setAttribute("class",`${he.VirtualSpacerPatternClassName} ${this._skeletonPatternContainerClasses}`),i.appendChild(t),document.body.appendChild(i),this._skeletonHeight=nn.roundHeight(t.getBoundingClientRect().height),document.body.removeChild(i)}updateSkeletonClasses(e,t){if(e.children.length>0){const i=t-this.getSkeletonItemIndex(e.children[0]);for(const t of e.children){const e=this.getSkeletonItemIndex(t)+i,n=t.querySelectorAll(`[${Xi}]`);for(const t of n){const i=t.getAttribute(Xi);t.setAttribute("class",`${he.SkeletonBaseClassName}-${i}-${e%5}`)}}}}shiftSkeletonContainers(){if(!this.itemsContainer)return;const e=this._scrollTop,t=this._headerElementHeight-e%this._skeletonHeight;let i=Math.floor(e/this._skeletonHeight);const n=Math.min(this._totalItemCount-this._skeletonViewportItemsCount,this._totalItemCount-1);this._averageItemHeight===this._skeletonHeight&&n>0&&(i=Math.min(i,n));for(const e of this.skeletonScrollContainers)e.setAttribute("style",`top: ${t}px`),this._lastExpectedTopVisibleIndex!==i&&this.updateSkeletonClasses(e,i);this._lastExpectedTopVisibleIndex=i}getSkeletonItemIndex(e){if(e){const t=e.getAttribute($i);if(t)return parseInt(t)}return-1}updateHeaderElementHeight(){this.headerElementRectangle=this.getElementsRectangle(this.getHeaderElements()),this.headerElementRectangle&&(this._headerElementHeight=nn.roundHeight(this.headerElementRectangle.height))}updateFooterElementHeight(){this.footerElementRectangle=this.getElementsRectangle(this.getFooterElements()),this.footerElementRectangle&&(this._footerElementHeight=nn.roundHeight(this.footerElementRectangle.height))}intersectionSkeletonsCallback(e){for(const t of e)t.isIntersecting?this.skeletonScrollContainers.add(t.target):this.skeletonScrollContainers.delete(t.target)}static roundHeight(e){return isNaN(e)?0:parseFloat(e.toFixed(2))}onSkeletonPatternContainerClassesChanged(e){this._requireInitialize=null!==this._skeletonPatternContainerClasses,this._skeletonPatternContainerClasses!==e&&(this._skeletonPatternContainerClasses=e,this._renderTypeChanged=!0)}onSkeletonViewportItemsCountChanged(e){this._requireInitialize=0!==this._skeletonViewportItemsCount;const t=parseInt(e);this._skeletonViewportItemsCount!==t&&(this._skeletonViewportItemsCount=t,this._renderTypeChanged=!0)}reconnectVisibleElementMutationObserver(){this.visibleElementMutationObserver.disconnect(),this.visibleElementMutationObserver.observe(this,{attributes:!0,attributeFilter:["data-required-visible-element"],attributeOldValue:!0,subtree:!0})}cancelRequestMakeElementVisible(){super.cancelRequestMakeElementVisible(),this.visibleElementMutationObserver.disconnect()}execRequestMakeElementVisible(e,t,i){this.reconnectVisibleElementMutationObserver(),super.execRequestMakeElementVisible(e,t,i)}visibleElementMutationCallback(e,t){if(this.pendingMakeElementVisibleParams){for(const t of e)if(t.attributeName&&t.target){const e=t.target.getAttribute(t.attributeName);if(e){const t=this.pendingMakeElementVisibleParams.elementSelector,i=this.pendingMakeElementVisibleParams.alignVert,n=this.pendingMakeElementVisibleParams.alignHor;if(t&&-1!==t.indexOf(e)){this.makeElementVisible(t,i,n);break}}}this.pendingMakeElementVisibleParams=null}}static get observedAttributes(){return["reset-v-scroll-guid","reset-h-scroll-guid","request-make-element-visible","state-has-changed","render-state-changed","header-selector","footer-selector","left-selector","right-selector","skeleton-pattern-container-classes","total-item-count","skeleton-viewport-items-count"]}attributeChangedCallback(e,t,i){switch(super.attributeChangedCallback(e,t,i),e){case"state-has-changed":setTimeout((()=>this.onStateChanged(i)));break;case"render-state-changed":this.onRenderStateChanged(i);break;case"total-item-count":this._totalItemCount=parseInt(i);break;case"skeleton-pattern-container-classes":this.onSkeletonPatternContainerClassesChanged(i);break;case"skeleton-viewport-items-count":this.onSkeletonViewportItemsCountChanged(i)}}}customElements.define("dxbl-virtual-scroll-viewer",nn);class sn{}sn.VisibleIndexName="data-visible-index",sn.SummaryItem=ue.ClassName+"-summary-item",sn.EditCell="data-edit-cell",sn.FocusedRowHidden="dxbl-grid-focused-row-hidden";const rn=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:i,elements:n}=t;return{kind:i,elements:n,finisher(t){customElements.define(e,t)}}})(e,t),on=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(i){i.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(i){i.createProperty(t.key,e)}},an=(e,t,i)=>{t.constructor.createProperty(i,e)};function ln(e){return(t,i)=>void 0!==i?an(e,t,i):on(e,t)}function An(e){return ln({...e,state:!0})}function dn(e,t){return(({finisher:e,descriptor:t})=>(i,n)=>{var s;if(void 0===n){const n=null!==(s=i.originalKey)&&void 0!==s?s:i.key,r=null!=t?{kind:"method",placement:"prototype",key:n,descriptor:t(i.key)}:{...i,key:n};return null!=e&&(r.finisher=function(t){e(t,n)}),r}{const s=i.constructor;void 0!==t&&Object.defineProperty(i,n,t(n)),null==e||e(s,n)}})({descriptor:i=>{const n={get(){var t,i;return null!==(i=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==i?i:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof i?Symbol():"__"+i;n.get=function(){var i,n;return void 0===this[t]&&(this[t]=null!==(n=null===(i=this.renderRoot)||void 0===i?void 0:i.querySelector(e))&&void 0!==n?n:null),this[t]}}return n}})}class cn{}cn.renderGuidAttributeName="dxbl-render-guid",cn.virtualElementAttributeName="dxbl-virtual-el";const hn=window,un=hn.ShadowRoot&&(void 0===hn.ShadyCSS||hn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,pn=Symbol(),mn=new WeakMap;class gn{constructor(e,t,i){if(this._$cssResult$=!0,i!==pn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(un&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=mn.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&mn.set(t,e))}return e}toString(){return this.cssText}}const Cn=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new gn(i,e,pn)},fn=un?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new gn("string"==typeof e?e:e+"",void 0,pn))(t)})(e):e;var vn;const bn=window,wn=bn.trustedTypes,yn=wn?wn.emptyScript:"",Bn=bn.reactiveElementPolyfillSupport,En={toAttribute(e,t){switch(t){case Boolean:e=e?yn:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},In=(e,t)=>t!==e&&(t==t||e==e),Sn={attribute:!0,type:String,converter:En,reflect:!1,hasChanged:In},xn="finalized";class Dn extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e,t=Sn){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const s=this[e];this[t]=n,this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Sn}static finalize(){if(this.hasOwnProperty(xn))return!1;this[xn]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(fn(e))}else void 0!==e&&t.push(fn(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{un?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const i=document.createElement("style"),n=hn.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=t.cssText,e.appendChild(i)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=Sn){var n;const s=this.constructor._$Ep(e,i);if(void 0!==s&&!0===i.reflect){const r=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:En).toAttribute(t,i.type);this._$El=e,null==r?this.removeAttribute(s):this.setAttribute(s,r),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,s=n._$Ev.get(e);if(void 0!==s&&this._$El!==s){const e=n.getPropertyOptions(s),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:En;this._$El=s,this[s]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||In)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var Fn;Dn[xn]=!0,Dn.elementProperties=new Map,Dn.elementStyles=[],Dn.shadowRootOptions={mode:"open"},null==Bn||Bn({ReactiveElement:Dn}),(null!==(vn=bn.reactiveElementVersions)&&void 0!==vn?vn:bn.reactiveElementVersions=[]).push("1.6.3");const Tn=window,Hn=Tn.trustedTypes,Un=Hn?Hn.createPolicy("lit-html",{createHTML:e=>e}):void 0,Pn="$lit$",Qn=`lit$${(Math.random()+"").slice(9)}$`,Nn="?"+Qn,Rn=`<${Nn}>`,Ln=document,Mn=()=>Ln.createComment(""),kn=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Kn=Array.isArray,On="[ \t\n\f\r]",_n=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Vn=/-->/g,zn=/>/g,Wn=RegExp(`>|${On}(?:([^\\s"'>=/]+)(${On}*=${On}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),$n=/'/g,Gn=/"/g,qn=/^(?:script|style|textarea|title)$/i,Xn=(e=>(t,...i)=>({_$litType$:e,strings:t,values:i}))(1),Yn=Symbol.for("lit-noChange"),Jn=Symbol.for("lit-nothing"),jn=new WeakMap,Zn=Ln.createTreeWalker(Ln,129,null,!1);function es(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Un?Un.createHTML(t):t}const ts=(e,t)=>{const i=e.length-1,n=[];let s,r=2===t?"<svg>":"",o=_n;for(let t=0;t<i;t++){const i=e[t];let a,l,A=-1,d=0;for(;d<i.length&&(o.lastIndex=d,l=o.exec(i),null!==l);)d=o.lastIndex,o===_n?"!--"===l[1]?o=Vn:void 0!==l[1]?o=zn:void 0!==l[2]?(qn.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Wn):void 0!==l[3]&&(o=Wn):o===Wn?">"===l[0]?(o=null!=s?s:_n,A=-1):void 0===l[1]?A=-2:(A=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?Wn:'"'===l[3]?Gn:$n):o===Gn||o===$n?o=Wn:o===Vn||o===zn?o=_n:(o=Wn,s=void 0);const c=o===Wn&&e[t+1].startsWith("/>")?" ":"";r+=o===_n?i+Rn:A>=0?(n.push(a),i.slice(0,A)+Pn+i.slice(A)+Qn+c):i+Qn+(-2===A?(n.push(void 0),t):c)}return[es(e,r+(e[i]||"<?>")+(2===t?"</svg>":"")),n]};class is{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let s=0,r=0;const o=e.length-1,a=this.parts,[l,A]=ts(e,t);if(this.el=is.createElement(l,i),Zn.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=Zn.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith(Pn)||t.startsWith(Qn)){const i=A[r++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+Pn).split(Qn),t=/([.?@])?(.*)/.exec(i);a.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?as:"?"===t[1]?As:"@"===t[1]?ds:os})}else a.push({type:6,index:s})}for(const t of e)n.removeAttribute(t)}if(qn.test(n.tagName)){const e=n.textContent.split(Qn),t=e.length-1;if(t>0){n.textContent=Hn?Hn.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],Mn()),Zn.nextNode(),a.push({type:2,index:++s});n.append(e[t],Mn())}}}else if(8===n.nodeType)if(n.data===Nn)a.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(Qn,e+1));)a.push({type:7,index:s}),e+=Qn.length-1}s++}}static createElement(e,t){const i=Ln.createElement("template");return i.innerHTML=e,i}}function ns(e,t,i=e,n){var s,r,o,a;if(t===Yn)return t;let l=void 0!==n?null===(s=i._$Co)||void 0===s?void 0:s[n]:i._$Cl;const A=kn(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==A&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===A?l=void 0:(l=new A(e),l._$AT(e,i,n)),void 0!==n?(null!==(o=(a=i)._$Co)&&void 0!==o?o:a._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(t=ns(e,l._$AS(e,t.values),l,n)),t}class ss{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,s=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Ln).importNode(i,!0);Zn.currentNode=s;let r=Zn.nextNode(),o=0,a=0,l=n[0];for(;void 0!==l;){if(o===l.index){let t;2===l.type?t=new rs(r,r.nextSibling,this,e):1===l.type?t=new l.ctor(r,l.name,l.strings,this,e):6===l.type&&(t=new cs(r,this,e)),this._$AV.push(t),l=n[++a]}o!==(null==l?void 0:l.index)&&(r=Zn.nextNode(),o++)}return Zn.currentNode=Ln,s}v(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class rs{constructor(e,t,i,n){var s;this.type=2,this._$AH=Jn,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=null===(s=null==n?void 0:n.isConnected)||void 0===s||s}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ns(this,e,t),kn(e)?e===Jn||null==e||""===e?(this._$AH!==Jn&&this._$AR(),this._$AH=Jn):e!==this._$AH&&e!==Yn&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>Kn(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Jn&&kn(this._$AH)?this._$AA.nextSibling.data=e:this.$(Ln.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,s="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=is.createElement(es(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===s)this._$AH.v(i);else{const e=new ss(s,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=jn.get(e.strings);return void 0===t&&jn.set(e.strings,t=new is(e)),t}T(e){Kn(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const s of e)n===t.length?t.push(i=new rs(this.k(Mn()),this.k(Mn()),this,this.options)):i=t[n],i._$AI(s),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class os{constructor(e,t,i,n,s){this.type=1,this._$AH=Jn,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Jn}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const s=this.strings;let r=!1;if(void 0===s)e=ns(this,e,t,0),r=!kn(e)||e!==this._$AH&&e!==Yn,r&&(this._$AH=e);else{const n=e;let o,a;for(e=s[0],o=0;o<s.length-1;o++)a=ns(this,n[i+o],t,o),a===Yn&&(a=this._$AH[o]),r||(r=!kn(a)||a!==this._$AH[o]),a===Jn?e=Jn:e!==Jn&&(e+=(null!=a?a:"")+s[o+1]),this._$AH[o]=a}r&&!n&&this.j(e)}j(e){e===Jn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class as extends os{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Jn?void 0:e}}const ls=Hn?Hn.emptyScript:"";class As extends os{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Jn?this.element.setAttribute(this.name,ls):this.element.removeAttribute(this.name)}}class ds extends os{constructor(e,t,i,n,s){super(e,t,i,n,s),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=ns(this,e,t,0))&&void 0!==i?i:Jn)===Yn)return;const n=this._$AH,s=e===Jn&&n!==Jn||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==Jn&&(n===Jn||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class cs{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){ns(this,e)}}const hs=Tn.litHtmlPolyfillSupport;null==hs||hs(is,rs),(null!==(Fn=Tn.litHtmlVersions)&&void 0!==Fn?Fn:Tn.litHtmlVersions=[]).push("2.8.0");var us,ps;class ms extends Dn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{var n,s;const r=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let o=r._$litPart$;if(void 0===o){const e=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:null;r._$litPart$=o=new rs(t.insertBefore(Mn(),e),e,void 0,null!=i?i:{})}return o._$AI(e),o})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return Yn}}ms.finalized=!0,ms._$litElement$=!0,null===(us=globalThis.litElementHydrateSupport)||void 0===us||us.call(globalThis,{LitElement:ms});const gs=globalThis.litElementPolyfillSupport;null==gs||gs({LitElement:ms}),(null!==(ps=globalThis.litElementVersions)&&void 0!==ps?ps:globalThis.litElementVersions=[]).push("3.3.3"),le();class Cs{constructor(e){this.element=e}}class fs extends CustomEvent{constructor(e){super(fs.eventName,{detail:e,bubbles:!1,composed:!1,cancelable:!1})}static create(e){return new fs(new Cs(e))}}fs.eventName="dxbl-element-connected";class vs extends CustomEvent{constructor(e){super(vs.eventName,{detail:e,bubbles:!1,composed:!1,cancelable:!1})}static create(e){return new fs(new Cs(e))}}vs.eventName="dxbl-element-disconnected";class bs extends ms{constructor(){super(...arguments),this._isDOMAttached=!1}get isDOMAttached(){return this._isDOMAttached}connectedCallback(){super.connectedCallback(),this._isDOMAttached=!0,this.readyOnConnectedCallback&&n.setLoaded(this),this.dispatchEvent(fs.create(this))}disconnectedCallback(){super.disconnectedCallback(),this._isDOMAttached=!1,this.readyOnConnectedCallback&&n.removeLoaded(this),this.dispatchEvent(vs.create(this))}get readyOnConnectedCallback(){return!0}}class ws extends bs{constructor(){super(),this._logicalParent=null,this._logicalChildren=new Array}get hasLogicalParent(){return!!this.logicalParent}get logicalParent(){return this._logicalParent}set logicalParent(e){this._logicalParent=e}get logicalChildren(){return this._logicalChildren}addLogicalChild(e){if(e.logicalParent)throw new Error("Child element already added.");this._logicalChildren.push(e),e.logicalParent=this}removeLogicalChild(e){e.logicalParent=null;const t=this._logicalChildren.indexOf(e);t>-1&&this._logicalChildren.splice(t,1)}async processCapturedKeyDownAsync(e,t){t.handled||this.logicalParent&&ct(this.logicalParent)&&await this.logicalParent.processCapturedKeyDownAsync(e,t)}async processCapturedPointerAsync(e,t){if(t.handled)return;const i=ut.findParent(this,(e=>ct(e)));i&&ct(i)&&await i.processCapturedPointerAsync(e,t)}isPointedCaptured(e){const t=ut.findParent(this,(e=>ct(e)));return null!=t}}let ys=!1;class Bs extends ws{constructor(){super(...arguments),this.boundSlotChangedHandler=this.onSlotChanged.bind(this),this.renderGuid="",this._removeEnchancedNavigationSubscription=()=>{}}contentChanged(){}connectedOrContentChanged(){}needReasignAttributes(){return!0}connectedCallback(){super.connectedCallback(),this.connectedOrContentChanged()}restoreState(){this.needReasignAttributes()&&this.constructor.observedAttributes.forEach((e=>{if(e!==cn.renderGuidAttributeName&&this.hasAttribute(e)){const t=this.getAttribute(e);this.setAttribute(e,""),this.setAttribute(e,t)}}))}attributeChangedCallback(e,t,i){var n;e===cn.renderGuidAttributeName&&t&&(null===(n=window.Blazor)||void 0===n?void 0:n.addEventListener)?this._removeEnchancedNavigationSubscription=(e=>{var t;const i=()=>{var t;ys=!0,e(),null===(t=window.Blazor)||void 0===t||t.removeEventListener("enhancedload",i),ys=!1};return null===(t=window.Blazor)||void 0===t||t.addEventListener("enhancedload",i),()=>{var e;ys||null===(e=window.Blazor)||void 0===e||e.removeEventListener("enhancedload",i)}})((()=>this.restoreState())):super.attributeChangedCallback(e,t,i)}disconnectedCallback(){super.disconnectedCallback(),this._removeEnchancedNavigationSubscription()}onSlotChanged(e){this.connectedOrContentChanged(),this.contentChanged(),this.setLoadedSelector()}setLoadedSelector(){this.readyOnConnectedCallback||n.setLoaded(this)}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.boundSlotChangedHandler),e}}C([ln({type:String,attribute:cn.renderGuidAttributeName})],Bs.prototype,"renderGuid",void 0);const Es=he.Prefix+"-pager-page-size-selector",Is="dxbl-pager-page-btn",Ss=`:scope > button.${Is}`,xs="-1";var Ds;customElements.define("dxbl-pager",class extends Bs{constructor(){super(),this.boundOnFocusIn=this.focusInHandler.bind(this),this.boundOnFocusOut=this.focusOutHandler.bind(this),this.activeButtonNumber=xs,this.contentChangedObserver=new MutationObserver(this.restoreFocus.bind(this))}connectedCallback(){n.setLoaded(this),this.contentChangedObserver.observe(this,{childList:!0}),this.addEventListener("focusin",this.boundOnFocusIn),this.addEventListener("focusout",this.boundOnFocusOut)}disconnectedCallback(){n.removeLoaded(this),this.contentChangedObserver.disconnect(),this.removeEventListener("focusin",this.boundOnFocusIn),this.removeEventListener("focusout",this.boundOnFocusOut)}isPageButton(e){return e.classList.contains(Is)}focusInHandler(e){this.activeButtonNumber=this.getPageNumber(e.target)}focusOutHandler(e){this.activeButtonNumber=xs}restoreFocus(){[...this.querySelectorAll(Ss)].some((e=>this.tryToRestoreFocusForScrolledButton(e)))}getPageNumber(e){return this.isPageButton(e)?e.getAttribute("data-page-number"):xs}tryToRestoreFocusForScrolledButton(e){const t=this.getPageNumber(e);return t!==xs&&t===this.activeButtonNumber&&(e.focus(),!0)}}),function(e){e[e.Indeterminate=0]="Indeterminate",e[e.Checked=1]="Checked",e[e.Unchecked=2]="Unchecked"}(Ds||(Ds={}));const Fs="dxbl-check";var Ts,Hs;!function(e){e.checkState="check-state",e.allowIndeterminateStateByClick="allow-indeterminate-state-by-click",e.isReadOnly="is-read-only"}(Ts||(Ts={}));customElements.define(Fs,class extends de{constructor(){super(...arguments),this._checkState=Ds.Unchecked,this._allowIndeterminateStateByClick=!1,this._isReadOnly=!1,this.boundOnInputChangeHandler=this.onInputChange.bind(this),this.boundOnInputClickHandler=this.onInputClick.bind(this)}get checkState(){return this._checkState}set checkState(e){this._checkState=e,this.applyCheckStateToInputElement()}get allowIndeterminateStateByClick(){return this._allowIndeterminateStateByClick}set allowIndeterminateStateByClick(e){this._allowIndeterminateStateByClick=e}get isReadOnly(){return this._isReadOnly}set isReadOnly(e){this._isReadOnly=e}initializeComponent(){super.initializeComponent(),this.getInputElement().addEventListener("change",this.boundOnInputChangeHandler),this.getInputElement().addEventListener("click",this.boundOnInputClickHandler),this.applyCheckStateToInputElement()}disposeComponent(){var e,t;null===(e=this.getInputElement())||void 0===e||e.removeEventListener("change",this.boundOnInputChangeHandler),null===(t=this.getInputElement())||void 0===t||t.removeEventListener("click",this.boundOnInputClickHandler),super.disposeComponent()}getInputElement(){return this.querySelector("input")}get value(){return this.checkState===Ds.Indeterminate?"":Boolean(this.checkState===Ds.Checked).toString()}getNextCheckState(){let e=this.checkState+1;return e>Ds.Unchecked&&(e=this.allowIndeterminateStateByClick?Ds.Indeterminate:Ds.Checked),e}onInputChange(e){this.isReadOnly?e.stopImmediatePropagation():(this.checkState=this.getNextCheckState(),this.applyCheckStateToInputElement(),this.dispatchEvent(new Event("change",{bubbles:!0})))}onInputClick(e){this.isReadOnly&&e.preventDefault()}applyCheckStateToInputElement(){const e=this.getInputElement();e&&(e.indeterminate=this.checkState===Ds.Indeterminate,e.checked=this.checkState===Ds.Checked)}static get observedAttributes(){return[Ts.checkState,Ts.allowIndeterminateStateByClick,Ts.isReadOnly]}attributeChangedCallback(e,t,i){switch(e){case Ts.checkState:this.checkState=Number(i);break;case Ts.allowIndeterminateStateByClick:this.allowIndeterminateStateByClick=null!==i;break;case Ts.isReadOnly:this.isReadOnly=null!==i}}}),function(e){e.Modal="modal",e.DropDown="dropdown",e.Flyout="flyout",e.Window="window",e.Root="root",e.DragHint="draghint"}(Hs||(Hs={}));class Us{get type(){return this._type}get children(){return Array.from(this._children)}get hasChildren(){return this._children.size>0}get id(){return this._id}get parentId(){return this._parentId}constructor(e,t,i){this._children=new Set,this._id=e,this._parentId=t,this._type=i}add(e){this._children.add(e)}remove(e){this._children.delete(e)}}class Ps{constructor(){this.idToNode=new Map,this.idToParentId=new Map,this.idToNode.set(Ps.root,new Us(Ps.root,Ps.root,Hs.Root))}add(e,t,i){const n=new Us(e,t=null!=t?t:Ps.root,i);this.idToParentId.set(e,t),this.idToNode.set(e,n);this.idToNode.get(t).add(n)}remove(e){if(!this.idToNode.has(e))return;const t=this.idToParentId.get(e),i=this.idToNode.get(t),n=this.idToNode.get(e);this.idToParentId.delete(e),this.idToNode.delete(e),i.remove(n)}getParentId(e){return this.idToParentId.get(e)}getBranchNode(e){var t;return null!==(t=this.idToNode.get(e))&&void 0!==t?t:null}findRoot(e){let t=e;for(;;){const e=this.idToParentId.get(t);if(e===Ps.root)return t;t=e}}}Ps.baseIndex=1050,Ps.root="";class Qs{get type(){return this.branchNode.type}get index(){return this._index}set index(e){this._index=e}get children(){return this._children}get hasChildren(){return this._children.length>0}get id(){return this.branchNode.id}constructor(e){this._children=new Array,this._index=0,this.branchNode=e}add(e){this._children.push(e)}remove(e){this._children=this._children.filter((t=>t!==e))}peek(){return this._children[this._children.length-1]}activate(e){return this.peek()!==e&&(this.remove(e),this.add(e),!0)}}const Ns=new Ps,Rs=new class{constructor(){this.idToNode=new Map,this.rootNode=new Qs(Ns.getBranchNode("")),this.idToNode.set("",this.rootNode)}getIndex(e){const t=this.idToNode.get(e);return t?t.index:0}register(e){const t=Ns.findRoot(e),i=Ns.getBranchNode(e),n=new Qs(i);if(this.idToNode.set(e,n),e===t)this.rootNode.add(n);else{const t=Ns.getParentId(e),i=this.idToNode.get(t);if(!i)return;i.add(n)}this.checkUnregisteredChildren(e,n),this.refresh()}checkUnregisteredChildren(e,t){const i=[...this.idToNode.values()].map((e=>e.branchNode)).filter((t=>t.parentId===e));for(const e of i)t.children.indexOf(e)<0&&t.add(e)}unregister(e){var t;const i=null!==(t=this.idToNode.get(e))&&void 0!==t?t:null;if(!i)return;const n=Ns.getParentId(i.id),s=this.idToNode.get(n);if(s){s.remove(i);for(const t of this.iterateBranch(e))this.idToNode.delete(t);this.idToNode.delete(e),this.refresh()}}activate(e){var t,i,n;let s=null!==(t=this.idToNode.get(e))&&void 0!==t?t:null;if(!s)return!1;let r=!1;for(;s;){const e=Ns.getParentId(s.id),t=null!==(i=this.idToNode.get(e))&&void 0!==i?i:null;r=r||null!==(n=null==t?void 0:t.activate(s))&&void 0!==n&&n,s=t}return r}iterateBranch(e){let t=new Array;const i=this.idToNode.get(e);if(!(null==i?void 0:i.hasChildren))return t;for(const e of i.children)t.push(e.id),t=t.concat(this.iterateBranch(e.id));return t.sort(((e,t)=>this.idToNode.get(t).index-this.idToNode.get(e).index))}refresh(){let e=!1,t=Ps.baseIndex;for(const i in this.rootNode.children){const n=this.rootNode.children[i];e?t+=this.incrementByType(n.type):e=!0,t=this.calculateZIndices(n,t)}}calculateZIndices(e,t){if(e.index=t,e.hasChildren)for(const i of e.children)t+=this.incrementByType(i.type),t=this.calculateZIndices(i,t);return t}incrementByType(e){switch(e){case Hs.Flyout:case Hs.DropDown:return 10;case Hs.Modal:return 100}return 10}setTopMostBranch(e){let t=this.idToNode.get(e)||null;for(;t&&t.type!==Hs.Modal;){const e=Ns.getParentId(t.id);if(e){const i=this.idToNode.get(e);if(!i)return;i.activate(t),t=i}else this.rootNode.activate(t),t=null}this.refresh()}};class Ls{get parentId(){return this._parentId}get id(){return this._id}get type(){return this._type}constructor(e,t,i){this._id=e,this._parentId=t,this._type=i}}class Ms{get id(){return this._id}constructor(e){this._id=e}}class ks extends CustomEvent{constructor(e){super(ks.eventName,{detail:e,bubbles:!0,composed:!0})}}ks.eventName="dxbranchrefreshed";class Ks extends CustomEvent{constructor(e){super(Ks.eventName,{detail:e,bubbles:!0,composed:!0})}}Ks.eventName="dxbranchactivated";class Os extends CustomEvent{constructor(e){super(Os.eventName,{detail:e,bubbles:!0,composed:!0})}}Os.eventName="dxbranchupdated";class _s extends CustomEvent{constructor(e){super(_s.eventName,{detail:e,bubbles:!0,composed:!0})}}_s.eventName="dxbranchremoved";class Vs extends CustomEvent{constructor(e){super(Vs.eventName,{detail:e,bubbles:!0,composed:!0})}}Vs.eventName="dxbranchcreated";let zs=class extends ms{constructor(){super(...arguments),this.parentBranchId=null}createRenderRoot(){return this}updated(e){this.branchId&&(e.get("branchId")||e.get("parentBranchId")||e.get("branchType"))&&this.raiseUpdated()}raiseUpdated(){const e=new Ls(this.branchId,this.parentBranchId,this.branchType),t=new Os(e);this.dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this.raiseCreated()}raiseCreated(){if(!this.branchId)return;const e=new Ls(this.branchId,this.parentBranchId,this.branchType),t=new Vs(e);this.dispatchEvent(t)}disconnectedCallback(){super.disconnectedCallback(),this.raiseRemoved()}raiseRemoved(){if(!this.branchId)return;const e=new Ls(this.branchId,this.parentBranchId,this.branchType),t=new _s(e);this.dispatchEvent(t)}};C([ln({type:String,attribute:"branch-id"})],zs.prototype,"branchId",void 0),C([ln({type:String,attribute:"parent-branch-id"})],zs.prototype,"parentBranchId",void 0),C([ln({type:String,attribute:"type"})],zs.prototype,"branchType",void 0),zs=C([rn("dxbl-branch")],zs);const Ws="dxbl-drag-hint";customElements.define(Ws,class extends de{get branchId(){return this.getAttribute("branch-id")}show(){Rs.register(this.branchId),this.refresh(),this.classList.add(he.Visible)}hide(){Rs.unregister(this.branchId),this.refresh(),this.classList.remove(he.Visible)}initializeComponent(){super.initializeComponent();const e=new Vs(new Ls(this.branchId,null,Hs.DragHint));this.dispatchEvent(e)}disposeComponent(){super.disposeComponent();const e=new _s(new Ls(this.branchId,null,Hs.DragHint));this.dispatchEvent(e)}refresh(){const e=new ks(new Ms(this.branchId));this.dispatchEvent(e)}});class $s{static getBodyCellsSelector(e,t){return this.getDataTableBodySelector(e,t)+" > tr > td"}static getBodyEditRowSelector(e,t){return this.getDataTableBodySelector(e,t)+` > .${ue.EditRowClassName}`}static getBodyEditCellSelector(e,t){return this.getBodyEditRowSelector(e,t)+`> td[${sn.EditCell}]`}static getDataTableBodySelector(e,t){return`${null!=t?t:$A}[${GA}="${e}"] > .${xe.ClassName} > .${xe.ContentContainerClassName} > .${ue.DataTableClassName} > tbody`}}var Gs,qs,Xs,Ys;$s.DataTableSelector=`.${ue.DataTableClassName}`,$s.TableBodyRows=`.${ue.DataTableClassName} > tbody > tr`,$s.TableCell=`${$s.TableBodyRows} > td`,$s.TableHeader=`.${ue.DataTableClassName} > thead > tr > th`,$s.TableHeaderCell=`${$s.TableHeader} > ${ue.HeaderContentClassName}`,$s.TableHeaderCellContent=`${$s.TableHeaderCell} span`,$s.TableGroupFooterCell=`${$s.TableBodyRows}.${ue.GroupFooterRowClassName} > td`,$s.TableGroupFooterCellContent=`${$s.TableGroupFooterCell} > div[${sn.SummaryItem}]`,$s.TableFooterCell=`.${ue.DataTableClassName} > tfoot > tr > td`,$s.TableFooterCellContent=`${$s.TableFooterCell} > div[${sn.SummaryItem}]`,$s.TableCellSelector=`.${ue.DataTableClassName} > * > tr > td`,$s.TitleElementsSelector=[$s.TableCellSelector,$s.TableHeaderCellContent,$s.TableHeader,$s.TableFooterCellContent,$s.TableGroupFooterCellContent,$s.TableFooterCell].join(", "),$s.DataTablePartsSelector=":scope > *:not(colgroup)",$s.ColElementSelector=`:scope > .${xe.ClassName} > .${xe.ContentContainerClassName} > .${ue.DataTableClassName} > colgroup > col`,$s.RowSelector=`:scope > tr:not(.${ue.EmptyRowClassName}):not(.${ue.ArmRowClassName}):not([${Gi}]):not([${qi}])`,$s.HeaderRowSelector=`.${ue.HeaderRowClassName}`,$s.FilterRowSelector=`.${ue.FilterRowClassName}`,$s.EditRowSelector=`.${ue.EditRowClassName}`,$s.EditFormRowCellSelector=`:scope > .${ue.EditFormClassName}`,$s.EditNewItemRowSelector=`.${ue.EditNewItemRowClassName}`,$s.GroupRowSelector=`.${ue.GroupRowClassName}`,$s.DataRowSelector=`tr[${sn.VisibleIndexName}]:not(.${ue.EditRowClassName}):not(.${ue.GroupRowClassName})`,$s.EmptyDataRowCellSelector=`:scope > .${ue.EmptyDataRowCellClassName}`,$s.DetailRowCellSelector=`:scope > .${ue.DetailCellClassName}`,$s.FooterRowSelector=`.${ue.FooterRowClassName}`,$s.GroupFooterRowSelector=`.${ue.GroupFooterRowClassName}`,$s.RowDragHintSelector=`${Ws}.${ue.RowDragHintClassName}`,$s.KeyboardNavigatorSelector=`:scope > ${Pi}`,$s.ToolbarContainerSelector=`.${ue.ToolbarContainerClassName}`,$s.TopPanelSelector=`.${ue.TopPanelClassName}`,$s.PagerPanelSelector=`.${ue.PagerPanelClassName}`,$s.PagerSizeSelector=`:scope > .${Es}`,$s.CellCheckBoxDisplayViewSelector="td .dxbl-checkbox-display-view-unchecked, td .dxbl-checkbox-display-view-checked, td .dxbl-checkbox-display-view-indeterminate",$s.CellCheckBoxEditViewInputSelector=`:scope > ${Fs} input, :scope > .dxbl-checkbox-container > ${Fs} input`,function(e){e[e.None=0]="None",e[e.Column=1]="Column",e[e.Row=2]="Row"}(Gs||(Gs={}));class Js extends Li{constructor(e,t,i=!1){super(e.getKeyboardNavigator(),t,i),this.grid=e}canSwitchToNestedContentMode(){return!0}get editorManager(){return this.grid.editorManager}get isEditing(){return this.grid.isEditing}get isInplaceEditingEnabled(){return this.grid.enableInplaceEditing}get enterKeyDirection(){return this.grid.enterKeyDirection}get isFocusedRowEnabled(){return this.grid.enableFocusedRow}get isSelectionRowEnabled(){return this.grid.allowSelectRowByClick}get hasRowClickEvent(){return this.grid.hasRowClickEvent}getToolbarContainer(){return this.grid.getToolbarContainer()}getDataTable(){return this.grid.getDataTable()}getPagerPanel(e){return this.grid.getPagerPanel(e)}getGroupPanelContentContainer(){return this.grid.getGroupPanelContentContainer()}getSearchBoxContainer(){return this.grid.getSearchBoxContainer()}getScrollViewer(){return this.grid.getScrollViewer()}getScrollViewerContent(){return this.grid.getScrollViewerContent()}getColumnUID(e){return this.grid.getColumnUID(e)}getHeaderColumnInfo(e){return this.grid.getColumnInfo(e)}getColumnInfoByCell(e){return this.grid.getColumnInfoByCell(e)}findHeaderCellByColumnIndex(e){return this.grid.findHeaderCellByColumnIndex(e)}isPrintableCharacterKey(e){var t;return!(e.ctrlKey||e.altKey||e.metaKey)&&1===(null===(t=e.key)||void 0===t?void 0:t.length)}handleTabKeyDown(e,t=!1,i=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected&&!i)return!1;this.moveToPrevItem(i)}else{if(this.lastItemSelected&&!i)return!1;this.moveToNextItem(i)}return!0}isEditingOnTypeEnabled(){return this.grid.enableEditOnKeypress}}!function(e){e[e.None=0]="None",e[e.GroupPanel=1]="GroupPanel",e[e.DataTable=2]="DataTable",e[e.Pager=3]="Pager",e[e.ColumnChooser=4]="ColumnChooser",e[e.ToolbarContainer=5]="ToolbarContainer",e[e.SearchBox=6]="SearchBox"}(qs||(qs={})),function(e){e[e.None=0]="None",e[e.Header=1]="Header",e[e.Filter=2]="Filter",e[e.Edit=3]="Edit",e[e.EditForm=4]="EditForm",e[e.Group=5]="Group",e[e.Data=6]="Data",e[e.EmptyData=7]="EmptyData",e[e.Detail=8]="Detail",e[e.Footer=9]="Footer",e[e.GroupFooter=10]="GroupFooter",e[e.EmptyRow=11]="EmptyRow",e[e.EditNewItemRow=12]="EditNewItemRow"}(Xs||(Xs={})),function(e){e[e.Data=0]="Data",e[e.Edit=1]="Edit",e[e.Selection=2]="Selection",e[e.Command=3]="Command",e[e.Indent=4]="Indent",e[e.ExpandButton=5]="ExpandButton",e[e.EditNewItemRowCell=6]="EditNewItemRowCell"}(Ys||(Ys={}));class js{static getNavigationAreaType(e){return e.matches($s.ToolbarContainerSelector)?qs.ToolbarContainer:e.matches($s.DataTableSelector)?qs.DataTable:e.matches($s.PagerPanelSelector)?qs.Pager:e.matches($s.TopPanelSelector)?qs.GroupPanel:qs.None}static getRowType(e){return e.matches($s.HeaderRowSelector)?Xs.Header:e.matches($s.FilterRowSelector)?Xs.Filter:e.matches($s.EditRowSelector)?Xs.Edit:e.querySelector($s.EditFormRowCellSelector)?Xs.EditForm:e.matches($s.GroupRowSelector)?Xs.Group:e.matches($s.EditNewItemRowSelector)?Xs.EditNewItemRow:e.matches($s.DataRowSelector)?Xs.Data:e.querySelector($s.EmptyDataRowCellSelector)?Xs.EmptyData:e.querySelector($s.DetailRowCellSelector)?Xs.Detail:e.matches($s.FooterRowSelector)?Xs.Footer:e.matches($s.GroupFooterRowSelector)?Xs.GroupFooter:e.matches(`.${ue.EmptyRowClassName}`)?Xs.EmptyRow:Xs.None}static getCellType(e){return void 0!==e.dataset.editCell?Ys.Edit:js.isSelectionCell(e)?Ys.Selection:js.isCommandCell(e)?Ys.Command:js.isExpandButtonCell(e)?Ys.ExpandButton:js.isIndentCell(e)?Ys.Indent:js.isEditNewItemRowCell(e)?Ys.EditNewItemRowCell:Ys.Data}static isIndentCell(e){return null==e?void 0:e.matches(`.${ue.IndentCellClassName}, .${ue.GroupFooterIndentCellClassName}`)}static isCommandCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.CommandCellClassName}`))&&void 0!==t&&t}static isExpandButtonCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.ExpandButtonCellClassName}`))&&void 0!==t&&t}static isSelectionCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.SelectionCellClassName}`))&&void 0!==t&&t}static isFixedCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${ue.FixedCellClassName}`))&&void 0!==t&&t}static isEditNewItemRowCell(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.parentElement)||void 0===t?void 0:t.matches(`.${ue.EditNewItemRowClassName}`))&&void 0!==i&&i}static isSearchBoxContainer(e){return null==e?void 0:e.matches(`.${ue.SearchBoxContainerClassName}`)}}class Zs{constructor(){this.root=new er(null,!1)}get hasCapture(){return this.root.hasChildren}get captured(){var e,t;return null!==(t=null===(e=this.root.searchCaptured())||void 0===e?void 0:e.element)&&void 0!==t?t:null}get count(){return this.root.count()}add(e){var t;const i=this.root.searchCaptured();i&&i.element!==e&&(i.captured=!1,null===(t=i.element)||void 0===t||t.lostCapture());this.root.tryAdd(new er(e,!0))&&e.gotCapture()}remove(e){this.root.tryRemove(new er(e,!1))&&e.lostCapture()}isChild(e,t){const i=this.root.search(e);return null!==i&&null!==i.search(t)}nextCapture(e){var t,i;if(null===this.captured)if(e.parentBranchId){const n=this.root.search(e.parentBranchId);if(n){const s=n.getNextChild(e);s?(s.captured=!0,null===(t=s.element)||void 0===t||t.gotCapture()):(n.captured=!0,null===(i=n.element)||void 0===i||i.gotCapture())}}else{const t=this.root.getNextChild(e);t&&(t.captured=!0)}}getParent(e){if(e.parentBranchId){return this.root.search(e.parentBranchId).element}return null}}class er{constructor(e,t){this.element=e,this.captured=t,this.children=[]}get isRoot(){return null===this.element}get hasChildren(){return this.children.length>0}get branchId(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.branchId)&&void 0!==t?t:""}get parentBranchId(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.parentBranchId)&&void 0!==t?t:null}tryAdd(e){if(!e.parentBranchId&&this.isRoot||e.parentBranchId===this.branchId){const t=this.children.find((t=>t.branchId===e.branchId));return t?t.captured=!0:this.children.push(e),!0}for(const t of this.children){if(t.tryAdd(e))return!0}return!1}tryRemove(e){const t=this.children.find((t=>t.branchId===e.branchId));if(t){const e=this.children.indexOf(t);return this.children.splice(e,1),!0}for(const t of this.children){if(t.tryRemove(e))return!0}return!1}count(){let e=0;if(this.children.length>0)for(const t of this.children)e+=t.count();return this.isRoot||(e+=1),e}search(e){if(this.branchId===e)return this;for(let t=0;t<this.children.length;t++){const i=this.children[t].search(e);if(i)return i}return null}searchCaptured(){if(this.captured)return this;for(let e=0;e<this.children.length;e++){const t=this.children[e].searchCaptured();if(t)return t}return null}getNextChild(e){if(0===this.children.length)return null;for(let t=this.children.length-1;t>=0;t--){const i=this.children[t];if(i.element!==e)return i}return null}}class tr{constructor(){this.lockCount=0}get IsLocked(){return this.lockCount>0}lock(){this.lockCount+=1}unlock(){this.IsLocked&&(this.lockCount-=1)}reset(){this.lockCount=0}lockOnce(){this.IsLocked||this.lock()}doLockedAction(e){this.lock();try{e()}finally{this.unlock()}}async doLockedAsyncAction(e){this.lock();try{await e()}finally{this.unlock()}}doIfNotLocked(e){this.IsLocked||e()}doLockedActionIfNotLocked(e){this.doIfNotLocked((()=>this.doLockedAction(e)))}async doLockedAsyncActionIfNotLocked(e){this.doIfNotLocked((async()=>await this.doLockedAsyncAction(e)))}}class ir extends CustomEvent{constructor(){super(ir.eventName)}}ir.eventName="capture-interaction-prevent-ended";class nr extends EventTarget{constructor(){super(...arguments),this.preventNextPointerInteraction=!1}reset(){this.preventNextPointerInteraction=!1,this.dispatchEvent(new ir)}get isPreventing(){return this.preventNextPointerInteraction}prevent(){this.preventNextPointerInteraction=!0}}class sr{constructor(){this._globalLocker=new tr,this.preventNextPointerInteraction=new nr}get isInteractionPreventing(){return this.preventNextPointerInteraction.isPreventing}subscribeInteractionPreventEnd(e){this.preventNextPointerInteraction.addEventListener(ir.eventName,e)}unsubscribeInteractionPreventEnd(e){this.preventNextPointerInteraction.removeEventListener(ir.eventName,e)}async processCapturedElementPointer(e,t){const i=this.getCapturedInteractionLocker(e),n=new rr(e);await i.doLockedAsyncActionIfNotLocked((async()=>{this.preventNextPointerInteraction.reset(),this.capturedProcessPromise=t(n),await this.capturedProcessPromise,this.capturedProcessPromise=void 0})),n.handled&&n.nextInteractionHandled&&this.preventNextPointerInteraction.prevent()}async processCapturedElementKeyboard(e,t){const i=this.getCapturedInteractionLocker(e);await i.doLockedAsyncActionIfNotLocked((async()=>{const i=new rr(e);await t(i)}))}checkInteractionsPreventing(e,t,i,n=!1){const s=this.getCapturedInteractionLocker(e),r=this.preventEventIfLocked(s,t);return s.doIfNotLocked((()=>{this.preventNextPointerInteraction.isPreventing&&(n&&this.preventNextPointerInteraction.reset(),i())})),r||this.preventNextPointerInteraction.isPreventing}async waitForCaptureProcessing(){this.capturedProcessPromise&&await this.capturedProcessPromise}endInteractionIfNotLocked(e){this.getCapturedInteractionLocker(e).doIfNotLocked((()=>this.preventNextPointerInteraction.reset()))}getCapturedInteractionLocker(e){return e?e.locker:this._globalLocker}preventEventIfLocked(e,t){return!!e.IsLocked&&(H.markHandled(t,!1),!0)}}class rr{constructor(e){this.caller=e,this.nextInteractionHandled=!1,this.handled=!1}}class or{constructor(){this.captureTree=new Zs,this.captureProcessor=new sr,this.restoreFocusOnPreventNextPointerInteractionElement=null,this.capturedInPointerUp=!1,this.capturedInPointerDown=!1,this.focusHandler=this.handleFocus.bind(this),this.pointerDownHandler=this.handlePointerDown.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.clickHandler=this.handleClick.bind(this),this.keyDownHandler=this.handleKeyDown.bind(this),this.disposeCheckHandler=this.checkDispose.bind(this)}get hasCapture(){return this.captureTree.hasCapture}get lastCaptured(){return this.captureTree.captured}get captureStackCount(){return this.captureTree.count}checkInitialize(){this.hasCapture||this.initialize()}checkDispose(){this.hasCapture||this.captureProcessor.isInteractionPreventing||this.dispose()}capture(e){this.checkInitialize(),this.captureTree.add(e)}releaseCapture(e){this.captureTree.remove(e),this.captureTree.nextCapture(e),this.checkDispose()}initialize(){document.addEventListener("focus",this.focusHandler,{capture:!0}),document.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.addEventListener("pointerup",this.pointerUpHandler,{capture:!0}),document.addEventListener("click",this.clickHandler,{capture:!0}),document.addEventListener("keydown",this.keyDownHandler,{capture:!0}),this.captureProcessor.subscribeInteractionPreventEnd(this.disposeCheckHandler)}dispose(){document.removeEventListener("focus",this.focusHandler,{capture:!0}),document.removeEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.removeEventListener("pointerup",this.pointerUpHandler,{capture:!0}),document.removeEventListener("click",this.clickHandler,{capture:!0}),document.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),this.captureProcessor.unsubscribeInteractionPreventEnd(this.disposeCheckHandler)}async handleFocus(e){const t=this.captureTree.captured;if(!t)return;const i=this.getProcessingElement(t,e);if(!i||t===i)return;if(this.capturedInPointerDown=t.isPointedCaptured(e),this.capturedInPointerDown||t.isCloseOnPointerUp)return;await this.captureProcessor.processCapturedElementPointer(t,(i=>t.processCapturedPointerAsync(e,i)))}async handlePointerDown(e){const t=this.captureTree.captured;if(!t)return;this.captureProcessor.endInteractionIfNotLocked(t);const i=this.getProcessingStack(t,e,[]);for(const t of i){if(this.capturedInPointerDown=t.isPointedCaptured(e),this.capturedInPointerDown||t.isCloseOnPointerUp)return;const i=i=>t.processCapturedPointerAsync(e,i);await this.captureProcessor.processCapturedElementPointer(t,i)}}async handlePointerUp(e){const t=this.captureTree.captured;if(this.capturedInPointerUp=(null==t?void 0:t.isPointedCaptured(e))||!0,!t||this.capturedInPointerUp&&this.capturedInPointerDown||!t.isCloseOnPointerUp)return;const i=this.getProcessingStack(t,e,[]);for(const t of i){const i=i=>t.processCapturedPointerAsync(e,i);await this.captureProcessor.processCapturedElementPointer(t,i)}}async handleClick(e){await this.captureProcessor.waitForCaptureProcessing();this.captureProcessor.checkInteractionsPreventing(this.captureTree.captured,e,(()=>{H.markHandled(e,!1),this.restoreFocusOnPreventNextPointerInteractionElement&&pt.isFocused(this.restoreFocusOnPreventNextPointerInteractionElement)||pt.unfocus()}),!0)}async handleKeyDown(e){const t=this.captureTree.captured;if(!t)return;await this.captureProcessor.processCapturedElementKeyboard(t,(i=>t.processCapturedKeyDownAsync(e,i)))}getProcessingElement(e,t){if(e.isPointedCaptured(t)||e.isPreventPropagation)return e;const i=this.captureTree.getParent(e);return i?this.getProcessingElement(i,t):null}getProcessingStack(e,t,i){const n=e.isPointedCaptured(t);if(i.push(e),n||e.isPreventPropagation)return i;const s=this.captureTree.getParent(e);return s?this.getProcessingStack(s,t,i):i}}class ar{constructor(){this.action=null,this.rafHandle=null}execute(e){this.cancel(),this.action=e,this.rafHandle=requestAnimationFrame((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.rafHandle=null,this.action=null}))}cancel(){this.rafHandle&&(cancelAnimationFrame(this.rafHandle),this.action=null,this.rafHandle=null)}}const lr="dxbl-popup-root",Ar="dxbl-window",dr=Ar+"-root",cr=Ar+"-dialog",hr="dxbl-popup-keyboard-navigator";const ur=new class{_doWithElementCheck(e){const t=document.querySelector(lr);return e(null!=t?t:this._createPopupElement())}_createPopupElement(){const e=document.createElement(lr);return document.body.appendChild(e),e}constructor(){this._rootElementPromise=customElements.whenDefined(lr)}assign(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.assign(e)))))}getPopup(e){return this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.getPopup(e)))))}release(e){this._rootElementPromise.then((()=>this._doWithElementCheck((t=>t.release(e)))))}async subscribeCaptureManager(e){return await this._rootElementPromise,this._doWithElementCheck((t=>t.subscribe(e)))}};function pr(){return ur}class mr{constructor(e){this.elements=e}}class gr extends CustomEvent{constructor(e){super(gr.eventName,{detail:e,bubbles:!0})}}gr.eventName="dxbl-portable-elements-changed";let Cr=class extends ms{constructor(){super(...arguments),this._portable=null,this._elementsPorted=!1,this.slotChangedHandler=this.handleSlotChange.bind(this),this.boundOnFocusInHandler=this.handleFocusIn.bind(this),this._reassignPortal=()=>pr().assign(this)}get portable(){return this._portable}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");return e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler),e}handleSlotChange(e){const t=e.target.assignedNodes();this._elementsPorted&&0===t.length||(this.assignElements(t),this._elementsPorted=!0)}assignElements(e){this._portable=e,this.raiseElementsChanged(e)}connectedCallback(){var e;super.connectedCallback(),n.setLoaded(this),pr().assign(this),(null===(e=window.Blazor)||void 0===e?void 0:e.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._reassignPortal),this.addEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}handleFocusIn(e){const t=document.querySelector(`:not(.dxbl-popup-portal)[branch-id=${this.branchId}]`);t&&t.activatePopupContent()}disconnectedCallback(){var e;super.disconnectedCallback(),pr().release(this),n.removeLoaded(this),(null===(e=window.Blazor)||void 0===e?void 0:e.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._reassignPortal),this.removeEventListener("focusin",this.boundOnFocusInHandler,{capture:!0})}raiseElementsChanged(e){const t=new gr(new mr(e));this.dispatchEvent(t)}updated(e){if(!this.branchId&&!this.hasAttribute(cn.virtualElementAttributeName))throw new Error("branch-id must be specified")}};C([ln({type:String,attribute:"branch-id"})],Cr.prototype,"branchId",void 0),Cr=C([rn("dxbl-portal")],Cr);const fr=new class{constructor(){this._x=0,this._y=0,this.handlePointerDown=this.pointerEventHandler.bind(this)}get x(){return this._x}get y(){return this._y}subscribe(){window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0,passive:!0}),window.addEventListener("pointermove",this.handlePointerDown,{capture:!0,passive:!0}),window.addEventListener("pointerup",this.handlePointerDown,{capture:!0,passive:!0})}unsubscribe(){window.removeEventListener("pointerdown",this.handlePointerDown),window.removeEventListener("pointermove",this.handlePointerDown),window.removeEventListener("pointerup",this.handlePointerDown)}pointerEventHandler(e){this._x=e.pageX,this._y=e.pageY}};fr.subscribe();class vr{get x(){return this.xField}get y(){return this.yField}constructor(e,t){this.xField=e,this.yField=t}}vr.zero=new vr(0,0);class br{static add(e,t){return new vr(e.x+t.x,e.y+t.y)}static multiply(e,t){return new vr(e.x*t,e.y*(1/t))}static divide(e,t){return new vr(e.x*(1/t),e.y*(1/t))}static getLength(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static normalize(e){const t=Math.max(Math.abs(e.x),Math.max(e.y)),i=br.divide(e,t);return br.divide(i,br.getLength(i))}}class wr{static viewport(){return new nt(window.scrollX,window.scrollY,document.documentElement.clientWidth,document.documentElement.clientHeight)}static page(){return new nt(0,0,document.body.clientWidth,document.body.clientHeight)}}class yr{static translate(e,t){return`translate(${Math.floor(e)}px, ${Math.floor(t)}px)`}static translateWithoutFloor(e,t){return`translate(${e}px, ${t}px)`}static translateByPoint(e){return`translate(${Math.floor(e.x)}px, ${Math.floor(e.y)}px)`}}class Br extends CustomEvent{constructor(e){super(Br.eventName,{detail:e,bubbles:!0,cancelable:!0})}}Br.eventName="dxbl-position-changing";class Er extends CustomEvent{constructor(e){super(Er.eventName,{detail:e,bubbles:!0,cancelable:!0})}}Er.eventName="dxbl-position-changed";class Ir extends HTMLElement{constructor(){super(...arguments),this.observer=null,this.targetField="",this.listenedIdField="",this.elementScrollHandler=this.handleElementScroll.bind(this),this.resizeHandler=this.handleResize.bind(this),this.mutationObserver=new MutationObserver(this.handleMutations.bind(this)),this.overflows=[],this.resizing=[],this.targetElement=null,this.rafAction=new ar}get target(){return this.targetField}set target(e){this.targetField=e}get listenerId(){return this.listenedIdField}set listenerId(e){this.listenedIdField=e}connectedCallback(){this.initializeObserver(),this.subscribeToOverflows()}getTargetBoundingClientRect(){return this.targetElement?st.fromDomRect(this.targetElement.getBoundingClientRect()):nt.Empty}initializeObserver(){this.destroyObserver();const e=this.querySelector(this.target);if(!e)return void this.mutationObserver.observe(this,{childList:!0,subtree:!0});this.observer=new IntersectionObserver((function(e,t){}),{root:e,rootMargin:"0px",threshold:0}),this.observer.observe(this),this.targetElement=e}disconnectedCallback(){this.destroyObserver()}destroyObserver(){var e;this.mutationObserver.disconnect(),null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}static get observedAttributes(){return["target","listener-id"]}attributeChangedCallback(e,t,i){switch(e){case"target":this.targetChanged(i);break;case"listener-id":this.listenerIdChanged(i)}}handleMutations(e){const t=this.querySelector(this.target);t&&(this.targetElement=t,this.mutationObserver.disconnect(),this.initializeObserver(),this.subscribeToOverflows())}handleResize(e,t){this.raisePositionChanging(),this.rafAction.execute((()=>this.raisePositionChanged()))}targetChanged(e){this.target=e,this.initializeObserver()}listenerIdChanged(e){this.listenerId=e}raisePositionChanging(){const e=new Br({Tracker:this});this.dispatchEvent(e)}raisePositionChanged(){const e=new Er({Tracker:this});this.dispatchEvent(e)}subscribeToOverflows(){if(!this.targetElement)return;const e=[],t=[];for(const i of rt.getRootPath(this.targetElement)){const n=i;if(!n)return;new ResizeObserver(this.resizeHandler).observe(n,{box:"border-box"}),t.push(),Te.isScrollable(n)&&(n.addEventListener("scroll",this.elementScrollHandler,{capture:!0}),e.push(n))}this.overflows=e,this.resizing=t}unsubscribeFromOverflows(){this.overflows.forEach((e=>{e.removeEventListener("scroll",this.elementScrollHandler)})),this.resizing.forEach((e=>{e.disconnect()}))}handleElementScroll(e){this.raisePositionChanging(),this.rafAction.execute((()=>this.raisePositionChanged()))}}customElements.define("dxbl-position-tracker",Ir);class Sr{get position(){return this.callback(this.target)}constructor(e,t){this.target=e,this.callback=t}}class xr{get raf(){return this.options.raf}constructor(e,t){this.observer=null,this.elementScrollHandler=this.handleElementScroll.bind(this),this.resizeHandler=this.handleResize.bind(this),this.overflows=[],this.resizing=[],this.targetElement=null,this.rafAction=new ar,this.callback=e,this.options=t}observe(e){this.disconnect(),this.targetElement=e,this.subscribeEvents()}disconnect(){var e;this.unsubscribeEvents(),this.rafAction.cancel(),null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}getTargetBoundingClientRect(){return this.targetElement?rt.getRelativeElementRect(this.targetElement):nt.Empty}subscribeEvents(){if(!this.targetElement)return;window.addEventListener("scroll",this.elementScrollHandler);const e=[],t=[];for(const i of rt.getRootPathAndSelf(this.targetElement)){const n=i;if(!n)return;if(this.isInShadowDom(n))continue;new ResizeObserver(this.resizeHandler).observe(n,{box:"border-box"}),t.push(),Te.isScrollable(n)&&(n.addEventListener("scroll",this.elementScrollHandler,{capture:!0}),e.push(n))}this.overflows=e,this.resizing=t}isInShadowDom(e){return e.getRootNode()instanceof ShadowRoot}unsubscribeEvents(){window.removeEventListener("scroll",this.elementScrollHandler),this.overflows.forEach((e=>{e.removeEventListener("scroll",this.elementScrollHandler)})),this.resizing.forEach((e=>{e.disconnect()}))}handleResize(e,t){this.raisePositionChanged()}handleElementScroll(e){this.raisePositionChanged()}raisePositionChanged(){this.raf?this.rafAction.execute((()=>this.raisePositionChangedCore())):this.raisePositionChangedCore()}raisePositionChangedCore(){this.callback(new Sr(this.targetElement,this.getTargetBoundingClientRect),this)}}class Dr{get hasObservedElement(){return null!==this.observedElement}constructor(e,t){this.target=null,this.targetMutationObserver=new MutationObserver((e=>this.handleTargetMutations.bind(this))),this.observedElement=null,this.selector=e,this.callback=t}observe(e=null){this.disconnect(),this.target=e;const t=null!=e?e:document;this.observedElement=t.querySelector(this.selector),this.observedElement&&this.raiseElementChanged(null,this.observedElement),this.targetMutationObserver.observe(t,{subtree:!0,childList:!0})}disconnect(){this.targetMutationObserver.disconnect()}raiseElementChanged(e,t){this.callback({oldElement:e,element:t},this)}handleTargetMutations(e,t){this.hasObservedElement?this.processRemovedNodes(e):this.processAddedNodes(e)}processRemovedNodes(e){this.processRemovedNodesInternal(e)&&(this.raiseElementChanged(this.observedElement,null),this.observedElement=null)}processRemovedNodesInternal(e){return e.forEach((e=>{e.removedNodes.forEach((e=>{if(this.observedElement===e)return!0}))})),!1}processAddedNodes(e){const[t,i]=this.processAddedNodesInternal(e);t&&(this.raiseElementChanged(this.observedElement,i),this.observedElement=i)}processAddedNodesInternal(e){var t;const i=(null!==(t=this.target)&&void 0!==t?t:document).querySelector(this.selector);return[null!==i,i]}}class Fr{constructor(){this._isResolved=!1,this._isRejected=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}get promise(){return this._promise}resolve(e){this._isResolved=!0,this._resolve(e)}reject(e){this._isRejected=!0,this._reject(e)}tryResolve(e){this._isResolved||this._isRejected||this.resolve(e)}tryReject(e){this._isResolved||this._isRejected||this.reject(e)}}var Tr;!function(e){e.OutsideClick="OutsideClick",e.EscapePress="EscapePress",e.Programmatically="Programmatically"}(Tr||(Tr={}));class Hr{constructor(){this.handlers=[],this.raise=e=>{this.handlers.slice(0).forEach((t=>t(e)))}}subscribe(e){this.handlers.push(e)}unsubscribe(e){this.handlers=this.handlers.filter((t=>t!==e))}}class Ur{constructor(){this.handlers=[]}subscribe(e){this.handlers.push(e)}unsubscribe(e){this.handlers=this.handlers.filter((t=>t!==e))}raise(e,t){this.handlers.slice(0).forEach((i=>i(e,t)))}}class Pr extends ws{constructor(){super(...arguments),this.branchId="",this.parentBranchId=null,this._isCaptured=!1,this._locker=null,this.capturingAction=()=>{},this.releasingCaptureAction=()=>{}}get locker(){return this._locker||(this._locker=new tr)}get isCaptured(){return this._isCaptured}get isPreventPropagation(){return!1}gotCapture(){this._isCaptured||(this._isCaptured=!0,this.capturingAction())}lostCapture(){this._isCaptured&&(this._isCaptured=!1,this.releasingCaptureAction())}get isCloseOnPointerUp(){return!1}}const Qr=["a[href]","audio[controls]","button",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details","input","select","textarea","[tabindex]","video[controls]"].join(",");class Nr{static getTabbables(e,t){const i=this.findTabbables(e,t),n=[],s=[];return i.forEach(((e,t)=>{const i=Nr.getTabIndex(e);0===i?n.push(e):s.push({index:t,tabIndex:i,item:e})})),s.sort(((e,t)=>e.tabIndex===t.tabIndex?e.index-t.index:e.tabIndex-t.tabIndex)).map((e=>e.item)).concat(n)}static findTabbables(e,t){const i=Array.from(e.querySelectorAll(Qr));return t&&(e.matches(Qr)||e.webkitMatchesSelector(Qr))&&i.unshift(e),i.filter(Nr.filterTabbable)}static filterTabbable(e){return!e.disabled&&(!Nr.isHiddenInput(e)&&(!Te.isHidden(e)&&!(Nr.getTabIndex(e)<0)))}static getTabIndex(e){const t=e.getAttribute("tabindex");if(t){const e=parseInt(t,10);if(!isNaN(e))return e}return"true"===e.contentEditable||e.nodeName===Q.audio||e.nodeName===Q.video||e.nodeName===Q.details?0:e.tabIndex}static isHiddenInput(e){return e.tagName===Q.input&&e.getAttribute("type")===R.hidden}}class Rr{constructor(e){this.action=null,this.postponeAction=e}executePostpone(e){this.action=null,this.postponeAction()?e():this.action=e}execute(){this.action&&this.postponeAction()&&this.executeForce()}executeForce(){this.action&&this.action(),this.clear()}clear(){this.action=null}}const Lr={subtree:!0,childList:!0,attributeFilter:["disabled","tabindex"]};class Mr{constructor(e,t,i,n,s){this.BlockOutsideClick=!1,this.BlockOutsideNavigation=!1,this.NestedOnly=!1,this.BlockOutsideClick=e,this.BlockOutsideNavigation=t,this.Element=i,this.LastFocusedElement=n,this.NestedOnly=s}}const kr=new class{constructor(){this.documentFocusInHandler=this.documentFocusIn.bind(this),this.documentKeyDownHandler=this.documentKeyDown.bind(this),this.firstInnerElementKeyDownHandler=this.firstInnerElementKeyDown.bind(this),this.lastInnerElementKeyDownHandler=this.lastInnerElementKeyDown.bind(this),this.handleFocusOutHandler=this.handleFocusOut.bind(this),this.documentKeyboardTrackerHandler=this.documentKeyboardTracker.bind(this),this.documentMouseTrackerHandler=this.documentMouseTracker.bind(this),this.tabbables=[],this.mutationObserver=new MutationObserver(this.handleMutations.bind(this)),this.focusPostponedAction=new Rr((()=>{var e,t;return null!==(t=(null===(e=this.tabbables)||void 0===e?void 0:e.length)>0)&&void 0!==t&&t})),this.firstInnerElement=null,this.lastInnerElement=null,this._stack=[],this._lastInputFromPointer=!1,document.addEventListener("keydown",this.documentKeyboardTrackerHandler,!0),document.addEventListener("pointerdown",this.documentMouseTrackerHandler,!0)}documentKeyboardTracker(e){this._lastInputFromPointer=!1}documentMouseTracker(e){this._lastInputFromPointer=!0}get isActivated(){return this._stack.length>0}get info(){return this.isActivated?this._stack[this._stack.length-1]:null}get element(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.Element)&&void 0!==t?t:null}get blockOutsideClick(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.BlockOutsideClick)&&void 0!==t?t:null}get blockOutsideNavigation(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.BlockOutsideNavigation)&&void 0!==t?t:null}get lastFocusedElement(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.LastFocusedElement)&&void 0!==t?t:null}get nestedOnly(){var e,t;return null!==(t=null===(e=this.info)||void 0===e?void 0:e.NestedOnly)&&void 0!==t?t:null}filterStack(e){e&&(this._stack=this._stack.filter((t=>t.Element!==e)))}activate(e,t,i=!1,n=t){if("string"==typeof e&&(e=document.querySelector(e)),null==e)throw"element is null";this.element&&this.deactivateCore();const s=document.activeElement;this.filterStack(e),this._stack.push(new Mr(n,t,e,s,i)),this.activateCore()}activateCore(){this.element&&((this.blockOutsideClick||this.blockOutsideNavigation)&&this.subscribe(this.element),this.tabbables=Nr.getTabbables(this.element,!this.nestedOnly),this.updateInnerElements(),this.subscribeInnerElementsKeyDown(),this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this)),this.mutationObserver.observe(this.element,Lr))}deactivate(e,t){var i;if(!this.isActivated||!e)return;if(this.element!==e)return void this.filterStack(e);this.deactivateCore();const n=null===(i=this._stack.pop())||void 0===i?void 0:i.LastFocusedElement;t&&!ut.containsElement(e,document.activeElement)&&n&&pt.restoreFocus(n)}deactivateCore(){this.element&&(this.focusPostponedAction.clear(),this.mutationObserver.disconnect(),this.unsubscribeDocument(),this.unsubscribe(this.element),this.unsubscribeInnerElementsKeyDown(),clearTimeout(this.updateTabbablesTimerID))}forceFocusFirstElement(){const e=this.tabbables[0];e&&(this.lastFocusedElement&&this.element&&ut.containsElement(this.element,document.activeElement)||pt.restoreFocus(e))}handleMutations(e){clearTimeout(this.updateTabbablesTimerID),this.updateTabbablesTimerID=setTimeout(this.updateSubscriptions.bind(this),50)}updateSubscriptions(){this.tabbables=Nr.getTabbables(this.element,!this.nestedOnly),this.unsubscribeInnerElementsKeyDown(),this.updateInnerElements(),this.subscribeInnerElementsKeyDown(),this.focusPostponedAction.execute()}subscribe(e){this.element.addEventListener("focusout",this.handleFocusOutHandler,!0)}unsubscribe(e){this.element.removeEventListener("focusout",this.handleFocusOutHandler,!0)}handleFocusOut(e){if(this._lastInputFromPointer){if(!this.blockOutsideClick)return}else if(!this.blockOutsideNavigation)return;const t=e.relatedTarget;t?this.element.contains(t)||this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this)):this.subscribeDocument()}subscribeDocument(){document.addEventListener("focusin",this.documentFocusInHandler),document.addEventListener("keydown",this.documentKeyDownHandler)}unsubscribeDocument(){document.removeEventListener("keydown",this.documentKeyDownHandler),document.removeEventListener("focusin",this.documentFocusInHandler)}documentKeyDown(e){var t;const i=e.target;if(i&&(this.element===i||(null===(t=this.element)||void 0===t?void 0:t.contains(i))))return;const n=this.element;n&&n.processKeyDown(e)}documentFocusIn(e){const t=e.target;if(!t)return;this.unsubscribeDocument();const i=e.relatedTarget;(i||this.element.contains(t))&&(!i||this.element.contains(i))||this.focusPostponedAction.executePostpone(this.forceFocusFirstElement.bind(this))}firstInnerElementKeyDown(e){var t;this.firstInnerElement===document.activeElement&&"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),null===(t=this.lastInnerElement)||void 0===t||t.focus({preventScroll:!1}))}lastInnerElementKeyDown(e){var t;this.lastInnerElement!==document.activeElement||"Tab"!==e.key||e.shiftKey||(e.preventDefault(),null===(t=this.firstInnerElement)||void 0===t||t.focus({preventScroll:!1}))}unsubscribeInnerElementsKeyDown(){var e,t;null===(e=this.firstInnerElement)||void 0===e||e.removeEventListener("keydown",this.firstInnerElementKeyDownHandler),null===(t=this.lastInnerElement)||void 0===t||t.removeEventListener("keydown",this.lastInnerElementKeyDownHandler)}subscribeInnerElementsKeyDown(){var e,t;null===(e=this.firstInnerElement)||void 0===e||e.addEventListener("keydown",this.firstInnerElementKeyDownHandler),null===(t=this.lastInnerElement)||void 0===t||t.addEventListener("keydown",this.lastInnerElementKeyDownHandler)}updateInnerElements(){this.tabbables&&(this.firstInnerElement=this.tabbables[0],this.lastInnerElement=this.tabbables[this.tabbables.length-1])}};class Kr{constructor(e){this.reinitCallback=e,this.mutationObserver=new MutationObserver((e=>this.checkViability(e,this.reinitCallback))),this.subscribed=!1}checkViability(e,t){for(const i of e)if(!i.target.isConnected){t();break}}subscribe(e){this.subscribed||(this.mutationObserver.observe(e,{attributes:!0}),this.subscribed=!0)}unsubscribe(){this.subscribed&&(this.mutationObserver.disconnect(),this.subscribed=!1)}}var Or;const _r="dxbl-popup",Vr=e=>e;class zr{constructor(e,t){this.closeReason=e,this.branchId=t}}class Wr extends CustomEvent{constructor(e,t){super(Wr.eventName,{detail:new zr(e,t),bubbles:!0,composed:!0,cancelable:!0})}}Wr.eventName=_r+".closingRequested",mt.register(Wr.eventName,(e=>e.detail));class $r extends CustomEvent{constructor(e,t){super($r.eventName,{detail:new zr(e,t),bubbles:!0,composed:!0,cancelable:!0})}}var Gr,qr,Xr,Yr,Jr,jr,Zr;$r.eventName=_r+".closingResultRequested",mt.register($r.eventName,(e=>e.detail)),function(e){e.Viewport="viewport",e.Page="page",e.Rectangle="rectangle",e.TargetElement="targetelement"}(Gr||(Gr={})),function(e){e.None="none",e.Hide="hide",e.Close="close"}(qr||(qr={})),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.Center=4]="Center"}(Xr||(Xr={}));class eo{constructor(e,t){this.targetInterestPoint=e,this.childInterestPoint=t}}!function(e){e.Absolute="absolute",e.Relative="relative",e.Bottom="bottom",e.Center="center",e.Right="right",e.AbsolutePoint="absolutepoint",e.RelativePoint="relativepoint",e.Mouse="mouse",e.MousePoint="mousepoint",e.Left="left",e.Top="top",e.Custom="custom"}(Yr||(Yr={})),function(e){e.Near="near",e.Far="far"}(Jr||(Jr={})),function(e){e.top="top",e.bottom="bottom"}(jr||(jr={})),function(e){e[e.None=0]="None",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(Zr||(Zr={}));class to{constructor(e=new Ze(0,0),t=new tt(0,0)){this.childSize=tt.Empty,this.mousePosition=null,this.visuallyHidden=!1,this.closingRequested=!1,this.lockPlacement=!1,this.lockedPosition=0,this.topLeft=e,this.size=t}}class io{constructor(e,t,i,n,s){this.dropOpposite=!1,this.dropDirection=Jr.Near,this.dropAlignment=jr.bottom,this.axis=t,this.point=e,this.dropOpposite=i,this.dropAlignment=s,this.dropDirection=n}}class no{get childPoints(){return this._childPoints}get placementTargetPoints(){return this._placementTargetPoints}constructor(e,t){this.customPlacement=null,this._childPoints=e,this._placementTargetPoints=t}}class so extends CustomEvent{constructor(e){super(so.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}so.eventName="dxbl-popup-custom-placement";class ro{}class oo extends CustomEvent{constructor(e){super(oo.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}oo.eventName="dxbl-popup-shown";class ao extends CustomEvent{constructor(e){super(ao.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}ao.eventName="dxbl-popup-closed";class lo{get zIndex(){return this._zIndex}constructor(e){this._zIndex=null!=e?e:0}}class Ao extends CustomEvent{constructor(e){super(Ao.eventName,{detail:e,bubbles:!0,composed:!0})}}Ao.eventName="dxbl-popup-zindex-delta-change";class co{get isFocused(){return this._isFocused}get branchId(){return this._branchId}constructor(e,t){this._branchId=e,this._isFocused=t}}class ho extends CustomEvent{constructor(e){super(ho.eventName,{detail:e,bubbles:!0,composed:!0})}}ho.eventName="dxbl-popup-focus-change";class uo extends CustomEvent{constructor(e){super(uo.eventName,{detail:{visible:e},bubbles:!0,composed:!0})}}uo.eventName="dxbl-popup-visible-change";class po extends CustomEvent{constructor(e){super(po.eventName,{detail:{visible:e},bubbles:!0,composed:!0})}}po.eventName="dxbl-popup-kbd-strategy-activate";class mo extends CustomEvent{constructor(e){super(mo.eventName,{detail:e,bubbles:!0,composed:!0})}}mo.eventName="dxbl-popup-focus-loop";class go extends CustomEvent{constructor(e){super(go.eventName,{detail:{factory:e},bubbles:!0,composed:!0})}}go.eventName="dxbl-popup-keyboard-strategy-creating";let Co=Or=class extends Pr{static fromElement(e){for(;null!==e&&!(e instanceof Or);)e=e.parentElement;return e}get branchType(){return Hs.DropDown}get positionChanged(){return this._positionChangedEvent}get initialVisibility(){return this._initialVisibility}set initialVisibility(e){this._initialVisibility=e,this._setVisibilityStyles(this._initialVisibility),this.initializeFocusTrap(),this.initializeKeyboardNavigator(),this.dispatchEvent(new uo(this._initialVisibility))}_setVisibilitySizing(e){e?null!==this._currentMaxHeight&&(this.style.maxWidth=this._currentMaxWidth,this.style.maxHeight=this._currentMaxHeight,this.style.overflow=this._currentOverflow):(null===this._currentMaxHeight&&(this._currentMaxHeight=this.style.maxHeight,this._currentMaxWidth=this.style.maxWidth,this._currentOverflow=this.style.overflow),this.style.overflow="hidden",this.style.maxWidth="0px",this.style.maxHeight="0px")}_setVisibilityStyles(e){e?(this.style.opacity="1",this.style.pointerEvents="auto"):(this.style.opacity="0",this.style.pointerEvents="none"),this._setVisibilitySizing(e)}enableVisibility(){clearTimeout(this._showingTimeoutId),this._showingTimeoutId=setTimeout((()=>{this.initialVisibility||(this.initialVisibility=!0)}))}static get styles(){return Cn`
            :host {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                min-height: 0;
            }
            dxbl-branch {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                min-height: 0;
            }
            .content-holder {
                display: flex;
                flex: 1 0 auto;
                flex-direction: column;
                min-height: 0;
            }
        `}get isCloseOnPointerUp(){return this.closeOnPointerUp}get renderedVisible(){var e,t;return this._renderedVisible&&(null===(t=null===(e=this._parentPopup)||void 0===e?void 0:e.renderedVisible)||void 0===t||t)}updated(e){e.has("closeOnOutsideClick")&&this.processCapture(this.closeOnOutsideClick),this.reposition()}initializeFocusTrap(){this.initialVisibility&&this.isOpen&&this.focusLoop&&kr.activate(this,!1)}get child(){return this._child}get isOpen(){return this._isOpen}get placementTargetElement(){return this.placementTargetElementField}set placementTargetElement(e){this.unsubscribeFromPlacementTargetPositionObserver(),this.placementTargetElementField=e,this.subscribeToPlacementTargetPositionObserver()}updateTargetElement(){if(!this.placementTarget)return;const e=document.querySelector(this.placementTarget);e&&(this.placementTargetElement=e)}get dropOpposite(){return this._dropOpposite}get autoFocus(){return this._autoFocus}get dropFromRight(){return this._dropFromRight}get offset(){return this._offset}set offset(e){this._offset=e,this.style.transform=yr.translateByPoint(e)}get childSize(){return this.positionInfo.childSize}constructor(){super(),this._renderedVisible=!1,this.hasOwnLogicalParent=!1,this.tolerance=.01,this.repositionAction=new ar,this.positionInfo=new to,this._child=null,this.childResizeObserver=new ResizeObserver(this.handleChildSizeChanged.bind(this)),this._dropOpposite=!1,this._dropFromRight=!1,this._offset=Ze.zero,this.placementTargetElementField=null,this.focusInHandler=this.handleFocusIn.bind(this),this.focusOutHandler=this.handleFocusOut.bind(this),this.focusLoopHandler=this.handleFocusLoop.bind(this),this.positionChangingHandler=this.handlePositionChanging.bind(this),this.sizeChangedHandler=this.handleSizeChanged.bind(this),this.placementTargetPositionChangedHandler=this.handlePlacementTargetPositionChanged.bind(this),this.placementTargetPositionObserver=new xr(this.placementTargetPositionChangedHandler,{raf:!1}),this.placementTargetViabilityObserver=new Kr((()=>this.updateTargetElement())),this.placementTargetElementChangedHandler=this.handlePlacementTargetElementChanged.bind(this),this.placementTargetObserver=null,this._autoFocus=!1,this._interceptor=null,this.bridgeSlotChangedHandler=this.handleBridgeSlotChange.bind(this),this.closingResultRequestedTcs=new Fr,this._positionChangedEvent=new Ur,this._parentPopup=null,this.positionChangedHandler=this.handleParentPopupPositionChanged.bind(this),this._initialVisibility=!0,this._showingTimeoutId=void 0,this.isAdjustDialogEnabled=!0,this._capturedElementReleaseCallback=null,this._currentMaxHeight=null,this._currentMaxWidth=null,this._currentOverflow=null,this.closeOnOutsideClick=!1,this.closeOnPointerUp=!1,this.preventCloseOnPositionTargetClick=!1,this.closeMode=qr.Hide,this.fitToRestriction=!1,this.preventInteractions=!1,this.hasServerSideClosing=!1,this.parentBranchId=null,this.rootCssStyle=null,this.placement=Yr.Absolute,this.horizontalOffset=0,this.verticalOffset=0,this.placementTarget=null,this.restrictTarget=null,this.restrict=Gr.Viewport,this.width=null,this.maxWidth=null,this.minWidth=null,this.height=null,this.maxHeight=null,this.minHeight=null,this.desiredWidth=null,this.desiredHeight=null,this.minDesiredWidth=null,this.minDesiredHeight=null,this.renderWidth=null,this.renderHeight=null,this.restrictRectangle=nt.Empty,this.placementRectangle=nt.Empty,this.actualDropDirection=Jr.Near,this.actualDropAlignment=jr.bottom,this.actualDropOpposite=!1,this._isOpen=!1,this.animationEnabled=!1,this.resizing=!1,this.focusLoop=!1,this.zIndex=0,this.releasingCaptureAction=this.releaseFocusTrap,this.capturingAction=this.activate}render(){return this.renderTemplate()}activatePopupContent(){}willUpdate(e){this.renderWidth=this.calcRenderWidth(),this.renderHeight=this.calcRenderHeight(),this.shouldUpdateRootCssStyle(e)&&(this.rootCssStyle=this.composeRootCssStyle()),e.has(Vr("placementTarget"))&&this.processPlacementTargetChanged()}composeRootCssStyle(){let e="";return this.shouldCalcWidth()&&(e+=`width: ${this.calcWidth()}; `),this.shouldCalcMinWidth()&&(e+=`min-width: ${this.calcMinWidth()}; `),this.shouldCalcMaxWidth()&&(e+=`max-width: ${this.calcMaxWidth()}; `),this.shouldCalcHeight()&&(e+=`height: ${this.calcHeight()}; `),this.shouldCalcMinHeight()&&(e+=`min-height: ${this.calcMinHeight()}; `),this.shouldCalcMaxHeight()&&(e+=`max-height: ${this.calcMaxHeight()}; `),e}processPlacementTargetChanged(){this.unsubscribeFromPlacementTargetObserver(),this.unsubscribeFromPlacementTargetPositionObserver(),this.subscribeToPlacementTargetObserver(),this.subscribeToPlacementTargetPositionObserver()}calcRenderHeight(){var e;return null!==(e=this.desiredHeight)&&void 0!==e?e:this.height}calcRenderWidth(){var e;return null!==(e=this.desiredWidth)&&void 0!==e?e:this.width}calcMaxWidth(){return this.maxWidth}calcMaxHeight(){return this.maxHeight}calcMinWidth(){var e;return null!==(e=this.minDesiredWidth)&&void 0!==e?e:this.minWidth}calcMinHeight(){var e;return null!==(e=this.minDesiredHeight)&&void 0!==e?e:this.minHeight}shouldCalcMinHeight(){return!!this.minHeight||!!this.minDesiredHeight}shouldCalcMinWidth(){return!!this.minWidth||!!this.minDesiredWidth}shouldCalcMaxWidth(){return!!this.maxWidth}shouldCalcMaxHeight(){return!!this.maxHeight}shouldCalcWidth(){return!!this.renderWidth}shouldCalcHeight(){return!!this.renderHeight}calcWidth(){return this.renderWidth}calcHeight(){return this.renderHeight}shouldUpdateRootCssStyle(e){return e.has("width")||e.has("minWidth")||e.has("maxWidth")||e.has("height")||e.has("minHeight")||e.has("maxHeight")||e.has("desiredWidth")||e.has("desiredHeight")||e.has("renderWidth")||e.has("renderHeight")||e.has("minDesiredWidth")||e.has("minDesiredHeight")}renderTemplate(){return Xn`
            <div class="${this.rootCssStyle}">
                ${this.renderSlot}
            </div>
        `}renderSlot(){return Xn`
            ${this.renderDefaultSlot()}
            ${this.renderAdditionalSlots()}
            ${this.renderBridgeSlot()}
        `}renderDefaultSlot(){return Xn`<slot></slot>`}renderBridgeSlot(){return Xn`
            <slot name="bridge" @slotchange=${this.bridgeSlotChangedHandler}></slot>
        `}renderAdditionalSlots(){return Xn`
            <slot name="top-left" slot="top-left"></slot>
            <slot name="top-right" slot="top-right"></slot>
            <slot name="bottom-left" slot="bottom-left"></slot>
            <slot name="bottom-right" slot="bottom-right"></slot>
        `}firstUpdated(){this.child&&(this.childResizeObserver.observe(this.child),this.reposition())}connectedCallback(){super.connectedCallback(),this.style.display=P.flex}disconnectedCallback(){super.disconnectedCallback(),this.close()}createKeyboardNavigationStrategy(){return null}initializeKeyboardNavigator(){var e,t,i;if(this.keyboardNavigator||(this.keyboardNavigator=this.querySelector(hr)),this.keyboardNavigator&&!this.keyboardNavigator.initialized){const n=new go({createPopup:this.createKeyboardNavigationStrategy.bind(this)});null===(e=this.getPortal())||void 0===e||e.dispatchEvent(n);const s=null===(i=null===(t=n.detail.factory)||void 0===t?void 0:t.createPopup)||void 0===i?void 0:i.call(t,this.keyboardNavigator,this);s&&this.keyboardNavigator.initialize(this,s)}}handleBridgeSlotChange(e){const t=e.target.assignedNodes();this._interceptor=t[0]}get isPreventPropagation(){return this.preventInteractions}async processCapturedPointerAsync(e,t){t.handled||this.isPointedCaptured(e)||(t.nextInteractionHandled=t.nextInteractionHandled||this.preventInteractions,this.closeOnOutsideClick&&await this.closeAsync(t,Tr.OutsideClick))}isPointedCaptured(e){return!!K.containsInComposedPath(e,this)||(!!(e.target instanceof Node&&this.isSubItem(e.target))||this.shouldCloseOnPlacementTargetClick(e))}isSubItem(e){return!!ut.findParent(e,(e=>e===this))}shouldCloseOnPlacementTargetClick(e){return!(!this.preventCloseOnPositionTargetClick||!this.placementTargetElement)&&H.containsInComposedPath(e,(e=>e===this.placementTargetElement))}async closeAsync(e,t){const i=await this.raiseClosingResultRequestedAsync(t);return this.closingResultRequestedTcs=new Fr,e.nextInteractionHandled=e.nextInteractionHandled||this.preventInteractions,e.handled=!0,Promise.resolve(!!i)}async processCapturedKeyDownAsync(e,t){if(await super.processCapturedKeyDownAsync(e,t),!t.handled&&t.caller===this&&"Escape"===e.key&&this.canProcessEscapeKeyDown()){H.markHandled(e);const i=await this.raiseClosingResultRequestedAsync(Tr.EscapePress);if(this.closingResultRequestedTcs=new Fr,!i)return void(t.handled=!0);this.unsubscribeCapture()}}canProcessEscapeKeyDown(){return!0}releaseFocusTrap(){kr.deactivate(this,!this.isOpen)}raiseEvent(e,t){var i;null===(i=this._interceptor)||void 0===i||i.raise(e,t)}unsubscribeFromPlacementTargetObserver(){this.placementTargetObserver&&(this.placementTargetObserver.disconnect(),this.placementTargetObserver=null)}subscribeToPlacementTargetObserver(){this.isOpen&&(this.placementTargetObserver=new Dr(this.placementTarget,this.placementTargetElementChangedHandler),this.placementTargetObserver.observe())}unsubscribeFromPlacementTargetPositionObserver(){this.placementTargetPositionObserver.disconnect(),this.placementTargetViabilityObserver.unsubscribe()}subscribeToParentPopup(){const e=ut.findParent(this,(e=>at(e)));if(e&&at(e)){const t=e;t.positionChanged.subscribe(this.positionChangedHandler),this._parentPopup=t}}unsubscribeFromParentPopup(){this._parentPopup&&(this._parentPopup.positionChanged.unsubscribe(this.positionChangedHandler),this._parentPopup=null)}handleParentPopupPositionChanged(e,t){this.updatePosition()}subscribeToPlacementTargetPositionObserver(){this.placementTargetElement&&this.isOpen&&(this.placementTargetPositionObserver.observe(this.placementTargetElement),this.placementTargetViabilityObserver.subscribe(this.placementTargetElement))}show(){this.isOpen||(this._isOpen=!0,this.initialVisibility=!1,this._isOpen=!0,this.raiseShown(),this.addToLogicalTree(),this.addToVisibleBranchTree(),this.subscribeEvents(),this.initializeCapture(),this.reposition(),this.canAdjustZIndexOnShow&&this.raiseAdjustZIndexRequest(!0))}get canAdjustZIndexOnShow(){return!0}ensureBranchId(){if(!this.branchId)throw new Error("branchId should not be null")}addToVisibleBranchTree(){this.ensureBranchId(),Rs.register(this.branchId)}removeFromVisibleBranchTree(){this.ensureBranchId(),Rs.unregister(this.branchId)}getPortal(){return Oa.getPortal(this.branchId)}raiseShown(){this._setVisibilitySizing(!0);const e=new ro;this.dispatchEvent(new oo(e))}raiseClosed(){const e=new ro;this.dispatchEvent(new ao(e))}close(){var e;this.isOpen&&(this._isOpen=!1,this.raiseClosed(),this.removeFromLogicalTree(),this.removeFromVisibleBranchTree(),this.unsubscribeEvents(),this.releaseCapture(),this.cleanUpAfterClose(),this.reposition(),this.canAdjustZIndexOnShow&&this.raiseAdjustZIndexRequest(!1),null===(e=this.keyboardNavigator)||void 0===e||e.disposeComponent())}notifyCloseCanceled(){this.processClosingRequested(!1),this.positionInfo.closingRequested=!1}cleanUpAfterClose(){this.updateVisibility(!1),this.animationEnabled=!1,this.positionInfo=new to}shouldCapture(){return this.closeOnOutsideClick||this.preventInteractions}async addToLogicalTree(){if(this.hasLogicalParent)return void(this.hasOwnLogicalParent=!0);this.ensureBranchId();const e=Ns.getParentId(this.branchId),t=await pr().getPopup(e);t&&At(t)&&t.addLogicalChild(this)}removeFromLogicalTree(){if(this.hasOwnLogicalParent)return void(this.hasOwnLogicalParent=!1);const e=ut.getParent(this,!0);e&&At(e)&&e.removeLogicalChild(this)}initializeCapture(){this.shouldCapture&&this.subscribeCapture()}focusCapture(){}releaseCapture(){this.processClosingRequested(!0),this.unsubscribeCapture()}subscribeCapture(){const e=document.querySelector("dxbl-popup-root");e&&(this._capturedElementReleaseCallback=e.subscribe(this))}unsubscribeCapture(){this._capturedElementReleaseCallback&&(this._capturedElementReleaseCallback(),this._capturedElementReleaseCallback=null)}processClosingRequested(e){this.closingResultRequestedTcs.resolve(e),this.closingResultRequestedTcs=new Fr,this.positionInfo.closingRequested=!1}subscribeToChild(e){e&&this.childResizeObserver.observe(e,{box:"border-box"})}unsubscribeFromChild(e){e&&this.childResizeObserver.unobserve(e)}subscribeEvents(){this.isAdjustDialogEnabled&&(this.addEventListener("focusin",this.focusInHandler),this.addEventListener("focusout",this.focusOutHandler)),this.focusLoop&&this.addEventListener(mo.eventName,this.focusLoopHandler),document.addEventListener(Br.eventName,this.positionChangingHandler),this.addEventListener(Br.eventName,this.positionChangingHandler),window.addEventListener("resize",this.sizeChangedHandler),this.subscribeToPlacementTargetObserver(),this.subscribeToPlacementTargetPositionObserver(),this.subscribeToParentPopup()}unsubscribeEvents(){this.isAdjustDialogEnabled&&(this.removeEventListener("focusin",this.focusInHandler),this.removeEventListener("focusout",this.focusOutHandler)),this.focusLoop&&this.removeEventListener(mo.eventName,this.focusLoopHandler),document.removeEventListener(Br.eventName,this.positionChangingHandler),this.removeEventListener(Br.eventName,this.positionChangingHandler),this.removeEventListener("resize",this.sizeChangedHandler),this.unsubscribeFromPlacementTargetPositionObserver(),this.unsubscribeFromPlacementTargetObserver(),this.unsubscribeFromParentPopup()}reposition(){this.repositionAction.execute(this.updatePosition.bind(this))}activate(){const e=new Ks(new Ms(this.branchId));this.dispatchEvent(e)}forceReposition(){this.repositionAction.cancel(),this.updatePosition()}lockPlacement(){this.positionInfo.lockPlacement=!0}unlockPlacement(){this.positionInfo.lockPlacement=!1}handleChildSizeChanged(e,t){this.reposition(),this.contentLoaded()&&this.enableVisibility()}contentLoaded(){return!0}handlePositionChanging(e){this.reposition()}handleSizeChanged(e){this.reposition()}handlePlacementTargetPositionChanged(e,t){this.reposition(),this.enableVisibility()}handlePlacementTargetElementChanged(e,t){this.placementTargetElement=e.element,this.reposition()}handleFocusIn(e){this.raiseAdjustZIndexRequest(!0),this.subscribeCapture()}handleFocusOut(e){this.raiseAdjustZIndexRequest(!1)}handleFocusLoop(){this.initializeFocusTrap()}raiseAdjustZIndexRequest(e){this.dispatchEvent(new ho(new co(this.branchId,e))),e&&this.focusCapture()}isAbsolutePlacementMode(e){switch(e){case Yr.MousePoint:case Yr.Mouse:case Yr.AbsolutePoint:case Yr.Absolute:return!0}return!1}interestPointsFromRect(e){const t=new Array(5);return t[Xr.TopLeft]=e.topLeft,t[Xr.TopRight]=e.topRight,t[Xr.BottomLeft]=e.bottomLeft,t[Xr.BottomRight]=e.bottomRight,t[Xr.Center]=new Ze(e.x+e.width/2,e.y+e.height/2),t}getPlacementTargetInterestPoints(e){let t,i=nt.Empty;const n=this.placementTargetElement,s=new vr(this.horizontalOffset,this.verticalOffset);if(!n||this.isAbsolutePlacementMode(e))e!==Yr.Mouse&&e!==Yr.MousePoint||(this.positionInfo.mousePosition||(this.positionInfo.mousePosition=new Ze(fr.x,fr.y)),i=nt.create(this.positionInfo.mousePosition,tt.Empty)),i=st.offset(i,s),t=this.interestPointsFromRect(i);else{i=this.placementRectangle,st.areSame(i,nt.Empty)&&(i=e!==Yr.Relative&&e!==Yr.RelativePoint?new nt(0,0,n.getBoundingClientRect().width,n.getBoundingClientRect().height):nt.Empty),i=st.offset(i,s),t=this.interestPointsFromRect(i);const r=rt.getRelativeElementRect(n).topLeft;for(let e=0;e<5;e++)t[e]=et.add(t[e],r)}return t}getChildInterestPoints(e){return this.child?(this._setVisibilitySizing(!0),this.interestPointsFromRect(new nt(0,0,this.child.offsetWidth,this.child.offsetHeight))):this.interestPointsFromRect(nt.Empty)}getBounds(e){let t=e[0].x,i=e[0].x,n=e[0].y,s=e[0].y;return e.forEach((e=>{const r=e.x,o=e.y;r<t&&(t=r),r>i&&(i=r),o<n&&(n=o),o>s&&(s=o)})),new nt(t,n,i-t,s-n)}raiseCustomPlacement(e,t){const i=new so(new no(e,t));return this.dispatchEvent(i),i.detail.customPlacement}getNumberOfCombinations(e){switch(e){case Yr.Mouse:return 2;case Yr.Bottom:case Yr.Top:case Yr.Right:case Yr.Left:case Yr.RelativePoint:case Yr.MousePoint:case Yr.AbsolutePoint:return 4;case Yr.Custom:return 0;default:return 1}}getPointCombination(e,t){const i=this.dropFromRight;switch(e){case Yr.Mouse:if(i){if(0===t)return[new eo(Xr.BottomRight,Xr.TopRight),Zr.Horizontal,!1,Jr.Near,jr.bottom];if(1===t)return[new eo(Xr.TopRight,Xr.BottomRight),Zr.Horizontal,!1,Jr.Near,jr.bottom]}else{if(0===t)return[new eo(Xr.BottomLeft,Xr.TopLeft),Zr.Horizontal,!1,Jr.Near,jr.bottom];if(1===t)return[new eo(Xr.TopLeft,Xr.BottomLeft),Zr.Horizontal,!1,Jr.Near,jr.bottom]}break;case Yr.Bottom:if(i){if(0===t)return[new eo(Xr.BottomRight,Xr.TopRight),Zr.Horizontal,!1,Jr.Far,jr.bottom];if(1===t)return[new eo(Xr.TopRight,Xr.BottomRight),Zr.Horizontal,!0,Jr.Far,jr.top];if(2===t)return[new eo(Xr.BottomLeft,Xr.TopLeft),Zr.Horizontal,!1,Jr.Near,jr.bottom];if(3===t)return[new eo(Xr.TopLeft,Xr.BottomLeft),Zr.Horizontal,!0,Jr.Near,jr.top]}else{if(0===t)return[new eo(Xr.BottomLeft,Xr.TopLeft),Zr.Horizontal,!1,Jr.Near,jr.bottom];if(1===t)return[new eo(Xr.TopLeft,Xr.BottomLeft),Zr.Horizontal,!0,Jr.Near,jr.top];if(2===t)return[new eo(Xr.BottomRight,Xr.TopRight),Zr.Horizontal,!1,Jr.Far,jr.bottom];if(3===t)return[new eo(Xr.TopRight,Xr.BottomRight),Zr.Horizontal,!0,Jr.Far,jr.top]}break;case Yr.Top:if(i){if(0===t)return[new eo(Xr.TopRight,Xr.BottomRight),Zr.Horizontal,!1,Jr.Far,jr.top];if(1===t)return[new eo(Xr.BottomRight,Xr.TopRight),Zr.Horizontal,!0,Jr.Far,jr.bottom];if(2===t)return[new eo(Xr.TopLeft,Xr.BottomLeft),Zr.Horizontal,!1,Jr.Near,jr.top];if(3===t)return[new eo(Xr.BottomLeft,Xr.TopLeft),Zr.Horizontal,!0,Jr.Near,jr.bottom]}else{if(0===t)return[new eo(Xr.TopLeft,Xr.BottomLeft),Zr.Horizontal,!1,Jr.Near,jr.top];if(1===t)return[new eo(Xr.BottomLeft,Xr.TopLeft),Zr.Horizontal,!0,Jr.Near,jr.bottom];if(2===t)return[new eo(Xr.TopRight,Xr.BottomRight),Zr.Horizontal,!1,Jr.Far,jr.top];if(3===t)return[new eo(Xr.BottomRight,Xr.TopRight),Zr.Horizontal,!0,Jr.Far,jr.bottom]}break;case Yr.Right:case Yr.Left:if(i&&e===Yr.Right||!i&&e===Yr.Left){if(0===t)return[new eo(Xr.TopLeft,Xr.TopRight),Zr.Vertical,!1,Jr.Near,jr.bottom];if(1===t)return[new eo(Xr.BottomLeft,Xr.BottomRight),Zr.Vertical,!0,Jr.Near,jr.top];if(2===t)return[new eo(Xr.TopRight,Xr.TopLeft),Zr.Vertical,!1,Jr.Far,jr.bottom];if(3===t)return[new eo(Xr.BottomRight,Xr.BottomLeft),Zr.Vertical,!0,Jr.Far,jr.top]}else{if(0===t)return[new eo(Xr.TopRight,Xr.TopLeft),Zr.Vertical,!1,Jr.Near,jr.bottom];if(1===t)return[new eo(Xr.BottomRight,Xr.BottomLeft),Zr.Vertical,!0,Jr.Near,jr.top];if(2===t)return[new eo(Xr.TopLeft,Xr.TopRight),Zr.Vertical,!1,Jr.Far,jr.bottom];if(3===t)return[new eo(Xr.BottomLeft,Xr.BottomRight),Zr.Vertical,!0,Jr.Far,jr.top]}break;case Yr.Relative:case Yr.RelativePoint:case Yr.MousePoint:case Yr.AbsolutePoint:if(i){if(0===t)return[new eo(Xr.TopLeft,Xr.TopRight),Zr.Horizontal,!1,Jr.Far,jr.bottom];if(1===t)return[new eo(Xr.TopLeft,Xr.TopLeft),Zr.Horizontal,!1,Jr.Near,jr.bottom];if(2===t)return[new eo(Xr.TopLeft,Xr.BottomRight),Zr.Horizontal,!0,Jr.Far,jr.top];if(3===t)return[new eo(Xr.TopLeft,Xr.BottomLeft),Zr.Horizontal,!0,Jr.Near,jr.top]}else{if(0===t)return[new eo(Xr.TopLeft,Xr.TopLeft),Zr.Horizontal,!1,Jr.Near,jr.bottom];if(1===t)return[new eo(Xr.TopLeft,Xr.TopRight),Zr.Horizontal,!1,Jr.Far,jr.bottom];if(2===t)return[new eo(Xr.TopLeft,Xr.BottomLeft),Zr.Horizontal,!0,Jr.Near,jr.top];if(3===t)return[new eo(Xr.TopLeft,Xr.BottomRight),Zr.Horizontal,!0,Jr.Far,jr.top]}break;case Yr.Center:return[new eo(Xr.Center,Xr.Center),Zr.None,!1,Jr.Near,jr.bottom];default:return[new eo(Xr.TopLeft,Xr.TopLeft),Zr.None,!1,Jr.Near,jr.bottom]}return[new eo(Xr.TopLeft,Xr.TopLeft),Zr.None,!1,Jr.Near,jr.bottom]}getRestrictBounds(){switch(this.restrict){case Gr.Viewport:return wr.viewport();case Gr.Page:return wr.page();case Gr.TargetElement:{if(!this.restrictTarget)throw new Error("restrictTarget should be specified if restrictmode is custom");const e=document.querySelector(this.restrictTarget);return rt.getRelativeElementRect(e)}case Gr.Rectangle:return this.restrictRectangle}return wr.viewport()}updatePosition(){if(!this.isOpen)return this._renderedVisible=!1,void this._setVisibilityStyles(!1);const e=this.renderedVisible;this._renderedVisible=!0;const t=this.renderedVisible;if(!t)return this.updateVisibility(!0),void(e!==t&&this.raisePositionChanged(this.offset,!1));const i=this.placement,n=this.getPlacementTargetInterestPoints(i),s=this.getChildInterestPoints(i),r=this.getBounds(n);let o=this.getBounds(s);const a=o.width*o.height;let l=-1,A=new vr(this.positionInfo.topLeft.x,this.positionInfo.topLeft.y),d=!1,c=-1,h=Zr.None,u=0,p=this.actualDropDirection,m=this.actualDropOpposite,g=this.actualDropAlignment,C=null,f=null;i===Yr.Custom?(f=this.processCustomPlacement(s,n),u=f?f.length:0):u=this.getNumberOfCombinations(i);for(let e=0;e<u;e++){if(this.positionInfo.lockPlacement&&this.positionInfo.lockedPosition!==e)continue;let t=new vr(0,0),r=Zr.None,d=!1,u=Jr.Near,v=jr.bottom,b=null;if(i===Yr.Custom)b=f[e],t=br.add(n[Xr.TopLeft],b.point),r=b.axis,d=b.dropOpposite,u=b.dropDirection,v=b.dropAlignment;else{const[r,o,a,l,A]=this.getPointCombination(i,e);d=a,u=l,v=A,t=et.sub(n[r.targetInterestPoint],s[r.childInterestPoint])}const w=st.offset(o,t),y=this.getRestrictBounds(),B=st.intersect(y,w),E=B.isEmpty?0:B.width*B.height;if(E-c>this.tolerance&&(l=e,A=t,c=E,h=r,p=u,m=d,g=v,C=b,Math.abs(E-a)<this.tolerance))break}this.actualDropOpposite=m,this.actualDropDirection=p,this.actualDropAlignment=g,o=st.offset(o,A);const v=this.getRestrictBounds(),b=st.intersect(v,o);[A,d]=this.calcRestrictedBestTranslation(b,o,n,v,r,A),this.processBestTranslationResults(A,o,r,v,m,p,g,h,C),this.positionInfo.lockedPosition=l,this.positionInfo.childSize=o.size;const w=Math.round(A.x),y=Math.round(A.y);let B=!1;w===this.positionInfo.topLeft.x&&y===this.positionInfo.topLeft.y||(this.positionInfo.topLeft=new Ze(w,y),this.offset=this.positionInfo.topLeft,B=!0);const E=!t||d,I=this.updateVisibility(E);B=B||I,this.animationEnabled=t&&!d,this._setVisibilityStyles(!E),B&&this.raisePositionChanged(this.offset,E),this.closeMode===qr.Close&&!this.positionInfo.closingRequested&&E&&(this.positionInfo.closingRequested=!0,this.raiseClosingRequested(Tr.Programmatically))}raisePositionChanged(e,t){this._positionChangedEvent.raise(this,[!t,e])}updateVisibility(e){return this._renderedVisible=!e,this.positionInfo.visuallyHidden!==e&&(this._setVisibilityStyles(!e),this.positionInfo.visuallyHidden=e,!0)}processCustomPlacement(e,t){return this.raiseCustomPlacement(e,t)}raiseClosingRequested(e){this.dispatchEvent(new Wr(e,this.branchId))}raiseClosingResultRequested(e){this.dispatchEvent(new $r(e,this.branchId))}async raiseClosingResultRequestedAsync(e){if(!this.hasServerSideClosing)return this.raiseClosingRequested(e),!0;const t=new Fr;return this.closingResultRequestedTcs=t,this.raiseClosingResultRequested(e),t.promise}calcRestrictedBestTranslation(e,t,i,n,s,r){return[this.fitToRestriction?this.calcRestrictedFitBestTranslation(e,t,i,n,r):r,this.closeMode!==qr.None&&this.calcRestrictedShouldHide(n,s)]}calcRestrictedShouldHide(e,t){if(!this.placementTargetElement)return!Or.checkTargetEdgesWithin(e,t);let i=e;return rt.getClippingParents(this.placementTargetElement).forEach((e=>{const t=rt.getRelativeElementRect(e);i=st.intersect(i,t)})),!!i.isEmpty||!Or.checkTargetEdgesWithin(i,t)}static checkTargetEdgesWithin(e,t){return st.contains(e,t.topLeft)||st.contains(e,t.topRight)||st.contains(e,t.bottomLeft)||st.contains(e,t.bottomRight)}calcRestrictedFitBestTranslation(e,t,i,n,s){if(Math.abs(e.width-t.width)>this.tolerance||Math.abs(e.height-t.height)>this.tolerance){const e=i[Xr.TopLeft],r=et.sub(i[Xr.TopRight],e),o=br.normalize(new vr(r.x,r.y));Number.isNaN(o.y)||Math.abs(o.y)<this.tolerance?t.right>n.right?s=new vr(n.right-t.width,s.y):t.left<n.left&&(s=new vr(n.left,s.y)):Math.abs(o.x)<this.tolerance&&(t.bottom>n.bottom?s=new vr(s.x,n.bottom-t.bottom):t.top<n.top&&(s=new vr(s.x,n.top)));const a=et.sub(e,i[Xr.BottomLeft]),l=br.normalize(a);Number.isNaN(l.x)||Math.abs(l.x)<this.tolerance?t.bottom>n.bottom?s=new vr(s.x,n.bottom-t.height):t.top<n.top&&(s=new vr(s.x,n.top)):Math.abs(l.y)<this.tolerance&&(t.right>n.right?s=new vr(n.right-t.width,s.y):t.left<n.left&&(s=new vr(n.x,s.y)))}return s}processCapture(e){}processBestTranslationResults(e,t,i,n,s,r,o,a,l){}};C([ln({type:Boolean,attribute:"close-on-outside-click"})],Co.prototype,"closeOnOutsideClick",void 0),C([ln({type:Boolean,attribute:"close-on-pointer-up"})],Co.prototype,"closeOnPointerUp",void 0),C([ln({type:Boolean,attribute:"prevent-close-on-position-target-click"})],Co.prototype,"preventCloseOnPositionTargetClick",void 0),C([ln({type:String,attribute:"close-mode"})],Co.prototype,"closeMode",void 0),C([ln({type:Boolean,attribute:"fit-to-restriction"})],Co.prototype,"fitToRestriction",void 0),C([ln({type:Boolean,attribute:"prevent-interactions"})],Co.prototype,"preventInteractions",void 0),C([ln({type:Boolean,attribute:"has-serverside-closing"})],Co.prototype,"hasServerSideClosing",void 0),C([ln({type:String,attribute:"branch-id"})],Co.prototype,"branchId",void 0),C([ln({type:String,attribute:"parent-branch-id"})],Co.prototype,"parentBranchId",void 0),C([ln({type:String,reflect:!1})],Co.prototype,"rootCssStyle",void 0),C([ln({type:String,attribute:"placement"})],Co.prototype,"placement",void 0),C([ln({type:Number,attribute:"horizontal-offset"})],Co.prototype,"horizontalOffset",void 0),C([ln({type:Number,attribute:"vertical-offset"})],Co.prototype,"verticalOffset",void 0),C([ln({type:String,attribute:"placement-target"})],Co.prototype,"placementTarget",void 0),C([ln({type:String,attribute:"restrict-target"})],Co.prototype,"restrictTarget",void 0),C([ln({type:String,attribute:"restrict"})],Co.prototype,"restrict",void 0),C([ln({type:String,attribute:"width"})],Co.prototype,"width",void 0),C([ln({type:String,attribute:"max-width"})],Co.prototype,"maxWidth",void 0),C([ln({type:String,attribute:"min-width"})],Co.prototype,"minWidth",void 0),C([ln({type:String,attribute:"height"})],Co.prototype,"height",void 0),C([ln({type:String,attribute:"max-height"})],Co.prototype,"maxHeight",void 0),C([ln({type:String,attribute:"min-height"})],Co.prototype,"minHeight",void 0),C([ln({type:String,attribute:"desired-width"})],Co.prototype,"desiredWidth",void 0),C([ln({type:String,attribute:"desired-height"})],Co.prototype,"desiredHeight",void 0),C([ln({type:String,attribute:"min-desired-width"})],Co.prototype,"minDesiredWidth",void 0),C([ln({type:String,attribute:"min-desired-height"})],Co.prototype,"minDesiredHeight",void 0),C([ln({type:String,reflect:!1})],Co.prototype,"renderWidth",void 0),C([ln({type:String,reflect:!1})],Co.prototype,"renderHeight",void 0),C([ln({type:String,attribute:"restrict-rect",converter:e=>e?st.parse(e):nt.Empty})],Co.prototype,"restrictRectangle",void 0),C([ln({type:String,attribute:"placement-rect",converter:e=>e?st.parse(e):nt.Empty})],Co.prototype,"placementRectangle",void 0),C([ln({type:String,attribute:"x-drop-direction",reflect:!0})],Co.prototype,"actualDropDirection",void 0),C([ln({type:String,attribute:"x-drop-alignment",reflect:!0})],Co.prototype,"actualDropAlignment",void 0),C([ln({type:String,attribute:"x-drop-opposite",reflect:!0,converter:{toAttribute:(e,t)=>e?"true":"false"}})],Co.prototype,"actualDropOpposite",void 0),C([ln({type:Boolean,attribute:"x-is-open",reflect:!0,converter:{fromAttribute:(e,t)=>{throw new Error("readonly")}}})],Co.prototype,"_isOpen",void 0),C([ln({type:Boolean,reflect:!1})],Co.prototype,"animationEnabled",void 0),C([ln({type:Boolean,attribute:"resizing"})],Co.prototype,"resizing",void 0),C([ln({type:Boolean,attribute:"focus-loop"})],Co.prototype,"focusLoop",void 0),C([ln({type:Number,attribute:"z-index"})],Co.prototype,"zIndex",void 0),Co=Or=C([rn(_r)],Co);const fo="dxbl-popup-cell";let vo=class extends ms{constructor(){super(...arguments),this._portal=null,this.elements=null,this.elementsChangedHandler=this.handleElementsChanged.bind(this),this.zIndexDeltaChangeHandler=this.handleZIndexDeltaChange.bind(this),this.baseZIndex=0,this.zIndexDelta=0}get zIndex(){return this.baseZIndex+this.zIndexDelta}createRenderRoot(){return this}get portal(){return this._portal}setPortal(e){this.unsubscribe(),this._portal=e,this.subscribe(),this.updateElements(this.elements,e.portable)}connectedCallback(){super.connectedCallback(),this.subscribe()}subscribe(){this.addEventListener(Ao.eventName,this.zIndexDeltaChangeHandler),this.portal&&this.portal.addEventListener(gr.eventName,this.elementsChangedHandler)}unsubscribe(){this.removeEventListener(Ao.eventName,this.zIndexDeltaChangeHandler),this.portal&&this.portal.removeEventListener(gr.eventName,this.elementsChangedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe()}handleElementsChanged(e){this.updateElements(this.elements,e.detail.elements)}updateElements(e,t){e&&e.forEach((e=>this.removeChild(e))),this.elements=t,t&&this.append(...t)}handleZIndexDeltaChange(e){this.zIndexDelta=e.detail.zIndex}updated(e){(e.has("zIndex")||e.has("zIndexDelta")||e.has("baseZIndex"))&&(this.style.zIndex=String(this.zIndex))}};C([ln({type:Number})],vo.prototype,"baseZIndex",void 0),C([ln({type:Number})],vo.prototype,"zIndexDelta",void 0),C([ln({type:Number,reflect:!0})],vo.prototype,"zIndex",null),vo=C([rn(fo)],vo);const bo=new class{constructor(){this._shadowBranchEvent=new Hr,this._topShadowId=null,this.shadowSet=new Set}get shadowBranchChanged(){return this._shadowBranchEvent}register(e){this.shadowSet.add(e),this.raiseTopShadowStackChanged()}unregister(e){this.shadowSet.delete(e),this.raiseTopShadowStackChanged()}raiseTopShadowStackChanged(){const e=this.getTopShadowModal();if(this._topShadowId===e)return;this._topShadowId=e;this._shadowBranchEvent.raise({branch:e})}getTopShadowModal(){let e=-1,t="";for(const i of Array.from(this.shadowSet)){const n=Rs.getIndex(i);n>e&&(e=n,t=i)}return t}},wo=he.Prefix+"-prevent-safari-scrolling";const yo=new class{constructor(){this.paddingCoerced=!1,this.bodyScrollTop=0,this.bodyScrollPadding="",this.scrollLocked=!1,this.scrollLockHostSet=new Set}register(e){this.scrollLockHostSet.add(e),this.updateScrollLock()}unregister(e){this.scrollLockHostSet.delete(e),this.updateScrollLock()}updateScrollLock(){this.toggleBodyScroll(document.body,this.scrollLockHostSet.size>0)}toggleBodyScroll(e,t){t!==this.scrollLocked&&(this.scrollLocked=t,this.toggleScrollPadding(e,t),T.DomUtils.toggleClassName(e,"dxbl-modal-open",t),h.Browser.Safari&&this.toggleSafariScroll(e,t))}toggleScrollPadding(e,t){if(t){const t=Te.getVerticalScrollbarWidth();if(0===t)return;this.paddingCoerced=!0;const i=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);return this.bodyScrollPadding=document.body.style.paddingRight,void(e.style.paddingRight=`${i+t}px`)}this.paddingCoerced&&(e.style.paddingRight=this.bodyScrollPadding,this.paddingCoerced=!1)}toggleSafariScroll(e,t){t?(this.bodyScrollTop=window.pageYOffset,T.DomUtils.toggleClassName(e,wo,t)):(T.DomUtils.toggleClassName(e,wo,t),window.scrollTo(0,this.bodyScrollTop))}};class Bo{}Bo.Window=he.Prefix+"-window",Bo.WindowHeader=Bo.Window+"-header",Bo.WindowHeaderButton=Bo.WindowHeader+"-button";class Eo{}Eo.Popup=he.Prefix+"-popup",Eo.PopupHeader=Eo.Popup+"-header",Eo.PopupHeaderButton=Eo.PopupHeader+"-button",Eo.PopupResized=Eo.Popup+"-resized";const Io=`.${Bo.WindowHeaderButton}, .${Eo.PopupHeaderButton}`;class So{constructor(e,t){this.x=t.x,this.y=t.y}}class xo extends CustomEvent{constructor(e,t){super(xo.eventName,{detail:new So(e,t),bubbles:!0,composed:!0,cancelable:!1})}}xo.eventName="dxbl:popup-dragcompleted",mt.register(xo.eventName,(e=>e.detail));class Do{constructor(e){this.x=e.x,this.y=e.y}}class Fo extends CustomEvent{constructor(e){super(Fo.eventName,{detail:new Do(e),bubbles:!0,composed:!0,cancelable:!1})}}Fo.eventName="dxbl:popup-dragstarted",mt.register(Fo.eventName,(e=>e.detail));class To{constructor(e){this.x=e.x,this.y=e.y}}class Ho extends CustomEvent{constructor(e){super(Ho.eventName,{detail:new To(e),bubbles:!0,composed:!0,cancelable:!0})}}Ho.eventName="dxbl-popup.drag";const Uo="dxbl-popup-dragging";let Po=class extends ms{constructor(){super(),this.allowDrag=!1,this.showCloseButton=!1}updated(e){(e.has("showCloseButton")||this.showCloseButton)&&this.preventCloseButtonDragging()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}render(){return Xn`<slot></slot>`}preventCloseButtonDragging(){const e=this.querySelector(Io);e&&e.addEventListener("pointerdown",(e=>{e.stopPropagation()}))}};C([ln({type:Boolean,attribute:"allow-drag",reflect:!1})],Po.prototype,"allowDrag",void 0),C([ln({type:Boolean,attribute:"show-close-button",reflect:!1})],Po.prototype,"showCloseButton",void 0),Po=C([rn("dxbl-popup-header")],Po);class Qo{constructor(e,t,i,n){this.min=new Ze(e,t),this.max=new Ze(i,n)}}function No(e,t,i){const n=i.min,s=i.max;return new Ze(Ro(n.x,s.x,t.clientX+window.scrollX-e.x),Ro(n.y,s.y,t.clientY+window.scrollY-e.y))}function Ro(e,t,i){return Math.floor(Math.min(t,Math.max(e,i)))}class Lo{constructor(e,t,i,n,s=null){this.mainElement=e,this.onStart=t,this.onMove=i,this.onEnd=n,this.checkPermission=s,this.handlersAdded=!1,this.dragHandler=this.handleDragStart.bind(this)}addHandlers(){this.handlersAdded||(this.mainElement.addEventListener(a.eventName,this.dragHandler),this.handlersAdded=!0)}removeHandlers(){this.mainElement.removeEventListener(a.eventName,this.dragHandler),this.handlersAdded=!1}handleDragStart(e){if(null!==this.checkPermission&&!this.checkPermission())return;const t=e,i=function(e,t){const i=e.getBoundingClientRect();return new Ze(Math.floor(t.clientX-i.x),Math.floor(t.clientY-i.y))}(this.mainElement,t.detail.source),n=(s=i,new Qo(window.scrollX-s.x,window.scrollY-s.y,window.scrollX+window.innerWidth-s.x,window.scrollY+window.innerHeight-s.y));var s;const r=No(i,t.detail.source,n);let o=r,a=null;const A=e=>{0===e.buttons||(o=No(i,e,n),null!==a&&et.areClose(a,o)||(a=o,this.onMove(a)))};document.addEventListener("pointermove",A,{passive:!0}),this.mainElement.addEventListener(l.eventName,(e=>{document.removeEventListener("pointermove",A);const t=e,s=No(i,t.detail.source,n);null!=a||(a=s),this.onEnd(0!==t.detail.source.buttons?s:a,r)}),{once:!0}),this.onStart(r)}}class Mo extends ms{static get styles(){return Cn`
            :host {
                display: flex;
            }
        `}connectedCallback(){super.connectedCallback(),n.setLoaded(this)}disconnectedCallback(){super.disconnectedCallback(),n.removeLoaded(this)}render(){return Xn`<slot></slot>`}}class ko extends Mo{get draggableElement(){return this.allowDragByHeaderOnly?this.header:this}get canDrag(){return this.allowDrag&&(null!==this.header||!this.allowDragByHeaderOnly)}constructor(){super(),this.allowDrag=!1,this.allowDragByHeaderOnly=!1,this.canDragByBody=!1,this.showHeader=!1,this.pointerEventsHelper=new q(this),this.dragHandler=new Lo(this,(e=>{this.style.cursor="move",this.style.userSelect="none",this.classList.add(Uo),this.shadowRoot.dispatchEvent(new Fo(e))}),(e=>{this.shadowRoot.dispatchEvent(new Ho(e))}),((e,t)=>{this.style.cursor="",this.style.userSelect="",this.classList.remove(Uo),this.shadowRoot.dispatchEvent(new xo(t,e))}),(()=>this.canDrag))}disconnectedCallback(){super.disconnectedCallback(),this.disposeDrag()}updated(e){(e.has("allowDrag")||e.has("allowDragByHeaderOnly")||e.has("showHeader"))&&this.updateDragging()}updateDragging(){this.allowDrag&&this.canDragByBody?(this.pointerEventsHelper.reinitialize(this.draggableElement),this.dragHandler.addHandlers()):this.disposeDrag()}disposeDrag(){this.dragHandler.removeHandlers(),this.pointerEventsHelper.dispose()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}C([ln({type:Boolean,attribute:"allow-drag",reflect:!0})],ko.prototype,"allowDrag",void 0),C([ln({type:Boolean,attribute:"allow-drag-by-header-only",reflect:!0})],ko.prototype,"allowDragByHeaderOnly",void 0),C([ln({type:Boolean,attribute:"can-drag-by-body"})],ko.prototype,"canDragByBody",void 0),C([ln({type:Boolean,attribute:"show-header"})],ko.prototype,"showHeader",void 0);const Ko=new ResizeObserver((e=>{for(const t of e){t.target.actualSize=new tt(Math.round(t.contentRect.width),Math.round(t.contentRect.height))}}));const Oo="0.25rem",_o="--dxbl-popup-resize-container-width",Vo="--dxbl-popup-resize-container-height";class zo{constructor(e){this.width=e.width,this.height=e.height}}class Wo extends CustomEvent{constructor(e){super(Wo.eventName,{detail:new zo(e),bubbles:!0,composed:!0,cancelable:!1})}}Wo.eventName="dxbl:popup-resizestarted",mt.register(Wo.eventName,(e=>e.detail));class $o{constructor(e){this.width=e.width,this.height=e.height}}class Go extends CustomEvent{constructor(e){super(Go.eventName,{detail:new $o(e),bubbles:!0,composed:!0,cancelable:!1})}}Go.eventName="dxbl:popup-resizecompleted",mt.register(Go.eventName,(e=>e.detail));class qo{constructor(e,t,i,n,s,r){this.deltaWidth=e,this.deltaHeight=t,this.deltaX=i,this.deltaY=n,this.resizing=s,this.dragging=r}}class Xo extends CustomEvent{constructor(e,t,i,n,s,r){super(Xo.eventName,{detail:new qo(e,t,i,n,s,r),bubbles:!0,composed:!0,cancelable:!1})}}Xo.eventName="dxbl:popup-layoutchange";class Yo{constructor(e,t){this.width=null,this.height=null,this.x=null,this.y=null,this.resizing=e,this.dragging=t}}class Jo extends CustomEvent{constructor(e,t){super(Jo.eventName,{detail:new Yo(e,t),bubbles:!0,composed:!0,cancelable:!1})}}Jo.eventName="dxbl:popup-layoutchangestart",mt.register(Jo.eventName,(e=>e.detail));class jo{constructor(e,t){this.width=null,this.height=null,this.x=null,this.y=null,this.oldWidth=null,this.oldHeight=null,this.oldX=null,this.oldY=null,this.resizing=e,this.dragging=t}}class Zo extends CustomEvent{constructor(e,t){super(Zo.eventName,{detail:new jo(e,t),bubbles:!0,composed:!0,cancelable:!1})}}Zo.eventName="dxbl:popup-layoutchangeend",mt.register(Zo.eventName,(e=>e.detail));class ea extends CustomEvent{constructor(e){super(ea.eventName,{detail:e,bubbles:!0,composed:!0})}}ea.eventName="dxbl-popup-resizer.onMoving";class ta extends ms{get lastX(){if(null===this.currentPosition)throw new Error("invalid state");return this.currentPosition.x}get lastY(){if(null===this.currentPosition)throw new Error("invalid state");return this.currentPosition.y}get topValue(){throw new Error("should be implemented")}get leftValue(){throw new Error("should be implemented")}get widthValue(){return Oo}get heightValue(){return Oo}get cursorValue(){throw new Error("should be implemented")}get isDragPossible(){return!1}constructor(){super(),this.currentPosition=null,this.pointerEventsHelper=new q(this),this.dragHandler=new Lo(this,(e=>{this.dispatchEvent(new ea(!0)),this.currentPosition=e,this.shadowRoot.dispatchEvent(new Jo(!0,this.isDragPossible))}),(e=>{const t=this.getDeltaWidth(e.x),i=this.getDeltaHeight(e.y),n=this.getDeltaX(e.x),s=this.getDeltaY(e.y);this.currentPosition=e,this.shadowRoot.dispatchEvent(new Xo(t,i,n,s,!0,this.isDragPossible))}),((e,t)=>{this.dispatchEvent(new ea(!1)),this.currentPosition=null,this.shadowRoot.dispatchEvent(new Zo(!0,this.isDragPossible))}))}connectedCallback(){super.connectedCallback(),this.pointerEventsHelper.initialize(),this.dragHandler.addHandlers()}disconnectedCallback(){super.disconnectedCallback(),this.pointerEventsHelper.dispose(),this.dragHandler.removeHandlers()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}getDeltaWidth(e){throw new Error("should be implemented")}getDeltaHeight(e){throw new Error("should be implemented")}getDeltaX(e){throw new Error("should be implemented")}getDeltaY(e){throw new Error("should be implemented")}render(){return Xn`
    <style>
        :host {
            position: absolute;
            top: ${this.topValue};
            left: ${this.leftValue};
            width: 0px;
            height: 0px;
            z-index: 1;
            pointer-events: auto;

        }
        .dxbl-resize-handle {
            width: ${this.widthValue};
            height: ${this.heightValue};
            opacity: 0;
            cursor: ${this.cursorValue};
            z-index: 1;
        }
    </style>
    <div class="dxbl-resize-handle"></div>
`}}let ia=class extends ta{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return Oo}get widthValue(){return`calc(var(${_o}) - ${Oo})`}get cursorValue(){return"ns-resize"}getDeltaWidth(e){return 0}getDeltaX(e){return 0}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};ia=C([rn("dxbl-resize-top-edge")],ia);let na=class extends ta{get topValue(){return Oo}get leftValue(){return"100%"}get heightValue(){return`calc(var(${Vo}) - ${Oo})`}get cursorValue(){return"ew-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return 0}getDeltaY(e){return 0}};na=C([rn("dxbl-resize-right-edge")],na);let sa=class extends ta{get topValue(){return"100%"}get leftValue(){return Oo}get widthValue(){return`calc(var(${_o}) - ${Oo})`}get cursorValue(){return"ns-resize"}getDeltaWidth(e){return 0}getDeltaX(e){return 0}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};sa=C([rn("dxbl-resize-bottom-edge")],sa);let ra=class extends ta{get isDragPossible(){return!0}get topValue(){return Oo}get leftValue(){return"0%"}get heightValue(){return`calc(var(${Vo}) - ${Oo})`}get cursorValue(){return"ew-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return 0}getDeltaY(e){return 0}};ra=C([rn("dxbl-resize-left-edge")],ra);let oa=class extends ta{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return"0%"}get cursorValue(){return"se-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};oa=C([rn("dxbl-resize-tl-grip")],oa);let aa=class extends ta{get isDragPossible(){return!0}get topValue(){return"0%"}get leftValue(){return"100%"}get cursorValue(){return"ne-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return this.lastY-e}getDeltaY(e){return e-this.lastY}};aa=C([rn("dxbl-resize-tr-grip")],aa);let la=class extends ta{get topValue(){return"100%"}get leftValue(){return"100%"}get cursorValue(){return"se-resize"}getDeltaWidth(e){return e-this.lastX}getDeltaX(e){return 0}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};la=C([rn("dxbl-resize-br-grip")],la);let Aa=class extends ta{get isDragPossible(){return!0}get topValue(){return"100%"}get leftValue(){return"0%"}get cursorValue(){return"sw-resize"}getDeltaWidth(e){return this.lastX-e}getDeltaX(e){return e-this.lastX}getDeltaHeight(e){return e-this.lastY}getDeltaY(e){return 0}};Aa=C([rn("dxbl-resize-bl-grip")],Aa);let da=class extends ms{constructor(){super(...arguments),this._actualSize=null,this.appliedSize=null,this.widthAttrName=_o,this.heightAttrName=Vo,this.resizerMovingHandler=this.resizerMoving.bind(this)}get actualSize(){return this._actualSize}set actualSize(e){this._actualSize=e,requestAnimationFrame((()=>this.tryToUpdateSizeStyle()))}tryToUpdateSizeStyle(){null!==this._actualSize&&(null!==this.appliedSize&&this.appliedSize.width===this._actualSize.width||this.style.setProperty(_o,`calc(${this._actualSize.width}px - ${Oo})`),null!==this.appliedSize&&this.appliedSize.height===this._actualSize.height||this.style.setProperty(Vo,`calc(${this._actualSize.height}px - ${Oo})`),this.appliedSize=this._actualSize)}connectedCallback(){super.connectedCallback(),Ko.observe(this),this.addEventListener(ea.eventName,this.resizerMovingHandler)}disconnectedCallback(){super.disconnectedCallback(),Ko.unobserve(this),this.removeEventListener(ea.eventName,this.resizerMovingHandler)}resizerMoving(e){this.style.pointerEvents=e.detail?"none":""}render(){return Xn`
<style>
    :host {
        display: flex;
        flex: 1 1 auto;
        min-width: 0px;
        min-height: 0px;

        ${this.widthAttrName}: 0px;
        ${this.heightAttrName}: 0px;
    }
    .dxbl-popup-resizable-container {
        position: absolute;
        width: var(${this.widthAttrName});
        height: var(${this.heightAttrName});
        pointer-events: none;
    }
    .dxbl-popup-resizable-content {
        display: flex;
        flex-flow: column nowrap;
        flex: 1 1 auto;
        overflow: hidden;
        border-radius: var(--dxbl-popup-border-radius);
    }
</style>
<div class="dxbl-popup-resizable-container">
    <dxbl-resize-top-edge></dxbl-resize-top-edge>
    <dxbl-resize-right-edge></dxbl-resize-right-edge>
    <dxbl-resize-bottom-edge></dxbl-resize-bottom-edge>
    <dxbl-resize-left-edge></dxbl-resize-left-edge>
    <dxbl-resize-tl-grip></dxbl-resize-tl-grip>
    <dxbl-resize-tr-grip></dxbl-resize-tr-grip>
    <dxbl-resize-br-grip></dxbl-resize-br-grip>
    <dxbl-resize-bl-grip></dxbl-resize-bl-grip>
</div>
<div class="dxbl-popup-resizable-content">
    <slot></slot>
</div>
`}};da=C([rn("dxbl-popup-resizable-container")],da);const ca=document.createElement("DIV");function ha(e,t){if(null===e)return 0;const i=ca.cloneNode();i.style.width=e;(t||document.body).appendChild(i);const n=i.offsetWidth;return i.remove(),n}function ua(e){e.addEventListener(Ho.eventName,(t=>{t.stopImmediatePropagation();const i=t;e.positionX=i.detail.x,e.positionY=i.detail.y}),{passive:!0}),e.addEventListener(Jo.eventName,(t=>{const i=t,n=e.getBoundingClientRect();e.classList.add(Eo.PopupResized),e.sizeDirty=!0,e.actualPosition=new Ze(window.scrollX+n.x,window.scrollY+n.y),e.actualSize=new tt(n.width,n.height),e.initialPosition=e.actualPosition,e.initialSize=e.actualSize,e.actualMinWidth=ha(e.minWidth,e),e.actualMinHeight=ha(e.minHeight,e),e.actualMaxWidth=ha(e.maxWidth,e)||Number.MAX_VALUE,e.actualMaxHeight=ha(e.maxHeight,e)||Number.MAX_VALUE,i.detail.width=e.initialSize.width,i.detail.height=e.initialSize.height,i.detail.x=e.initialPosition.x,i.detail.y=e.initialPosition.y})),e.addEventListener(Zo.eventName,(t=>{const i=t;i.detail.width=e.actualSize.width,i.detail.height=e.actualSize.height,i.detail.x=e.actualPosition.x,i.detail.y=e.actualPosition.y,i.detail.oldWidth=e.initialSize.width,i.detail.oldHeight=e.initialSize.height,i.detail.oldX=e.initialPosition.x,i.detail.oldY=e.initialPosition.y})),e.addEventListener(Xo.eventName,(t=>{const i=t.detail,n=e.actualSize;e.actualSize=new tt(Math.max(e.actualMinWidth,Math.min(e.actualMaxWidth,e.actualSize.width+i.deltaWidth)),Math.max(e.actualMinHeight,Math.min(e.actualMaxHeight,e.actualSize.height+i.deltaHeight)));e.actualPosition=new Ze(e.actualPosition.x+(n.width-e.actualSize.width!=0?i.deltaX:0),e.actualPosition.y+(n.height-e.actualSize.height!=0?i.deltaY:0)),e.positionX=e.actualPosition.x,e.positionY=e.actualPosition.y,e.width=e.actualSize.width+"px",e.height=e.actualSize.height+"px"}),{passive:!0})}ca.style.position="absolute",ca.style.top="-1000px",ca.style.left="-1000px",ca.style.visibility="hidden";const pa="dxbl-modal-dialog";let ma=class extends ko{get header(){return this.querySelector(".dxbl-popup-header")}get actualSize(){return this._actualSize}set actualSize(e){this._actualSize=e}constructor(){super(),this._actualSize=null,this.actualPosition=null,this.initialSize=null,this.initialPosition=null,this.actualMinWidth=null,this.actualMaxWidth=null,this.actualMinHeight=null,this.actualMaxHeight=null,this.sizeDirty=!1,this.cssTextToApply="",this.popup=null,this.positionY=null,this.positionX=null,this.allowResize=!1,this.width=null,this.height=null,this.minWidth=null,this.minHeight=null,this.maxWidth=null,this.maxHeight=null,this.dialogCssStyle="",ua(this)}connectedCallback(){super.connectedCallback(),this.popup=this.closest(Pa),this.popup.notifyDialogConnected(this)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.popup)||void 0===e||e.notifyDialogDisconnected(),this.popup=null}updated(e){super.updated(e),this.mapCssTextToApply()}render(){return this.allowResize?Xn`<dxbl-popup-resizable-container><slot></slot></dxbl-popup-resizable-container>`:Xn`<slot></slot>`}setSize(e,t){this.width=e,this.height=t,this.mapCssTextToApply()}mapCssTextToApply(){const e=[],t=[];this.dialogCssStyle&&t.push(this.dialogCssStyle),null!==this.positionX&&(e.push(`translateX(${this.positionX}px)`),t.push("margin-left: 0;"),t.push("margin-right: 0;"),t.push("left: 0;")),null!==this.positionY&&(e.push(`translateY(${this.positionY}px)`),t.push("margin-top: 0;"),t.push("margin-bottom: 0;"),t.push("top: 0;")),this.width&&t.push(`width: ${this.width}`),this.height&&t.push(`height: ${this.height}`),e.length>0&&(t.push("position: absolute"),t.push(`transform: ${e.join(" ")}`)),this.cssTextToApply=t.join("; "),requestAnimationFrame((()=>this.style.cssText=this.cssTextToApply))}};C([ln({type:Number,attribute:"position-y",reflect:!1})],ma.prototype,"positionY",void 0),C([ln({type:Number,attribute:"position-x",reflect:!1})],ma.prototype,"positionX",void 0),C([ln({type:Boolean,attribute:"allow-resize",reflect:!1})],ma.prototype,"allowResize",void 0),C([ln({type:String,attribute:"width",reflect:!1})],ma.prototype,"width",void 0),C([ln({type:String,attribute:"height",reflect:!1})],ma.prototype,"height",void 0),C([ln({type:String,attribute:"min-width",reflect:!1})],ma.prototype,"minWidth",void 0),C([ln({type:String,attribute:"min-height",reflect:!1})],ma.prototype,"minHeight",void 0),C([ln({type:String,attribute:"max-width",reflect:!1})],ma.prototype,"maxWidth",void 0),C([ln({type:String,attribute:"max-height",reflect:!1})],ma.prototype,"maxHeight",void 0),C([ln({type:String,attribute:"dialog-css-style",reflect:!1})],ma.prototype,"dialogCssStyle",void 0),ma=C([rn(pa)],ma);const ga="dxbl-dropdown-dialog";let Ca=class extends Mo{createRenderRoot(){return this}};var fa;Ca=C([rn(ga)],Ca);var va;!function(e){e.top="top",e.bottom="bottom",e.end="end",e.start="start"}(va||(va={}));let ba=fa=class extends ms{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChanged.bind(this),this.arrow=null,this._alignment=va.bottom,this.position=vr.zero,this.serverClass=null,this.clientClass=null,this.cssClass=null}get alignment(){return this._alignment}set alignment(e){const t=this._alignment;this._alignment=e,this.clientClass=this.calcClientCssClass(e),this.requestUpdate("alignment",t)}calcClientCssClass(e){return`dxbl-popover-${e}`}get arrowSize(){return this.arrow?fa.calcSizeWithMargins(this.arrow,rt.getRelativeElementRect(this.arrow).size):tt.Empty}static calcSizeWithMargins(e,t){const i=window.getComputedStyle(e),n=parseFloat(i.marginLeft),s=parseFloat(i.marginRight),r=parseFloat(i.marginTop),o=parseFloat(i.marginBottom);return new tt(t.width+n+s,t.height+r+o)}static get styles(){return Cn`
            :host {
                display: block;
            }
        }`}willUpdate(e){if(e.has("serverClass")||e.has("clientClass")){const e=[];this.clientClass&&this.clientClass.split(" ").forEach((t=>e.push(t))),this.serverClass&&this.serverClass.split(" ").forEach((t=>e.push(t))),this.cssClass=e.join(" ")}}updated(e){if(this.arrow&&e.has("position"))switch(this.alignment){case va.bottom:this.arrow.style.transform=yr.translateWithoutFloor(Math.floor(this.position.x),.5);break;case va.top:this.arrow.style.transform=yr.translateWithoutFloor(Math.floor(this.position.x),-.5);break;case va.start:this.arrow.style.transform=yr.translateWithoutFloor(-.5,Math.floor(this.position.y));break;case va.end:this.arrow.style.transform=yr.translateWithoutFloor(.5,Math.floor(this.position.y))}e.has("cssClass")&&(this.className=this.cssClass?this.cssClass:"")}render(){return Xn`
            <slot @slotchange="${this.slotChangedHandler}"></slot>
        `}handleSlotChanged(e){const t=e.target.assignedNodes();for(const e in t){const i=t[e];if(i instanceof HTMLElement){this.arrow=i;break}}}};C([ln({reflect:!1})],ba.prototype,"position",void 0),C([ln({type:String,attribute:"server-class"})],ba.prototype,"serverClass",void 0),C([ln({reflect:!1})],ba.prototype,"clientClass",void 0),C([ln({reflect:!1})],ba.prototype,"cssClass",void 0),C([ln({reflect:!1})],ba.prototype,"alignment",null),ba=fa=C([rn("dxbl-flyout-arrow")],ba);const wa="dxbl-flyout-dialog";var ya;!function(e){e.Fade="fade",e.None="none"}(ya||(ya={}));let Ba=class extends Mo{constructor(){super(...arguments),this.arrowSlotChangeHandler=this.handleArrowSlotChange.bind(this),this._arrow=null,this._arrowAlignment=va.bottom,this.serverClass=null,this.cssClass=null,this.animationType=ya.Fade,this.animationEnabled=!1}get arrow(){return this._arrow}get arrowAlignment(){return this._arrowAlignment}set arrowAlignment(e){this._arrowAlignment=e}calcAnimationTypeCssClass(){return`dxbl-flyout-dialog-${this.animationType} dxbl-flyout-dialog-show`}willUpdate(e){if(e.has("serverClass")||e.has("animationEnabled")||e.has("animationType")){const e=[];if(this.serverClass&&this.serverClass.split(" ").forEach((t=>e.push(t))),this.animationEnabled&&this.animationType!==ya.None){const t=e.indexOf(`dxbl-flyout-dialog-${this.animationType}`,0),i=this.calcAnimationTypeCssClass();t>-1?e.splice(t,1,i):e.push(i)}this.cssClass=e.join(" ")}}updated(e){e.has("cssClass")&&(this.className=this.cssClass?this.cssClass:"")}render(){return Xn`
            <slot></slot>
            <slot name="arrow" @slotchange="${this.arrowSlotChangeHandler}"></slot>
        `}handleArrowSlotChange(e){const t=e.target.assignedNodes();this._arrow=t[0]}};C([ln({type:String,attribute:"server-class"})],Ba.prototype,"serverClass",void 0),C([ln({reflect:!1})],Ba.prototype,"cssClass",void 0),C([ln({type:String,attribute:"animation-type"})],Ba.prototype,"animationType",void 0),C([ln({type:Boolean,reflect:!1})],Ba.prototype,"animationEnabled",void 0),Ba=C([rn(wa)],Ba);class Ea extends Li{constructor(e,t,i=!1){super(e,t,i),this.portalPath=[],this.closedWithKeyboard=!1,this.addEventSubscriptions()}get popupNavigator(){return super.navigator}get portal(){var e;return null===(e=this.popupNavigator)||void 0===e?void 0:e.getPortal()}canSwitchToNestedContentMode(){return!0}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return this.switchToNestedContent();case Be.KeyCode.Esc:return this.closedWithKeyboard=!0,!0}return!1}onPopupShown(){this.handlePopupShown()}handlePopupShown(){this.portal&&(this.portalPath=Array.from(rt.getRootPathAndSelf(this.portal))),this.activatePopupContent()}activatePopupContent(){Ci.makeElementFocusable(this.targetElement),this.activate()}onPopupClosed(){this.removeEventSubscriptions(),this.handlePopupClosed(),this.closedWithKeyboard=!1}handlePopupClosed(){this.focusElementInRootPath(!0)}focusElementInRootPath(e=!1,t=null){const i=this.portalPath.filter((e=>e.isConnected&&e.tabIndex>=0&&"dxbl-popup-portal"!==e.tagName.toLowerCase()));if(i.length>0&&this.navigator.isActive){const e=Ci.findFocusableElementInRootPath(i[0]);return e&&(this.popupNavigator.syncFocusHiddenStateWithOwner(e),Ci.focusElement(e)),!0}return!1}}class Ia extends Ea{constructor(e,t,i=!1){super(e,t,i)}activatePopupContent(){super.activatePopupContent(),this.focusSelectedItem()}onPopupVisibleChanged(e){e.detail.visible&&this.onPopupShown()}addEventSubscriptions(){this.boundOnPopupVisibleChangedHandler&&this.boundOnPopupClosedHandler||(this.boundOnPopupVisibleChangedHandler=this.onPopupVisibleChanged.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this)),this.targetElement.addEventListener(uo.eventName,this.boundOnPopupVisibleChangedHandler),this.targetElement.addEventListener(ao.eventName,this.boundOnPopupClosedHandler)}removeEventSubscriptions(){this.targetElement.removeEventListener(uo.eventName,this.boundOnPopupVisibleChangedHandler),this.targetElement.removeEventListener(ao.eventName,this.boundOnPopupClosedHandler)}}class Sa extends Ia{constructor(e,t){super(e,t)}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab&&super.handleKeyDown(e)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}onPopupClosed(){this.leaveFromNestedContent(),super.onPopupClosed()}switchToNestedContent(){return!!super.switchToNestedContent()&&(kr.activate(this.selectedItemElement,!1,!0),!0)}leaveFromNestedContent(){super.leaveFromNestedContent(),kr.deactivate(this.selectedItemElement,!1)}}class xa extends Sa{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ga)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}}class Da extends Ia{constructor(e,t,i=!1){super(e,t,i)}get windowIsOpened(){return this.targetElement.isOpen}queryItems(){return this.queryItemsBySelector(cr)}getNestedContentElement(){const e=Ci.findFocusableElements(this.selectedItemElement);if(e.length>0){const t=e.filter((e=>!e.matches('[data-qa-selector="dx-popup-close-button"]')));return t.length>0?t[0]:e[0]}return null}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnPopupKeyboardStrategyActivateHandler||(this.boundOnPopupKeyboardStrategyActivateHandler=this.handleWindowKeyboardStrategyActivate.bind(this)),this.boundOnPopupRootBlurHandler||(this.boundOnPopupRootBlurHandler=this.handlePopupRootBlur.bind(this)),this.targetElement.addEventListener(po.eventName,this.boundOnPopupKeyboardStrategyActivateHandler);const e=document.querySelector(lr);null==e||e.addEventListener("blur",this.boundOnPopupRootBlurHandler)}handleWindowKeyboardStrategyActivate(e){e.detail.visible&&this.activatePopupContent()}handlePopupRootBlur(){this.windowIsOpened&&(this.targetElement.toggleAttribute("inert"),this.boundOnDocumentFocusInHandler=this.handleDocumentFocusIn.bind(this),document.addEventListener("focusin",this.boundOnDocumentFocusInHandler))}handleDocumentFocusIn(e){this.targetElement.toggleAttribute("inert"),document.removeEventListener("focusin",this.boundOnDocumentFocusInHandler)}removeEventSubscriptions(){super.removeEventSubscriptions(),this.targetElement.removeEventListener(po.eventName,this.boundOnPopupKeyboardStrategyActivateHandler);const e=document.querySelector(lr);null==e||e.removeEventListener("blur",this.boundOnPopupRootBlurHandler)}focusElementInRootPath(e=!1,t=null){if(!super.focusElementInRootPath(e,t)&&this.portal){const i=Ci.findPrevFocusableElement(this.portal),n=Ci.findNextFocusableNotChildElement(this.portal),s=e?null!=i?i:n:t===Qi.Backward?i:n;if(s&&!this.popupNavigator.isFocusHiddenState())return Ci.focusElement(s),!0}return!1}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab||this.nestedContentSelected?super.handleKeyDown(e):(this.leavePopupContent(e.shiftKey?Qi.Backward:Qi.Forward),!0)}activatePopupContent(){super.activatePopupContent(),this.switchToNestedContent()}onPopupShown(){this.portal&&Ci.makeElementFocusable(this.portal),super.onPopupShown()}onPopupClosed(){this.leaveFromNestedContent(),super.onPopupClosed(),this.portal&&Ci.removeTabIndex(this.portal)}leaveTransitContainer(e){this.leavePopupContent(e)}leavePopupContent(e){this.popupNavigator.leaveFromNavigator(),Ci.removeTabIndex(this.targetElement),this.focusElementInRootPath(!1,e)}}class Fa extends Sa{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(wa)}onPopupShown(){super.onPopupShown(),this.switchToNestedContent()}}class Ta extends Ia{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(ga)}}class Ha extends Ea{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(pa)}activatePopupContent(){super.activatePopupContent(),this.switchToNestedContent()}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab&&super.handleKeyDown(e)}onModalFocusChange(e){e.detail.isFocused?this.onPopupShown():this.onPopupClosed()}addEventSubscriptions(){this.boundOnModalFocusChangeHandler||(this.boundOnModalFocusChangeHandler=this.onModalFocusChange.bind(this)),this.targetElement.addEventListener(ho.eventName,this.boundOnModalFocusChangeHandler)}removeEventSubscriptions(){this.targetElement.removeEventListener(ho.eventName,this.boundOnModalFocusChangeHandler)}}var Ua;customElements.define(hr,class extends Ri{get popupOwner(){return super.owner}initialize(e,t){super.initialize(e,t)}onContentChanged(){var e;const t="BODY"===(null===(e=document.activeElement)||void 0===e?void 0:e.tagName)&&"DXBL-MODAL"===this.targetElement.tagName&&this.getIsNestedContentSelected(this.targetElement);t&&(this.isActive=!0),super.onContentChanged(),t&&this.rootStrategy&&this.rootStrategy.activatePopupContent()}getPortal(){var e,t;return null!==(t=null===(e=this.popupOwner)||void 0===e?void 0:e.getPortal())&&void 0!==t?t:null}syncFocusHiddenStateWithOwner(e){this.isFocusHiddenState()&&this.passFocusHiddenAttribute(e)}isFocusHiddenState(){return Si(this.targetElement)}});const Pa="dxbl-modal",Qa=e=>e;class Na{constructor(e){this.closeReason=e}}class Ra extends CustomEvent{constructor(e){super(Ra.eventName,{detail:new Na(e),bubbles:!0,composed:!0,cancelable:!0})}}Ra.eventName=Pa+".closingRequested",mt.register(Ra.eventName,(e=>e.detail));class La extends CustomEvent{constructor(e){super(La.eventName,{detail:new Na(e),bubbles:!0,composed:!0,cancelable:!0})}}La.eventName=Pa+".closingResultRequested",mt.register(La.eventName,(e=>e.detail));class Ma{constructor(){this.callingElement=null}catch(){document.activeElement&&(this.callingElement=document.activeElement)}restore(){this.callingElement&&(pt.restoreFocus(this.callingElement),this.callingElement=null)}}let ka=Ua=class extends Pr{constructor(){super(...arguments),this.focusReturnState=new Ma,this._positionChangedEvent=new Ur,this.shadowSlotChangedHandler=this.handleShadowSlotChange.bind(this),this.topShadowBranchChangedHandler=this.handleTopShadowBranchChanged.bind(this),this.dragStartHandler=this.handleDragStart.bind(this),this.dragEndHandler=this.handleDragEnd.bind(this),this.resizeStartHandler=this.handleResizeStart.bind(this),this.resizeEndHandler=this.handleResizeEnd.bind(this),this.shadow=null,this.closingResultRequestedTcs=new Fr,this.shownCompletedTcs=new Fr,this.popupDialog=null,this._zIndex=0,this.modal=null,this.shadingChangedEvent=new Hr,this._capturedElementReleaseCallback=null,this._isOpen=!1,this.shading=!1,this.closeOnOutsideClick=!1,this.closeOnEscape=!1,this.closeOnPointerUp=!1,this.autoZIndex=!1,this.zIndex=0,this.shadowVisible=!1,this.topShadowBranchId=null,this.hasServerSideClosing=!1,this.disableFocusTrap=!1,this.width="",this.height="",this.isDragging=!1,this.isResizing=!1,this.capturingAction=this.capturing,this.releasingCaptureAction=this.releaseFocusTrap}static fromElement(e){for(;null!==e&&!(e instanceof Ua);)e=e.parentElement;return e}get positionChanged(){return this._positionChangedEvent}get renderedVisible(){return!0}get isOpen(){return this._isOpen}get branchType(){return Hs.Modal}get preventInteractions(){return!0}get isCloseOnPointerUp(){return this.closeOnPointerUp}render(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}">
                ${this.renderShadow()}
                ${this.renderDefaultSlot()}
            </dxbl-branch>
        `}renderDefaultSlot(){return Xn`<slot></slot>`}renderShadow(){return Xn`<slot name="shadow" @slotchange="${this.shadowSlotChangedHandler}"></slot>`}handleShadowSlotChange(e){const t=e.target.assignedNodes();this.shadow=t.find((e=>e instanceof HTMLElement))}get shadingChanged(){return this.shadingChangedEvent}connectedCallback(){super.connectedCallback(),this.subscribeToEvents(),this.raiseZIndexChange()}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribeFromEvents(),this.close()}show(){return this.isOpen||(this._isOpen=!0,this.initializeCapture(),this.initializeBodyScrollLock(),this.addToVisibleBranchTree(),this.raiseAdjustZIndexRequest(!0),this.raiseShown()),this.shownCompletedTcs.promise}raiseAdjustZIndexRequest(e){this.dispatchEvent(new ho(new co(this.branchId,e)))}close(){this.isOpen&&(this._isOpen=!1,this.releaseCapture(),this.releaseBodyScrollLock(),this.removeFromVisibleBranchTree(),this.raiseAdjustZIndexRequest(!1),this.raiseClosed())}raiseShown(){const e=new ro;this.dispatchEvent(new oo(e))}raiseClosed(){const e=new ro;this.dispatchEvent(new ao(e))}willUpdate(e){this.shadowVisible=this.shading&&this.isOpen&&!!this.branchId&&this.branchId===this.topShadowBranchId}updated(e){var t;this.shadow&&e.has(Qa("shadowVisible"))&&(this.shadow.style.display=this.shadowVisible?P.block:P.none),e.has(Qa("zIndex"))&&(this.style.zIndex=this.autoZIndex?"":String(this.zIndex),this.raiseZIndexChange()),(e.has("width")||e.has("height"))&&(null===(t=this.popupDialog)||void 0===t||t.setSize(this.width,this.height))}ensureBranchId(){if(!this.branchId)throw new Error("branchId should not be null")}addToVisibleBranchTree(){this.ensureBranchId(),Rs.register(this.branchId),bo.register(this.branchId),this.raiseBranchRefreshed()}removeFromVisibleBranchTree(){this.ensureBranchId(),Rs.unregister(this.branchId),bo.unregister(this.branchId),this.raiseBranchRefreshed()}initializeBodyScrollLock(){yo.register(this.branchId)}releaseBodyScrollLock(){yo.unregister(this.branchId)}subscribeToEvents(){bo.shadowBranchChanged.subscribe(this.topShadowBranchChangedHandler),this.addEventListener(Fo.eventName,this.dragStartHandler),this.addEventListener(xo.eventName,this.dragEndHandler),this.addEventListener(Jo.eventName,this.resizeStartHandler),this.addEventListener(Zo.eventName,this.resizeEndHandler)}unsubscribeFromEvents(){bo.shadowBranchChanged.unsubscribe(this.topShadowBranchChangedHandler),this.removeEventListener(Fo.eventName,this.dragStartHandler),this.removeEventListener(xo.eventName,this.dragEndHandler),this.removeEventListener(Jo.eventName,this.resizeStartHandler),this.removeEventListener(Zo.eventName,this.resizeEndHandler)}handleTopShadowBranchChanged(e){this.topShadowBranchId=e.branch}handleDragStart(e){this.isDragging=!0}handleDragEnd(e){this.isDragging=!1}handleResizeStart(e){this.isResizing=!0}handleResizeEnd(e){this.isResizing=!1}initializeCapture(){this.focusReturnState.catch();const e=document.querySelector("dxbl-popup-root");e&&(this._capturedElementReleaseCallback=e.subscribe(this))}releaseCapture(){this.processClosingRequested(!0),this._capturedElementReleaseCallback&&(this._capturedElementReleaseCallback(),this._capturedElementReleaseCallback=null),this.focusReturnState.restore()}processClosingRequested(e){this.closingResultRequestedTcs.resolve(e),this.closingResultRequestedTcs=new Fr}notifyDialogConnected(e){this.popupDialog=e,this.initializeKeyboardNavigator(),this.initializeFocusTrap()}notifyRootConnected(){requestAnimationFrame((()=>{setTimeout((()=>{this.shownCompletedTcs.tryResolve()}))}))}notifyDialogDisconnected(){this.disposeKeyboardNavigator(),this.releaseFocusTrap(!0),this.popupDialog=null}notifyRootDisconnected(){this.shownCompletedTcs.tryReject("cancelled"),this.shownCompletedTcs=new Fr}capturing(){this.activate(),this.initializeFocusTrap()}initializeFocusTrap(){this.isOpen&&this.popupDialog&&!this.disableFocusTrap&&kr.activate(this.popupDialog,!0,!!this.keyboardNavigator)}releaseFocusTrap(e=null){null===e&&(e=!this.isOpen),kr.deactivate(this.popupDialog,e)}activate(){const e=new Ks(new Ms(this.branchId));this.dispatchEvent(e)}notifyCloseCanceled(){this.processClosingRequested(!1)}get isPreventPropagation(){return this.preventInteractions}async processCapturedPointerAsync(e,t){t.handled||this.isPointedCaptured(e)||(t.nextInteractionHandled=!0,this.closeOnOutsideClick&&await this.closeAsync(t,Tr.OutsideClick))}isPointedCaptured(e){return!(!this.closeOnPointerUp||!this.isDragging&&!this.isResizing)||K.containsInComposedPath(e,this.popupDialog)}async processCapturedKeyDownAsync(e,t){t.handled||this.closeOnEscape&&"Escape"===e.key&&await this.processEscape(e,t)}async processEscape(e,t){const i=await this.raiseClosingResultRequestedAsync(Tr.EscapePress);this.closingResultRequestedTcs=new Fr,i||(t.handled=!0)}async closeAsync(e,t){const i=await this.raiseClosingResultRequestedAsync(t);return this.closingResultRequestedTcs=new Fr,e.nextInteractionHandled=!0,e.handled=!0,Promise.resolve(!!i)}async closeHierarchyAsync(e,t,i){for(const e of Rs.iterateBranch(this.branchId)){const n=await pr().getPopup(e);await(null==n?void 0:n.closeAsync(t,i))}await this.closeAsync(t,i)}async raiseClosingResultRequestedAsync(e){if(!this.hasServerSideClosing)return this.raiseClosingRequested(e),!0;const t=new Fr;return this.closingResultRequestedTcs=t,this.raiseClosingResultRequested(e),t.promise}raiseClosingRequested(e){setTimeout((()=>{this.dispatchEvent(new Ra(e))}))}raiseClosingResultRequested(e){this.dispatchEvent(new La(e))}raiseBranchRefreshed(){const e=new ks(new Ms(this.branchId));this.dispatchEvent(e)}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new Ao(new lo(this.zIndex)))}))}initializeKeyboardNavigator(){var e,t,i;if(this.keyboardNavigator||(this.keyboardNavigator=this.querySelector(hr)),this.keyboardNavigator&&!this.keyboardNavigator.initialized){const n=new go({createModal:(e,t)=>new Ha(e,t)});null===(e=this.getPortal())||void 0===e||e.dispatchEvent(n);const s=null===(i=null===(t=n.detail.factory)||void 0===t?void 0:t.createModal)||void 0===i?void 0:i.call(t,this.keyboardNavigator,this);s&&this.keyboardNavigator.initialize(this,s)}}disposeKeyboardNavigator(){var e;null===(e=this.keyboardNavigator)||void 0===e||e.disposeComponent()}getPortal(){return Oa.getPortal(this.branchId)}};C([ln({type:Boolean,attribute:"x-is-open",reflect:!0,converter:{fromAttribute:(e,t)=>{throw new Error("readonly")}}})],ka.prototype,"_isOpen",void 0),C([ln({type:Boolean,attribute:"shading"})],ka.prototype,"shading",void 0),C([ln({type:Boolean,attribute:"close-on-outside-click"})],ka.prototype,"closeOnOutsideClick",void 0),C([ln({type:Boolean,attribute:"close-on-escape"})],ka.prototype,"closeOnEscape",void 0),C([ln({type:Boolean,attribute:"close-on-pointer-up"})],ka.prototype,"closeOnPointerUp",void 0),C([ln({type:Boolean,attribute:"auto-z-index"})],ka.prototype,"autoZIndex",void 0),C([ln({type:Number,attribute:"z-index"})],ka.prototype,"zIndex",void 0),C([ln({type:String,attribute:"branch-id"})],ka.prototype,"branchId",void 0),C([ln({type:String,attribute:"parent-branch-id"})],ka.prototype,"parentBranchId",void 0),C([ln({reflect:!1})],ka.prototype,"shadowVisible",void 0),C([ln({reflect:!1})],ka.prototype,"topShadowBranchId",void 0),C([ln({type:Boolean,attribute:"has-serverside-closing"})],ka.prototype,"hasServerSideClosing",void 0),C([ln({type:Boolean,attribute:"disable-focus-trap"})],ka.prototype,"disableFocusTrap",void 0),C([ln({type:String,attribute:"width"})],ka.prototype,"width",void 0),C([ln({type:String,attribute:"height"})],ka.prototype,"height",void 0),ka=Ua=C([rn(Pa)],ka);const Ka=document.createElement("template");Ka.innerHTML="<"+fo+' class="'+fo+'" />';class Oa{static getPortal(e){return _a.getPortal(e)}static getPortalFrom(e){var t,i;const n=(null===(t=Co.fromElement(e))||void 0===t?void 0:t.getPortal())||(null===(i=ka.fromElement(e))||void 0===i?void 0:i.getPortal());return n||null}}const _a=new class{constructor(){this.portals=new Map}addPortal(e,t){this.portals.set(e,t)}removePortal(e){this.portals.delete(e)}getPortal(e){return this.portals.get(e)}};let Va=class extends ms{constructor(){super(...arguments),this.activateLocker=new tr,this.portalsMapping=new Map,this.portals=new Map,this.rafAction=new ar,this.focusInHandler=this.handleFocusIn.bind(this),this.adjustZIndexRequestHandler=this.adjustZIndexRequest.bind(this),this.branchCreatedHandler=this.handleBranchCreated.bind(this),this.branchUpdatedHandler=this.handleBranchUpdated.bind(this),this.branchRemovedHandler=this.handleBranchRemoved.bind(this),this.branchActivatedHandler=this.handleBranchActivated.bind(this),this.branchRefreshedHandler=this.handleBranchRefreshed.bind(this),this.captureManager=new or}createRenderRoot(){return this}assign(e){if(this.portals.has(e)||!e.branchId)return;const t=this.selectTemplate(e);this.appendChild(t);const i=this.children[this.children.length-1];i.setPortal(e),this.portalsMapping.set(e.branchId,e),this.portals.set(e,i),_a.addPortal(e.branchId,e)}release(e){const t=this.portals.get(e);this.portalsMapping.delete(e.branchId),_a.removePortal(e.branchId),this.portals.delete(e),t&&this.removeChild(t)}connectedCallback(){super.connectedCallback(),this.tabIndex=0,this.addEventListener("focusin",this.focusInHandler,{capture:!0}),this.addEventListener(ho.eventName,this.adjustZIndexRequestHandler),this.addEventListener(Vs.eventName,this.branchCreatedHandler),this.addEventListener(Os.eventName,this.branchUpdatedHandler),this.addEventListener(_s.eventName,this.branchRemovedHandler),this.addEventListener(Ks.eventName,this.branchActivatedHandler),this.addEventListener(ks.eventName,this.branchRefreshedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focusin",this.focusInHandler),this.removeEventListener(ho.eventName,this.adjustZIndexRequestHandler),this.removeEventListener(Vs.eventName,this.branchCreatedHandler),this.removeEventListener(Os.eventName,this.branchUpdatedHandler),this.removeEventListener(_s.eventName,this.branchRemovedHandler),this.removeEventListener(Ks.eventName,this.branchActivatedHandler),this.removeEventListener(ks.eventName,this.branchRefreshedHandler)}handleFocusIn(e){this.rafAction.cancel();e.target===this&&(H.markHandled(e),this.rafAction.execute((()=>this.blur())))}handleBranchCreated(e){Ns.add(e.detail.id,e.detail.parentId,e.detail.type),this.assignZIndices()}handleBranchUpdated(e){Ns.remove(e.detail.id),Ns.add(e.detail.id,e.detail.parentId,e.detail.type),this.assignZIndices()}handleBranchRemoved(e){Ns.remove(e.detail.id),this.assignZIndices()}handleBranchActivated(e){const t=e.detail.id;if(!Rs.activate(t)){const e=this.portalsMapping.get(t);if(!e)return;const i=e.popupBase;return i&&this.captureManager.capture(i),void this.assignZIndices()}const i=[];for(const e of Rs.iterateBranch(t)){const n=this.portalsMapping.get(e);if(i.push(n.popup),e===t)break}if(i.length>0)i.forEach((e=>this.captureManager.releaseCapture(e))),i.forEach((e=>this.captureManager.capture(e)));else{const e=this.portalsMapping.get(t);this.captureManager.capture(e.popupBase)}this.assignZIndices()}handleBranchRefreshed(e){this.assignZIndices()}assignZIndices(){Rs.refresh();for(const e of this.portals.keys()){const t=e.branchId;this.portals.get(e).baseZIndex=Rs.getIndex(t)}}adjustZIndexRequest(e){const t=e.detail.branchId;this.isBranchExistsInDom(t)&&(e.detail.isFocused&&Rs.setTopMostBranch(t),this.assignZIndices())}isBranchExistsInDom(e){const t=this.portalsMapping.get(e);return!!t&&!!this.portals.get(t)}getPopup(e){const t=this.portalsMapping.get(e);return(null==t?void 0:t.popupBase)||null}selectTemplate(e){return Ka.content.cloneNode(!0)}subscribe(e){return this.captureManager.capture(e),()=>{this.captureManager.releaseCapture(e)}}};Va=C([rn(lr)],Va);class za{static isEditRowCell(e){return null!==e&&e.rowType===Xs.Edit}static areIdentical(e,t){return null!==e&&null!==t&&(e.rowIndex===t.rowIndex&&e.columnInfo.uID===t.columnInfo.uID)}static fromElement(e,t){const i=za.getCellElement(e,t);if(null!==i){const n=za.getHitInnerElement(t),s=za.getRowType(i),r=js.getCellType(i),o=za.getCellRowIndex(i),a=e.getColumnInfoByCell(i);if(null!==s&&null!==r&&null!==o&&null!==a)return new za(r,s,o,a,n,i)}return null}static findCellInnerElement(e,t){return null!==e&&t===Wa.CheckBox?e.querySelector($s.CellCheckBoxEditViewInputSelector):null}static getCellElement(e,t){if(null===e.uId||null==t)return null;const i=t.closest($s.getBodyCellsSelector(e.uId,e.getTagName()));if(null!==i)return i;const n=Oa.getPortalFrom(t);return null!==n?n.closest($s.getBodyCellsSelector(e.uId,e.getTagName())):null}static getRowType(e){if(null===e)return null;const t=e.parentElement;return null===t?null:js.getRowType(t)}static getCellRowIndex(e){const t=null==e?void 0:e.parentElement;if(null!=t){const e=t.dataset.visibleIndex;if(void 0!==e)return parseInt(e)}return null}static getHitInnerElement(e){return null!==e&&e.closest($s.CellCheckBoxDisplayViewSelector)?Wa.CheckBox:null}constructor(e,t,i,n,s,r){this._type=e,this._rowType=t,this._rowIndex=i,this._columnInfo=n,this._hitInnerElement=s,this._element=r}get type(){return this._type}get rowIndex(){return this._rowIndex}get rowType(){return this._rowType}get columnInfo(){return this._columnInfo}get hitInnerElement(){return this._hitInnerElement}get element(){return this._element}}var Wa,$a,Ga;!function(e){e[e.CheckBox=0]="CheckBox"}(Wa||(Wa={}));class qa{constructor(){this.activePopup=null,this.boundOnDocumentFocusOutHandler=this.onDocumentFocusOut.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosingHandler=this.onPopupClosing.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this)}initialize(){document.addEventListener("focusout",this.boundOnDocumentFocusOutHandler),document.addEventListener(oo.eventName,this.boundOnPopupShownHandler)}dispose(){document.removeEventListener("focusout",this.boundOnDocumentFocusOutHandler),document.removeEventListener(oo.eventName,this.boundOnPopupShownHandler)}onPopupClosing(e){if(null===this.activePopup)return;if(this.activePopup.removeEventListener($r.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener(Wr.eventName,this.boundOnPopupClosingHandler),e.detail.closeReason!==Tr.OutsideClick)return;const t=Oa.getPortalFrom(document.activeElement);t&&t.branchId!==e.detail.branchId||(this.activePopup.removeEventListener(ao.eventName,this.boundOnPopupClosedHandler),this.activePopup=null,this.closeEditor())}onPopupClosed(e){null!==this.activePopup&&(this.activePopup.removeEventListener($r.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener(Wr.eventName,this.boundOnPopupClosingHandler),this.activePopup.removeEventListener(ao.eventName,this.boundOnPopupClosedHandler),setTimeout((()=>this.activePopup=null),0))}onPopupShown(e){(e.target instanceof Co||e.target instanceof ka)&&this.isPopupFromEditor(e.target)&&(this.activePopup=e.target,this.activePopup.addEventListener($r.eventName,this.boundOnPopupClosingHandler),this.activePopup.addEventListener(Wr.eventName,this.boundOnPopupClosingHandler),this.activePopup.addEventListener(ao.eventName,this.boundOnPopupClosedHandler))}}class Xa extends qa{constructor(e){super(),this.pendingCommandId=null,this.closingTimerId=null,this.pressedCellInfo=null,this.boundOnDocumentPointerDownHandler=this.onDocumentPointerDown.bind(this),this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.grid=e}get isPendingCommandResult(){return null!==this.pendingCommandId}get isEditorPopupShown(){return null!==this.activePopup}initialize(){document.addEventListener("pointerdown",this.boundOnDocumentPointerDownHandler),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),super.initialize()}dispose(){document.removeEventListener("pointerdown",this.boundOnDocumentPointerDownHandler),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),super.dispose()}showNewItemRowEditor(e){var t;let i=e;return(i&&i.isEditable||(i=null!==(t=this.grid.columnsInfo.find((e=>e.isEditable)))&&void 0!==t?t:null,i))&&this.sendCommand("showNewItemRowEditor",{columnUid:i.uID})?i.leafIndex:-1}showEditor(e,t,i=null){if(!this.allowInteraction)return!1;const n=this.grid.getCellInfo(e);return null!==n&&(n.type===Ys.Data&&(!!n.columnInfo.isEditable&&this.sendCommand("showEditor",{visibleIndex:n.rowIndex,columnUid:n.columnInfo.uID},i,(e=>{e.result&&null!==t&&this.clickToEditCellInnerElement(t,n)}))))}closeEditor(e=$a.Save,t=null){return!!this.allowInteraction&&this.sendCommand("closeEditor",{action:e},t)}onEndCommand(e,t=null){if(null===t)return;let i=Ga.Aborted;e.processedBy(this.pendingCommandId)&&(i=e.result?Ga.Completed:Ga.Failed),t(i)}notifyPendingEditorShow(e){this.allowInteraction&&(e?this.pendingCommandId=Xa.ServerSideShowCommandId:this.pendingCommandId===Xa.ServerSideShowCommandId&&(this.pendingCommandId=null))}sendCommand(e,t,i=null,n=null){return!!this.uiHandlersBridge&&(this.cancelClosingTimer(),this.pendingCommandId=Xa.InitializationCommandId,document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.pendingCommandId=this.uiHandlersBridge.send(e,t,(e=>{this.onEndCommand(e,i),e.processedBy(this.pendingCommandId)&&(n&&n(e),this.pendingCommandId=null)})),!0)}get allowInteraction(){return this.grid.enableInplaceEditing}get uiHandlersBridge(){return this.grid.uiHandlersBridge}onDocumentPointerDown(e){this.allowInteraction&&(this.pressedCellInfo=this.grid.getCellInfo(e.target))}onDocumentPointerUp(){this.allowInteraction&&(this.pressedCellInfo=null)}onDocumentFocusOut(e){if(!this.allowInteraction)return;if(!this.grid.isEditing)return;if(this.isPendingCommandResult)return;const t=this.grid.getCellInfo(e.target);if(!za.isEditRowCell(t))return;const i=this.grid.getCellInfo(e.relatedTarget)||this.grid.getCellInfo(this.activePopup),n=za.areIdentical(t,i);za.isEditRowCell(i)?!n&&this.isPressedCell(i)&&this.startClosingTimer($a.Hide):this.isPressedDataCell(i)&&!this.isDataCellInteractiveElement(e.relatedTarget)?this.startClosingTimer():this.closeEditor()}isDataCellInteractiveElement(e){return!1}isPopupFromEditor(e){return this.allowInteraction&&this.grid.isEditing&&za.isEditRowCell(this.grid.getCellInfo(e))}clickToEditCellInnerElement(e,t){var i;const n=this.getEditCellElement(),s=this.grid.getCellInfo(n);za.areIdentical(t,s)&&(null===(i=za.findCellInnerElement(n,e))||void 0===i||i.click())}getEditCellElement(){return null===this.grid.uId?null:this.grid.querySelector($s.getBodyEditCellSelector(this.grid.uId,this.grid.getTagName()))}isPressedDataCell(e){return(null==e?void 0:e.type)===Ys.Data&&this.isPressedCell(e)}isPressedCell(e){return za.areIdentical(e,this.pressedCellInfo)}startClosingTimer(e=$a.Save){this.cancelClosingTimer(),this.closingTimerId=setTimeout((()=>this.closeEditor(e)),Xa.ClosingDelay)}cancelClosingTimer(){null!==this.closingTimerId&&(clearTimeout(this.closingTimerId),this.closingTimerId=null)}}Xa.InitializationCommandId=-1,Xa.ServerSideShowCommandId=-2,Xa.ClosingDelay=150,function(e){e[e.Save=0]="Save",e[e.Cancel=1]="Cancel",e[e.Hide=2]="Hide",e[e.SaveAndStartNewRow=3]="SaveAndStartNewRow"}($a||($a={})),function(e){e[e.Completed=0]="Completed",e[e.Failed=1]="Failed",e[e.Aborted=2]="Aborted"}(Ga||(Ga={}));class Ya{static calculateHorizontalScrollCorrection(e,t,i){let n=0;const s=e.getBoundingClientRect();for(const e of t){const t=e.getBoundingClientRect(),r=this.getIntersectionRectangle(s,t);if(!r.isEmpty){const e=i?r.left-t.right:r.right-t.left;s.x-=e,n+=e}}return n}static calculateVerticalScrollCorrection(e,t){const i=this.calculateHeightOffsetValue(e,t,!0),n=this.calculateHeightOffsetValue(e,t,!1);return i<0&&n<0?i:n>0&&i>0?n:0}static calculateBoundaryItemIndex(e,t,i){const n=Math.ceil(this.getDataAreaViewportHeight(t)),s=i?0:e.itemCount-1;let r=i&&e.selectedItemIndex<=s||!i&&e.selectedItemIndex>=s?s:e.selectedItemIndex,o=this.calculateItemHeight(e,t,r,i);const a=this.isVirtualScrollingEnabled(t)?this.calculateItemAverageHeight(e):void 0,l=i?1:-1;let A=r+l;for(;e.isIndexWithinBoundaries(A)&&(o+=this.getElementHeight(e.getItem(A),a),!(o>n&&r!==e.selectedItemIndex));)r=A,A+=l;return r}static isVirtualScrollingEnabled(e){return void 0!==e.totalItemCount}static isElementInView(e,t){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return n.bottom>i.top+n.height&&n.top<i.bottom}static bottomAlignmentRequired(e,t){const i=e.getBoundingClientRect();return t.getBoundingClientRect().bottom-i.bottom<i.height}static calculateItemAverageHeight(e){const t=e.getItem(0);return(e.getItem(e.itemCount-1).getBoundingClientRect().bottom-t.getBoundingClientRect().top)/e.itemCount}static calculateItemHeight(e,t,i,n){const s=e.getItem(i);let r=this.getElementHeight(s);if(s&&!this.isOutsideViewportItemRequired(e,t,i,n)){const e=this.calculateHeightOffsetValue(s,t,n);r+=n?e:-e}return r}static isOutsideViewportItemRequired(e,t,i,n){const s=e.getItem(n?i+1:i-1);if(!s)return!0;const r=s.getBoundingClientRect(),o=this.getElementHeight(s);if(!t.hasVerticalScrollBar){const e=wr.viewport(),t=new nt(0,0,e.width,e.height);return this.getIntersectionRectangle(r,t).height<o}const a=t.getElementsRectangle(t.getFooterElements());if(n&&a)return!this.getIntersectionRectangle(r,a).isEmpty;const l=t.getElementsRectangle(t.getHeaderElements());if(!n&&l)return!this.getIntersectionRectangle(r,l).isEmpty;return this.getIntersectionRectangle(r,t.getBoundingClientRect()).height<o}static calculateHeightOffsetValue(e,t,i){const n=e.getBoundingClientRect(),s=t.getDataAreaRectangle(),r=!t.hasVerticalScrollBar,o=r?0:s.y,a=r?document.documentElement.clientHeight:o+s.height;return Oe.calcScrollOffset(o,a,n.top,n.bottom,i?Ue.Top:Ue.Bottom)}static getDataAreaViewportHeight(e){const t=e.getRectangle(),i=e.hasVerticalScrollBar?e.getDataAreaRectangle():wr.viewport();return e.hasVerticalScrollBar&&t&&t.height<i.height?t.height-this.calcStickyElementsHeight(e):i.height}static calcStickyElementsHeight(e){let t=0;for(const i of this.getStickyElementsRectangles(e))t+=this.getElementRectangleHeight(i);return t}static getStickyElementsRectangles(e){return e?[e.getElementsRectangle(e.getHeaderElements()),e.getElementsRectangle(e.getFooterElements())]:[]}static getElementHeight(e,t=0){return e?e.getBoundingClientRect().height:t}static getElementRectangleHeight(e,t=0){return e?e.height:t}static getIntersectionRectangle(e,t){const i=new nt(e.x,e.y,e.width,e.height),n=new nt(t.x,t.y,t.width,t.height);return st.intersect(i,n)}static alignElementVertically(e,t,i){const n=Ya.calculateVerticalScrollCorrection(e,t);i.scrollBy(0,n)}}class Ja{get hasAction(){return!!this.handle}constructor(e){this.action=null,this.handle=null,this.timeout=0,this.timeout=e}execute(e){this.cancel(),this.action=e,this.handle=setTimeout((()=>{var e;null===(e=this.action)||void 0===e||e.call(this),this.handle=null,this.action=null}),this.timeout)}forceExecute(){if(!this.hasAction)return;const e=this.action;this.cancel(),e&&e()}cancel(){this.hasAction&&this.handle&&(clearTimeout(this.handle),this.action=null,this.handle=null)}}const ja="dxbl-input-editor",Za="dxbl-spinedit",el="dxbl-calendar",tl="dxbl-dropdownbase",il="dxbl-masked-input",nl="dxbl-custom-color-area",sl="dxbl-hue-area",rl="dxbl-saturation-brightness-area",ol="dxbl-list-box",al="dxbl-combo-box",ll="dxbl-dropdown-listbox";class Al extends CustomEvent{constructor(e){super(Al.eventName,{detail:new ul(e),bubbles:!0,composed:!0,cancelable:!0})}}Al.eventName=ja+".focusin";class dl extends CustomEvent{constructor(e,t){super(dl.eventName,{detail:new pl(e,t),bubbles:!0,composed:!0,cancelable:!0})}}dl.eventName=ja+".focusout";class cl extends CustomEvent{constructor(e){super(cl.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}cl.eventName=ja+".keydown";class hl extends CustomEvent{constructor(e){super(hl.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}hl.eventName=ja+".beforeinput";class ul{constructor(e){this.NeedSelection=e}}class pl{constructor(e,t){this.Text=e,this.TabKey=t}}class ml{constructor(e){this.Text=e}}class gl extends ml{constructor(e,t){super(e),this.Version=t}}class Cl extends CustomEvent{constructor(e,t){super(Cl.eventName,{detail:new gl(e,t),bubbles:!0,composed:!0,cancelable:!0})}}Cl.eventName=ja+".textinput";class fl extends CustomEvent{constructor(e){super(fl.eventName,{detail:new ml(e),bubbles:!0,composed:!0,cancelable:!0})}}var vl,bl,wl;fl.eventName=ja+".textchange",mt.register(Cl.eventName,(e=>e.detail)),mt.register(fl.eventName,(e=>e.detail)),mt.register(Al.eventName,(e=>e.detail)),mt.register(dl.eventName,(e=>e.detail)),mt.register(cl.eventName,(e=>{const t=e.detail;return{Key:t.key,Code:t.code,CtrlKey:t.ctrlKey,AltKey:t.altKey,ShiftKey:t.shiftKey,MetaKey:t.metaKey}})),mt.register(hl.eventName,(e=>{const t=e.detail;return{InputType:t.inputType,Text:t.data}})),function(e){e.inputText="field-text",e.inputTextVersion="field-text-version",e.bindValueMode="bind-value-mode",e.fieldInputDelay="field-input-delay",e.customPlaceholder="custom-placeholder"}(vl||(vl={})),function(e){e.OnLostFocus="OnLostFocus",e.OnInput="OnInput",e.OnDelayedInput="OnDelayedInput"}(bl||(bl={})),function(e){e.WithoutTemplate="WithoutTemplate",e.WithTemplate="WithTemplate",e.WithEditableTemplate="WithEditableTemplate"}(wl||(wl={}));class yl{}yl.TextEdit=he.Prefix+"-text-edit",yl.ClearButton=he.Prefix+"-edit-btn-clear",yl.EditBoxTemplate=he.Prefix+"-text-edit-template",yl.TextEditInput=he.Prefix+"-text-edit-input",yl.EditorButton=he.Prefix+"-text-edit-btn";class Bl extends Bs{constructor(){super(),this.fieldText="",this.fieldTextVersion=-1,this.fieldInputDelay=500,this.bindValueMode=bl.OnLostFocus,this.isReadOnly=!1,this.placeholder="",this.boundOnInputInputHandler=this.onTextInput.bind(this),this.boundOnInputChangeHandler=this.onTextChange.bind(this),this.boundOnInputKeyDownHandler=this.onInputKeyDown.bind(this),this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this.inputDelayDeferredAction=new Ja(500),this._fieldTextHistory={},this._fieldInitialized=!1,this._fieldTextVersion=-1,this._isMobileDevice=$().isMobileDevice,this.mainElementObserver=new MutationObserver(this.mainElementContentChanged.bind(this))}get useAdaptiveLayout(){return this._isMobileDevice}get inputSelectionStart(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.selectionStart)&&void 0!==t?t:0}get inputSelectionEnd(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.selectionEnd)&&void 0!==t?t:0}get selectionLength(){return Math.abs(this.inputSelectionEnd-this.inputSelectionStart)}isAllSelected(){const e=this.fieldElementValue.length;return e>0&&0===this.inputSelectionStart&&this.inputSelectionEnd===e}get enabled(){return this.fieldElement?!this.fieldElement.disabled:!T.DomUtils.hasClassName(this,he.Disabled)}get allowInput(){return this.enabled&&!!this.fieldElement&&!this.fieldElement.readOnly}static isClearButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(yl.ClearButton))}static isEditBoxTemplateElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(yl.EditBoxTemplate))}static isEditorButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(yl.EditorButton))}isFocusableElementInMainElementTemplate(e){return!!this.editBoxTemplateElement&&(this.editBoxTemplateElement!==e&&this.editBoxTemplateElement.contains(e)&&Fi(e))}get fieldElementValue(){var e,t;return null!==(t=null===(e=this.fieldElement)||void 0===e?void 0:e.value)&&void 0!==t?t:""}set fieldElementValue(e){this.fieldElement&&(this.fieldElement.value=e)}get rendered(){return!!this.fieldElement}get focused(){return document.activeElement===this.editBoxElement}get isFieldElementReadonly(){return!!this.fieldElement&&this.fieldElement.readOnly}get editBoxElement(){var e;return null!==(e=this.fieldElement)&&void 0!==e?e:this.editBoxTemplateElement}get editBoxTemplateElement(){return this.querySelector(`:scope > .${yl.EditBoxTemplate}`)}raiseFieldText(){let e;const t=this.fieldElementValue;this.shouldProcessFieldTextVersion?(e=++this._fieldTextVersion,this._fieldTextHistory[e]=t):e=this._fieldTextVersion,this.dispatchEvent(new Cl(t,e))}raiseFieldChange(){this.dispatchEvent(new fl(this.fieldElementValue))}applyTextProperty(){this.shouldProcessFieldTextVersion?this.applyTextPropertyByVersion():(this.applyTextPropertyCore(),this._fieldTextVersion=this.fieldTextVersion)}applyTextPropertyByVersion(){const e=this.fieldTextVersion,t=this.fieldText;let i=this._fieldTextVersion;e>i&&(i=e),-1===i||t!==this.fieldElementValue&&this._fieldTextHistory[e]!==t?(this.applyTextPropertyCore(),this._fieldTextVersion=i+1):delete this._fieldTextHistory[e]}applyTextPropertyCore(){this.fieldElementValue=this.fieldText}onBindValueModeChanged(e){e===bl.OnLostFocus?(this._fieldTextHistory={},this._fieldTextVersion++):this.bindValueMode===bl.OnLostFocus&&(this._fieldTextHistory={},this._fieldTextVersion=-1)}onInputDelayChanged(){this.inputDelayDeferredAction=new Ja(this.fieldInputDelay)}get shouldProcessFieldTextVersion(){return this.bindValueMode===bl.OnInput||this.bindValueMode===bl.OnDelayedInput}get shouldForceInputOnEnter(){return!0}onTextInput(e){if(this.shouldRaiseFieldTextEvents)switch(this.bindValueMode){case bl.OnInput:this.raiseFieldText();break;case bl.OnDelayedInput:this.inputDelayDeferredAction.execute((()=>this.raiseFieldText()))}}onTextChange(e){this.shouldRaiseFieldTextEvents&&(this.bindValueMode===bl.OnLostFocus?this.raiseFieldChange():this.bindValueMode===bl.OnDelayedInput&&this.tryForceDelayedInput())}onFieldReady(e,t){e.addEventListener("input",this.boundOnInputInputHandler),e.addEventListener("change",this.boundOnInputChangeHandler),e.addEventListener("keydown",this.boundOnInputKeyDownHandler),t&&(this.applyTextProperty(),this.updatePlaceholder())}onTemplateWithoutInputReady(e){e.addEventListener("keydown",this.boundOnInputKeyDownHandler)}onPointerDown(e){this.processPointerDown(e)}processPointerDown(e){var t;const i=e.target,n=H.containsInComposedPath(e,Bl.isClearButtonElement),s=H.containsInComposedPath(e,Bl.isEditorButtonElement),r=this.editBoxTemplateElement&&this.editBoxTemplateElement===i&&!Fi(this.editBoxTemplateElement),o=this.editBoxTemplateElement&&this.editBoxTemplateElement.contains(i)&&!Fi(i),a=!this.focused&&(n||s&&!this.useAdaptiveLayout||r||o),l=n||s||r||o;return s&&this.focused&&this.raiseFieldChange(),l&&e.preventDefault(),a&&(null===(t=this.editBoxElement)||void 0===t||t.focus()),!0}onInputKeyDown(e){this.isReadOnly||this.processKeyDown(e)}processKeyDown(e){return"Enter"===e.key&&this.shouldForceInputOnEnter&&this.tryForceDelayedInput(),!1}tryForceDelayedInput(){this.shouldRaiseFieldTextEvents&&this.bindValueMode===bl.OnDelayedInput&&this.inputDelayDeferredAction.forceExecute()}connectedOrContentChanged(){super.connectedOrContentChanged(),this.mainElementObserver.observe(this,{childList:!0,subtree:!0})}disconnectedCallback(){super.disconnectedCallback(),this.mainElementObserver.disconnect()}contentChanged(){this.fieldElement=this.getFieldElement(),this.editBoxTemplateElement&&this.updateEditBoxTemplateTabIndex(),this.fieldElement?(this.onFieldReady(this.fieldElement,!this._fieldInitialized),this._fieldInitialized=!0):this.editBoxTemplateElement&&this.onTemplateWithoutInputReady(this.editBoxTemplateElement),this.addEventListener("pointerdown",this.boundOnPointerDownHandler)}get shouldRaiseFieldTextEvents(){return!0}get readyOnConnectedCallback(){return!1}updated(e){this.rendered&&(e.has("bindValueMode")&&this.onBindValueModeChanged(e.get("bindValueMode")),(e.has("fieldText")||e.has("fieldTextVersion"))&&this.applyTextProperty(),e.has("placeholder")&&this.updatePlaceholder()),e.has("fieldInputDelay")&&this.onInputDelayChanged(),super.updated(e)}updatePlaceholder(){this.fieldElement&&(this.placeholder&&""!==this.placeholder?this.fieldElement.setAttribute("placeholder",this.placeholder):this.fieldElement.removeAttribute("placeholder"))}updateEditBoxTemplateTabIndex(){var e,t;this.enabled&&!this.fieldElement?null===(e=this.editBoxTemplateElement)||void 0===e||e.setAttribute("tabindex","0"):null===(t=this.editBoxTemplateElement)||void 0===t||t.removeAttribute("tabindex")}mainElementContentChanged(e,t){const i=this.fieldElement;this.contentChanged(),this.fieldElement&&i!==this.fieldElement&&this.applyTextProperty()}}C([ln({type:String,attribute:vl.inputText})],Bl.prototype,"fieldText",void 0),C([ln({type:Number,attribute:vl.inputTextVersion})],Bl.prototype,"fieldTextVersion",void 0),C([ln({type:Number,attribute:vl.fieldInputDelay})],Bl.prototype,"fieldInputDelay",void 0),C([ln({type:bl,attribute:vl.bindValueMode})],Bl.prototype,"bindValueMode",void 0),C([ln({type:Boolean,attribute:"is-read-only"})],Bl.prototype,"isReadOnly",void 0),C([ln({type:String,attribute:vl.customPlaceholder})],Bl.prototype,"placeholder",void 0);class El extends Event{constructor(){super(El.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}El.eventName=tl+".opendropdown";class Il extends Event{constructor(){super(Il.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Il.eventName=tl+".closedropdown";class Sl extends Event{constructor(){super(Sl.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}Sl.eventName=tl+".pointerdown";class xl extends Event{constructor(){super(xl.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}xl.eventName=tl+".trycleareditorvalue",mt.register(El.eventName,(e=>e.detail)),mt.register(Il.eventName,(e=>e.detail));class Dl{constructor(e){this.boundOnPopupElementChangedHandler=this.onPopupElementChanged.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this),this.boundOnPopupPortalElementsChangedHandler=this.onDropDownPortalElementsChanged.bind(this),this.control=e,this.popupPortal=null,this._popupElement=null,this._adaptiveDropDownElement=null}get popupElement(){return this._popupElement}get useMobileFocusBehaviour(){var e;return(null===(e=this._adaptiveDropDownElement)||void 0===e?void 0:e.adaptivityEnabled)||!1}onConnectedCallback(){this.ensurePopupInfrastructure(),this.control.addEventListener(gr.eventName,this.boundOnPopupElementChangedHandler)}onDisconnectedCallback(){this.control.removeEventListener(gr.eventName,this.boundOnPopupElementChangedHandler),this.disposePopupInfrastructure()}onSlotChanged(){this.disposePopupInfrastructure(),this.ensurePopupInfrastructure()}getPopupPortal(){if(!this.control.shadowRoot)return null;const e=this.control.shadowRoot.querySelector("slot");if(!e)return null;return e.assignedNodes().find((e=>ot(e)))}onPopupElementChanged(e){H.getOriginalSource(e)===this.popupPortal&&(this.disposePopupElement(),this.ensurePopupElement())}onPopupShown(e){this.popupElement&&lt(this.popupElement)&&this.control.addLogicalChild(this.popupElement)}onPopupClosed(e){this.popupElement&&lt(this.popupElement)&&this.control.removeLogicalChild(this.popupElement)}onDropDownPortalElementsChanged(e){this.ensurePopupElement()}ensurePopupInfrastructure(){var e;this.popupPortal=this.getPopupPortal(),null===(e=this.popupPortal)||void 0===e||e.addEventListener(gr.eventName,this.boundOnPopupPortalElementsChangedHandler),this.ensurePopupElement()}ensurePopupElement(){var e,t,i;this.popupPortal&&(this._popupElement=null===(e=this.popupPortal)||void 0===e?void 0:e.popupBase,null===(t=this._popupElement)||void 0===t||t.addEventListener(oo.eventName,this.boundOnPopupShownHandler),null===(i=this._popupElement)||void 0===i||i.addEventListener(ao.eventName,this.boundOnPopupClosedHandler),this._popupElement&&dt(this._popupElement)&&(this._adaptiveDropDownElement=this._popupElement),this.control.ensurePopupElement())}disposePopupInfrastructure(){var e;null===(e=this.popupPortal)||void 0===e||e.removeEventListener(gr.eventName,this.boundOnPopupPortalElementsChangedHandler),this.popupPortal=null,this._adaptiveDropDownElement=null,this.disposePopupElement()}disposePopupElement(){var e,t;null===(e=this._popupElement)||void 0===e||e.removeEventListener(oo.eventName,this.boundOnPopupShownHandler),null===(t=this._popupElement)||void 0===t||t.removeEventListener(ao.eventName,this.boundOnPopupClosedHandler),this._popupElement=null,this.control.disposePopupElement()}}class Fl extends Li{constructor(e){super(e.getKeyboardNavigator(),e),this._editor=e}queryItems(){const e=[];this._editor.editBoxElement&&e.push(this._editor.editBoxElement);const t=Ci.findFocusableElements(this._editor).filter((e=>e!==this._editor.editBoxElement));return t.forEach((t=>e.push(t))),e}activate(){const e=document.activeElement;e&&this._editor.editBoxElement&&this._editor.editBoxElement.contains(e)||super.activate()}canManageTabIndex(e){return(!this._editor.editBoxTemplateElement||!this._editor.editBoxTemplateElement.contains(e))&&super.canManageTabIndex(e)}}var Tl;!function(e){e.isDisplayFormatDefined="is-display-format-defined",e.isPassword="is-password",e.needSelection="need-selection"}(Tl||(Tl={}));const Hl={...Tl,...vl};let Ul=class extends Bl{constructor(){super(...arguments),this.selectionRequested=!1,this.boundOnInputFocusHandler=this.onInputFocusIn.bind(this),this.boundOnInputFocusOutHandler=this.onInputFocusOut.bind(this),this.boundOnBeforeInputHandler=this.onBeforeInput.bind(this),this.boundOnInputKeyUpHandler=this.onInputKeyUp.bind(this),this.needSelection=!1,this.isDisplayFormatDefined=!1,this.isPassword=!1}get shouldProcessFocusIn(){return this.isDisplayFormatDefined||this.selectionRequested}get shouldProcessFocusOut(){return this.isDisplayFormatDefined}get shouldProcessEnter(){return!1}get inputElement(){return this.fieldElement}get shouldProcessFieldTextVersion(){return!this.isPassword&&super.shouldProcessFieldTextVersion}onFieldReady(e,t){e.addEventListener("keyup",this.boundOnInputKeyUpHandler),e.addEventListener("beforeinput",this.boundOnBeforeInputHandler),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),this.initializeKeyboardNavigator(),super.onFieldReady(e,t),t&&this.focused&&this.onInputFocusIn()}onTemplateWithoutInputReady(e){super.onTemplateWithoutInputReady(e),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),e.addEventListener("keyup",this.boundOnInputKeyUpHandler),this.initializeKeyboardNavigator()}onInputFocusIn(){this.shouldProcessFocusIn&&this.processFocusIn()}onInputFocusOut(e){this.shouldProcessFocusOut&&this.processFocusOut(e);const t=this.getKeyboardNavigator();t&&(t.isActive=!1)}onInputKeyUp(e){this.isReadOnly||this.processKeyUp(e)}onBeforeInput(e){this.processBeforeInput(e)}processKeyUp(e){return!1}processFocusIn(){if(this.fieldElement){const e=this.selectionRequested||this.focused&&this.isAllSelected();this.raiseFocusIn(e),this.selectionRequested=!1}else this.editBoxTemplateElement&&this.raiseFocusIn(!1)}processFocusOut(e){this.raiseFocusOut(this.fieldElementValue)}processBeforeInput(e){return!1}raiseFocusIn(e){this.dispatchEvent(new Al(e))}raiseFocusOut(e,t){this.dispatchEvent(new dl(e,t))}raiseKeyDown(e){this.dispatchEvent(new cl(e))}getFieldElement(){return this.querySelector(`[parent-id="${this.id}"].${yl.TextEditInput}`)}selectInputText(e,t){this.fieldElement&&this.fieldElement.setSelectionRange(e,t)}selectAll(){this.fieldElement&&this.focused&&this.fieldElement.select()}onPasswordChanged(){this.isPassword&&(this.fieldElementValue="")}updated(e){super.updated(e),this.rendered&&e.has("isPassword")&&this.onPasswordChanged(),this.rendered&&e.has("needSelection")&&this.needSelection&&this.selectAll()}focusAndSelectAll(){var e;this.selectionRequested=!0,null===(e=this.fieldElement)||void 0===e||e.focus()}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Pi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,this.createKeyboardStrategy())}createKeyboardStrategy(){return new Fl(this)}getKeyboardNavigator(){return this.keyboardNavigator}focus(e){var t;null===(t=this.fieldElement)||void 0===t||t.focus(e)}};Ul.shadowRootOptions={...ms.shadowRootOptions,delegatesFocus:!0},C([ln({type:Boolean,attribute:Tl.needSelection})],Ul.prototype,"needSelection",void 0),C([ln({type:Boolean,attribute:Tl.isDisplayFormatDefined})],Ul.prototype,"isDisplayFormatDefined",void 0),C([ln({type:Boolean,attribute:Tl.isPassword})],Ul.prototype,"isPassword",void 0),Ul=C([rn(ja)],Ul);class Pl{constructor(e){this.deltaY=e}}var Ql,Nl;!function(e){e[e.forward=0]="forward",e[e.backward=1]="backward"}(Ql||(Ql={}));class Rl{constructor(e,t,i,n){this.direction=Ql.backward,this.selectionStart=e,this.selectionEnd=t,this.selectAll=n,this.direction=i}}class Ll extends Event{constructor(){super(Ll.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}Ll.eventName=il+".applyValue";class Ml extends CustomEvent{constructor(e){super(Ml.eventName,{detail:new pl(e,!1),bubbles:!0,composed:!0,cancelable:!0})}}Ml.eventName=il+".autofill";class kl extends CustomEvent{constructor(e){super(kl.eventName,{detail:new Pl(e),bubbles:!0,composed:!0,cancelable:!0})}}kl.eventName=il+".wheel";class Kl extends CustomEvent{constructor(e,t,i,n){super(Kl.eventName,{detail:new Rl(e,t,i,n),bubbles:!0,composed:!0,cancelable:!0})}}Kl.eventName=il+".selectionchange";class Ol extends CustomEvent{constructor(e){super(Ol.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}Ol.eventName=il+".compositionEnd",mt.register(Kl.eventName,(e=>e.detail)),mt.register(Ml.eventName,(e=>e.detail)),mt.register(Ll.eventName,(e=>e.detail)),mt.register(kl.eventName,(e=>e.detail)),mt.register(Ol.eventName,(e=>({Text:e.detail.data})));class _l{}_l.CaretSpanElement=yl.TextEdit+"-caret-element",function(e){e.syncSelectionStart="sync-selection-start",e.syncSelectionEnd="sync-selection-end",e.isMaskDefined="is-mask-defined"}(Nl||(Nl={}));const Vl={...Nl,...Hl};class zl extends Ul{constructor(){super(...arguments),this.wheelTimerId=-1,this._leftPaddingInput=0,this._rightPaddingInput=0,this._isActuallyBackwardSelection=!1,this._shouldApplySelectionOnFocus=!0,this.compositionProcessing=!1,this.compositionEndHandler=this.handleCompositionEnd.bind(this),this.pointerUpHandler=this.handlePointerUp.bind(this),this.clickHandler=this.handleClick.bind(this),this.wheelHandler=this.handleWheel.bind(this),this.syncSelectionStart=null,this.syncSelectionEnd=null,this.isMaskDefined=!1}disconnectedCallback(){super.disconnectedCallback()}get spanCaretElement(){return this.querySelector(`.${_l.CaretSpanElement}`)}get shouldProcessFocusOut(){return!0}get shouldProcessWheel(){return this.isMaskDefined}get shouldProcessFocusIn(){return!0}get shouldApplySelectionOnFocus(){return this._shouldApplySelectionOnFocus}set shouldApplySelectionOnFocus(e){this._shouldApplySelectionOnFocus=e}get inputSelectionDirection(){var e;return"backward"===(null===(e=this.inputElement)||void 0===e?void 0:e.selectionDirection)?Ql.backward:Ql.forward}handlePointerUp(e){this.allowInput&&this.isMaskDefined&&this.processPointerUp(e)}handleCompositionEnd(e){this.dispatchEvent(new Ol(e)),this.inputElement.removeEventListener("compositionend",this.compositionEndHandler),this.compositionProcessing=!1}handleClick(e){this.applyInputSelection()}handleWheel(e){if(this.shouldProcessWheel&&(e.preventDefault(),this.processWheel(e),this.bindValueMode!==bl.OnInput)){-1!==this.wheelTimerId&&clearTimeout(this.wheelTimerId);this.wheelTimerId=window.setTimeout((()=>{this.bindValueMode===bl.OnDelayedInput?this.applyDefferedValue():this.raiseApplyValue()}).bind(this),this.bindValueMode===bl.OnDelayedInput?Math.max(500,this.fieldInputDelay):500)}}onFieldReady(e,t){if(super.onFieldReady(e,t),this.isMaskDefined&&this.fieldElement){const e=window.getComputedStyle(this.fieldElement);this._leftPaddingInput=parseInt(e.paddingLeft),this._rightPaddingInput=parseInt(e.paddingRight)}}getCaretClientPosition(){const e=this.spanCaretElement;return this.fieldElement&&e?(e.textContent=this.fieldElement.value.substring(0,this.getCursorPosition()),e.offsetWidth):0}getCursorPosition(){return this.inputSelectionStart===this.inputSelectionEnd||this.inputSelectionDirection===Ql.backward||this._isActuallyBackwardSelection?this.inputSelectionStart:this.inputSelectionEnd}calculateInputScrollLeft(){if(this.fieldElement){const e=this.getCaretClientPosition(),t=this.fieldElement.scrollLeft,i=this.fieldElement.clientWidth,n=1;e<t&&(this.fieldElement.scrollLeft=e),e>t+i-this._rightPaddingInput-this._leftPaddingInput&&(this.fieldElement.scrollLeft=e-i+this._rightPaddingInput+this._leftPaddingInput+n)}}processWheel(e){this.dispatchEvent(new kl(e.deltaY))}applyTextPropertyCore(){super.applyTextPropertyCore(),this.applyMaskManagerSelection()}applyMaskManagerSelection(){this.isMaskDefined&&this.focused&&(this.inputSelectionStart!==this.syncSelectionStart||this.inputSelectionEnd!==this.syncSelectionEnd)&&(this.selectInputText(this.syncSelectionStart,this.syncSelectionEnd),this.fieldElement&&this.focused&&this.calculateInputScrollLeft())}get shouldProcessFieldTextVersion(){return!this.isMaskDefined&&super.shouldProcessFieldTextVersion}get shouldRaiseFieldTextEvents(){return!this.isMaskDefined}processFocusIn(){var e;super.processFocusIn(),this.allowInput&&this.isMaskDefined&&this.shouldApplySelectionOnFocus&&requestAnimationFrame((()=>this.applyMaskManagerSelection())),this.addEventListener("wheel",this.wheelHandler,{capture:!0,passive:!1}),h.Browser.WebKitTouchUI&&(null===(e=this.inputElement)||void 0===e||e.addEventListener("click",this.clickHandler))}processFocusOut(e){var t;super.processFocusOut(e),this.removeEventListener("wheel",this.wheelHandler,{capture:!0}),h.Browser.WebKitTouchUI&&(null===(t=this.inputElement)||void 0===t||t.removeEventListener("click",this.clickHandler)),this.isMaskDefined&&!this.contains(e.target)&&this.selectInputText(0,0)}processKeyDown(e){var t;if(super.processKeyDown(e),!this.shouldProcessKeyDown(e))return!1;if(H.markHandled(e),this._isActuallyBackwardSelection=e.shiftKey&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Left,this.raiseKeyDown(e),Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter){const i=new KeyboardEvent("keydown",{key:e.key,code:e.code,location:e.location,repeat:e.repeat,isComposing:e.isComposing,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,bubbles:!0,cancelable:!0,composed:!0});null===(t=this.fieldElement)||void 0===t||t.dispatchEvent(i)}return!0}processPointerDown(e){super.processPointerDown(e);const t=H.containsInComposedPath(e,(e=>e===this.inputElement));return this.isMaskDefined&&!this.focused&&t&&(this.shouldApplySelectionOnFocus=!1),t&&document.addEventListener(zl.pointerUpEventType,this.pointerUpHandler),!0}processKeyUp(e){if(!this.inputElement||!H.containsInComposedPath(e,(e=>e===this.inputElement)))return!1;this._isActuallyBackwardSelection=!1;const t=this.querySelector("input:-webkit-autofill");return this.isMaskDefined&&t&&t.value&&!this.isOpenDropDownShortcut(e)&&(this.dispatchEvent(new Ml(t.value)),H.markHandled(e)),this.shouldProcessKeyUp(e)&&(this.bindValueMode===bl.OnLostFocus?this.raiseApplyValue():this.applyDefferedValue()),!0}applyDefferedValue(){this.bindValueMode===bl.OnDelayedInput&&this.inputDelayDeferredAction.execute((()=>this.raiseApplyValue()))}raiseApplyValue(){this.dispatchEvent(new Ll)}processBeforeInput(e){return!!super.processBeforeInput(e)||!!this.isMaskDefined&&(e.isComposing&&!h.Browser.AndroidMobilePlatform?(this.compositionProcessing||(this.inputElement.addEventListener("compositionend",this.compositionEndHandler),this.compositionProcessing=!0),!0):(H.markHandled(e),this.shouldProcessBeforeInput(e)&&(this.applyInputSelection(),this.dispatchEvent(new hl(e)),this.applyDefferedValue()),!0))}updated(e){super.updated(e)}shouldProcessKeyUp(e){if(!this.isMaskDefined)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:case Be.KeyCode.Down:return!0;case Be.KeyCode.Delete:return this.bindValueMode!==bl.OnLostFocus;case Be.KeyCode.Key_z:return e.ctrlKey}return!1}shouldProcessKeyDown(e){if(!this.isMaskDefined)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:case Be.KeyCode.Right:case Be.KeyCode.Up:case Be.KeyCode.Down:case Be.KeyCode.Home:case Be.KeyCode.Delete:case Be.KeyCode.End:case Be.KeyCode.Enter:return!0;case Be.KeyCode.Key_a:case Be.KeyCode.Key_z:return e.ctrlKey}return!1}shouldProcessBeforeInput(e){switch(e.inputType){case"insertText":case"insertReplacementText":case"insertFromPaste":return null!==e.data&&e.data.length>0;case"deleteContentBackward":case"deleteContentForward":case"deleteByCut":return!0;case"insertCompositionText":return h.Browser.AndroidMobilePlatform}return!1}isOpenDropDownShortcut(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Down&&e.altKey}selectAll(){super.selectAll(),this.focused&&this.applyInputSelection()}processPointerUp(e){return this.focused&&setTimeout((()=>this.applyInputSelection()),0),this.shouldApplySelectionOnFocus||(this.shouldApplySelectionOnFocus=!0),document.removeEventListener(zl.pointerUpEventType,this.pointerUpHandler),!0}applyInputSelection(){if(this.isMaskDefined&&(this.syncSelectionStart!==this.inputSelectionStart||this.syncSelectionEnd!==this.inputSelectionEnd)){const e=this.fieldElementValue.length===Math.abs(this.inputSelectionEnd-this.inputSelectionStart);this.raiseMaskSelectionChanged(this.inputSelectionStart,this.inputSelectionEnd,this.inputSelectionDirection,e)}}raiseMaskSelectionChanged(e,t,i,n){this.dispatchEvent(new Kl(e,t,i,n))}}zl.pointerUpEventType=h.Browser.WebKitTouchUI?"touchend":"pointerup",C([ln({type:Number,attribute:Vl.syncSelectionStart})],zl.prototype,"syncSelectionStart",void 0),C([ln({type:Number,attribute:Vl.syncSelectionEnd})],zl.prototype,"syncSelectionEnd",void 0),C([ln({type:Boolean,attribute:Vl.isMaskDefined})],zl.prototype,"isMaskDefined",void 0),customElements.define(il,zl);class Wl extends Ha{constructor(e,t,i){super(e,t),this._parentStrategy=i}get parentStrategy(){return this._parentStrategy}handlePopupShown(){super.handlePopupShown(),Si(this.parentStrategy.dropDownEditor)&&Ei(this.targetElement)}}class $l extends Fl{constructor(e){super(e)}get dropDownEditor(){return this._editor}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return(e.altKey||e.metaKey)&&t===Be.KeyCode.Down?(this.openDropDown(),!0):(e.altKey||e.metaKey)&&t===Be.KeyCode.Up?(this.closeDropDown(),!0):e.altKey&&t===Be.KeyCode.Delete?(this.tryClearEditorValue(),!0):super.handleKeyDown(e)}closeDropDown(){this.dropDownEditor.closeDropDown()}openDropDown(){this.dropDownEditor.openDropDown()}closeDropDownAndApplyValue(e){this.performShortcutEvent(e)}tryClearEditorValue(){this.dropDownEditor.enabled&&!this.dropDownEditor.isReadOnly&&this.dropDownEditor.dispatchClearEditorValue()}}class Gl extends $l{constructor(e){super(e)}initialize(){super.initialize(),this.subscribeToEvents()}subscribeToEvents(){this.boundOnPopupKeyboardStrategyCreating||(this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this.targetElement.addEventListener(go.eventName,this.boundOnPopupKeyboardStrategyCreating))}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createPopupStrategy(e,t),createModal:(e,t)=>this.createModalStrategy(e,t)}}onDispose(){this.boundOnPopupKeyboardStrategyCreating&&(this.targetElement.removeEventListener(go.eventName,this.boundOnPopupKeyboardStrategyCreating),this.boundOnPopupKeyboardStrategyCreating=void 0),super.onDispose()}createModalStrategy(e,t){return new Wl(e,t,this)}}class ql extends $l{constructor(e){super(e)}handleKeyDown(e){const t=this.dropDownEditor;return t&&t.shouldHandleKeyDown?t.shouldHandleKeyDown(e):super.handleKeyDown(e)}}class Xl{}var Yl;Xl.ClassName=he.Prefix+"-edit-dropdown",Xl.Header=Xl.ClassName+"-header",Xl.Body=he.Prefix+"-body",Xl.DropDownButton=he.Prefix+"-edit-btn-dropdown",function(e){e.ContentOrEditorWidth="ContentOrEditorWidth",e.ContentWidth="ContentWidth",e.EditorWidth="EditorWidth"}(Yl||(Yl={}));class Jl extends zl{constructor(){super(),this.boundOnClickHandler=this.onClick.bind(this),this.isDropDownOpen=!1,this.popupHelper=new Dl(this),this.dropDownWidthMode=Yl.ContentWidth,this._componentResizeObserver=new ResizeObserver(this.onSizeChanged.bind(this))}get useMobileFocusBehaviour(){return this.popupHelper.useMobileFocusBehaviour}get popupElement(){return this.popupHelper.popupElement}get popupDOMElement(){return this.popupElement}get dropDownElement(){return this.popupElement}get shouldProcessFocusOut(){if(!this.enabled||this.isReadOnly)return!1;return!(this.editBoxTemplateElement&&this.inputElement&&!T.DomUtils.isItParent(this.editBoxTemplateElement,this.inputElement))}connectedCallback(){super.connectedCallback(),this.popupHelper.onConnectedCallback(),this._componentResizeObserver.observe(this)}disconnectedCallback(){this.popupHelper.onDisconnectedCallback(),super.disconnectedCallback(),this._componentResizeObserver.disconnect()}contentChanged(){super.contentChanged(),this.popupHelper.onSlotChanged(),this.addEventListener("click",this.boundOnClickHandler)}focusInternal(){var e;this.shouldApplySelectionOnFocus=!1,null===(e=this.editBoxElement)||void 0===e||e.focus({preventScroll:!0}),this.shouldApplySelectionOnFocus=!0}processFocusOut(e){var t,i,n;const s=H.getEventSource(e);if(null===(t=this.popupElement)||void 0===t?void 0:t.contains(s))return;const r=null!==(i=e.relatedTarget)&&void 0!==i?i:document.activeElement;this.contains(r)&&!this.isFocusableElementInMainElementTemplate(r)||(null===(n=this.popupElement)||void 0===n?void 0:n.contains(r))||this.raiseFocusOutInternal()}raiseFocusOutInternal(){this.raiseFocusOut(this.fieldElement?this.fieldElementValue:this.fieldText)}processFocusIn(){this.focused&&super.processFocusIn()}processPointerDown(e){return Ei(this),super.processPointerDown(e)}canHandlePointerDown(e){return this.contains(e.target)&&H.containsInComposedPath(e,this.isDropDownButtonElement.bind(this))||K.containsInComposedPath(e,this.inputElement)}processKeyDownServerCommand(e){return!1}shouldProcessKeyDown(e){return!e.altKey&&super.shouldProcessKeyDown(e)}shouldProcessKeyUp(e){return!e.altKey&&super.shouldProcessKeyUp(e)}ensurePopupElement(){}disposePopupElement(){}openDropDown(){this.dispatchEvent(new El)}closeDropDown(){this.dispatchEvent(new Il)}dispatchClearEditorValue(){this.dispatchEvent(new xl)}async processCapturedPointerAsync(e,t){return this.canHandlePointerDown(e)&&(t.handled=!0),Promise.resolve()}createKeyboardStrategy(){return new $l(this)}updated(e){super.updated(e),e.has("dropDownWidthMode")&&this.reconnectComponentResizeObserver()}toggleDropDownVisibility(){this.isDropDownOpen?this.closeDropDown():this.enabled&&!this.isReadOnly&&this.openDropDown()}tryOpenDropDown(){this.enabled&&!this.isReadOnly&&this.openDropDown()}tryCloseDropDown(){this.isDropDownOpen&&this.closeDropDown()}onSizeChanged(e,t){if(!this.dropDownElement)return;const i=`${e[0].target.getBoundingClientRect().width}px`;this.dropDownElement.desiredWidth=this.dropDownWidthMode===Yl.EditorWidth?i:null,this.dropDownElement.minDesiredWidth=this.dropDownWidthMode===Yl.ContentOrEditorWidth?i:null}dispatchDropDownEditorPointerDownEvent(){document.dispatchEvent(new Sl)}isDropDownButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(Xl.DropDownButton))}isEditBoxElement(e){return e===this.fieldElement||e===this.editBoxTemplateElement}isFieldElement(e){return e===this.fieldElement}isEditBoxTemplateElement(e){return e===this.editBoxTemplateElement}reconnectComponentResizeObserver(){this.isDOMAttached&&(this._componentResizeObserver.disconnect(),this.dropDownElement&&(this.dropDownElement.desiredWidth=null,this.dropDownElement.minDesiredWidth=null),this._componentResizeObserver.observe(this))}onClick(e){this.processClick(e)}processClick(e){return H.containsInComposedPath(e,this.isDropDownButtonElement.bind(this))&&(this.toggleDropDownVisibility(),this.focused||(this.focusInternal(),this.dispatchDropDownEditorPointerDownEvent()),H.markHandled(e)),!0}}C([ln({type:Boolean,attribute:"is-dropdown-open"})],Jl.prototype,"isDropDownOpen",void 0),C([ln({type:Yl,attribute:"dropdown-width-mode"})],Jl.prototype,"dropDownWidthMode",void 0);class jl{static selectInputValue(e){null!==e&&e instanceof HTMLInputElement&&Te.isTextInput(e)&&e.select()}static isCheckBoxInput(e){return e instanceof HTMLInputElement&&"checkbox"===e.type}static isEditableTextElement(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&!e.readOnly&&!e.disabled}static findFieldElement(e){return e instanceof Bl?e.fieldElement:e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e:void 0}static isDropDown(e){return e instanceof Jl}static openDropDown(e){e.openDropDown()}}const Zl=`:scope > *:not(.${[ue.IndentCellClassName,ue.HeaderIndentCellClassName,ue.GroupFooterIndentCellClassName,ue.EmptyCellClassName,ue.HiddenEmptyCellClassName,ue.RowDragAnchorClassName].join(",.")})`;class eA extends Js{constructor(e,t,i){super(t,i),this.obsolete=!1,this.tableStrategy=e}get isObsolete(){return this.obsolete}makeObsolete(){this.obsolete=!0}getRowVisibleIndex(e=!1){const t=e?null:this.tableStrategy.hiddenRowVisibleIndex;return null!=t?t:Te.getAttributeIntValue(this.targetElement,sn.VisibleIndexName,-1)}selectFirstCell(){this.firstItemSelected||this.moveToFirstItem()}selectLastCell(){this.lastItemSelected||this.moveToLastItem()}toggleSelectionCell(){const e=this.selectedItemElement.querySelector("input[type=checkbox]");e&&this.raiseClickEvent(e,!1,!1,!1)}getSyncSelectedColumnInfo(){return this.getSelectedColumnInfo()}syncSelectedColumn(e){const t=null!==e?this.findItemElementIndexByColumnUid(e.uID):-1;this.selectedItemIndex=Math.max(t,0)}leaveRow(){Ci.removeTabIndex(this.selectedItemElement)}getSelectedColumnInfo(){var e;return null!==(e=this.getColumnInfo(this.selectedItemElement))&&void 0!==e?e:null}getColumnInfo(e){return this.getColumnInfoByCell(e)}findItemElementIndexByColumnUid(e){return this.items.findIndex((t=>this.getColumnUidByCell(t)===e))}get firstItemSelected(){return this.tableStrategy.isFirstCellSelected(this)||super.firstItemSelected}get lastItemSelected(){return this.tableStrategy.isLastCellSelected(this)||super.lastItemSelected}getShortcutContext(){var e,t,i,n;return{RowType:null!==(t=null===(e=this.tableStrategy.selectedHiddenRowStrategy)||void 0===e?void 0:e.getRowType())&&void 0!==t?t:this.getRowType(),ColumnUID:null!==(i=this.getSelectedColumnUid())&&void 0!==i?i:-1,VisibleIndex:null!==(n=this.getRowVisibleIndex())&&void 0!==n?n:-1}}tryRestoreSelection(){return!!super.tryRestoreSelection()||(this.tableStrategy.syncSelectedColumn(this),!1)}queryItems(){return this.queryItemsBySelector(Zl)}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(!this.isObsolete&&super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;const i=Be.KeyUtils.getEventKeyCode(e);switch(i){case Be.KeyCode.Left:return this.handleArrowLeftKeyDown(e);case Be.KeyCode.Right:return this.handleArrowRightKeyDown(e);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);case Be.KeyCode.Home:if(!e.ctrlKey)return this.selectFirstCell(),!0;break;case Be.KeyCode.End:if(!e.ctrlKey)return this.selectLastCell(),!0;break;case Be.KeyCode.Space:case Be.KeyCode.Enter:if(this.isSelectionCell())return this.toggleSelectionCell(),!0}return i===Be.KeyCode.Space}selectItem(e){const t=e!==this.selectedItemIndex;t&&this.tableStrategy.trySelectHiddenCell(e)||(super.selectItem(e),t&&this.saveSelectedColumn(),!this.navigator.isActive||!t&&this.preventScrollOnFocus||this.alignRequiredVisibleElement(this.selectedItemElement))}get selectedColumnUidSearchElement(){var e,t;return null!==(t=null===(e=this.tableStrategy.selectedHiddenRowStrategy)||void 0===e?void 0:e.selectedItemElement)&&void 0!==t?t:this.selectedItemElement}get preventScrollOnFocus(){return this.tableStrategy.preventScrollOnFocus}isImmediatelyClickEnabled(){return this.isActiveCommandCell()||this.isActiveExpandButtonCell()||this.isSelectionCell()}handleKeyDownForHiddenItem(e){return this.tableStrategy.handleKeyDownForHiddenRow(this,e)}handleArrowLeftKeyDown(e){return this.moveToPrevItem(),!0}handleArrowRightKeyDown(e){return this.moveToNextItem(),!0}getColumnUidByCell(e){var t;return null===(t=this.getColumnInfo(e))||void 0===t?void 0:t.uID}syncFocusedRowVisibleIndex(){if(!this.isFocusedRowEnabled)return;const e=this.getRowVisibleIndex();this.grid.notifyFocusedRowChanged(e)}isActiveCommandCell(){return js.isCommandCell(this.selectedItemElement)}isActiveExpandButtonCell(){return js.isExpandButtonCell(this.selectedItemElement)}isSelectionCell(){return js.isSelectionCell(this.selectedItemElement)}isStartEditingOnTypeKey(e){const t=Be.KeyUtils.getEventKeyCode(e);return!!(t===Be.KeyCode.Backspace||e.altKey&&t===Be.KeyCode.Down)||this.isPrintableCharacterKey(e)}saveSelectedColumn(){const e=this.getRowType();bA.isColumnSyncRequired(e)&&this.tableStrategy.saveSelectedColumn(this)}getSelectedColumnUid(){const e=this.selectedColumnUidSearchElement;let t;return e&&(t=this.getColumnUidByCell(e)),null!=t?t:null}isFixedCell(e){return js.isFixedCell(e)}isFixedTablePart(){return this.tableStrategy.isFixed}alignRequiredVisibleElement(e){const t=this.getScrollViewerContent();t&&(e.scrollIntoView({block:"nearest"}),this.isFixedTablePart()||this.alignElementVertically(e,t),this.isFixedCell(e)||this.alignElementHorizontally(e,t))}alignElementVertically(e,t){const i=this.getScrollViewer();i&&Ya.alignElementVertically(e,i,t)}alignElementHorizontally(e,t){const i=this.findItemElementIndexByChild(e);if(i<0)return;const n=this.getFixedCells(i+1,this.itemCount);if(n.length>0){const i=Ya.calculateHorizontalScrollCorrection(e,n.reverse(),!1);t.scrollBy(i,0)}const s=this.getFixedCells(0,i);if(s.length>0){const i=Ya.calculateHorizontalScrollCorrection(e,s,!0);t.scrollBy(i,0)}}getFixedCells(e,t){const i=[];for(let n=e;n<t;n++){const e=this.getItem(n);e&&this.isFixedCell(e)&&i.push(e)}return i}}class tA extends eA{constructor(e,t,i){super(e,t,i)}getSelectedItemRowSpan(){return this.selectedItemElement.rowSpan}getSelectedItemLeafIndex(e){return this.getLeafIndex(this.selectedItemElement,e)}getRowType(){return Xs.Header}handleKeyDown(e){if(!this.nestedContentSelected)switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Space:if(!this.isSelectionCell())return this.performShortcutEvent(e),!0;break;case Be.KeyCode.Down:return e.altKey&&this.performShortcutEvent(e),e.altKey}return super.handleKeyDown(e)}isImmediatelyClickEnabled(){return!0}getColumnInfo(e){return this.getHeaderColumnInfo(e)}findItemElementIndexByColumnUid(e){let t=super.findItemElementIndexByColumnUid(e);return t<0&&(t=this.items.findIndex((t=>{var i;return null===(i=this.getColumnInfo(t))||void 0===i?void 0:i.containsLeaf(e)}))),t}getSyncSelectedColumnInfo(){const e=super.getSyncSelectedColumnInfo();if(e&&e.hasLeafs){const t=this.tableStrategy.getSavedColumnInfo();return t&&e.containsLeaf(t.uID)?t:e.getLeftLeaf()}return e}handleArrowLeftKeyDown(e){return!!(this.selectedItemIndex-1>=0&&this.isAdjacentColumn(-1))&&super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return!!(this.selectedItemIndex+1<this.itemCount&&this.isAdjacentColumn(1))&&super.handleArrowRightKeyDown(e)}isAdjacentColumn(e){const t=e<0,i=this.getSelectedItemLeafIndex(t);return this.getLeafIndex(this.getItem(this.selectedItemIndex+e),!t)===i+e}getLeafIndex(e,t){var i,n,s;const r=this.getColumnInfo(e);if(!r||!r.hasLeafs)return null!==(n=null===(i=this.getColumnInfo(e))||void 0===i?void 0:i.leafIndex)&&void 0!==n?n:-1;const o=t?r.getLeftLeaf():r.getRightLeaf();return null!==(s=null==o?void 0:o.leafIndex)&&void 0!==s?s:-1}}class iA extends eA{constructor(e,t,i){super(e,t,i)}focusNestedEditor(){return this.alignRequiredVisibleElement(this.selectedItemElement),!!this.switchToNestedContent()&&(this.selectFocusedInputValue(),!0)}updateSelectedItemByChildElement(e,t=null){t instanceof FocusEvent&&this.syncFocusedRowVisibleIndex(),super.updateSelectedItemByChildElement(e,t)}selectFocusedInputValue(){jl.selectInputValue(document.activeElement)}}class nA extends iA{constructor(e,t,i){super(e,t,i)}getNestedContentContainer(){return this.nestedContentSelected?this.targetElement:super.getNestedContentContainer()}activate(){this.nestedContentSelected&&!this.isNestedElementFocused()&&this.leaveFromNestedContent(),super.activate()}switchToNestedContent(){return this.getNestedContentElement()&&Ci.scheduleResetTabIndex(this.selectedItemElement),super.switchToNestedContent()}leaveFromNestedContent(e=Qi.None){Ci.makeElementFocusable(this.selectedItemElement),super.leaveFromNestedContent(e)}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;const i=Be.KeyUtils.getEventKeyCode(e);this.nestedContentSelected&&(i===Be.KeyCode.Tab&&this.alignToAdjacentFocusableItem(e.shiftKey),Ci.removeTabIndex(this.selectedItemElement));const n=this.nestedContentSelected,s=super.handleKeyDown(e);return!(i===Be.KeyCode.Tab&&s&&n&&!this.nestedContentSelected)&&s}alignToAdjacentFocusableItem(e){e&&Ci.makeElementFocusable(this.selectedItemElement);const t=e?Ci.findPrevFocusableElement(this.selectedItemElement):Ci.findNextFocusableNotChildElement(document.activeElement);if(!t)return;const i=this.findItemElementIndexByChild(t);if(i<0||i===this.selectedItemIndex)return;const n=this.getItem(i);n&&this.alignRequiredVisibleElement(n)}}class sA extends nA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Filter}handleKeyDown(e){if(this.isStartEditingOnTypeKey(e)&&!this.nestedContentSelected){const t=this.getNestedContentElement();this.switchToNestedContent();const i=document.activeElement;if(e.altKey&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Down&&jl.isDropDown(t))return jl.openDropDown(t),!0;i&&jl.isEditableTextElement(i)&&i.select()}return super.handleKeyDown(e)}isStartEditingOnTypeKey(e){const t=Be.KeyUtils.getEventKeyCode(e);return!(!e.ctrlKey||t!==Be.KeyCode.Key_v)||super.isStartEditingOnTypeKey(e)}}class rA extends nA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Edit}selectItem(e){e!==this.selectedItemIndex&&this.nestedContentSelected&&this.leaveFromNestedContent(),super.selectItem(e),this.switchToNestedContent()}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;const i=Be.KeyUtils.getEventKeyCode(e);if(this.nestedContentSelected){if(e.ctrlKey&&[Be.KeyCode.Up,Be.KeyCode.Down,Be.KeyCode.Home,Be.KeyCode.End].includes(i)||e.altKey&&i===Be.KeyCode.Tab)return this.leaveFromNestedContent(),!1;if(i===Be.KeyCode.Enter&&this.canSaveOnEnter()||i===Be.KeyCode.Esc)return this.leaveFromNestedContent(),this.saveRowSelectedColumn(),this.performShortcutEvent(e),!0;i!==Be.KeyCode.Space&&i!==Be.KeyCode.Enter||this.saveRowSelectedColumn()}else if(i===Be.KeyCode.Enter&&this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;return super.handleKeyDown(e)}saveRowSelectedColumn(){this.tableStrategy.saveRowSelectedColumn(this)}canSaveOnEnter(){if(!document.activeElement)return!1;const e=document.activeElement;return Te.isTextInput(e)&&!Te.isMultipleRowInput(e)}}class oA extends iA{constructor(e,t,i){super(e,t,i)}get tableBodyStrategy(){return this.tableStrategy}getRowType(){return Xs.Edit}handleKeyDown(e){if(this.tableBodyStrategy.isEditPending&&this.isStartEditingOnTypeKey(e)&&!this.isNestedElementFocused())return this.tableBodyStrategy.queuePendingEditEvent(e),!0;const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(this.editorManager.isPendingCommandResult&&!this.tableBodyStrategy.isEditPending)return!0;const i=Be.KeyUtils.getEventKeyCode(e);if(this.isEditorCell()){if(i===Be.KeyCode.Esc&&this.tableBodyStrategy.endEditRowItem($a.Cancel))return!0;if(this.isActiveEditorCell()){if(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab){const t=this.isNewItemRow&&!e.shiftKey;if(this.tableBodyStrategy.startEditNearestRowItem(!e.shiftKey,t))return!0;if(this.tableBodyStrategy.endEditRowItem(t?$a.SaveAndStartNewRow:$a.Hide))return!0}if(i===Be.KeyCode.Enter&&!this.editorManager.isEditorPopupShown){if(this.handleEnterKeyDownInActiveEditorCell(e))return!0}}else{if(i===Be.KeyCode.Enter&&this.tableBodyStrategy.startEditRowItem(this,this.selectedItemIndex))return!0;if(this.isEditingOnTypeEnabled()&&this.isStartEditingOnTypeKey(e)&&this.tableBodyStrategy.startEditingOnType(this,this.selectedItemIndex))return this.tableBodyStrategy.queuePendingEditEvent(e),!0}}else if(i===Be.KeyCode.Enter&&this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;return super.handleKeyDown(e)}handleTabKeyDown(e,t=!1,i=!1){return this.isNewItemRow&&!e.shiftKey&&this.lastItemSelected?!!this.tableBodyStrategy.endEditRowItem($a.SaveAndStartNewRow)||super.handleTabKeyDown(e,t,!0):super.handleTabKeyDown(e,t)}handleEnterKeyDownInActiveEditorCell(e){const t=document.activeElement;if(e.shiftKey&&t instanceof HTMLTextAreaElement&&jl.isEditableTextElement(t))return!1;return this.tableBodyStrategy.endEditRowItem(this.enterKeyDirection===Gs.Column||(e.shiftKey?this.firstItemSelected:this.lastItemSelected)&&this.enterKeyDirection===Gs.Row?$a.Save:$a.Hide,!0,e.shiftKey)}get isNewItemRow(){return this.targetElement.classList.contains(ue.EditNewItemRowInplaceClassName)}isEditorCell(){return!js.isCommandCell(this.selectedItemElement)&&!js.isExpandButtonCell(this.selectedItemElement)&&!js.isSelectionCell(this.selectedItemElement)}isActiveEditorCell(){return js.getCellType(this.selectedItemElement)===Ys.Edit}}class aA extends iA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.EditForm}}class lA extends eA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.EditNewItemRow}handleKeyDown(e){if(this.editorManager.isPendingCommandResult)return!0;const t=Be.KeyUtils.getEventKeyCode(e);if(!this.isObsolete&&t===Be.KeyCode.Enter){const e=this.tableStrategy.getSavedColumnInfo();if(this.tableStrategy.startEditNewItemRow(this,e))return!0}return super.handleKeyDown(e)}}class AA extends eA{constructor(e,t,i){super(e,t,i)}get selectedColumnUidSearchElement(){var e;const t=super.selectedColumnUidSearchElement;return null!==(e=null==t?void 0:t.querySelector(`.${ue.ExpandButtonCellClassName}`))&&void 0!==e?e:t}getRowType(){return Xs.Group}queryItems(){return new Array}handleKeyDown(e){const t=this.handleKeyDownForHiddenItem(e);return null!==t?t:this.nestedContentSelected||Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Left&&Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Right?Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter?(this.switchToNestedContent()||this.performShortcutEvent(e),!0):super.handleKeyDown(e):(this.tableStrategy.trySelectHiddenCell(this.selectedItemIndex,(()=>this.dispatchKeyboardEventToSelectedItemStrategy(e)))||this.performShortcutEvent(e),!0)}isImmediatelyClickEnabled(){return!0}dispatchKeyboardEventToSelectedItemStrategy(e){const t=this.tableStrategy.getSelectedItemStrategy();null==t||t.targetElement.dispatchEvent(e)}}class dA extends eA{constructor(e,t,i){super(e,t,i)}get tableBodyStrategy(){return this.tableStrategy}getRowType(){return Xs.Data}handleKeyDown(e){if(this.tableBodyStrategy.isEditPending&&this.isStartEditingOnTypeKey(e))return this.tableBodyStrategy.queuePendingEditEvent(e),!0;const t=this.handleKeyDownForHiddenItem(e);if(null!==t)return t;if(this.editorManager.isPendingCommandResult)return!0;const i=Be.KeyUtils.getEventKeyCode(e);if(!this.nestedContentSelected){const t=this.isSelectionRowEnabled&&!this.isSelectionCell();if(i===Be.KeyCode.Space&&t)return this.performShortcutEvent(e),!0;if(!this.isObsolete&&i===Be.KeyCode.Enter){if(this.isActiveExpandButtonCell())return this.performShortcutEvent(e),!0;if(this.tableBodyStrategy.startEditRowItem(this,this.selectedItemIndex))return!0}if(this.isEditingOnTypeEnabled()&&this.isStartEditingOnTypeKey(e)&&this.tableBodyStrategy.startEditingOnType(this,this.selectedItemIndex))return this.tableBodyStrategy.queuePendingEditEvent(e),!0}return!!super.handleKeyDown(e)||!(this.nestedContentSelected||i!==Be.KeyCode.Enter||!this.hasRowClickEvent)&&(this.performShortcutEvent(e),!0)}}class cA extends eA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.EmptyData}}class hA extends eA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Detail}}class uA extends eA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.Footer}}class pA extends eA{constructor(e,t,i){super(e,t,i)}getRowType(){return Xs.GroupFooter}}class mA{constructor(e){this.cellInfo=e}}class gA{constructor(e){this.result=e}}class CA extends CustomEvent{constructor(e){super(CA.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!1})}}CA.eventName="dxbl-grid-request-start-editing";class fA extends CustomEvent{constructor(e){const t=new gA(e);super(fA.eventName,{detail:t,bubbles:!0,composed:!1,cancelable:!1})}}fA.eventName="dxbl-grid-cell-editor-shown";class vA extends Js{constructor(e,t){super(e,t),this.savedColumnInfo=null}getSavedColumnInfo(){return this.savedColumnInfo}saveSelectedColumn(e){this.savedColumnInfo=e.getSyncSelectedColumnInfo()}syncSelectedColumn(e){const t=this.getSavedColumnInfo();e.syncSelectedColumn(t)}queryItems(){return this.queryItemsBySelector($s.DataTablePartsSelector)}createTableBodyItemStrategy(e){return this.isVirtualScrollingEnabled(e)?new BA(this,this.grid,e):new yA(this,this.grid,e)}createItemStrategy(e){return e.matches("thead")?new wA(this,this.grid,e):e.matches("tbody")?this.createTableBodyItemStrategy(e):e.matches("tfoot")?new EA(this,this.grid,e):null}selectItem(e,t=-1){var i;const n=this.getStrategy(e),s=this.syncSelectedColumns(n);t>=0&&n.enterTablePartWithNewIndex(t),(t<0||s&&(null===(i=n.getStrategy(t))||void 0===i?void 0:i.getRowType())===Xs.Header)&&(t=n.selectedItemIndex);const r=this.getSelectedItemStrategy();r&&r!==n&&r.leaveTablePart(),n.selectItem(t)}isVisibleItem(e){if(!super.isVisibleItem(e))return!1;const t=this.getStrategy(e);return!!t&&t.nearestVisibleSelectedIndex>-1}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.handleArrowUpKeyDown(e.ctrlKey);case Be.KeyCode.Down:return this.handleArrowDownKeyDown(e.ctrlKey);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:return this.handleBodyShortcut(e,!0);case Be.KeyCode.Home:case Be.KeyCode.End:return this.handleBodyShortcut(e,!1)}return!1}handleTabKeyDown(e){var t,i;if(e.altKey)return super.handleTabKeyDown(e,!0);if(e.shiftKey){if(this.firstItemSelected)return!1;null===(t=this.getStrategy(this.selectedItemIndex-1))||void 0===t||t.selectLastCell()}else{if(this.lastItemSelected)return!1;null===(i=this.getStrategy(this.selectedItemIndex+1))||void 0===i||i.selectFirstCell()}return!0}isVirtualScrollingEnabled(e){if(e.classList.contains(ue.TopFixedBodyClassName))return!1;const t=this.getScrollViewer();return!!t&&Ya.isVirtualScrollingEnabled(t)}handleArrowUpKeyDown(e){if(0===this.selectedItemIndex)return!1;if(e){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{const e=this.getStrategy(this.selectedItemIndex-1);this.selectItem(this.selectedItemIndex-1,e.itemCount-1)}return!0}handleArrowDownKeyDown(e){if(this.selectedItemIndex>=this.itemCount-1)return!1;if(e){if(this.lastItemSelected)return!1;this.moveToNextItem()}else this.selectItem(this.selectedItemIndex+1,0);return!0}handleBodyShortcut(e,t){const i=this.items.map(((e,t)=>e.matches("tbody")?t:-1)).filter((e=>e>=0));if(!i.length)return!1;const n=this.getStrategy(i[i.length-1]);return!(!n||n===this.getSelectedItemStrategy())&&(t&&this.syncSelectedColumns(n),n.handleKeyDown(e))}getStrategy(e){return this.getItemStrategy(e)}syncSelectedColumns(e){const t=this.getSelectedItemStrategy();if(t){const i=t.getSelectedItemStrategy(),n=e.getSelectedItemStrategy();if(i&&n)return e.syncSelectedColumns(i,n)}return!1}}class bA extends Js{constructor(e,t,i){super(t,i),this.parentTableStrategy=e}get selectedHiddenRowStrategy(){return null}get hiddenRowVisibleIndex(){return null}get isFixed(){return!0}get preventScrollOnFocus(){return!this.navigator.initialized}enterTablePartWithNewIndex(e){}isFirstCellSelected(e){return!1}isLastCellSelected(e){return!1}trySelectHiddenCell(e,t=null){return!1}handleKeyDownForHiddenRow(e,t){return null}leaveTablePart(){}getStrategy(e){const t=this.getItemStrategy(e);return t instanceof eA?t:null}selectFirstCell(){var e;this.moveToFirstItem(),null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectFirstCell()}selectLastCell(){var e;this.moveToLastItem(),null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectLastCell()}getSavedColumnInfo(){return this.parentTableStrategy.getSavedColumnInfo()}saveRowSelectedColumn(e){this.saveSelectedColumn(e)}saveSelectedColumn(e){this.parentTableStrategy.saveSelectedColumn(e)}syncSelectedColumn(e){this.isColumnSyncRequired(e)&&this.parentTableStrategy.syncSelectedColumn(e)}syncSelectedColumns(e,t){return t&&e!==t&&(e&&this.isColumnSyncRequired(e)&&this.saveSelectedColumn(e),this.syncSelectedColumn(t)),!1}getShortcutContext(){return{AreaType:qs.DataTable}}queryItems(){return this.queryItemsBySelector($s.RowSelector)}getSelectedItemStrategy(){const e=super.getSelectedItemStrategy();return e instanceof eA?e:null}selectItem(e){const t=this.getSelectedItemStrategy(),i=this.getStrategy(e);this.syncSelectedColumns(t,i),super.selectItem(e),t&&t!==i&&t.leaveRow()}updateSelectedItemByIndex(e){const t=this.getSelectedItemStrategy();t&&e!==this.selectedItemIndex&&t.leaveRow(),super.updateSelectedItemByIndex(e)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.handleArrowUpKeyDown(e.ctrlKey);case Be.KeyCode.Down:return this.handleArrowDownKeyDown(e.ctrlKey);case Be.KeyCode.Tab:return this.handleTabKeyDown(e)}return!1}handleTabKeyDown(e){const t=super.handleTabKeyDown(e);return t&&this.onAfterTabKeyDownHandled(e),t}onAfterTabKeyDownHandled(e){var t,i;e.shiftKey?null===(t=this.getSelectedItemStrategy())||void 0===t||t.selectLastCell():null===(i=this.getSelectedItemStrategy())||void 0===i||i.selectFirstCell()}getStrategyByRowVisibleIndex(e){const t=this.items.findIndex(((t,i)=>{var n;return(null===(n=this.getStrategy(i))||void 0===n?void 0:n.getRowVisibleIndex())===e}));return this.getItemStrategy(t)}handleArrowUpKeyDown(e){if(!e){if(this.firstItemSelected)return!1;this.moveToPrevItem()}return!e}handleArrowDownKeyDown(e){if(!e){if(this.lastItemSelected)return!1;this.moveToNextItem()}return!e}isColumnSyncRequired(e){const t=e.getRowType();return bA.isColumnSyncRequired(t)}static isColumnSyncRequired(e){switch(e){case Xs.Header:case Xs.Filter:case Xs.Edit:case Xs.Data:case Xs.Footer:case Xs.GroupFooter:return!0}return!1}}class wA extends bA{constructor(e,t,i){super(e,t,i),this.isTabKeyDownHandling=!1}selectItem(e){const t=this.getSelectedItemStrategy(),i=this.getStrategy(e),n=this.syncSelectedRows(t,i);super.selectItem(n>=0?n:e)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.moveHorizontally(!0);case Be.KeyCode.Right:return this.moveHorizontally(!1)}return super.handleKeyDown(e)}createItemStrategy(e){switch(js.getRowType(e)){case Xs.Header:return new tA(this,this.grid,e);case Xs.Filter:return new sA(this,this.grid,e)}throw new Error("Not implemented")}syncSelectedColumns(e,t){if(e&&e!==t&&this.isColumnSyncRequired(t)){const i=this.syncSelectedRows(e,t);if(i>=0)return this.selectedItemIndex=i,t=this.getSelectedItemStrategy(),super.syncSelectedColumns(e,t),!0}return super.syncSelectedColumns(e,t)}syncSelectedRows(e,t){if(!this.isTabKeyDownHandling&&e&&!this.isHeaderRowStrategy(e)&&t&&this.isHeaderRowStrategy(t)){const t=this.isColumnSyncRequired(e)?e.getSyncSelectedColumnInfo():this.getSavedColumnInfo();if(t)return t.headerRowIndex}return-1}handleArrowDownKeyDown(e){const t=this.getSelectedItemStrategy();if(!e&&t&&this.isHeaderRowStrategy(t)){const e=t,i=e.getSelectedColumnInfo();if(i&&!i.hasLeafs){const t=i.headerRowIndex+e.getSelectedItemRowSpan();return!(t>=this.itemCount)&&(this.selectItem(t),!0)}}return super.handleArrowDownKeyDown(e)}handleTabKeyDown(e){this.isTabKeyDownHandling=!0;const t=super.handleTabKeyDown(e);return this.isTabKeyDownHandling=!1,t}isHeaderRowStrategy(e){return e.getRowType()===Xs.Header}moveHorizontally(e){const t=this.getSelectedItemStrategy();if(t&&this.isHeaderRowStrategy(t)){const i=t.getSelectedItemLeafIndex(e);return this.selectColumn(i+(e?-1:1))}return!1}selectColumn(e){if(e>=0){const t=this.findHeaderCellByColumnIndex(e);if(t){const e=this.findItemElementIndexByChild(t),i=this.getStrategy(e);if(i){const n=i.getColumnInfo(t);if(n)return i.syncSelectedColumn(n),this.selectedItemIndex=e,this.selectItem(e),!0}}}return!1}}class yA extends bA{constructor(e,t,i){super(e,t,i),this.savedVisibleIndex=-1,this.restoreSelectedColumn=!1,this.expectedFocusedRowFromServer=!1,this.editPending=!1,this.editorValue=null,this.pendingEditEvents=[],this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this.boundOnGridRequestStartCellEditingHandle=this.onRequestStartCellEditing.bind(this),this.addEventSubscriptions()}get isEditPending(){return this.editPending}get isFixed(){return this.targetElement.classList.contains(ue.TopFixedBodyClassName)}queuePendingEditEvent(e){Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Backspace&&this.pendingEditEvents.pop(),this.pendingEditEvents.push(e)}onDispose(){super.onDispose(),this.removeEventSubscriptions()}createDataRowStrategy(e){return new dA(this,this.grid,e)}createEditRowStrategy(e){return new rA(this,this.grid,e)}createInplaceEditRowStrategy(e){return new oA(this,this.grid,e)}createItemStrategy(e){switch(js.getRowType(e)){case Xs.Edit:return this.isInplaceEditingEnabled?this.createInplaceEditRowStrategy(e):this.createEditRowStrategy(e);case Xs.EditForm:return new aA(this,this.grid,e);case Xs.EditNewItemRow:return new lA(this,this.grid,e);case Xs.Group:return new AA(this,this.grid,e);case Xs.Data:return this.createDataRowStrategy(e);case Xs.EmptyData:return new cA(this,this.grid,e);case Xs.Detail:return new hA(this,this.grid,e);case Xs.GroupFooter:return new pA(this,this.grid,e)}throw new Error("Not implemented")}selectItem(e){const t=this.getStrategy(e);this.saveFocusedRowVisibleIndex(t),super.selectItem(e),this.restoreSelectedColumn=!1}saveRowSelectedColumn(e){super.saveRowSelectedColumn(e),this.restoreSelectedColumn=!0}syncSelectedColumns(e,t){const i=super.syncSelectedColumns(e,t);return!i&&this.restoreSelectedColumn&&t&&this.parentTableStrategy.syncSelectedColumn(t),i||this.restoreSelectedColumn}handleKeyDown(e){switch(this.expectedFocusedRowFromServer=!1,Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.PageDown:return this.handlePageUpDown(e,!1)||this.performShortcutEvent(e),!0;case Be.KeyCode.PageUp:return this.handlePageUpDown(e,!0)||this.performShortcutEvent(e),!0;case Be.KeyCode.Home:return this.handleHomeKeyDown(e.ctrlKey);case Be.KeyCode.End:return this.handleEndKeyDown(e.ctrlKey)}return super.handleKeyDown(e)}handleKeyUp(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:case Be.KeyCode.Home:case Be.KeyCode.End:case Be.KeyCode.Tab:case Be.KeyCode.Enter:this.notifyFocusedRowChanged()}return!1}moveToPrevItem(){super.moveToPrevItem(),this.scrollToElement(null,Pe.None)}moveToNextItem(){const e=this.getScrollViewer(),t=e&&Ya.bottomAlignmentRequired(this.selectedItemElement,e)?Ue.Bottom:null;super.moveToNextItem(),this.scrollToElement(t,Pe.None)}leaveTablePart(){super.leaveTablePart(),this.notifyFocusedRowChanged()}onHandlePageUpDownKey(e,t,i){const n=this.validateItemIndex(e);this.selectItem(n),this.scrollToElement(t,i)}scrollToElement(e,t){const i=this.getScrollViewer();i&&Oe.scrollToElementRelyOnStickyDescendants(this.selectedItemElement,e,t,i)}onMakeRowVisible(e){this.selectItem(e)}handlePageUpDown(e,t){this.savedVisibleIndex=-1;const i=t?this.firstItemSelected:this.lastItemSelected,n=this.getSelectedItemStrategy(),s=n&&n.getRowType()===Xs.EmptyData,r=this.targetElement.contains(e.target);if(i&&(s||r))return this.expectedFocusedRowFromServer=this.isFocusedRowEnabled,!1;const o=this.getScrollViewer();if(o){const e=t?Ue.Top:Ue.Bottom,i=Ya.calculateBoundaryItemIndex(this,o,!t);this.onHandlePageUpDownKey(i,e,Pe.None)}return!0}handleHomeKeyDown(e){return e&&this.selectFirstCell(),e}handleEndKeyDown(e){return e&&this.selectLastCell(),e}notifyFocusedRowChanged(){this.isFocusedRowEnabled&&this.savedVisibleIndex>-1&&(this.grid.notifyFocusedRowChanged(this.savedVisibleIndex),this.savedVisibleIndex=-1)}shouldSaveFocusedRowVisibleIndex(e){return!this.expectedFocusedRowFromServer&&this.isFocusableRow(e.getRowType())}saveFocusedRowVisibleIndex(e){e&&this.shouldSaveFocusedRowVisibleIndex(e)&&(this.savedVisibleIndex=e.getRowVisibleIndex())}isFocusableRow(e){switch(e){case Xs.Group:case Xs.Edit:case Xs.Data:return!0}return!1}addEventSubscriptions(){const e=this.getScrollViewer();e&&e.addEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler),this.grid.addEventListener(CA.eventName,this.boundOnGridRequestStartCellEditingHandle)}removeEventSubscriptions(){const e=this.getScrollViewer();e&&e.removeEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler),this.grid.removeEventListener(CA.eventName,this.boundOnGridRequestStartCellEditingHandle)}onVisibleElementChanged(e){if(e.detail.isFocusRequired){const t=this.items.indexOf(e.detail.element);this.onMakeRowVisible(t)}}onRequestStartCellEditing(e){let t=!1;const i=e.detail.cellInfo,n=this.findItemElementIndexByChild(i.element);if(n<0)return;const s=this.getStrategy(n);if(!(s instanceof lA)){if(s instanceof eA){this.saveRowSelectedColumn(s);const e=s.findItemElementIndexByColumnUid(i.columnInfo.uID);t=this.startEditRowItem(s,e,i.hitInnerElement,this.raiseStartCellEditingRequestComplete.bind(this))}t||(i.rowType===Xs.Edit&&this.endEditRowItem($a.Hide),this.raiseStartCellEditingRequestComplete(!1))}}raiseStartCellEditingRequestComplete(e){this.grid.dispatchEvent(new fA(e))}startEditNewItemRow(e,t){const i=this.editorManager.showNewItemRowEditor(t);return i>=0&&(e.selectItem(i),this.saveRowSelectedColumn(e),!0)}startEditRowItem(e,t,i=null,n=null){if(null===e||!this.isInplaceEditableRow(e))return!1;if(t<0||t>=e.itemCount)return!1;return!!this.editorManager.showEditor(e.getItem(t),i,(e=>{const i=e===Ga.Completed;if(i){const e=this.findEditRowStrategy();null!==e&&(e.updateSelectedItemByIndex(t),this.saveRowSelectedColumn(e),e.focusNestedEditor()||e.leaveFromNestedContent())}null!==n&&n(i)}))&&(e.selectItem(t),this.saveRowSelectedColumn(e),!0)}startEditingOnType(e,t){const i=this.startEditRowItem(e,t,null,(e=>{var t;if(e){const e=this.findEditRowStrategy(),i=document.activeElement;(null==e?void 0:e.nestedContentSelected)&&i&&(this.applyPendingEditEvents(i),this.editorValue=(null===(t=jl.findFieldElement(i))||void 0===t?void 0:t.value)||null)}this.editPending=!1,this.pendingEditEvents.splice(0),this.raiseStartCellEditingRequestComplete(e)}));return this.editPending=i,i}endEditRowItem(e,t=!1,i=!1){const n=this.getSelectedItemStrategy();if(null===n||!(n instanceof oA))return!1;if(this.isEditingOnTypeEnabled()){const e=n.getNestedContentElement(),t=jl.findFieldElement(e);t&&t.value===this.editorValue&&!jl.isCheckBoxInput(t)&&this.dispatchChangeEvent(t),this.editorValue=null}return n.leaveFromNestedContent(),e!==$a.Hide&&this.saveRowSelectedColumn(n),this.editorManager.closeEditor(e,(s=>{e===$a.Cancel&&s===Ga.Failed?n.focusNestedEditor()||n.leaveFromNestedContent():t&&this.enterKeyDirection!==Gs.None&&this.selectNextItemByEnterKey(!i,!1)}))}startEditNearestRowItem(e,t=!1){const i=this.findNearestCellPosition(e,!0);if(null===i)return!1;const[n,s]=i;if(t&&n!==this.selectedItemIndex)return!1;const r=this.getSelectedItemStrategy(),o=this.getStrategy(n);return r&&r!==o&&r.updateSelectedItemByIndex(s),this.startEditRowItem(o,s,null,this.raiseStartCellEditingRequestComplete.bind(this))}selectNextItemByEnterKey(e,t){const i=this.findNextPositionForEnterKey(e,t);if(!i)return;const[n,s]=i;if(this.enterKeyDirection===Gs.Row){const e=this.getSelectedItemStrategy();null==e||e.updateSelectedItemByIndex(s)}const r=this.selectedItemIndex!==n;this.selectItem(n),r&&this.notifyFocusedRowChanged()}findNextPositionForEnterKey(e,t){if(this.enterKeyDirection===Gs.Row)return this.findNearestCellPosition(e,t);const i=this.getSelectedItemStrategy();if(!i||(e?this.lastItemSelected:this.firstItemSelected))return null;const n=e?1:-1;for(let e=this.selectedItemIndex+n;e>=0&&e<this.itemCount;e+=n){const n=this.getStrategy(e);if(!(n&&(!t||this.isInplaceEditableRow(n))))continue;return[e,Math.min(i.selectedItemIndex,n.itemCount-1)]}return null}findNearestCellPosition(e,t){const i=e?1:-1,n=this.itemCount,s=this.selectedItemIndex;for(let r=s;r>=0&&r<n;r+=i){const n=this.getStrategy(r);if(!(n&&(!t||this.isInplaceEditableRow(n))))continue;let o;o=r===s?n.selectedItemIndex+i:e?0:n.itemCount-1;for(let e=o;e>=0&&e<n.itemCount;e+=i){const i=n.getItem(e),s=this.getColumnInfoByCell(i);if(null!==s&&(!t||s.isEditable))return[r,e]}}return null}isInplaceEditableRow(e){if(!this.isInplaceEditingEnabled)return!1;const t=e.getRowType();return t===Xs.Data||t===Xs.Edit}findEditRowStrategy(){for(let e=0;e<this.itemCount;e++){const t=this.getStrategy(e),i=yA.castToEditRowStategy(t);if(i)return i}return null}applyPendingEditEvents(e){for(let t=0;t<this.pendingEditEvents.length;t++){const i=this.pendingEditEvents[t];this.dispatchKeyboardEvent(e,"keydown",i)||(this.dispatchKeyboardEvent(e,"keypress",i)||jl.isEditableTextElement(e)&&(this.dispatchInputEvent(e,"beforeinput",i.key)||this.processEditorInput(e,i,t)||this.isPrintableCharacterKey(i)&&this.dispatchInputEvent(e,"input",i.key)))}}processEditorInput(e,t,i){return jl.isCheckBoxInput(e)&&Be.KeyUtils.getEventKeyCode(t)===Be.KeyCode.Space?(e.click(),!0):((e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(0===i&&(e.value=""),this.isPrintableCharacterKey(t)&&(e.value+=t.key)),!1)}dispatchChangeEvent(e){const t=new Event("change",{bubbles:!0,cancelable:!0,composed:!0});return e.dispatchEvent(t),t.defaultPrevented}dispatchKeyboardEvent(e,t,i){const n=new KeyboardEvent(t,i);return e.dispatchEvent(n),n.defaultPrevented}dispatchInputEvent(e,t,i){const n=new InputEvent(t,{bubbles:!0,cancelable:!0,inputType:"insertText",data:i});return e.dispatchEvent(n),n.defaultPrevented}static castToEditRowStategy(e){return e instanceof iA&&e.getRowType()===Xs.Edit?e:null}}class BA extends yA{constructor(e,t,i){super(e,t,i),this.selectedRowVirtualIndex=-1,this.selectedNonVirtualRowIndexOffset=0,this.selectedHiddenStrategy=null,this.isLastRowSelected=!1,this.rowVirtualIndexToShow=null,this.scrollRequired=!1,this.onRowMadeVisibleCallback=null,this.cellEditingStarted=!1,this.skipIndexCorrectionForIncomingEditRow=!1,this.boundOnScrollHandler=this.onScroll.bind(this),this.boundOnStartCellEditingRequestHandler=this.onStartCellEditingRequest.bind(this),this.addEventListeners()}onDispose(){this.removeEventListeners(),super.onDispose()}get preventScrollOnFocus(){return super.preventScrollOnFocus||this.isFocusHidden||!this.scrollRequired&&!this.isRowInView(this.selectedItemElement)}get firstItemSelected(){return super.firstItemSelected&&0===this.selectedRowVirtualIndex}get lastItemSelected(){return this.isLastRowSelected||!this.totalItemCount}get nearestVisibleSelectedIndex(){return this.selectedItemIndex}get isFocusHidden(){return Si(this.targetElement)}get lastVirtualIndexSelected(){return this.selectedRowVirtualIndex>=this.lastVirtualIndex}get lastVirtualIndex(){const e=this.totalItemCount;return e?e-1:0}get totalItemCount(){return this.getScrollViewer().totalItemCount}get makingRowVisibleStarted(){return null!==this.rowVirtualIndexToShow}initialize(){super.initialize(),this.cellEditingStarted=!1}isFirstCellSelected(e){var t,i;return null!==(i=null===(t=this.getSelectedHiddenStrategyNotEqualTo(e))||void 0===t?void 0:t.firstItemSelected)&&void 0!==i?i:super.isFirstCellSelected(e)}isLastCellSelected(e){var t,i;return null!==(i=null===(t=this.getSelectedHiddenStrategyNotEqualTo(e))||void 0===t?void 0:t.lastItemSelected)&&void 0!==i?i:super.isLastCellSelected(e)}isIndexWithinBoundaries(e){return!0}enterTablePartWithNewIndex(e){this.scrollRequired=!0;const t=0===e;this.updateSelectedVirtualIndex(t?0:this.lastVirtualIndex),this.selectedNonVirtualRowIndexOffset=t?-1:BA.maxOffset}selectItem(e){const t=this.correctSelectionIndex(e);t<0||(super.selectItem(t),this.scrollRequired=!1,this.isFocusHidden||this.updateSelectedVirtualState())}leaveTablePart(){super.leaveTablePart(),this.scrollRequired=!0}updateSelectedItemByChildElement(e,t=null){const i=this.selectedItemIndex;if(super.updateSelectedItemByChildElement(e,t),this.skipIndexCorrectionForIncomingEditRow=!1,t instanceof MouseEvent)return Ii(this.targetElement),void this.updateSelectedVirtualState();t instanceof FocusEvent&&this.selectedRowVirtualIndex<0&&this.updateSelectedVirtualIndex();(i!==this.selectedItemIndex||e.parentElement!==this.selectedItemElement)&&this.resetVirtualStateBySelectedStrategy(e)}moveToPrevItem(){this.isFocusHidden?this.moveToSiblingRowByVirtualIndex(-1):super.moveToPrevItem()}moveToNextItem(){this.isFocusHidden?this.moveToSiblingRowByVirtualIndex(1):super.moveToNextItem()}selectFirstCell(){this.selectedNonVirtualRowIndexOffset=-1,this.setOnRowMadeVisibleCallback((()=>{var e;null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectFirstCell()})),this.makeRowVisible(0)}selectLastCell(){this.selectedNonVirtualRowIndexOffset=BA.maxOffset,this.setOnRowMadeVisibleCallback((()=>{var e;null===(e=this.getSelectedItemStrategy())||void 0===e||e.selectLastCell()})),this.makeRowVisible(this.lastVirtualIndex)}get hiddenRowVisibleIndex(){return this.isFocusHidden?this.selectedNonVirtualRowIndexOffset?-1:this.selectedRowVirtualIndex:super.hiddenRowVisibleIndex}get selectedHiddenRowStrategy(){return this.isFocusHidden&&this.selectedHiddenStrategy?this.selectedHiddenStrategy:super.selectedHiddenRowStrategy}handleKeyDownForHiddenRow(e,t){const i=this.getSelectedHiddenStrategyNotEqualTo(e);return i?i.handleKeyDown(t):super.handleKeyDownForHiddenRow(e,t)}trySelectHiddenCell(e,t=null){return!!this.isFocusHidden&&(this.setOnRowMadeVisibleCallback((()=>{var i;null===(i=this.getSelectedItemStrategy())||void 0===i||i.selectItem(e),this.scrollToElement(null,Pe.None),null==t||t()})),this.makeRowVisible(this.selectedRowVirtualIndex),!0)}getSelectedItemStrategy(){var e;const t=null!==(e=super.getSelectedItemStrategy())&&void 0!==e?e:this.selectedHiddenStrategy;return t&&this.selectedHiddenStrategy&&t!==this.selectedHiddenStrategy&&this.syncSelectedColumns(this.selectedHiddenStrategy,t),t}onAfterTabKeyDownHandled(e){this.makingRowVisibleStarted?this.setOnRowMadeVisibleCallback((()=>{this.scrollToElement(null,Pe.None),super.onAfterTabKeyDownHandled(e)}),!0):super.onAfterTabKeyDownHandled(e)}onMakeRowVisible(e){var t;if(this.makingRowVisibleStarted)this.rowVirtualIndexToShow=null,this.scrollRequired=!0,super.onMakeRowVisible(null!==(t=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==t?t:e),this.callOnRowMadeVisibleCallback(),this.notifyFocusedRowChanged();else{const t=this.getStrategy(e);t&&this.resetVirtualStateForIncomingEditRow(t)||this.updateSelectedVirtualIndex(-1),super.onMakeRowVisible(e)}}onHandlePageUpDownKey(e,t,i){if(this.isFocusHidden)return void this.makeRowVisibleWithAlignment(this.selectedRowVirtualIndex,t,i);const n=this.validateItemIndex(e),s=this.findClosestVisibleIndexWithVirtualIndex(n,null!=t?t:void 0),r=s.virtualIndex,o=e-s.visibleIndex;if(n===e)return this.selectedNonVirtualRowIndexOffset=o,void this.makeRowVisibleWithAlignment(r,t,i);this.setOnRowMadeVisibleCallback((()=>{this.selectedNonVirtualRowIndexOffset=o;const e=this.findVisibleIndexByVirtualIndex(r);null!==e&&this.selectItem(e),this.scrollToElement(t,i)}));const a=r+Math.sign(o)*Math.round(Math.abs(o)/2);this.makeRowVisible(a)}shouldSaveFocusedRowVisibleIndex(e){return super.shouldSaveFocusedRowVisibleIndex(e)&&(this.selectedRowVirtualIndex!==e.getRowVisibleIndex()||0!==this.selectedNonVirtualRowIndexOffset||this.scrollRequired)}resetVirtualStateBySelectedStrategy(e){const t=this.getSelectedItemStrategy();t&&this.resetVirtualStateForIncomingEditRow(t)&&(t.updateSelectedItemByChildElement(e),t.switchToNestedContent(),this.saveRowSelectedColumn(t))}addEventListeners(){const e=this.getScrollViewer();e&&(e.addEventListener(Yi.eventName,this.boundOnScrollHandler),this.grid.addEventListener(fA.eventName,this.boundOnStartCellEditingRequestHandler))}removeEventListeners(){const e=this.getScrollViewer();e&&(e.removeEventListener(Yi.eventName,this.boundOnScrollHandler),this.grid.removeEventListener(fA.eventName,this.boundOnStartCellEditingRequestHandler))}onScroll(e){this.cellEditingStarted&&!this.isRowInView(this.selectedItemElement)&&(this.endEditRowItem($a.Save),this.cellEditingStarted=!1)}onStartCellEditingRequest(e){this.cellEditingStarted=e.detail.result,this.updateSelectedVirtualState()}correctSelectionIndex(e){var t,i,n;if(this.makingRowVisibleStarted||this.skipIndexCorrectionForIncomingEditRow)return this.skipIndexCorrectionForIncomingEditRow=!1,-1;if(this.selectedRowVirtualIndex<0)return e;if(e===this.selectedItemIndex&&!this.scrollRequired)this.isVirtualIndexRendered(this.selectedRowVirtualIndex)?(e=null!==(t=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==t?t:e,Ii(this.targetElement)):(Ei(this.targetElement),null===(i=this.selectedHiddenStrategy)||void 0===i||i.makeObsolete());else if(this.isFocusHidden||this.scrollRequired){if(!this.isVirtualIndexRendered(this.selectedRowVirtualIndex))return this.makeRowVisible(this.selectedRowVirtualIndex),-1;e=null!==(n=this.findVisibleIndexByVirtualIndex(this.selectedRowVirtualIndex))&&void 0!==n?n:e,Ii(this.targetElement)}return e}resetVirtualStateForIncomingEditRow(e){if(this.skipIndexCorrectionForIncomingEditRow)return!1;const t=yA.castToEditRowStategy(e);return this.skipIndexCorrectionForIncomingEditRow=!!t&&e!==this.selectedHiddenStrategy&&this.isRowInView(t.targetElement),!!this.skipIndexCorrectionForIncomingEditRow&&(this.selectedRowVirtualIndex>=0&&(Ii(this.targetElement),this.updateSelectedVirtualIndex(-1),this.selectedHiddenStrategy=null),!0)}getSelectedHiddenStrategyNotEqualTo(e){return this.isFocusHidden&&this.selectedHiddenStrategy&&e!==this.selectedHiddenStrategy?this.selectedHiddenStrategy:null}callOnRowMadeVisibleCallback(){this.onRowMadeVisibleCallback&&(this.onRowMadeVisibleCallback(),this.onRowMadeVisibleCallback=null)}updateSelectedVirtualState(){this.selectedHiddenStrategy=super.getSelectedItemStrategy(),this.updateSelectedVirtualIndex()}setOnRowMadeVisibleCallback(e,t=!1){this.makingRowVisibleStarted&&!t||(this.onRowMadeVisibleCallback=e)}async makeRowVisible(e){var t;if(this.makingRowVisibleStarted)return;const i=this.getValidVirtualIndex(e);if(this.updateSelectedVirtualIndex(i),this.isVirtualIndexRendered(i))this.scrollRequired=!0,this.selectItem(null!==(t=this.findVisibleIndexByVirtualIndex(i))&&void 0!==t?t:0),this.callOnRowMadeVisibleCallback();else{this.rowVirtualIndexToShow=i,this.grid.makeRowVisible(i);const e=await this.waitForVirtualIndexToShow(i);this.rowVirtualIndexToShow===i&&(e?this.onMakeRowVisible(this.selectedItemIndex):this.rowVirtualIndexToShow=null)}}moveToSiblingRowByVirtualIndex(e){this.selectedNonVirtualRowIndexOffset+=e,this.makeRowVisibleWithAlignment(this.selectedRowVirtualIndex,null,Pe.None)}makeRowVisibleWithAlignment(e,t,i){this.setOnRowMadeVisibleCallback((()=>{this.scrollToElement(t,i)})),this.makeRowVisible(e)}updateSelectedVirtualIndex(e=null){if(null===e){const t=this.findClosestVisibleIndexWithVirtualIndex(this.selectedItemIndex);this.selectedNonVirtualRowIndexOffset=this.selectedItemIndex-t.visibleIndex,e=t.virtualIndex}null!==e&&(this.selectedRowVirtualIndex=e,this.isLastRowSelected=this.lastVirtualIndexSelected&&super.lastItemSelected)}waitForVirtualIndexToShow(e,t=0){return new Promise((i=>{setTimeout((async()=>{try{if(this.rowVirtualIndexToShow!==e)return void i(!1);const n=this.isVirtualIndexRendered(e);if(n||t>1)i(n);else{const n=await this.waitForVirtualIndexToShow(e,++t);i(n)}}catch{i(!1)}}),1e3)}))}getValidVirtualIndex(e){if(e<0)return 0;const t=this.lastVirtualIndex;return e>t?t:e}isVirtualIndexRendered(e){const{virtualIndex:t}=this.findClosestVisibleIndexWithVirtualIndex(0),{virtualIndex:i}=this.findClosestVisibleIndexWithVirtualIndex(super.itemCount-1);return e>=t&&e<=i}findClosestVisibleIndexWithVirtualIndex(e,t=Ue.Top){let i=-1,n=t===Ue.Top?-1:1,s=e,r=!1;for(;super.isIndexWithinBoundaries(s)||!r;){const t=super.getItem(s);if(t){if(i=Te.getAttributeIntValue(t,$i,-1),i>=0)break;s+=n}else r=!0,n*=-1,s=e+n}return i=i>=0?i:this.selectedRowVirtualIndex,{virtualIndex:i,visibleIndex:s}}findVisibleIndexByVirtualIndex(e){const t=e.toString(),i=super.itemCount;for(let e=0;e<i;++e){const i=super.getItem(e);if(i&&t===i.getAttribute($i))return super.validateItemIndex(e+this.selectedNonVirtualRowIndexOffset)}return null}isRowInView(e){const t=this.getScrollViewer();return!!t&&Ya.isElementInView(e,t)}}BA.maxOffset=1e3;class EA extends bA{constructor(e,t,i){super(e,t,i)}createItemStrategy(e){if(js.getRowType(e)===Xs.Footer)return new uA(this,this.grid,e);throw new Error("Not implemented")}}class IA extends Js{constructor(e){super(e,e),this.searchBoxInputSelector=`.${ue.SearchBoxClassName} > input`}getShortcutContext(){return{IsMacOSPlatform:this.isMacOSPlatform}}queryItems(){return new Array(this.getToolbarContainer(),this.getPagerPanel(!0),this.getTopPanel(),this.getDataTable(),this.getPagerPanel(!1))}createDataTableStrategy(e){return new vA(this.grid,e)}createItemStrategy(e){switch(js.getNavigationAreaType(e)){case qs.ToolbarContainer:return new SA(this.grid,e);case qs.GroupPanel:case qs.SearchBox:return new xA(this.grid,e);case qs.DataTable:return this.createDataTableStrategy(e);case qs.Pager:return new DA(this.grid,e)}return null}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return t===Be.KeyCode.Tab?this.handleTabKeyDown(e):t===Be.KeyCode.Up&&e.ctrlKey?(this.moveToPrevItem(),!0):t===Be.KeyCode.Down&&e.ctrlKey?(this.moveToNextItem(),!0):!(t!==Be.KeyCode.Key_f||!e.ctrlKey)&&this.tryFocusSearchBox()}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}moveToPrevItem(){this.selectedItemIndex>0?super.moveToPrevItem():this.leaveBackward()}moveToNextItem(){this.selectedItemIndex<this.itemCount-1?super.moveToNextItem():this.leaveForward()}getTopPanel(){var e,t;const i=null!==(e=this.getGroupPanelContentContainer())&&void 0!==e?e:this.getSearchBoxContainer();return null!==(t=null==i?void 0:i.closest($s.TopPanelSelector))&&void 0!==t?t:null}tryFocusSearchBox(){const e=this.getSearchBoxContainer();if(e){const t=e.querySelector(this.searchBoxInputSelector);return Ci.focusElement(null!=t?t:e),!0}return!1}}class SA extends Js{constructor(e,t){super(e,t,!0)}getShortcutContext(){return{AreaType:qs.ToolbarContainer}}}class xA extends Js{constructor(e,t){super(e,t),this.itemSelector=`.${ue.HeaderElementClassName}`,this.searchBoxContainer=null,this.searchBoxContainer=this.getSearchBoxContainer()}getShortcutContext(){return{AreaType:this.getAreaType(),ColumnUID:this.getSelectedColumnUID()}}queryItems(){const e=this.queryItemsBySelector(this.itemSelector);return e.push(this.searchBoxContainer),e}handleKeyDown(e){if(e.ctrlKey&&(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter||Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Space))return!0;if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.moveToPrevItem(),!0;case Be.KeyCode.Right:return this.moveToNextItem(),!0;case Be.KeyCode.Space:return this.performShortcutEvent(e),!0;case Be.KeyCode.Up:if(!this.isSearchBoxItemSelected()&&this.isSearchBoxInMobileView()){const e=this.items.findIndex((e=>js.isSearchBoxContainer(e)));return this.selectItem(e),!0}break;case Be.KeyCode.Down:if(e.altKey&&!this.isSearchBoxItemSelected())return this.performShortcutEvent(e),!0;if(!e.altKey&&this.isSearchBoxItemSelected()&&this.isSearchBoxInMobileView())return this.moveToFirstItem(),!0}return!1}isImmediatelyClickEnabled(){return this.selectedItemElement!==this.searchBoxContainer}getAreaType(){return js.isSearchBoxContainer(this.selectedItemElement)?qs.SearchBox:qs.GroupPanel}getSelectedColumnUID(){return this.getColumnUID(this.selectedItemElement)}isSearchBoxItemSelected(){return this.getAreaType()===qs.SearchBox}isSearchBoxInMobileView(){return!!this.searchBoxContainer&&this.searchBoxContainer.offsetWidth===this.targetElement.offsetWidth}}class DA extends Js{constructor(e,t){super(e,t)}getShortcutContext(){return{AreaType:qs.Pager}}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:case Be.KeyCode.Right:case Be.KeyCode.Home:case Be.KeyCode.End:return this.performShortcutEvent(e),!0}return!1}tryRestoreSelectedItem(e){super.tryRestoreSelectedItem(e);const t=this.targetElement.querySelector($s.PagerSizeSelector);(null==t?void 0:t.contains(document.activeElement))&&this.targetElement.scrollIntoView({block:"nearest"})}}class FA extends Li{constructor(e,t){super(t,e),this.itemSelector=`.${ue.ColumnChooserItemClassName}`,this.savedColumnUID=null,this.hasXafActionsContainer=!1,this.boundOnDragStopHandler=this.onDragStop.bind(this),this.columnChooser=e,this.addEventSubscriptions(),this.hasXafActionsContainer=this.targetElement.nextSibling instanceof HTMLElement&&this.targetElement.nextSibling.classList.contains("column-chooser-actions-container")}initialize(){super.initialize(),null!==this.savedColumnUID&&this.restoreSelectedColumn()}queryItems(){return this.queryItemsBySelector(this.itemSelector)}getShortcutContext(){return{AreaType:qs.ColumnChooser,ColumnUID:this.getSelectedColumnUID()}}isImmediatelyClickEnabled(){return!0}handleKeyDown(e){if(super.handleKeyDown(e))return!0;if(this.nestedContentSelected)return!1;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.moveToPrevItem(),!0;case Be.KeyCode.Down:return this.moveToNextItem(),!0;case Be.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem(!0):this.lastItemSelected&&this.hasXafActionsContainer?this.leaveForward():this.moveToNextItem(!0),!0;case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return!1}onDispose(){super.onDispose(),this.removeEventSubscriptions()}onDragStop(e){this.savedColumnUID=this.getSelectedColumnUID()}restoreSelectedColumn(){const e=this.findItemByColumnUID(this.savedColumnUID);e>=0&&this.selectItem(e),this.savedColumnUID=null}addEventSubscriptions(){this.columnChooser.addEventListener(l.eventName,this.boundOnDragStopHandler)}removeEventSubscriptions(){this.columnChooser.removeEventListener(l.eventName,this.boundOnDragStopHandler)}findItemByColumnUID(e){return this.items.findIndex((t=>this.getColumnUID(t)===e))}getSelectedColumnUID(){return this.getColumnUID(this.selectedItemElement)}getColumnUID(e){var t;return null!==(t=this.columnChooser.getColumnUid(e))&&void 0!==t?t:-1}}var TA;!function(e){e[e.Append=0]="Append",e[e.Before=1]="Before",e[e.After=2]="After",e[e.Inside=3]="Inside"}(TA||(TA={}));class HA extends de{constructor(){super(),this.tableContainer=null,this.dropTargetElement=null,this.dropPosition=TA.Before,this.lastObservedWidth=0,this.resizeObserver=new ResizeObserver(this.onTableContainerSizeChanged.bind(this)),this.boundOnTableContainerScrollHandler=this.onTableContainerScroll.bind(this)}get isHidden(){return!this.dropTargetElement}show(){this.classList.add(he.Active),this.render()}hide(){this.dropTargetElement=null,this.classList.remove(he.Active),this.removeAttribute("style")}updatePosition(e,t){this.dropTargetElement=e,this.dropPosition=t}initializeComponent(){super.initializeComponent(),this.tableContainer=this.closest(`.${xe.ContentContainerClassName}`),this.tableContainer&&(this.tableContainer.addEventListener("scroll",this.boundOnTableContainerScrollHandler),this.resizeObserver.observe(this.tableContainer))}disposeComponent(){super.disposeComponent(),this.tableContainer&&(this.tableContainer.removeEventListener("scroll",this.boundOnTableContainerScrollHandler),this.resizeObserver.unobserve(this.tableContainer))}onTableContainerScroll(){this.render()}onTableContainerSizeChanged(e){const t=e[0].contentRect.width;this.lastObservedWidth!==t&&(this.lastObservedWidth=t,this.render())}render(){this.isHidden||requestAnimationFrame(this.updateIndicatorStyle.bind(this))}updateIndicatorStyle(){const e=this.getTargetElement();this.style.height=e&&this.shouldFitIntoElement()?`${e.offsetHeight}px`:"";const t=this.calculatePosition();this.style.transform=`translateY(${t})`,this.style.marginLeft=this.calculateLeftOffset(),this.isHidden&&this.removeAttribute("style")}calculatePosition(){const e=this.getTargetElement(),t=this.calculateIndicatorPosition(e),i=this.shouldFitIntoElement()?t:HA.getCenteredPosition(t,this.offsetHeight);return`${Math.ceil(i)}px`}shouldFitIntoElement(){return this.dropPosition===TA.Append||this.dropPosition===TA.Inside}calculateIndicatorPosition(e){if(!e||!this.tableContainer)return 0;const t=e.getBoundingClientRect(),i=this.tableContainer.getBoundingClientRect(),n=t.top-i.top;return this.dropPosition===TA.After?n+e.offsetHeight:n}calculateLeftOffset(){return""}getTargetElement(){return this.dropPosition===TA.Append?this.tableContainer:this.dropTargetElement}static getCenteredPosition(e,t){return e-t/2}}customElements.define("dxbl-drop-target-indicator",HA);class UA{static getPointerPosition(e){return{x:e.pageX,y:e.pageY}}static getDocumentScrollPosition(){return{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}}static getElementPosition(e){const{left:t,top:i}=e.getBoundingClientRect();return{x:t,y:i}}static calculateVerticalCenter(e){return e.y+e.height/2}static getDropPositionByCursor(e,t){return e>UA.calculateVerticalCenter(t)?TA.After:TA.Before}}const PA=new class{constructor(){this.draggingHelpersMap=new Map}register(e){this.draggingHelpersMap.set(e.getKey(),e)}remove(e){this.draggingHelpersMap.delete(e)}find(e){var t;return null!==(t=this.draggingHelpersMap.get(e))&&void 0!==t?t:null}getTargets(){return[...this.draggingHelpersMap.values()]}};class QA{constructor(){this.draggableContext=null,this.isRefreshUIRequested=!1,this.boundOnDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.boundOnDocumentScrollHandler=this.onDocumentScroll.bind(this)}start(e,t){const i=this.getDraggableElement(e);this.draggableContext=this.createDraggableContext(e,i,t),this.addEventSubscriptions(),this.updateDraggableElement(t)}stop(){this.draggableContext&&(this.draggableContext.isStarted=!1),this.isRefreshUIRequested=!1,this.hideDraggableElement(),this.removeEventSubscriptions(),this.draggableContext=null}isStarted(){var e;return!!(null===(e=this.draggableContext)||void 0===e?void 0:e.isStarted)}hideDraggableElement(){this.draggableContext&&(this.draggableContext.dragableElement.style.transform="",this.draggableContext.dragableElement.classList.remove(he.Visible))}addEventSubscriptions(){document.addEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.addEventListener("scroll",this.boundOnDocumentScrollHandler)}removeEventSubscriptions(){document.removeEventListener("pointermove",this.boundOnDocumentMouseMoveHandler),document.removeEventListener("scroll",this.boundOnDocumentScrollHandler)}refreshUI(){this.isRefreshUIRequested||(this.isRefreshUIRequested=!0,requestAnimationFrame((()=>this.refreshUICore())))}refreshUICore(){if(this.isRefreshUIRequested=!1,!this.isStarted()||!this.draggableContext)return;const e=this.draggableContext;e.dragableElement.style.transform=`translate(${Math.round(e.draggableElementPosition.x)}px, ${Math.round(e.draggableElementPosition.y)}px)`,e.dragableElement.classList.add(he.Visible)}createDraggableContext(e,t,i){const n=UA.getDocumentScrollPosition(),s=UA.getPointerPosition(i);return{isStarted:!0,srcElement:e,srcElementPosition:UA.getElementPosition(e),dragableElement:t,mouseOverElement:null,mouseOverElementRect:null,isPossibleDropItem:!1,initialCursorPosition:s,currentCursorPosition:{x:0,y:0},draggableElementOffset:UA.getElementPosition(t),draggableElementPosition:s,initialScrollPosition:n,currentScrollPosition:n}}clearMoveStateFromDraggableContext(){this.draggableContext&&(this.draggableContext.mouseOverElement=null,this.draggableContext.mouseOverElementRect=null,this.draggableContext.isPossibleDropItem=!1)}setMouseOverElementInfo(e){if(!this.draggableContext)return;const t=e.getBoundingClientRect(),{currentScrollPosition:i}=this.draggableContext;this.draggableContext.mouseOverElement=e,this.draggableContext.mouseOverElementRect={x:t.left+i.x,y:t.top+i.y,width:t.width,height:t.height}}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.currentCursorPosition.x-e.currentScrollPosition.x,y:e.currentCursorPosition.y-e.currentScrollPosition.y}}onElementMouseOut(e){this.clearMoveStateFromDraggableContext(),this.refreshUI()}onDocumentMouseMove(e){this.updateDraggableElement(e)}onDocumentScroll(e){if(!this.draggableContext)return;const t=this.draggableContext;t.currentScrollPosition=UA.getDocumentScrollPosition(),t.srcElementPosition=UA.getElementPosition(t.srcElement),t.mouseOverElement&&this.setMouseOverElementInfo(t.mouseOverElement),this.updateDraggableElementPosition(),this.refreshUI()}updateDraggableElement(e){if(!this.draggableContext)return;const t=this.draggableContext;t.currentCursorPosition={x:e.pageX,y:e.pageY},t.initialScrollPosition=t.currentScrollPosition,this.updateDraggableElementPosition(),this.refreshUI()}}class NA extends QA{constructor(){super(),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this)}get draggableItemContext(){return this.draggableContext}createItemDraggedHandlerArgs(){if(!this.draggableItemContext||!this.draggableItemContext.isPossibleDropItem||!this.draggableItemContext.target)return null;const e=this.draggableItemContext.target;return{sourceInfo:this.createSourceInfo(),targetInfo:e.createTargetInfo()}}createTargetInfo(){return{key:this.getKey()}}activateDropTarget(e){this.isWithinDragging()||(this.draggableContext=e),this.addElementListeners(this.getItemDropArea())}deactivateDropTarget(){this.removeElementListeners(this.getItemDropArea()),this.isWithinDragging()||(this.draggableContext=null)}start(e,t){var i,n;super.start(e,t),null===(n=null===(i=this.getDraggableHintElement())||void 0===i?void 0:i.show)||void 0===n||n.call(i),this.getDroppableTargets().forEach((e=>e.activateDropTarget.bind(e)(this.draggableContext)))}stop(){var e,t;this.getDroppableTargets().forEach((e=>e.deactivateDropTarget.bind(e)())),null===(t=null===(e=this.getDraggableHintElement())||void 0===e?void 0:e.hide)||void 0===t||t.call(e),super.stop()}createDraggableContext(e,t,i){return{...super.createDraggableContext(e,t,i),source:this,target:this,targetKey:null}}getDroppableTargets(){return PA.getTargets()}updateDraggableContext(e){if(!this.draggableItemContext)return;const{isPossibleDropItem:t,target:i}=this.draggableItemContext,n=this.getItemDropArea();i&&t&&NA.isDescendantElement(n,i.getItemDropArea())||(this.clearMoveStateFromDraggableContext(),this.setMouseOverElementInfo(e),this.draggableItemContext.target=this,this.draggableItemContext.targetKey=this.getKey(),this.draggableItemContext.isPossibleDropItem=this.isItemDropPossible(e))}isWithinDragging(){var e;return(null===(e=this.draggableItemContext)||void 0===e?void 0:e.source)===this}createSourceInfo(){return{key:this.getKey()}}addElementListeners(e){e.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}removeElementListeners(e){e.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}isItemDropPossible(e){return!0}getDraggableHintElement(){var e,t;return null!==(t=null===(e=this.draggableContext)||void 0===e?void 0:e.dragableElement)&&void 0!==t?t:null}static isDescendantElement(e,t){return e!==t&&e.contains(t)}}class RA{static getSvgHtml(e){return`\n<svg class="${he.Image}" role="img" aria-hidden="true">\n    <use class="dxbl-icon-set-default" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}"></use>\n    <use class="dxbl-icon-set-fluent" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent"></use>\n    <use class="dxbl-icon-set-fluent-small" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent-small"></use>\n    <use class="dxbl-icon-set-fluent-large" href="_content/DevExpress.Blazor/dx-blazor.svg#${e}-fluent-large"></use>\n</svg>`}}var LA,MA,kA,KA;RA.ArrowUpIconName="dx-arrow-up",RA.ArrowDownIconName="dx-arrow-down",function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(LA||(LA={}));class OA{constructor(e,t){this.downTargetCssClass=t,this.upTargetCssClass=e,this.downTargetElement=OA.addTargetToDom(this.downTargetCssClass,RA.ArrowDownIconName),this.upTargetElement=OA.addTargetToDom(this.upTargetCssClass,RA.ArrowUpIconName);const i=this.upTargetElement.getBoundingClientRect();this.targetElementSize={width:i.width,height:i.height},this.upTargetElementPosition=null,this.downTargetElementPosition=null,this.hide()}show(){this.upTargetElementPosition&&this.downTargetElementPosition&&(this.downTargetElement.style.transform=yr.translateByPoint(this.downTargetElementPosition),this.upTargetElement.style.transform=yr.translateByPoint(this.upTargetElementPosition),this.downTargetElement.classList.remove(he.DisplayNone),this.upTargetElement.classList.remove(he.DisplayNone))}hide(){this.downTargetElement.classList.add(he.DisplayNone),this.upTargetElement.classList.add(he.DisplayNone)}setPositionRelativeToElement(e,t){this.setUpTargetPosition(e,t),this.setDownTargetPosition(e,t)}setUpTargetPosition(e,t){this.upTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y+e.height}}setDownTargetPosition(e,t){this.downTargetElementPosition={x:this.getTargetXCoordinate(e,t),y:e.y-this.targetElementSize.height}}getTargetXCoordinate(e,t){let i=e.x-this.targetElementSize.width/2;return t===LA.Right&&(i+=e.width),i}dispose(){OA.removeElementsByClassName(this.downTargetCssClass),OA.removeElementsByClassName(this.upTargetCssClass)}static removeElementsByClassName(e){const t=document.querySelectorAll(`.${e}`);for(let e=0;e<t.length;e++)t[e].remove()}static addTargetToDom(e,t){const i=document.createElement("div");return i.className=e,i.innerHTML=RA.getSvgHtml(t),document.body.appendChild(i),i}}!function(e){e[e.HeaderRow=0]="HeaderRow",e[e.GroupPanel=1]="GroupPanel",e[e.ColumnChooser=2]="ColumnChooser"}(MA||(MA={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(kA||(kA={}));class _A extends QA{constructor(e){super(),this.draggableContext=null,this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.boundOnHeaderMouseMoveHandler=this.onHeaderMouseMove.bind(this),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this),this.boundOnGroupPanelMouseMoveHandler=this.onGroupPanelMouseMove.bind(this),this.boundOnEmptyHeaderCellMouseMoveHandler=this.onEmptyHeaderCellMouseMove.bind(this),this.boundOnGroupFreeSpaceMouseMoveHandler=this.onGroupFreeSpaceMouseMove.bind(this),this.grid=e}start(e,t){this.isColumnDraggingAllowed(e)&&(super.start(e,t),this.grid.styleGenerator.notifyColumnDragStarted())}stop(){var e;null===(e=this.draggableContext)||void 0===e||e.targets.dispose(),super.stop(),document.body.classList.remove(ue.MoveCursorCssClassName),this.grid.styleGenerator.notifyColumnDragEnded()}getDraggableElement(e){return _A.addDraggableHeaderToDOM(e)}hideDraggableElement(){_A.removeDraggableHeaderFromDom()}updateDraggableContextByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateDraggableContextByElement(t,e)}onDocumentPointerUp(e){var t;const i=null===(t=this.draggableContext)||void 0===t?void 0:t.srcElement;i&&!i.isConnected&&this.stop()}onHeaderMouseMove(e){this.updateDraggableContextByElement(e.target,e)}onGroupPanelMouseMove(){const e=this.grid.getGroupPanelContentContainer();this.onPanelElementMouseMove(e,MA.GroupPanel)}onEmptyHeaderCellMouseMove(){const e=this.grid.getEmptyHeaderCellContentContainer();this.onPanelElementMouseMove(e,MA.HeaderRow)}onGroupFreeSpaceMouseMove(){const e=this.grid.getGroupContentFreeSpaceElement();this.onPanelElementMouseMove(e,MA.GroupPanel)}isColumnDraggingAllowed(e){const t=this.grid.getColumnInfo(e);return!!t&&(t.allowReorder||t.allowGroup&&!!this.grid.getGroupPanelContentContainer())}onPanelElementMouseMove(e,t){e&&this.draggableContext&&this.draggableContext.mouseOverElement!==e&&this.draggableContext.srcElement!==e.previousElementSibling&&(this.clearMoveStateFromDraggableContext(),this.setMouseOverElementInfo(e),this.draggableContext.dropArea=t,this.isPossibleDropToCurrentArea()&&(this.draggableContext.isPossibleDropItem=!0,this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,LA.Left)),this.refreshUI())}isPossibleDropToCurrentArea(){var e,t,i;return(null===(e=this.draggableContext)||void 0===e?void 0:e.allowGroup)||(null===(t=this.draggableContext)||void 0===t?void 0:t.dropArea)===(null===(i=this.draggableContext)||void 0===i?void 0:i.srcArea)}createColumnDraggedHandlerArgs(){var e;if(!this.draggableContext||!this.draggableContext.isPossibleDropItem)return null;const t=this.draggableContext;let i=t.beforeColumnUid;return t.dropArea===MA.HeaderRow&&(i=null!==(e=(e=>{var t;return e.dragRestrictions?null!==(t=e.dragRestrictions.nextColumnUid)&&void 0!==t?t:-1:null})(t.draggedColumn))&&void 0!==e?e:i),{columnUid:t.draggedColumn.uID,beforeColumnUid:i,srcArea:t.srcArea,dropArea:t.dropArea}}getLatestVisibleColumnIndex(){for(let t=this.grid.columnsInfo.length-1;t>=0;t--)if(!(e=this.grid.columnsInfo[t]).isIndent&&!e.isEmpty)return t;var e;return-1}getRestrictedDropHeaderInfo(e){const t=this.getDropColumnArea(e);if(!!(!this.draggableContext||!this.draggableContext.draggedColumn.dragRestrictions||this.draggableContext.srcArea!==MA.GroupPanel||this.draggableContext.dropArea===MA.GroupPanel||t!==MA.HeaderRow))return null;let i,n=kA.Left;const s=this.getLatestVisibleColumnIndex(),r=this.draggableContext.draggedColumn.dragRestrictions;let o=-1;return r&&null!==r.nextVisibleColumnUid?o=this.grid.columnsInfo.findIndex((e=>e.uID===r.nextVisibleColumnUid&&!e.isIndent)):(o=s,n=kA.Right),-1!==o&&(i=this.grid.getHeaderCells()[o]),i?{dropHeaderElement:i,position:n}:null}updateDraggableContextByElement(e,t){let i=this.grid.findHeaderElement(e);const n=this.grid.getColumnInfo(i);i&&n&&this.draggableContext&&this.draggableContext.draggedColumn.parentUID!==n.parentUID&&(i=this.findMatchingParentHeader(i)),i&&(this.updateDraggableContext(i,t),this.refreshUI())}findMatchingParentHeader(e){let t=this.grid.getColumnInfo(e);for(;t;){if(this.draggableContext&&this.draggableContext.draggedColumn.parentUID===t.parentUID)return this.grid.getHeaderCell(t.headerRowIndex,t.headerCellIndex);t=t.parent}return e}updateDraggableContext(e,t){var i;if(this.clearMoveStateFromDraggableContext(),null==this.draggableContext)return;const n=e?this.getRestrictedDropHeaderInfo(e):null;if(n&&(e=n.dropHeaderElement),this.draggableContext.srcElement!==e&&(this.setMouseOverElementInfo(e),this.isPossibleDropToCurrentArea())){const s=void 0!==(null==n?void 0:n.position)?n.position===kA.Left:this.isThereCursorInLeftPart(t),r=this.grid.getColumnInfo(e);if(r&&!r.hasLeafs&&r.uID===this.draggableContext.draggedColumn.parentUID)this.draggableContext.beforeColumnUid=-1,this.draggableContext.isPossibleDropItem=!0;else if(s&&e.previousElementSibling!==this.draggableContext.srcElement||!s&&e.nextElementSibling!==this.draggableContext.srcElement){let t=s?r:this.grid.getColumnInfo(e.nextElementSibling),n=s?this.grid.getColumnInfo(e.previousElementSibling):r;s&&n&&n.parentUID!==(null==t?void 0:t.parentUID)&&(n=null),!s&&t&&t.parentUID!==(null==n?void 0:n.parentUID)&&(t=null);if(!this.canDropBetweenColumns(n,t))return void(this.draggableContext.isPossibleDropItem=!1);this.draggableContext.beforeColumnUid=null!==(i=null==t?void 0:t.uID)&&void 0!==i?i:-1,this.draggableContext.isPossibleDropItem=!0}this.draggableContext.isPossibleDropItem&&this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,s?LA.Left:LA.Right)}}static canDropColumnWithDisabledReorderingBetweenColumns(e,t,i,n){var s,r;if(t!==MA.GroupPanel)return!1;const o=e.dragRestrictions;if(o){const e=null!==(s=null==i?void 0:i.uID)&&void 0!==s?s:null,t=null!==(r=null==n?void 0:n.uID)&&void 0!==r?r:null;if(o.previousColumnUid!==e&&o.nextColumnUid!==t&&o.nextVisibleColumnUid!==t)return!1}return!0}canDropBetweenColumns(e,t){if(!this.draggableContext)return!1;if(this.draggableContext.dropArea===MA.GroupPanel)return!0;if(!this.draggableContext.draggedColumn.allowReorder&&!_A.canDropColumnWithDisabledReorderingBetweenColumns(this.draggableContext.draggedColumn,this.draggableContext.srcArea,e,t))return!1;const i=this.draggableContext.draggedColumn.parentUID,n=t&&i===t.parentUID;if(!(!n&&e&&i===e.parentUID)&&!n)return!1;const s=e=>"left"===e?0:"right"===e?2:1,r=[];e&&r.push(s(e.fixedPosition)),r.push(s(this.draggableContext.draggedColumn.fixedPosition)),t&&r.push(s(t.fixedPosition));for(let e=0;e<r.length-1;++e)if(r[e]>r[e+1])return!1;return!0}getDropColumnArea(e){const t=this.grid.getGroupPanelContentContainer();return t&&_A.isThereHeaderInsideGroupPanel(t,e)?MA.GroupPanel:MA.HeaderRow}static isThereHeaderInsideGroupPanel(e,t){const i=e.childNodes.length;for(let n=0;n<i;n++)if(e.childNodes[n]===t)return!0;return!1}refreshUICore(){super.refreshUICore();const e=this.draggableContext;e&&(e.isPossibleDropItem?e.targets.show():e.targets.hide(),document.body.classList.add(ue.MoveCursorCssClassName))}setMouseOverElementInfo(e){if(super.setMouseOverElementInfo(e),!this.draggableContext)return;const t=this.grid.getColumnInfo(e),i=null==t?void 0:t.getRightLeaf();if(i){const t=this.grid.getHeaderCell(i.headerRowIndex,i.headerCellIndex),n=null==t?void 0:t.getBoundingClientRect();if(n&&this.draggableContext.mouseOverElementRect){const t=e.getBoundingClientRect();this.draggableContext.mouseOverElementRect.height=n.height+n.top-t.top}}if(this.draggableContext.scrollViewerRect&&this.draggableContext.mouseOverElementRect){const e=this.draggableContext.scrollViewerRect;this.draggableContext.mouseOverElementRect.x<e.x&&(this.draggableContext.mouseOverElementRect.x=e.x),this.draggableContext.mouseOverElementRect.x+this.draggableContext.mouseOverElementRect.width>e.x+e.width&&(this.draggableContext.mouseOverElementRect.width=e.x+e.width-this.draggableContext.mouseOverElementRect.x)}this.draggableContext.dropArea=this.getDropColumnArea(e)}isThereCursorInLeftPart(e){if(!this.draggableContext||!this.draggableContext.mouseOverElementRect)return!1;const t=this.draggableContext.mouseOverElementRect;return e.pageX<t.x+t.width/2}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.srcElementPosition.x+(e.currentCursorPosition.x-e.initialCursorPosition.x)+(e.currentScrollPosition.x-e.initialScrollPosition.x)+e.currentScrollPosition.x,y:e.srcElementPosition.y+(e.currentCursorPosition.y-e.initialCursorPosition.y)+(e.currentScrollPosition.y-e.initialScrollPosition.y)+e.currentScrollPosition.y}}addEventSubscriptions(){super.addEventSubscriptions(),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.addHeaderEventSubscriptions(),this.addGroupPanelEventSubscriptions(),this.addEmptyHeaderCellEventSubscriptions(),this.addGroupContentFreeSpaceElementEventSubscriptions()}addHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const i=e[t];i.addEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}}addEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.addPanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}addGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.addPanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}addGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.addPanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}addPanelElementEventSubscriptions(e,t){e.addEventListener("pointermove",t),e.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}removeEventSubscriptions(){super.removeEventSubscriptions(),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.removeHeaderEventSubscriptions(),this.removeGroupPanelEventSubscriptions(),this.removeEmptyHeaderCellEventSubscriptions(),this.removeGroupContentFreeSpaceElementEventSubscriptions()}removeHeaderEventSubscriptions(){const e=this.grid.getHeaderCells();for(let t=0;t<e.length;t++){const i=e[t];i.removeEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}}removeGroupPanelEventSubscriptions(){if(!this.shouldAddEventListenersToGroupPanel())return;const e=this.grid.getGroupPanelContentContainer();this.removePanelElementEventSubscriptions(e,this.boundOnGroupPanelMouseMoveHandler)}removeEmptyHeaderCellEventSubscriptions(){const e=this.grid.getEmptyHeaderCellContentContainer();e&&this.removePanelElementEventSubscriptions(e,this.boundOnEmptyHeaderCellMouseMoveHandler)}removeGroupContentFreeSpaceElementEventSubscriptions(){const e=this.grid.getGroupContentFreeSpaceElement();e&&this.removePanelElementEventSubscriptions(e,this.boundOnGroupFreeSpaceMouseMoveHandler)}removePanelElementEventSubscriptions(e,t){e.removeEventListener("pointermove",t),e.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}shouldAddEventListenersToGroupPanel(){const e=this.grid.getGroupPanelContentContainer();return!!e&&!(null==e?void 0:e.querySelector(`.${ue.HeaderElementClassName}`))}static addDraggableHeaderToDOM(e){const t=document.createElement("div");t.className=`${ue.DraggableHeaderClassName}`,e.classList.contains(ue.SelectionCellClassName)&&t.classList.add(ue.SelectionCellClassName),e.classList.contains(ue.CommandCellClassName)&&t.classList.add(ue.CommandCellClassName);const i=e.getBoundingClientRect();t.style.width=`${i.width}px`,t.style.height=`${i.height}px`;const n=getComputedStyle(e);t.style.padding=n.padding,t.style.font=n.font,t.style.whiteSpace=n.whiteSpace;const s=this.getContentElement(e).cloneNode(!0);return t.appendChild(s),document.body.appendChild(t),t}static getContentElement(e){return e.querySelector(`.${ue.HeaderContentClassName}`)}static removeDraggableHeaderFromDom(){const e=document.querySelectorAll(`.${ue.DraggableHeaderClassName}`);for(let t=0;t<e.length;t++)e[t].remove()}createDraggableContext(e,t,i){const n=super.createDraggableContext(e,t,i),s=this.grid.getScrollViewer(),r=this.grid.getColumnInfo(e);return{...n,allowGroup:r.allowGroup,scrollViewerRect:s&&s.getRectangle(),draggedColumn:r,beforeColumnUid:null,srcArea:e.closest(`.${ue.GroupPanelContentContainerClassName}`)?MA.GroupPanel:MA.HeaderRow,dropArea:MA.HeaderRow,targets:new OA(ue.DraggingUpTargetClassName,ue.DraggingDownTargetClassName)}}clearMoveStateFromDraggableContext(){super.clearMoveStateFromDraggableContext(),this.draggableContext&&(this.draggableContext.beforeColumnUid=null)}}class VA{constructor(e){this._startSelectionRowIndex=-1,this._endSelectionRowIndex=-1,this.savedSelectedRows=[],this.boundOnRowPointerEnterHandler=this.onRowPointerEnter.bind(this),this.grid=e}get startSelectionRowIndex(){return this._startSelectionRowIndex}get endSelectionRowIndex(){return this._endSelectionRowIndex}start(e,t){this._startSelectionRowIndex=this.grid.getRowVisibleIndexByTarget(e),this._startSelectionRowIndex>-1&&(this._endSelectionRowIndex=this._startSelectionRowIndex,t&&this.storeSelectedRows(),this.addRowEventSubscriptions(),this.updateRowsSelection())}stop(){this._startSelectionRowIndex>-1&&(this.deselectRows(),this.removeRowEventSubscriptions(),this.restoreSelectedRows(),this._startSelectionRowIndex=-1,this._endSelectionRowIndex=-1)}isStarted(){return this._startSelectionRowIndex>-1&&this._endSelectionRowIndex>-1}updateSeletionByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateSeletionByElement(t)}findRowElement(e){return this.grid.getMainElement().querySelector(`tr[${sn.VisibleIndexName}="${e}"]`)}findRowElements(){return this.grid.getMainElement().querySelectorAll(`tr[${sn.VisibleIndexName}]`)}findSelectedRowElements(){return this.grid.getMainElement().querySelectorAll(`tr.${ue.SelectedRowClassName}[${sn.VisibleIndexName}]`)}addRowEventSubscriptions(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].addEventListener("pointerenter",this.boundOnRowPointerEnterHandler)}removeRowEventSubscriptions(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].removeEventListener("pointerenter",this.boundOnRowPointerEnterHandler)}updateSeletionByElement(e){const t=this.grid.getRowVisibleIndexByTarget(e,!0);t>-1&&(this._endSelectionRowIndex=t,this.updateRowsSelection())}onRowPointerEnter(e){this.updateSeletionByElement(e.target)}selectRows(e){for(let t=0;t<e.length;t++){const i=this.findRowElement(e[t]);i&&i.classList.add(0===t||t===e.length-1?ue.TouchSelectionEdgeClassName:ue.TouchSelectionClassName)}}deselectRows(){const e=this.findRowElements();if(e)for(let t=0;t<e.length;t++)e[t].classList.remove(ue.TouchSelectionClassName,ue.TouchSelectionEdgeClassName)}updateRowsSelection(){if(-1===this.startSelectionRowIndex||-1===this.endSelectionRowIndex)return;this.deselectRows();const e=Math.min(this.startSelectionRowIndex,this.endSelectionRowIndex),t=Math.max(this.startSelectionRowIndex,this.endSelectionRowIndex),i=Array.from({length:t-e+1},((t,i)=>i+e));this.selectRows(i)}storeSelectedRows(){const e=this.findSelectedRowElements();if(e)for(let t=0;t<e.length;t++)e[t].classList.remove(ue.SelectedRowClassName),this.savedSelectedRows.push(e[t])}restoreSelectedRows(){for(let e=0;e<this.savedSelectedRows.length;e++)this.savedSelectedRows[e].classList.add(ue.SelectedRowClassName);this.savedSelectedRows=[]}}!function(e){e[e.Disabled=0]="Disabled",e[e.LeftBorder=1]="LeftBorder",e[e.BetweenBorders=2]="BetweenBorders",e[e.RightBorder=3]="RightBorder"}(KA||(KA={}));class zA{get highlightLeftBorder(){return this.scrollStatus===KA.BetweenBorders||this.scrollStatus===KA.RightBorder||this.isDragging}get highlightRightBorder(){return this.scrollStatus===KA.BetweenBorders||this.scrollStatus===KA.LeftBorder||this.isDragging}constructor(e){this.grid=e,this.gridUid="",this.lastGeneratedStyle="",this.isDragging=!1,this.scrollStatus=KA.Disabled}notifyColumnDragStarted(){this.hasAnyFixedColumn()&&(this.isDragging=!0,requestAnimationFrame((()=>this.updateFixedCellsStyle())))}notifyColumnDragEnded(){this.hasAnyFixedColumn()&&(this.isDragging=!1,requestAnimationFrame((()=>this.updateFixedCellsStyle())))}scrollPositionUpdated(e){this.hasAnyFixedColumn()&&(this.scrollStatus=this.calcScrollStatus(e),requestAnimationFrame((()=>this.updateFixedCellsStyle())))}updateFixedCellsStyle(){this.gridUid=this.grid.getAttribute(GA);const e=this.grid.querySelector("style");if(!e)return;let t="";this.hasAnyFixedColumn()&&(t+=this.createPositionStyles(),t+=this.createBorderStyles()),this.lastGeneratedStyle!==t&&(e.innerText=t,this.lastGeneratedStyle=t)}createPositionStyles(){const e=this.grid.getColElements(),t=this.getOffsetWidths(e),i=new Array(t.length),n=new Array(t.length);i[0]=0,n[t.length-1]=0;for(let e=1;e<t.length;++e)i[e]=i[e-1]+t[e-1];for(let e=t.length-2;e>=0;--e)n[e]=n[e+1]+t[e+1];const s=this.grid.columnsInfo.some((e=>"left"===e.fixedPosition));let r="";for(const e of this.grid.headerLayout)for(const t of e){let e=t.fixedPosition;if(t.isIndent&&s&&(e="left"),e){let s=t;const o="left"===e;s.hasLeafs&&(s=o?t.getLeftLeaf():t.getRightLeaf());r+=this.createPositionStyle(t,s.leafIndex,e,o?i[s.leafIndex]:n[s.leafIndex])}}return r}hasAnyBandColumn(){return this.grid.headerLayout.length>1}hasAnyFixedColumn(){return this.grid.columnsInfo.some((e=>!!e.fixedPosition))}calcScrollStatus(e){const t=this.grid.getDataTable().clientWidth;return t===e.clientWidth?KA.Disabled:0===e.scrollLeft?KA.LeftBorder:Math.abs(t-e.clientWidth-e.scrollLeft)<1?KA.RightBorder:KA.BetweenBorders}createPositionStyle(e,t,i,n){const s=[],r=this.hasAnyBandColumn();if(r&&(s.push(this.getHeaderRowsSelector(e.headerRowIndex)),s.push(this.createPositionStyleForColumn("th",e.headerCellIndex,i,n))),!e.hasLeafs){const e=r?"td":"";s.push(this.getTableRowsSelector()),s.push(this.createPositionStyleForColumn(e,t,i,n))}return s.join("")}createPositionStyleForColumn(e,t,i,n){return` > ${e}.${ue.FixedCellClassName}:nth-child(${t+1}) { ${i}: ${n}px; }`}createBorderStyles(){const e=[],t=this.hasAnyBandColumn();return this.highlightLeftBorder&&(e.push(this.createLeftBorderStyle("th")),e.push(this.createLeftBorderStyle("td"))),this.highlightRightBorder&&(e.push(t?this.createHeaderRightBorderStyle():this.createRightBorderStyle("th")),e.push(this.createRightBorderStyle("td"))),e.join("")}createLeftBorderStyle(e){return this.getTableRowsSelector()+` > ${e}.${ue.LastLeftFixedCellClassName} { border-right-color: var(--dxbl-grid-fixed-column-border-color); }`}createRightBorderStyle(e){return this.getTableRowsSelector()+` > ${e}:not(.${ue.FixedCellClassName}) + ${e}.${ue.FixedCellClassName} { border-left-color: var(--dxbl-grid-fixed-column-border-color); }`}createHeaderRightBorderStyle(){const e=[];for(const t of this.grid.headerLayout){const i=t.find((e=>"right"===e.fixedPosition));i&&(e.push(this.getHeaderRowsSelector(i.headerRowIndex)),e.push(` > th.${ue.FixedCellClassName}:nth-child(${i.headerCellIndex+1})`),e.push(" { border-left-color: var(--dxbl-grid-fixed-column-border-color); }"))}return e.join("")}getHeaderRowsSelector(e){return this.getTableRowsSelector()+`.${ue.HeaderRowClassName}:nth-child(${e+1})`}getTableRowsSelector(){return[`${this.grid.getTagName()}[${GA}="${this.gridUid}"]`,`.${xe.ClassName}`,`.${xe.ContentContainerClassName}`,`.${ue.DataTableClassName}`,"*","tr"].join(" > ")}getOffsetWidths(e){const t=[];for(let i=0;i<e.length;++i)t.push(this.grid.getColElementOffsetWidth(i));return t}}const WA="dxbl-tree-list",$A="dxbl-grid",GA="data-dx-grid-uid";const qA=document.createElement("template");qA.innerHTML="\n<style></style>\n<slot />";const XA="data-dx-grid-uid";class YA extends de{constructor(){super(),this._columnsInfo=[],this._headerLayout=[],this._cachedColElements=null,this._allowSelectRowByClick=!1,this._enableFocusedRow=!1,this._enableInplaceEditing=!1,this._enableMultiSelect=!1,this._enableRowDrag=!1,this._enableItemDrop=!1,this._enablePositionalItemDrop=!1,this._hasRowClickEvent=!1,this._hasRowDblClickEvent=!1,this._isEditing=!1,this._focusedRowIndex=-1,this._latestAutoFitColumnWidthsRequestGuid=null,this._enableEditOnKeypress=!1,this._enterKeyDirection=0,this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.boundOnClickHandler=this.onClick.bind(this),this.boundOnDblClickHandler=this.onDblClick.bind(this),this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnStartCellEditingRequestCompleteHandler=this.onStartCellEditingRequestComplete.bind(this),this.boundOnScrollViewerScrollHandler=this.onScrollViewerScroll.bind(this),this.boundOnDocumentKeyDownHandler=this.onDocumentKeyDown.bind(this),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.currentWidth=-1,this.focusedRowRestoreVisibilityTimeout=500,this.rowDraggingHelper=this.createRowDraggingHelper(),this.columnDraggingHelper=new _A(this),this.columnWidthsController=new _e(this),this.selectionHelper=new VA(this),this._editorManager=this.createEditorManager(),this._styleGenerator=null,this.resizeObserver=new ResizeObserver(this.onSizeChanged.bind(this))}initializeComponent(){super.initializeComponent(),this._editorManager.initialize(),this._styleGenerator=new zA(this),this._uiHandlersBridge=this.querySelector(me),this.initializeKeyboardNavigator(),this.ensureColumnResizeStrategy(),this.addEventSubscriptions(),this.resizeObserver.observe(this)}disposeComponent(){this.removeEventSubscriptions(),this.resizeObserver.unobserve(this),this._editorManager.dispose(),delete this._uiHandlersBridge,delete this.keyboardNavigator,super.disposeComponent()}createEditorManager(){return new Xa(this)}get hoverTitleElementsSelector(){return $s.TitleElementsSelector}get bypassNonInlineHoverTitleElementChildSelector(){return null}getMainElement(){return this}getDataTable(){return this.querySelector($s.DataTableSelector)}getHeaderRows(){return this.querySelectorAll(`thead > tr.${ue.HeaderRowClassName}`)}getFilterRow(){return this.querySelector(`thead > tr.${ue.FilterRowClassName}`)}getHeaderCells(){return this.querySelectorAll(`.${ue.HeaderElementClassName}`)}getToolbarContainer(){return this.querySelector(`.${ue.ToolbarContainerClassName}`)}getGroupPanelContentContainer(){return this.querySelector(`.${ue.GroupPanelContentContainerClassName}`)}getSearchBoxContainer(){return this.querySelector(`.${ue.SearchBoxContainerClassName}`)}getEmptyHeaderCellContentContainer(){return this.querySelector(`.${ue.EmptyHeaderCellContentContainerClassName}`)}getGroupContentFreeSpaceElement(){return this.querySelector(`.${ue.GroupContentFreeSpaceClassName}`)}getColElements(){return null==this._cachedColElements&&(this._cachedColElements=this.querySelectorAll($s.ColElementSelector),setTimeout((()=>{this._cachedColElements=null}))),this._cachedColElements}getFooterRow(){return this.querySelector(`.${ue.FooterRowClassName}`)}getPagerPanel(e){return this.querySelector(`:scope > ${$s.PagerPanelSelector}.${e?ue.TopPanelClassName:ue.BottomPanelClassName}`)}getRowDragHint(){var e,t;const i=this.querySelector(`.${ue.RowDragHintPortalClassName}`);return null!==(t=null===(e=null==i?void 0:i.portable)||void 0===e?void 0:e.find((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,$s.RowDragHintSelector)})))&&void 0!==t?t:null}getDropRestrictions(){return this.querySelector(be)}getScrollViewer(){return this.querySelector(`.${xe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${xe.ContentContainerClassName}`)}getTableContainerWidth(){const e=this.getScrollViewerContent();return e?null==e?void 0:e.getBoundingClientRect().width:0}getColumnResizeSeparator(){return this.querySelector(`.${ue.ColumnsSeparatorClassName}`)}getDropTargetIndicator(){return this.querySelector(`.${ue.DropTargetIndicatorClassName}`)}createRootKeyboardNavigationStrategy(){return new IA(this)}initializeKeyboardNavigator(){if(this.keyboardNavigator=this.querySelector($s.KeyboardNavigatorSelector),this.keyboardNavigator&&!this.keyboardNavigator.initialized){let e=null;const t=this.getScrollViewer();t&&Ya.isVirtualScrollingEnabled(t)&&(e=$i),this.keyboardNavigator.initialize(this,this.createRootKeyboardNavigationStrategy(),e)}}getKeyboardNavigator(){return this.keyboardNavigator}getColElementOffsetWidth(e){let t=this.getColElements()[e].getBoundingClientRect().width;if(0===t&&(h.Browser.Safari||h.Browser.MacOSMobilePlatform||h.Browser.WebKitFamily||h.Browser.AndroidDefaultBrowser)){const i=this.findHeaderCellByColumnIndex(e);t=i?i.getBoundingClientRect().width:null}return t}addEventSubscriptions(){var e;this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(d.eventName,this.boundOnClickHandler),this.addEventListener(c.eventName,this.boundOnDblClickHandler),this.addEventListener(ke.eventName,this.boundOnScrollViewerUpdateHandler),this.addEventListener(fA.eventName,this.boundOnStartCellEditingRequestCompleteHandler),null===(e=this.getScrollViewer())||void 0===e||e.subscribeToScroll(this.boundOnScrollViewerScrollHandler),document.addEventListener("keydown",this.boundOnDocumentKeyDownHandler),h.Browser.Firefox&&this.addEventListener("mousedown",this.boundOnMouseDownHandler)}removeEventSubscriptions(){var e;this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(d.eventName,this.boundOnClickHandler),this.removeEventListener(c.eventName,this.boundOnDblClickHandler),this.removeEventListener(ke.eventName,this.boundOnScrollViewerUpdateHandler),this.removeEventListener(fA.eventName,this.boundOnStartCellEditingRequestCompleteHandler),null===(e=this.getScrollViewer())||void 0===e||e.unsubscribeFromScroll(),document.removeEventListener("keydown",this.boundOnDocumentKeyDownHandler),h.Browser.Firefox&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler)}onDragStart(e){var t,i,n;const s=e.target,r=e.detail.source;if(this.isResizeAnchor(s)){const e=this.findHeaderElement(s),i=this.findLeafIndex(e);null===(t=this.columnResizeStrategy)||void 0===t||t.startDrag(i,r.pageX)}else if(this.isHeaderContentElement(s)){const e=this.findHeaderElement(s);e&&(this.columnDraggingHelper.start(e,r),null===(i=this.getScrollViewer())||void 0===i||i.startAutoScrolling(Ne.Horizontal,(e=>this.columnDraggingHelper.updateDraggableContextByEvent(e))))}else if(this.enableRowDrag&&this.isRowDragAnchor(r.target)){const e=this.getRowVisibleIndexByTarget(r.target,this.enableInplaceEditing),t=this.getMainElement().querySelector(`tr[${sn.VisibleIndexName}="${e}"]`);t&&this.rowDraggingHelper.start(t,r)}else this.allowSelectRowByClick&&this.enableMultiSelect&&h.Browser.TouchUI&&(this.selectionHelper.start(r.target,!r.ctrlKey&&!r.metaKey&&!e.detail.isLongTap),null===(n=this.getScrollViewer())||void 0===n||n.startAutoScrolling(Ne.Vertical,(e=>this.selectionHelper.updateSeletionByEvent(e)),(e=>{const t=this.getDataTable();if(t){const i=t.querySelector("thead");i&&(e.y+=i.offsetHeight,e.height-=i.offsetHeight);const n=t.querySelector("tfoot");n&&(e.height-=n.offsetHeight)}})));e.stopPropagation()}onDragStop(e){var t,i;if(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)this.columnResizeStrategy.stopDrag();else if(this.columnDraggingHelper.isStarted()){const e=this.columnDraggingHelper.createColumnDraggedHandlerArgs();this.columnDraggingHelper.stop(),this.onColumnDragged(e)}else if(this.rowDraggingHelper.isStarted()){const e=this.rowDraggingHelper.createItemDraggedHandlerArgs();this.rowDraggingHelper.stop(),this.onRowDragged(e)}else if(this.selectionHelper.isStarted()){if(this.uiHandlersBridge&&this.selectionHelper.startSelectionRowIndex>-1&&this.selectionHelper.endSelectionRowIndex>-1){this.uiHandlersBridge.send("rowDragged",{startVisibleIndex:this.selectionHelper.startSelectionRowIndex,endVisibleIndex:this.selectionHelper.endSelectionRowIndex,cleanSelection:!e.detail.source.ctrlKey&&!e.detail.source.metaKey&&!e.detail.isLongTap})}this.selectionHelper.stop()}null===(i=this.getScrollViewer())||void 0===i||i.stopAutoScrolling(),e.stopPropagation()}onDragCancel(e){var t,i;(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)?this.columnResizeStrategy.cancelDrag():this.columnDraggingHelper.isStarted()?this.columnDraggingHelper.stop():this.rowDraggingHelper.isStarted()?this.rowDraggingHelper.stop():this.selectionHelper.isStarted()&&this.selectionHelper.stop(),null===(i=this.getScrollViewer())||void 0===i||i.stopAutoScrolling(),e.stopPropagation()}allowInplaceEditingOnCellElementClick(e){return!0}onClick(e){const t=e.detail.source.target,i=0===e.detail.source.button;if(this.isResizeAnchor(e.target))e.detail.source.stopPropagation();else if(i&&this.enableInplaceEditing){const e=this.getCellInfo(t);null!==e&&this.allowInplaceEditingOnCellElementClick(t)&&this.requestStartCellEditing(e)}}requestStartCellEditing(e){if(!this.keyboardNavigator)return;if(null===e||e.type===Ys.Edit)return;e.type===Ys.Data&&this.setFocusedRowVisible(!1);const t=new mA(e);setTimeout((()=>this.dispatchEvent(new CA(t))),0)}onStartCellEditingRequestComplete(){this.setFocusedRowVisible(!0)}onDblClick(e){var t;const i=e.target;if(this.isResizeAnchor(i)){e.stopPropagation();const n=this.findHeaderElement(i),s=this.findLeafIndex(n);null===(t=this.columnResizeStrategy)||void 0===t||t.autoFitColumnWidth(s)}}onScrollViewerUpdate(e){const t=this.getScrollViewerContent(),i=this.getDataTable();i&&(t&&(i.offsetHeight<t.clientHeight?T.DomUtils.addClassName(i,ue.DataTableNoScrollClassName):i.offsetHeight>t.clientHeight&&T.DomUtils.removeClassName(i,ue.DataTableNoScrollClassName)),this.updateTopFixedBodyPosition(i)),e.stopPropagation()}onScrollViewerScroll(){this.styleGenerator.scrollPositionUpdated(this.getScrollViewerContent())}getRowVisibleIndexByTarget(e,t){let i=e;for(;i&&i!==this&&(t||!i.classList.contains(ue.EditRowClassName));){if("tr"===i.tagName.toLowerCase()&&i.dataset.visibleIndex)return parseInt(i.dataset.visibleIndex);i=i.parentElement}return-1}get allowSelectRowByClick(){return this._allowSelectRowByClick}set allowSelectRowByClick(e){this._allowSelectRowByClick=e,this.updateHandlePointerEventsMode()}get enableMultiSelect(){return this._enableMultiSelect}set enableMultiSelect(e){this._enableMultiSelect=e,this.updateHandlePointerEventsMode()}get enableFocusedRow(){return this._enableFocusedRow}set enableFocusedRow(e){this._enableFocusedRow=e,this.updateHandlePointerEventsMode()}get enableRowDrag(){return this._enableRowDrag}set enableRowDrag(e){this._enableRowDrag=e,this.updateHandlePointerEventsMode()}get enableItemDrop(){return this._enableItemDrop}set enableItemDrop(e){this._enableItemDrop=e,this.onItemDropStateChanged()}get enablePositionalItemDrop(){return this._enablePositionalItemDrop}get enableInplaceEditing(){return this._enableInplaceEditing}set enableInplaceEditing(e){this._enableInplaceEditing=e,this.updateHandlePointerEventsMode()}get isEditing(){return this._isEditing}set isEditing(e){this._isEditing=e}get focusedRowIndex(){return this._focusedRowIndex}set focusedRowIndex(e){this._focusedRowIndex=e}get keyboardNavigationEnabled(){return!!this.keyboardNavigator}get hasRowClickEvent(){return this._hasRowClickEvent}set hasRowClickEvent(e){this._hasRowClickEvent=e,this.updateHandlePointerEventsMode()}get hasRowDblClickEvent(){return this._hasRowDblClickEvent}set hasRowDblClickEvent(e){this._hasRowDblClickEvent=e,this.updateHandlePointerEventsMode()}get columnsInfo(){return this._columnsInfo}get headerLayout(){return this._headerLayout}get styleGenerator(){return this._styleGenerator}get editorManager(){return this._editorManager}get uiHandlersBridge(){return this._uiHandlersBridge}get uId(){return this.getAttribute(XA)}get enableEditOnKeypress(){return this._enableEditOnKeypress}get enterKeyDirection(){return this._enterKeyDirection}updateHandlePointerEventsMode(){this.handlePointerEventsMode=r.None,(this.hasRowClickEvent||this.enableFocusedRow||this.enableInplaceEditing)&&(this.handlePointerEventsMode|=r.Click),this.hasRowDblClickEvent&&(this.handlePointerEventsMode|=r.DblClick),this.enableRowDrag&&(this.handlePointerEventsMode|=r.Dragging),this.allowSelectRowByClick&&(this.handlePointerEventsMode|=r.Click,this.enableMultiSelect&&h.Browser.TouchUI&&(this.handlePointerEventsMode|=r.Dragging))}makeRowVisible(e){if(this.uiHandlersBridge&&e>=0){this.uiHandlersBridge.send("makeRowVisible",{visibleIndex:e})}}notifyFocusedRowChanged(e){if(e!==this.focusedRowIndex&&this.enableFocusedRow&&this.uiHandlersBridge){this.focusedRowIndex=e;this.uiHandlersBridge.send("focusedRowChanged",{visibleIndex:e})}}notifyColumnsInitialized(e,t){this._columnsInfo=e,this._headerLayout=t}notifyColumnsChanged(e,t){this._columnsInfo=e,this._headerLayout=t,this.correctWidths(Re.ColumnsChanged)}notifyColumnResizeAnchorFocus(e){var t;const i=this.findHeaderElement(e),n=this.findLeafIndex(i);null===(t=this.columnResizeStrategy)||void 0===t||t.anchorFocused(n)}notifyColumnResizeAnchorBlur(){var e;null===(e=this.columnResizeStrategy)||void 0===e||e.anchorUnfocused()}notifyColumnResizeAnchorMove(e){var t;null===(t=this.columnResizeStrategy)||void 0===t||t.performMoveStep(e)}updateEmptyColumnVisibility(){this.columnWidthsController.updateEmptyColumnVisibility()}autoFitColumnWidthsLegacy(e=!1){this.columnWidthsController.autoFitColumnWidthsLegacy(e)}autoFitColumnWidths(){this.columnWidthsController.autoFitColumnWidths()}updateTopFixedBodyPosition(e){const t=e.querySelector(":scope > thead"),i=e.querySelector(`:scope > tbody.${ue.TopFixedBodyClassName}`);t&&i&&(i.style.top=window.getComputedStyle(t).height)}correctWidths(e){var t;if(null===(t=this.columnResizeStrategy)||void 0===t?void 0:t.isResizing)return;this.columnWidthsController.correctWidths(e);const i=this.getScrollViewer();i&&i.refreshUI&&i.refreshUI()}getElementIndex(e){if(!e)return-1;if(e instanceof HTMLTableCellElement)return e.cellIndex;if(e&&e.parentElement)for(let t=0;t<e.parentElement.children.length;t++)if(e.parentElement.children[t]===e)return t;return-1}getColumnInfo(e){const t=this.findHeaderElement(e),i=this.getElementIndex(t);if(i>=0){const e=Array.from(this.getHeaderRows()).findIndex((e=>e===t.parentElement));let n=this.columnsInfo;if(e>=0&&(n=this.headerLayout[e]),i<n.length)return n[i]}return null}getCellInfo(e){return za.fromElement(this,e)}getCellElement(e){return za.getCellElement(this,e)}getColumnInfoByCell(e){if(e instanceof HTMLElement){const t=this.getElementIndex(e);if(t>=0&&t<this.columnsInfo.length)return this.columnsInfo[t]}return null}getColumnUID(e){const t=this.getColumnInfo(e);return t?t.uID:-1}findHeaderElement(e){const t=e;return t?this.isHeaderElement(t)?t:t.closest(`.${ue.HeaderElementClassName}`):null}findHeaderCellByColumnIndex(e){const t=this.columnsInfo[e];return this.getHeaderCell(t.headerRowIndex,t.headerCellIndex)}getHeaderCell(e,t){var i,n;return null!==(n=null===(i=this.getHeaderRow(e))||void 0===i?void 0:i.cells[t])&&void 0!==n?n:null}findLeafIndex(e){let t=this.getColumnInfo(e);return(null==t?void 0:t.hasLeafs)&&(t=t.getRightLeaf()),t?t.leafIndex:-1}getHeaderRow(e){return this.getHeaderRows().item(e)}isHeaderElement(e){return e&&e.classList.contains(ue.HeaderElementClassName)}isHeaderContentElement(e){return e.tagName.toLowerCase()===pe}isResizeAnchor(e){return e.classList.contains(ue.ColumnsResizeAnchorClassName)}isRowDragAnchor(e){return e.classList.contains(ue.RowDragAnchorClassName)}onItemDropStateChanged(){this.rowDraggingHelper.initItemDropTarget(this.enableItemDrop)}onDocumentKeyDown(e){if(!this.keyboardNavigationEnabled&&("Enter"===e.key||" "===e.key)){const t=this.findHeaderElement(e.target);if(t){const i=new MouseEvent("click",{bubbles:!0,cancelable:!0,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey});t.dispatchEvent(i)}}}onMouseDown(e){e.ctrlKey&&e.preventDefault()}onColumnChooserItemDragged(e,t){this.onColumnDragged({columnUid:e,beforeColumnUid:t,srcArea:MA.ColumnChooser,dropArea:MA.ColumnChooser})}onRowDragged(e){e&&this.uiHandlersBridge&&this.uiHandlersBridge.send("rowDropped",e)}onColumnDragged(e){e&&this.uiHandlersBridge&&this.uiHandlersBridge.send("columnHeaderDragged",e)}onColumnWidthsChanged(e,t){this.uiHandlersBridge&&this.uiHandlersBridge.send("columnWidthsChanged",{columnUids:e,widths:t})}onSizeChanged(e){const t=e[0].contentRect.width;this.currentWidth!==t&&t>0&&(this.correctWidths(-1===this.currentWidth?Re.ColumnsChanged:Re.GridResize),this.currentWidth=t)}getContentTemplate(){return qA}static get observedAttributes(){return["allow-select-row-by-click","enable-multi-select","has-row-click-event","has-row-dbl-click-event","resize-mode","enable-focused-row","enable-inplace-editing","is-editing","request-auto-fit-column-widths","focus-pending-editor-column-uid","is-pending-editor-show","focused-row-index","enable-row-drag","enable-item-drop","enable-positional-item-drop","has-fixed-on-top-body","enable-edit-on-keypress","enter-key-direction"]}attributeChangedCallback(e,t,i){var n;switch(e){case"allow-select-row-by-click":this.allowSelectRowByClick=null!==i;break;case"enable-focused-row":this.enableFocusedRow=null!==i;break;case"enable-multi-select":this.enableMultiSelect=null!==i;break;case"enable-inplace-editing":this.enableInplaceEditing=null!=i;break;case"enable-row-drag":this.enableRowDrag=null!==i;break;case"enable-item-drop":this.enableItemDrop=null!==i;break;case"enable-positional-item-drop":this._enablePositionalItemDrop=null!==i;break;case"has-row-click-event":this.hasRowClickEvent=null!==i;break;case"has-row-dbl-click-event":this.hasRowDblClickEvent=null!==i;break;case"is-editing":this.isEditing=null!==i;break;case"focused-row-index":this.focusedRowIndex=parseInt(i);break;case"resize-mode":null===(n=this.columnResizeStrategy)||void 0===n||n.cancelDrag(),this.ensureColumnResizeStrategy();break;case"is-pending-editor-show":this.editorManager.notifyPendingEditorShow(null!==i);break;case"has-fixed-on-top-body":if(null!==i){const e=this.getDataTable();e&&setTimeout((()=>this.updateTopFixedBodyPosition(e)))}break;case"focus-pending-editor-column-uid":null!==i&&this.requestFocusEditor(parseInt(i));break;case"request-auto-fit-column-widths":if(i){const e=JSON.parse(i);if(e[0]&&e[0]!==this._latestAutoFitColumnWidthsRequestGuid)if(this._latestAutoFitColumnWidthsRequestGuid=e[0],2===e.length){const t=e[1];setTimeout((()=>{this.autoFitColumnWidthsLegacy(t)}))}else setTimeout((()=>{this.autoFitColumnWidths()}))}break;case"enable-edit-on-keypress":this._enableEditOnKeypress=null!==i;break;case"enter-key-direction":this._enterKeyDirection=parseInt(i)}}ensureColumnResizeStrategy(){const e=this.getAttribute("resize-mode");this.columnResizeStrategy=e?"next-column"===e?new ze(this):new We(this):void 0}requestFocusEditor(e){setTimeout((()=>this.focusEditor(e)),0)}focusEditor(e){const t=this.uId;if(null===t)return;const i=this.querySelector($s.getBodyEditRowSelector(t,this.getTagName()));if(null===i)return;let n=null;for(const t of i.cells){const i=this.getCellInfo(t);if(null!==i&&i.columnInfo.uID===e&&i.type===Ys.Edit){n=t;break}}if(null===n)return;const s=Ci.findFocusableElements(n),r=s.length>0?s[0]:null;if(!r)return;r.focus();const o=this.getScrollViewer(),a=this.getScrollViewerContent();o&&a&&Ya.alignElementVertically(r,o,a),jl.selectInputValue(r)}setFocusedRowVisible(e){e?(clearTimeout(this.focusedRowRestoreVisibilityTimerId),this.focusedRowRestoreVisibilityTimerId=void 0,this.hasAttribute(sn.FocusedRowHidden)&&this.removeAttribute(sn.FocusedRowHidden)):(this.enableFocusedRow&&this.setAttribute(sn.FocusedRowHidden,""),clearTimeout(this.focusedRowRestoreVisibilityTimerId),this.focusedRowRestoreVisibilityTimerId=setTimeout((()=>this.setFocusedRowVisible(!0)),this.focusedRowRestoreVisibilityTimeout))}static findGrid(e){let t=document.querySelector(`${$A}[${XA}="${e}"]`);return t||(t=document.querySelector(`${WA}[${XA}="${e}"]`)),t}}customElements.define(pe,class extends de{constructor(){super(),this.handlePointerEventsMode=r.Click|r.Dragging}get handlePointerEventsTarget(){return this.closest(`.${ue.HeaderElementClassName}`)}}),customElements.define("dxbl-grid-columns-info",class extends de{get data(){if(!this._dataCache){const e=this.getAttribute("data");this._dataCache=e?JSON.parse(e):{}}return this._dataCache}get header(){if(!this._headerCache){const e=this.data["header-uids"];this._headerCache=e?this.parseHeaderLayout(e):[]}return this._headerCache}get leafs(){if(!this._leafsCache){const e=this.data["leaf-uids"];this._leafsCache=e?this.parseColumns(e,!0):[],this.attachLeafs(this._leafsCache)}return this._leafsCache}get columns(){if(!this._columnsInfoCache){const e=this.data.columns;this._columnsInfoCache=e?this.parseColumnsInfo(e):{},this.attachParents(this._columnsInfoCache)}return this._columnsInfoCache}get indents(){if(!this._indentsCache){const e=this.data.indents;this._indentsCache=e?this.parseInfoArray(e):[]}return this._indentsCache}get emptyColumn(){if(!this._emptyColumnCache){const e=this.data["empty-column"];this._emptyColumnCache=e?this.parseColumnInfo(e):null}return this._emptyColumnCache}constructor(){super(),this._dataCache=null,this._columnsInfoCache=null,this._headerCache=null,this._leafsCache=null,this._indentsCache=null,this._emptyColumnCache=null,this._gridElementPromise=null}initializeComponent(){super.initializeComponent(),this.grid=this.closest(`.${ue.ClassName}`),this._gridElementPromise=customElements.whenDefined(this.grid.tagName.toLowerCase()),this._gridElementPromise.then(this.notifyColumnsInitialized.bind(this))}invalidateCaches(){this._dataCache=null,this._columnsInfoCache=null,this._headerCache=null,this._leafsCache=null,this._indentsCache=null,this._emptyColumnCache=null}parseHeaderLayout(e){const t=[];for(let i=0;i<e.length;i++){const n=this.parseColumns(e[i],0===i);this.updateHeaderLayoutInfo(n,i),t.push(n)}return t}updateHeaderLayoutInfo(e,t){for(let i=0;i<e.length;i++)e[i].updateHeaderLayoutInfo(t,i)}parseColumns(e,t){const i=t?this.indents.slice():[];for(let t=0;t<e.length;t++){i.push(this.columns[e[t]])}return t&&this.emptyColumn&&i.push(this.emptyColumn),i}parseColumnsInfo(e){const t={};for(let i=0;i<e.length;i++){const n=e[i];t[n.UID]=this.parseColumnInfo(n)}return t}parseInfoArray(e){const t=[];for(let i=0;i<e.length;i++){t.push(this.parseColumnInfo(e[i]))}return t}parseColumnInfo(e){const t=e.DragRestrictions?new fe(e.DragRestrictions.PreviousColumnUid,e.DragRestrictions.NextColumnUid,e.DragRestrictions.NextVisibleColumnUid):null;return new ve(e.UID,e.ParentUID,e.AllowGroup,e.Width,e.MinWidth,e.FixedPosition,e.IsIndent,e.IsEmpty,e.IsDetail,e.IsEditable,e.AllowReorder,t)}attachParents(e){for(const t of Object.values(e)){const i=e[t.parentUID];i&&t.attachParent(i)}}attachLeafs(e){for(let t=0;t<e.length;t++){const i=e[t];i.isIndent||i.isRoot||this.attachLeafRecursive(i.parentUID,i),i.updateLeafIndex(t)}}attachLeafRecursive(e,t){const i=e>=0?this.columns[e]:null;i&&(i.attachLeaf(t),this.attachLeafRecursive(i.parentUID,t))}notifyColumnsInitialized(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnsInitialized(this.leafs,this.header)}notifyColumnsChanged(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnsChanged(this.leafs,this.header)}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,i){var n;this.invalidateCaches(),null===(n=this._gridElementPromise)||void 0===n||n.then(this.notifyColumnsChanged.bind(this))}}),customElements.define("dxbl-column-resize-anchor",class extends de{constructor(){super(),this.boundOnAnchorFocusHandler=this.onAnchorFocus.bind(this),this.boundOnAnchorBlurHandler=this.onAnchorBlur.bind(this),this.boundOnKeyDownHandler=this.onKeyDown.bind(this),this.handlePointerEventsMode=r.Click|r.DblClick|r.Dragging}handlePointerEventsDelay(e){return s.Default}initializeComponent(){var e,t,i;super.initializeComponent(),h.Browser.TouchUI&&this.classList.add(he.Touch),this.grid=this.closest(`.${ue.ClassName}`),this.focusableElement=this.querySelector("div"),null===(e=this.focusableElement)||void 0===e||e.addEventListener("focus",this.boundOnAnchorFocusHandler),null===(t=this.focusableElement)||void 0===t||t.addEventListener("blur",this.boundOnAnchorBlurHandler),null===(i=this.focusableElement)||void 0===i||i.addEventListener("keydown",this.boundOnKeyDownHandler)}disposeComponent(){var e,t,i;super.disposeComponent(),null===(e=this.focusableElement)||void 0===e||e.removeEventListener("focus",this.boundOnAnchorFocusHandler),null===(t=this.focusableElement)||void 0===t||t.removeEventListener("blur",this.boundOnAnchorBlurHandler),null===(i=this.focusableElement)||void 0===i||i.removeEventListener("keydown",this.boundOnKeyDownHandler)}onAnchorFocus(e){var t;null===(t=this.grid)||void 0===t||t.notifyColumnResizeAnchorFocus(e.target)}onAnchorBlur(){var e;null===(e=this.grid)||void 0===e||e.notifyColumnResizeAnchorBlur()}onKeyDown(e){var t,i;e.keyCode===Be.KeyCode.Left&&(e.preventDefault(),null===(t=this.grid)||void 0===t||t.notifyColumnResizeAnchorMove(Me.Left)),e.keyCode===Be.KeyCode.Right&&(e.preventDefault(),null===(i=this.grid)||void 0===i||i.notifyColumnResizeAnchorMove(Me.Right))}}),customElements.define("dxbl-column-resize-separator",$e),customElements.define("dxbl-grid-column-chooser",class extends de{constructor(){super(),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.grid=null,this.scrollViewer=null,this.itemsReorderHelper=new Ye(this.onItemsReording.bind(this)),this.handlePointerEventsMode=r.Dragging}handlePointerEventsDelay(e){return s.Default}get useShadowDom(){return!1}initializeComponent(){super.initializeComponent(),this.addEventSubscriptions(),this.grid=ed.findGrid(this.getAttribute(GA)),this.scrollViewer=this.querySelector(`.${xe.ClassName}`),this.initializeKeyboardNavigator()}disposeComponent(){super.disposeComponent(),this.removeEventSubscriptions(),delete this.keyboardNavigator}getColumnUid(e){return parseInt(e.getAttribute(Ge))}getColumnParentUid(e){return e.getAttribute(qe)}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Pi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new FA(this,this.keyboardNavigator))}onDragStart(e){var t;const i=e.detail.source,n=i.target,s=n.closest(`.${ue.ColumnChooserItemDragAnchorClassName}`),r=n.closest(`.${ue.ColumnChooserItemClassName}`);if(null!=s&&null!=r){const e=Array.from(this.getElementsByClassName(ue.ColumnChooserItemClassName));this.itemsReorderHelper.start(e,r,i),null===(t=this.scrollViewer)||void 0===t||t.startAutoScrolling(Ne.Vertical,(()=>{this.itemsReorderHelper.refreshUI()}))}e.stopPropagation()}onDragStop(e){var t;this.itemsReorderHelper.stop(),null===(t=this.scrollViewer)||void 0===t||t.stopAutoScrolling(),e.stopPropagation()}onDragCancel(e){var t;this.itemsReorderHelper.cancel(),null===(t=this.scrollViewer)||void 0===t||t.stopAutoScrolling(),e.stopPropagation()}onItemsReording(e,t,i,n){const s=i.map((t=>e[t])),r=s[0],o=t.indexOf(i[0])+i.length;let a=null;if(!(o===t.length)){a=e[t[o]];this.getColumnParentUid(a)!==this.getColumnParentUid(r)&&(a=null)}this.applyStyles(e,s,a,n),n===Xe.Stop&&this.onItemsReorded(r,a)}applyStyles(e,t,i,n){for(let t=0;t<e.length;t++){const s=e[t],r=s.classList.contains(ue.ColumnChooserDraggingItemNextSiblingClassName);(n!==Xe.ItemMoving||r&&s!==i)&&s.classList.remove(ue.ColumnChooserDraggingItemNextSiblingClassName)}if(n===Xe.ItemMoving){for(const e of t)e.classList.contains(ue.ColumnChooserDraggingItemClassName)||e.classList.add(ue.ColumnChooserDraggingItemClassName);null==i||i.classList.contains(ue.ColumnChooserDraggingItemNextSiblingClassName)||i.classList.add(ue.ColumnChooserDraggingItemNextSiblingClassName)}else{for(const e of t)e.classList.remove(ue.ColumnChooserDraggingItemClassName);null==i||i.classList.remove(ue.ColumnChooserDraggingItemNextSiblingClassName)}}onItemsReorded(e,t){if(null==this.grid)return;const i=this.getColumnUid(e),n=null!=t?this.getColumnUid(t):null;setTimeout((()=>{var e;return null===(e=this.grid)||void 0===e?void 0:e.onColumnChooserItemDragged(i,n)}),200)}}),customElements.define("dxbl-grid-drop-target-indicator",class extends HA{calculateLeftOffset(){const e=this.getTargetElement();if(!e||js.getRowType(e)!==Xs.Data)return"";const t=e.querySelectorAll(`.${ue.IndentCellClassName}`);if(0===t.length)return"";const i=t[t.length-1];return`${i.offsetLeft+i.offsetWidth}px`}});class JA extends NA{constructor(){super(),this.boundOnDroppableMouseMoveHandler=this.onDroppableAreaMove.bind(this)}get draggableRowItemContext(){return this.draggableItemContext}addElementListeners(e){super.addElementListeners(e),e.addEventListener("pointermove",this.boundOnDroppableMouseMoveHandler)}removeElementListeners(e){super.removeElementListeners(e),e.removeEventListener("pointermove",this.boundOnDroppableMouseMoveHandler)}onDroppableAreaMove(e){const t=document.elementFromPoint(e.clientX,e.clientY),i=this.getItemDropArea(),n=this.findItemElementUpToParent(t,i);n&&(this.updateDraggableContext(n),this.refreshUI())}initItemDropTarget(e){e?PA.register(this):PA.remove(this.getKey())}createDraggableContext(e,t,i){return{...super.createDraggableContext(e,t,i),visibleIndex:this.getItemVisibleIndex(e),restrictions:this.getDropRestrictions()}}updateDraggableElementPosition(){if(super.updateDraggableElementPosition(),!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.draggableElementPosition.x-e.draggableElementOffset.x,y:e.draggableElementPosition.y-e.draggableElementOffset.y}}updateDraggableContext(e){super.updateDraggableContext(e),this.updateIndicator()}updateIndicator(){if(!this.draggableRowItemContext)return;const e=this.getDropTargetIndicator(),t=this.getDropPosition();e&&this.draggableRowItemContext.mouseOverElement&&e.updatePosition(this.draggableRowItemContext.mouseOverElement,t)}refreshUICore(){var e;super.refreshUICore();const t=this.getDropTargetIndicator();this.isStarted()&&(null===(e=this.draggableRowItemContext)||void 0===e?void 0:e.isPossibleDropItem)&&this.draggableRowItemContext.target===this?t.show():null==t||t.hide()}stop(){var e;null===(e=this.getDropTargetIndicator())||void 0===e||e.hide(),super.stop()}createSourceInfo(){return{...super.createSourceInfo(),visibleIndex:this.draggableRowItemContext.visibleIndex}}createTargetInfo(){return{...super.createTargetInfo(),visibleIndex:this.getItemVisibleIndex(this.draggableRowItemContext.mouseOverElement),dropPosition:this.getDropPosition()}}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.getDropTargetIndicator())||void 0===e||e.hide()}isWithinDeniedRange(e){var t,i,n;return(null!==(n=null===(i=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i.reorderDeniedRanges)&&void 0!==n?n:[]).some((t=>t.Start<=e&&t.End>=e))}isTopAdjacentDeniedRange(e){var t,i,n;return(null!==(n=null===(i=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i.reorderDeniedRanges)&&void 0!==n?n:[]).some((t=>e===t.Start-1))}isBottomAdjacentDeniedRange(e){var t,i,n;return(null!==(n=null===(i=null===(t=this.draggableRowItemContext)||void 0===t?void 0:t.restrictions)||void 0===i?void 0:i.reorderDeniedRanges)&&void 0!==n?n:[]).some((t=>e===t.End+1))}isRestrictedTopArea(){if(!this.draggableRowItemContext)return!1;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;if(!i||!t)return!1;const n=this.getItemVisibleIndex(i),s=UA.calculateVerticalCenter(t);return this.isWithinDragging()&&e.y>s&&this.isTopAdjacentDeniedRange(n)}isRestrictedBottomArea(){if(!this.draggableRowItemContext)return!1;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;if(!i||!t)return!1;const n=this.getItemVisibleIndex(i),s=UA.calculateVerticalCenter(t);return this.isWithinDragging()&&e.y<s&&this.isBottomAdjacentDeniedRange(n)}}class jA extends JA{constructor(e){super(),this.grid=e}getKey(){return this.grid.uId}getItemDropArea(){return this.grid.getDataTable()}start(e,t){this.isRowDraggingAllowed(e)&&super.start(e,t)}activateDropTarget(e){var t;super.activateDropTarget(e),null===(t=this.grid.getScrollViewer())||void 0===t||t.startAutoScrolling(Ne.Vertical)}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.grid.getScrollViewer())||void 0===e||e.stopAutoScrolling()}getItemVisibleIndex(e){return this.grid.getRowVisibleIndexByTarget(e,this.grid.enableInplaceEditing)}getDropRestrictions(){return this.grid.getDropRestrictions()}getDraggableElement(e){return this.grid.getRowDragHint()}getDroppableTargets(){const{restrictions:e}=this.draggableRowItemContext||{};return e?e.allowedComponents.map((e=>PA.find(e))):[]}isItemDropPossible(e){return!(!this.draggableRowItemContext||e===this.draggableRowItemContext.srcElement)&&(this.isWithinDragging()?this.isReorderPossible(e):this.isDropPossible(e))}isDropPossible(e){const t=js.getRowType(e);return t===Xs.Data||t===Xs.Group||t===Xs.EmptyData||t===Xs.EmptyRow}isReorderPossible(e){const t=js.getRowType(e);if(!this.draggableRowItemContext||t!==Xs.Data)return!1;const i=this.getItemDropArea();if(!i||e.closest(i.tagName)!==i)return!1;const n=this.getItemVisibleIndex(e);return!this.isWithinDeniedRange(n)}isPositionalDropAllowed(){return this.grid.enablePositionalItemDrop}findItemElementUpToParent(e,t){return Qt(e,null,(e=>e.matches($s.TableBodyRows)&&e.closest($s.DataTableSelector)===t))}isRowDraggingAllowed(e){return js.getRowType(e)===Xs.Edit?this.grid.enableInplaceEditing:js.getRowType(e)===Xs.Data}getDropTargetIndicator(){return this.grid.getDropTargetIndicator()}static isDataRow(e){return js.getRowType(e)===Xs.Data}static isEmptyRow(e){const t=js.getRowType(e);return t===Xs.EmptyData||t===Xs.EmptyRow}}class ZA extends jA{getDropPosition(){if(!this.draggableRowItemContext)return TA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;return i&&t?jA.isEmptyRow(i)||jA.isDataRow(i)&&!this.isPositionalDropAllowed()?TA.Append:jA.isDataRow(i)?this.isRestrictedTopArea()?TA.Before:this.isRestrictedBottomArea()?TA.After:UA.getDropPositionByCursor(e.y,t):TA.Inside:TA.Inside}isReorderPossible(e){return this.isPositionalDropAllowed()&&super.isReorderPossible(e)}isWithinDeniedRange(e){return!(!this.isTopAdjacentDeniedRange(e)||!this.isBottomAdjacentDeniedRange(e))||super.isWithinDeniedRange(e)}}class ed extends YA{constructor(){super()}getTagName(){return $A}createRowDraggingHelper(){return new ZA(this)}}customElements.define($A,ed);class td{}td.TreeNodeExpandControlsCell=`${$s.TableCell}.dxbl-grid-tree-node-expand-controls-cell`,td.TreeNodeExpandControlsContainer=`${td.TreeNodeExpandControlsCell} > .dxbl-grid-tree-node-expand-controls-container`,td.TreeNodeExpandButton=`${td.TreeNodeExpandControlsContainer} > .dxbl-grid-tree-node-expand-button`;class id extends jA{getDropPosition(){if(!this.draggableRowItemContext)return TA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i}=this.draggableRowItemContext;return i&&t?jA.isEmptyRow(i)?TA.Append:jA.isDataRow(i)?this.isRestrictedArea(e.y,t)||id.isCursorInMiddle(e.y,t)?TA.Inside:this.isPositionalDropAllowed()?UA.getDropPositionByCursor(e.y,t):TA.Append:TA.Inside:TA.Inside}isRestrictedArea(e,t){const{top:i,bottom:n}=id.getBounds(t);return this.isRestrictedTopArea()&&e>i||this.isRestrictedBottomArea()&&e<n}static isCursorInMiddle(e,t){const{top:i,bottom:n}=id.getBounds(t);return e>i&&e<n}static getBounds(e){const t=UA.calculateVerticalCenter(e),i=e.height/4;return{top:t-i,bottom:t+i}}}class nd{static isExpandCollapseHotkey(e,t){const i=Be.KeyUtils.getEventKeyCode(e);return(i===Be.KeyCode.Right||i===Be.KeyCode.Left)&&(t?e.metaKey:e.ctrlKey)}}class sd extends dA{constructor(e,t,i){super(e,t,i)}handleArrowLeftKeyDown(e){return nd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return nd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowRightKeyDown(e)}}class rd extends oA{constructor(e,t,i){super(e,t,i)}handleArrowLeftKeyDown(e){return nd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowLeftKeyDown(e)}handleArrowRightKeyDown(e){return nd.isExpandCollapseHotkey(e,this.isMacOSPlatform)?(this.performShortcutEvent(e),!0):super.handleArrowRightKeyDown(e)}}class od extends vA{constructor(e,t){super(e,t)}createTableBodyItemStrategy(e){return this.isVirtualScrollingEnabled(e)?new ld(this,this.grid,e):new ad(this,this.grid,e)}}class ad extends yA{constructor(e,t,i){super(e,t,i)}createDataRowStrategy(e){return new sd(this,this.grid,e)}createInplaceEditRowStrategy(e){return new rd(this,this.grid,e)}}class ld extends BA{constructor(e,t,i){super(e,t,i)}createDataRowStrategy(e){return new sd(this,this.grid,e)}createInplaceEditRowStrategy(e){return new rd(this,this.grid,e)}}class Ad extends IA{constructor(e){super(e)}createDataTableStrategy(e){return new od(this.grid,e)}}class dd extends Xa{constructor(e){super(e)}isDataCellInteractiveElement(e){return!!e&&(e.matches(td.TreeNodeExpandControlsCell)||e.matches(td.TreeNodeExpandButton))}}customElements.define(WA,class extends YA{constructor(){super()}getTagName(){return WA}get bypassNonInlineHoverTitleElementChildSelector(){return td.TreeNodeExpandControlsContainer}allowInplaceEditingOnCellElementClick(e){return!e.matches(`${td.TreeNodeExpandButton} *`)}createRowDraggingHelper(){return new id(this)}createRootKeyboardNavigationStrategy(){return new Ad(this)}createEditorManager(){return new dd(this)}});const cd="dxbl-chart-legend",hd="dxbl-chart-legend-icon",ud="dxbl-chart-legend-def-icon",pd="dxbl-chart-legend-item",md="--dxbl-chart";class gd{}gd.axisTitleFontColor=`${md}-axis-title-font-color`,gd.axisLineColor=`${md}-axis-line-color`,gd.constantLineColor=`${md}-constant-line-color`,gd.errorBarColor=`${md}-error-bar-color`,gd.annotationColor=`${md}-annotation-color`,gd.annotationTextColor=`${md}-annotation-text-color`,gd.containerBackgroundColor=`${md}-container-background-color`,gd.candlestickInnerColor=`${md}-candlestick-inner-color`,gd.zoomAndPanDragBoxColor=`${md}-zoom-drag-box-color`,gd.axisLabelFontColor=`${md}-axis-label-font-color`,gd.axisLabelFontOpacity=`${md}-axis-label-font-opacity`;const Cd="dxbl-chart-legend-listeners";var fd;function vd(e,t,i,n){var s;const r=e.querySelectorAll("."+pd);for(let o=0;o<r.length;o++){const a=r[o];if(a){const r=+(null!==(s=a.getAttribute("data-series"))&&void 0!==s?s:""),o=a.getAttribute("data-point");bd(a,t,r,o,i,n,e)}}}function bd(e,t,i,n,s,r,o){if(!e)return;const a=wd(t,i,n);if(!a)return;const l=e.querySelector("."+hd+" rect");if(l){const e=a.getColor();T.DomUtils.hasClassName(l,ud)&&(l.style.fill=e),l.style.color=e}e.getAttribute(Cd)||(yd(e,t,i,n,["pointerover"],(function(e){const i=t.option("legend.hoverMode");s===fd.series?e.hover(i):"includePoints"===i&&e.hover()})),yd(e,t,i,n,["pointerout"],(function(e){e.clearHover()})),yd(e,t,i,n,["click"],(function(e){r.selectLegendItem(e,s),o.onLegendClick(i,n)})),e.setAttribute(Cd,"true"))}function wd(e,t,i){const n=e.getSeriesByPos(t);return i&&n?n.getPoints().filter((function(e){return e.tag===i}))[0]:n}function yd(e,t,i,n,s,r){s.forEach((function(s){const o=function(){const e=wd(t,i,n);e&&r(e)};e.addEventListener(s,o),yi(e,(()=>{e.removeEventListener(s,o)}))}))}!function(e){e[e.series=0]="series",e[e.point=1]="point"}(fd||(fd={}));const Bd=".dxbl-chart-tooltip";class Ed{constructor(e){this.currentPointInfo=null,this._owner=e}onTooltipHidden(e){e.isPointerOut&&this.hideTooltip(!1)}onTooltipShown(e,t){const i=e.target;if(!i||!i.series)return;const n=D.MathUtils.generateGuid();this.currentPointInfo={chartPoint:i,x:e.x,y:e.y,id:n};t({seriesIndex:i.series.index,data:i.data,tag:i.tag,id:n})}hideTooltip(e){var t,i;e&&(null===(i=null===(t=this.currentPointInfo)||void 0===t?void 0:t.chartPoint)||void 0===i?void 0:i.series)&&this.currentPointInfo.chartPoint.clearHover();const n=this._owner.querySelector(Bd);n&&jt((()=>n.classList.remove("dxbl-visible"))),this.currentPointInfo=null}positionTooltip(){if(!this.currentPointInfo)return;const e=this.currentPointInfo.x,t=this.currentPointInfo.y,i=this._owner,n=i.getWidgetElement(),s=null==i?void 0:i.querySelector(Bd);if(!s)return;const r=s.offsetParent,o=t-T.DomUtils.getAbsolutePositionY(r);let a=e-T.DomUtils.getAbsolutePositionX(r),l=0;const A=this.getCorrectedTooltipLeft(a,s,i,n);null!==A&&(l=a-A,a=A),this.applyTooltipPosition(a,o,l,s)}getCorrectedTooltipLeft(e,t,i,n){let s=null;const r=t.getBoundingClientRect().width/2,o=n.getBoundingClientRect();if(e<r){const e=n.offsetParent,t=(null==e?void 0:e.getBoundingClientRect().left)||0;s=o.left-t+r}else{const t=(i.getBoundingClientRect().width+o.width)/2;e+r>t&&(s=t-r)}return s}applyTooltipPosition(e,t,i,n){const s=n.querySelector(".dxbl-chart-tooltip-pointer"),r=`calc(${t}px - 0.625rem)`,o=`${e}px`,a=n.classList,l=0!==i?`calc(50% + ${i}px)`:"50%";jt((function(){n.style.top=r,n.style.left=o,s.style.left=l,a.contains("dxbl-visible")||a.add("dxbl-visible")}))}}class Id{}Id.pieChartName="dxPieChart",Id.polarChartName="dxPolarChart",Id.xyChartName="dxChart";class Sd{static compareValues(e,t){return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t}get seriesIndex(){return this._seriesIndex}get pointArgument(){return this._pointArgument}get pointValue(){return this._pointValue}constructor(e,t,i){this._seriesIndex=e,this._pointArgument=t,this._pointValue=i}}class xd{get seriesIndex(){return this._seriesIndex}constructor(e){this._seriesIndex=e}}function Dd(e){return e===Id.pieChartName?new Td:new Fd}class Fd{comparePoint(e,t){return e.seriesIndex===t.seriesIndex&&Sd.compareValues(e.pointArgument,t.pointArgument)&&Sd.compareValues(e.pointValue,t.pointValue)}compareSeries(e,t){return e.seriesIndex===t.seriesIndex}}class Td extends Fd{comparePoint(e,t){return e.seriesIndex===t.seriesIndex&&Sd.compareValues(e.pointArgument,t.pointArgument)}}class Hd{constructor(){this._seriesSelectionMode=null,this._pointSelectionMode=null,this._selectedSeries=new Array,this._selectedPoints=new Array,this._hoveredPoint=null,this._hoveredSeries=null,this._compareStrategy=Dd()}get seriesSelectionMode(){return this._seriesSelectionMode}set seriesSelectionMode(e){this._seriesSelectionMode=e}get pointSelectionMode(){return this._pointSelectionMode}set pointSelectionMode(e){this._pointSelectionMode=e}setCompareStrategy(e){this._compareStrategy=e}changePointSelectionState(e,t){const i=this._compareStrategy.comparePoint,n=this._selectedPoints.findIndex((t=>i(t,e))),s=n>-1;t?s||this.appendPoint(e):s&&this._selectedPoints.splice(n,1)}changeSeriesSelectionState(e,t){const i=this._compareStrategy.compareSeries,n=this._selectedSeries.findIndex((t=>i(t,e))),s=n>-1;t?s||this.appendSeries(e):s&&this._selectedSeries.splice(n,1)}changePointHoverState(e,t){this._hoveredPoint=t?e:null}changeSeriesHoverState(e,t){this._hoveredSeries=t?e:null}restoreSelection(e){this._selectedPoints=this._selectedPoints.filter(e.selectPoint),this._selectedSeries=this._selectedSeries.filter(e.selectSeries),null===this._hoveredPoint||e.hoverPoint(this._hoveredPoint)||(this._hoveredPoint=null),null===this._hoveredSeries||e.hoverSeries(this._hoveredSeries)||(this._hoveredSeries=null)}reset(){this.resetSelectedPoints(),this.resetSelectedSeries(),this._hoveredPoint=null,this._hoveredSeries=null}isPointSingleSelectionMode(){return this.pointSelectionMode===Hd.singleSelectionModeKey}isSeriesSingleSelectionMode(){return this.seriesSelectionMode===Hd.singleSelectionModeKey}appendPoint(e){this.isPointSingleSelectionMode()&&this.resetSelectedPoints(),this._selectedPoints.push(e)}appendSeries(e){this.isSeriesSingleSelectionMode()&&this.resetSelectedSeries(),this._selectedSeries.push(e)}resetSelectedPoints(){this._selectedPoints=[]}resetSelectedSeries(){this._selectedSeries=[]}}Hd.singleSelectionModeKey="single";class Ud{constructor(e){this._eventsLocked=!1,this._disposed=!1,this._lastJob=Promise.resolve(),this._state=new Hd,this._owner=e}setSeriesSelectionMode(e){this._state.seriesSelectionMode=e}setPointSelectionMode(e){this._state.pointSelectionMode=e}setChartType(e){const t=Dd(e);this._state.setCompareStrategy(t)}dispose(){this._lastJob=this._lastJob.catch((e=>{e.message!==Ud.disposedErrorKey&&console.error(e)})),this._disposed=!0}selectSeriesAndPoint(e,t){this.pointSelectionEnabled&&t?this.togglePointSelection(t):this.toggleSeriesSelection(e)}selectLegendItem(e,t){t===fd.series?this.toggleSeriesSelection(e):this.togglePointSelection(e)}togglePointSelection(e){this.pointSelectionEnabled&&e&&this.addJobToQueue((()=>this.selectPointInternal(e)))}toggleSeriesSelection(e){this.seriesSelectionEnabled&&e&&this.addJobToQueue((()=>this.selectSeriesInternal(e)))}restoreChartSelection(e){this.addJobToQueue((()=>this.restoreChartSelectionInternal(e)))}seriesSelectionChanged(e){if(!this.eventsAreLocked()){const t=e.target;t&&this.onSelectionChanged(t.index,t.isSelected())}}pointSelectionChanged(e){if(!this.eventsAreLocked()){const t=e.target;t&&this.onSelectionChanged(t.series.index,t.series.isSelected(),t.data,t.tag,t.isSelected())}}pointHoverChanged(e){if(!this.eventsAreLocked()){const t=e.target;if(t&&void 0!==t.originalArgument&&void 0!==t.originalValue){const e=new Sd(t.series.index,t.originalArgument,t.originalValue);this._state.changePointHoverState(e,t.isHovered())}}}seriesHoverChanged(e){if(!this.eventsAreLocked()){const t=e.target;if(t){const e=new xd(t.index);this._state.changeSeriesHoverState(e,t.isHovered())}}}resetSelection(){this._state.reset()}onSelectionChanged(e,t,i=null,n=null,s=!1){this._owner.onSelectionChanged({seriesIndex:e,isSeriesSelected:t,data:i,tag:n,isPointSelected:s})}addJobToQueue(e){return this.disposed||(this._lastJob=this._lastJob.then((()=>{if(this.disposed)throw Error(Ud.disposedErrorKey);e()}))),this._lastJob}get disposed(){return this._disposed}get seriesSelectionEnabled(){return null!=this._state.seriesSelectionMode}get pointSelectionEnabled(){return null!=this._state.pointSelectionMode}eventsAreLocked(){return this._eventsLocked}lockEventsAction(e){this.eventsAreLocked()||(this._eventsLocked=!0,e(),this._eventsLocked=!1)}selectSeriesInternal(e){const t=new xd(e.index),i=!e.isSelected();this._state.changeSeriesSelectionState(t,i),i?e.select():e.clearSelection()}selectPointInternal(e){if(void 0===e.originalArgument||void 0===e.originalValue)return;const t=new Sd(e.series.index,e.originalArgument,e.originalValue),i=!e.isSelected();this._state.changePointSelectionState(t,i),i?e.select():e.clearSelection()}restoreChartSelectionInternal(e){this.lockEventsAction((()=>{const t=this.getSelectedStateRestoreActions(e);this._state.restoreSelection(t)}))}getSelectedStateRestoreActions(e){const t=t=>{const i=e.getSeriesByPos(t.seriesIndex);return(null==i?void 0:i.getPointsByArg(t.pointArgument))||[]},i=t=>e.getSeriesByPos(t.seriesIndex);return{selectPoint(e){const i=t(e);return i.forEach((e=>e.select())),(null==i?void 0:i.length)>0},selectSeries(e){const t=i(e);return null==t||t.select(),!!t},hoverPoint(e){var i;const n=null===(i=t(e))||void 0===i?void 0:i[0];return null==n||n.hover(),!!n},hoverSeries(e){const t=i(e);return null==t||t.hover(),!!t}}}}Ud.disposedErrorKey="Disposed";const Pd="dx-theme-marker",Qd="generic.light",Nd=`.${Pd} { font-family: "dx.${Qd}"; }`;let Rd=!1;class Ld{constructor(){this._dxtThemeMarkerLoaded=!1,this._customThemesCache={}}static getInstance(){return Ld.instance||(Ld.instance=new Ld),Ld.instance}async initializeWidget(e,t,i,n){return new(await this.getWidgetClass(t,i))(e,n)}async registerCustomTheme(e,t){if(!e)return;const i=e.name,n=JSON.stringify(e);if(this._customThemesCache[i]!==n){const s=await this.getVizModule();s.registerTheme(e,Qd),t&&s.refreshTheme(),this._customThemesCache[i]=n}}ensureDxtThemeMarkerExists(){if(this._dxtThemeMarkerLoaded||(this._dxtThemeMarkerLoaded=this.checkDxtThemeMarkerExists()),this._dxtThemeMarkerLoaded)return;const e=Ut();e&&(e.insertRule(Nd),this._dxtThemeMarkerLoaded=!0)}checkDxtThemeMarkerExists(){const e=document.createElement("div");e.className=Pd,window.document.body.appendChild(e);const t=window.getComputedStyle(e).fontFamily;return e.remove(),t.indexOf("dx.")>-1}async getVizModule(){return await this.getDxtModuleOrClass("viz")}async setLocalization(e){(await this.getDxtModuleOrClass("localization")).locale(e)}async getWidgetClass(e,t){return await this.getDxtModuleOrClass(t,e)}async getDxtModuleOrClass(e,t=""){return this.ensureDxtThemeMarkerExists(),Rd||await this.loadDxtScripts(),this.tryGetDxtModuleOrClass(e,t)}tryGetDxtModuleOrClass(e,t=""){const i=window.DevExpress,n=null==i?void 0:i[e];return t?null==n?void 0:n[t]:n}async loadDxtScripts(){const e=window;try{await function(e,t=100,i=1e4){return new Promise(((n,s)=>{const r=Date.now(),o=setInterval((()=>{const t=e();t?(n(t),clearInterval(o)):Date.now()-r>i&&(s(new Error("Timeout waiting for condition")),clearInterval(o))}),t)}))}((()=>{var t;return!!(null===(t=e.DevExpress)||void 0===t?void 0:t.ui)})),Rd=!0}catch(e){console.error("Failed to load Devextreme scripts")}}}const Md="dxbl-client-component-wrapper";class kd extends CustomEvent{constructor(e){super(e,{detail:new _d,bubbles:!0,composed:!0,cancelable:!0})}}class Kd extends CustomEvent{constructor(e){super(Kd.eventName,{detail:new Vd(e),bubbles:!0,composed:!0,cancelable:!0})}}Kd.eventName=`${Md}.options-loaded`;class Od extends CustomEvent{constructor(e){super(Od.eventName,{detail:new zd(e),bubbles:!0,composed:!0,cancelable:!0})}}Od.eventName=`${Md}.loading-panel-visibility-changed`;class _d{}class Vd{constructor(e){this.OptionChunkKeys=e}}class zd{constructor(e){this.Visible=e}}mt.register(Kd.eventName,(e=>e.detail)),mt.register(Od.eventName,(e=>e.detail)),le();const Wd=e=>e&&"object"==typeof e&&!Array.isArray(e);class $d extends Bs{constructor(){super(...arguments),this.optionChunks="",this._firstLoading=!0,this._loadedChunks=[]}connectedOrContentChanged(){super.connectedOrContentChanged(),this.createComponentIfRequired()}disconnectedCallback(){super.disconnectedCallback(),this.disposeComponent()}setLoadedSelector(){}get readyOnConnectedCallback(){return!1}firstUpdated(){this._firstLoading=!1}createComponentIfRequired(){if(!this.canCreateComponent())return;const e={};this.deepAssign(e,this.createInitOptions(),this.getServerOptions()),this.createComponent(e)}processSpecialOptions(e){}willUpdate(e){if(!this._firstLoading&&e.has("optionChunks")){const e=this.getServerOptions();e&&this.updateComponent(e)}}parseServerOptions(e){const t=e&&JSON.parse(e);if(!t)return;const i=Object.keys(t).filter((e=>!this._loadedChunks.includes(e))),n=i.map((e=>t[e])),s=this.deepAssign({},...n);return this.processSpecialOptions(s),this.invokeOptionsLoadedEvent(i),this._loadedChunks.push(...i),s}deepAssign(e,...t){if(!t.length)return e;const i=t.shift();if(Wd(e)&&Wd(i))for(const[t,n]of Object.entries(i))Wd(n)?(e[t]||(e[t]={}),this.deepAssign(e[t],n)):e[t]=n;return this.deepAssign(e,...t)}resetEmptyOptions(e,t,i=""){if(!t)return;const n=Object.entries(t).filter((([e])=>!this.getSkippedEmptyOptions().includes(i+e)));for(const[s,r]of n){const n=i+s;Array.isArray(r)?r.forEach(((t,i)=>{Wd(t)&&this.resetEmptyOptions(e,t,`${n}[${i}].`)})):Wd(r)&&this.resetEmptyOptions(e,r,`${n}.`),null===r&&(delete t[s],e(n))}}changeLoadingPanelVisibility(e){n.hasLoaded(this)||n.setLoaded(this),this.dispatchEvent(new Od(e))}invokeOptionsLoadedEvent(e){this.dispatchEvent(new Kd(e))}getServerOptions(){return this.parseServerOptions(this.optionChunks)}getSkippedEmptyOptions(){return[]}}C([ln({attribute:"option-chunks"})],$d.prototype,"optionChunks",void 0);const Gd={dxBarGauge:"barGauge",dxBullet:"bullet",dxChart:"chart",dxFunnel:"funnel",dxCircularGauge:"gauge",dxLinearGauge:"gauge",dxVectorMap:"map",dxPieChart:"pie",dxPolarChart:"polar",dxRangeSelector:"rangeSelector",dxSankey:"sankey",dxSparkline:"sparkline",dxTreeMap:"treeMap"};function qd(e,t,i,n){const s=Gd[t];if(!e||!s||!i)return null;null!=n||(n=`dx-${s}-blazor-theme`);const r=function(e,t){const i={},n=window.getComputedStyle(t);for(const[t,s]of Object.entries(e)){const e=n.getPropertyValue(s);if(!e)continue;Xd(t.split("."),e,i)}return i}(e,i);return Object.keys(r).length>0?{name:n,[s]:r}:null}function Xd(e,t,i){e.reduce(((i,n,s)=>{var r;return s===e.length-1?i[n]=t:null!==(r=i[n])&&void 0!==r?r:i[n]={}}),i)}const Yd="dxInstance",Jd="width",jd="height",Zd="visible",ec="locale";class tc extends $d{constructor(){super(...arguments),this._containerSizeChanged=!1}canCreateComponent(){return!this._widgetPromise&&!!this.getWidgetElement()}createComponent(e){this._widgetPromise=this.initializeWidget(e)}disposeComponent(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>this.disposeWidget(e))).catch((e=>{ui(this)||console.error(e)}))}afterWidgetResolved(e){if(this._widgetPromise)return this._widgetPromise.then(e).catch((e=>{ui(this)||console.error(e)}))}disposeWidget(e){e.dispose()}updateComponent(e){var t;Object.keys(e).length?null===(t=this._widgetPromise)||void 0===t||t.then((t=>this.updateWidgetOptions(t,e))):this._containerSizeChanged?this.onlyContainerSizeChanged():this.nonWidgetOptionChanged()}createInitOptions(){return{...this.createWidgetDefaultOptions(),...this.createWidgetHandlers()}}createWidgetDefaultOptions(){return{}}createWidgetHandlers(){return{onInitialized:e=>this.onWidgetInitialized(e),onDisposing:e=>this.onWidgetDisposing(e)}}getWidgetCustomTheme(){return qd(this.getThemeDependentOptionsDict(),this.getWidgetTypeName(),this)}getThemeDependentOptionsDict(){return{}}async initializeWidget(e){const t=this.getWidgetCustomTheme();t&&(await this.widgetLoader.registerCustomTheme(t),e.theme=t.name),this.processLocalization(e),this.resetEmptyOptions((e=>{}),e);const i=this.getWidgetElement(),n=this.getWidgetTypeName(),s=this.getWidgetModuleName();return this.widgetLoader.initializeWidget(i,n,s,e)}async updateWidgetTheme(){const e=this.getWidgetCustomTheme();e&&await this.widgetLoader.registerCustomTheme(e,!0)}get widgetLoader(){var e;return null!==(e=this._loader)&&void 0!==e||(this._loader=Ld.getInstance()),this._loader}getWidgetElement(){return this.getElementsByClassName(this.getWidgetElementClassName())[0]}getWidgetElementClassName(){return"dxbl-widget-container"}getWidgetModuleName(){return"viz"}async processLocalization(e){e[ec]&&(await this.widgetLoader.setLocalization(e[ec]),delete e[ec])}updateWidgetOptions(e,t){e.beginUpdate(),this.resetEmptyOptions((t=>{e.resetOption(t)}),t),e.option(t),e.endUpdate()}onWidgetInitialized(e){e.element[Yd]=e.component}onWidgetDisposing(e){delete e.element[Yd]}setStyleOptionForElement(e,t){this.getContainerToSetStyle().style.setProperty(e,t)}processSpecialOptions(e){const t=void 0!==e[Jd],i=void 0!==e[jd];this._containerSizeChanged=t||i,t&&(this.setStyleOptionForElement(Jd,this.getCorrectedSizeValue(e[Jd])),delete e[Jd]),i&&(this.setStyleOptionForElement(jd,this.getCorrectedSizeValue(e[jd])),delete e[jd]),void 0!==e[Zd]&&T.DomUtils.toggleClassName(this,he.Invisible,!e[Zd])}getCorrectedSizeValue(e){if(/^[0-9]+$/.test(e)){const t=parseFloat(e);return isNaN(t)?e:`${t}px`}return e}getContainerToSetStyle(){return this}onlyContainerSizeChanged(){this.changeLoadingPanelVisibility(!1)}nonWidgetOptionChanged(){}executeClientMethod(e,...t){return this._widgetPromise?this._widgetPromise.then((i=>i[e](...t))).catch((e=>console.error(e))):Promise.resolve()}}function ic(e){let t=-1;return{execute:function(){this.reset(),t=setTimeout(e,100)},reset:function(){-1!==t&&clearTimeout(t)}}}class nc{}nc.argumentAxisKey="argumentAxis",nc.commonAnnotationSettingsKey="commonAnnotationSettings",nc.commonAxisSettingsKey="commonAxisSettings",nc.commonSeriesSettingsKey="commonSeriesSettings",nc.colorKey="color",nc.constantLineStyleKey="constantLineStyle",nc.customizeLabelKey="customizeLabel",nc.customizePointKey="customizePoint",nc.customizeTextKey="customizeText",nc.customLabelTextKey="texts",nc.dataSourceKey="dataSource",nc.dataPrepareSettingsKey="dataPrepareSettings",nc.legendKey="legend",nc.seriesKey="series",nc.seriesDataKey="seriesData",nc.seriesPointsKey="points",nc.seriesTemplateKey="seriesTemplate",nc.titleKey="title",nc.tooltipKey="tooltip",nc.visualRangeKey="visualRange",nc.defaultLegendHoverMode="includePoints",nc.defaultSeriesNameField="seriesId",nc.defaultSeriesArgumentField="argument",nc.defaultSeriesValueField="value",nc.defaultOpenValueField="openValue",nc.defaultHighValueField="highValue",nc.defaultLowValueField="lowValue",nc.defaultCloseValueField="closeValue",nc.defaultRangeValue1Field="startValue",nc.defaultRangeValue2Field="endValue",nc.defaultSizeField="size",nc.seriesTypeRangeBar="rangebar",nc.seriesTypeRangeArea="rangearea",nc.seriesTypeBar="bar",nc.seriesTypeDonut="donut",nc.defaultAxisLabelOverlappingBehavior="rotate",nc.defaultAxisLabelRotationAngle=45,nc.defaultAxisLabelFontOpacity=.75,nc.defaultAnnotationType="text",nc.defaultStripLabelAlignment="auto";class sc{convert(e,t=!1){const i=t?this.createDefaultSettings():{};return this.processServerSettings(i,e),i}createDefaultSettings(){return{dataPrepareSettings:{sortingMethod:!1},adaptiveLayout:{width:0,height:0},pathModified:!1,commonSeriesSettings:this.getDefaultCommonSeriesSettings(),commonAnnotationSettings:this.getDefaultAnnotationSettings(),legend:{visible:!1,hoverMode:nc.defaultLegendHoverMode}}}processServerSettings(e,t){e&&(this.processSettingsInCommon(e,t),this.processSpecialSettings(e,t))}processSettingsInCommon(e,t){const i=this.getSpecialProcessingOptionNames();for(const n in t){Object.prototype.hasOwnProperty.call(t,n)&&!i.includes(n)&&this.addOption(e,n,t[n])}}getSpecialProcessingOptionNames(){return[nc.legendKey,nc.tooltipKey,nc.seriesTemplateKey,nc.dataSourceKey,nc.seriesKey,nc.seriesDataKey,nc.titleKey]}isSeriesDeleted(e){var t;return 0===(null===(t=e.series)||void 0===t?void 0:t.length)&&!e[nc.seriesDataKey]}processSpecialSettings(e,t){var i,n;this.processSeriesSettings(e,t.series),this.processSeriesDataIfNeeded(e,t),(null===(i=t.legend)||void 0===i?void 0:i.hoverMode)&&this.addOption(e,nc.legendKey,{hoverMode:null===(n=t.legend)||void 0===n?void 0:n.hoverMode}),void 0!==t.sorted&&this.addOption(e,nc.dataPrepareSettingsKey,{sortingMethod:t.sorted}),void 0!==t[nc.tooltipKey]&&this.addOption(e,nc.tooltipKey,function(e){var t,i;return{enabled:!1,forceEvents:!!(null===(t=e.tooltip)||void 0===t?void 0:t.enabled),location:(null===(i=e.tooltip)||void 0===i?void 0:i.location)||void 0}}(t),!0)}processSeriesDataIfNeeded(e,t){this.isSeriesDeleted(t)?e[nc.dataSourceKey]=[]:this.processSeriesData(e,t[nc.seriesDataKey])}getDefaultCommonSeriesSettings(){return{argumentField:nc.defaultSeriesArgumentField,valueField:nc.defaultSeriesValueField}}getDefaultAnnotationSettings(){return{type:nc.defaultAnnotationType}}addOption(e,t,i,n=!1){n||!(void 0!==e[t])||!("object"==typeof i)||i instanceof Array?e[t]=i:Object.assign(e[t],i)}processSeriesSettings(e,t){if(t){const i={nameField:nc.defaultSeriesNameField,customizeSeries:function(e){return t.filter((function(t){return t.seriesId===e}))[0]}};this.addOption(e,nc.seriesTemplateKey,i,!0)}}processSeriesData(e,t){if(!t)return;const i=[];let n=!1,s=!1;for(let e=0;e<t.length;e++){const r=t[e],o=r[nc.defaultSeriesNameField],a=r[nc.seriesPointsKey];null==a||a.forEach((e=>{n||(n=!!e.pointLabel),s||(s=!!e.pointAppearance);const t=this.createWidgetDataitem(o,e);i.push(t)}))}e[nc.dataSourceKey]=i,e[nc.customizeLabelKey]=n?e=>this.createWidgetPointLabelSettings(e):null,e[nc.customizePointKey]=s?e=>e.data.pointAppearance:null}createWidgetDataitem(e,t){const i=Object.assign({},t);return i[nc.defaultSeriesNameField]=e,i}createWidgetPointLabelSettings(e){const t={...e.data.pointLabel},i=t[nc.customLabelTextKey];if(i){delete t[nc.customLabelTextKey];const n=e.series,s=n.type===nc.seriesTypeRangeBar||n.type===nc.seriesTypeRangeArea;t[nc.customizeTextKey]=t=>s&&i.length>1?t.value===e.minValue?i[0]:i[1]:i[0]}return t}}class rc extends sc{getDefaultCommonSeriesSettings(){const e={openValueField:nc.defaultOpenValueField,highValueField:nc.defaultHighValueField,lowValueField:nc.defaultLowValueField,closeValueField:nc.defaultCloseValueField,rangeValue1Field:nc.defaultRangeValue1Field,rangeValue2Field:nc.defaultRangeValue2Field,sizeField:nc.defaultSizeField,type:nc.seriesTypeBar};return Object.assign({},super.getDefaultCommonSeriesSettings(),e)}}class oc extends rc{createDefaultSettings(){const e=super.createDefaultSettings();return e.commonAxisSettings=this.getDefaultCommonAxisSettings(),e.resizePanesOnZoom=!0,e}processSpecialSettings(e,t){var i,n;super.processSpecialSettings(e,t),e.argumentAxis&&(null!==(i=(n=e.argumentAxis).categories)&&void 0!==i||(n.categories=[])),this.processStripSettings(e)}processStripSettings(e){var t,i,n;const s=null!==(i=null===(t=e.argumentAxis)||void 0===t?void 0:t.strips)&&void 0!==i?i:[],r=(null!==(n=e.valueAxis)&&void 0!==n?n:[]).reduce(((e,t)=>{var i;return e.concat(null!==(i=t.strips)&&void 0!==i?i:[])}),[]);s.concat(r).forEach((e=>{const t=e.label;(null==t?void 0:t.horizontalAlignment)===nc.defaultStripLabelAlignment&&(t.horizontalAlignment=void 0),(null==t?void 0:t.verticalAlignment)===nc.defaultStripLabelAlignment&&(t.verticalAlignment=void 0)}))}getDefaultCommonAxisSettings(){return{label:{overlappingBehavior:nc.defaultAxisLabelOverlappingBehavior,rotationAngle:nc.defaultAxisLabelRotationAngle}}}}class ac extends sc{getDefaultCommonSeriesSettings(){const e=super.getDefaultCommonSeriesSettings();return e.type=nc.seriesTypeDonut,e}createDefaultSettings(){const e=super.createDefaultSettings();return e.innerRadius=0,e}}class lc extends sc{getDefaultCommonSeriesSettings(){const e=super.getDefaultCommonSeriesSettings();return e.type=nc.seriesTypeBar,e}}class Ac extends rc{processSpecialChartSettings(e,t){this.processSeriesSettings(e.chart,t.series),this.processSeriesDataIfNeeded(e,t),void 0!==t.sorted&&this.addOption(t,nc.dataPrepareSettingsKey,{sortingMethod:t.sorted})}processSeriesSettings(e,t){super.processSeriesSettings(e,t),delete e.series}processSeriesDataIfNeeded(e,t){super.processSeriesDataIfNeeded(e,t),delete e.chart.seriesData,delete e.customizeLabel,delete e.customizePoint}}class dc{constructor(){}static getInstance(){return dc.instance||(dc.instance=new dc),dc.instance}get palette(){return this.getDefaultClientComponentPalette()}getDefaultClientComponentPalette(){const e=[dc.primaryColorKey,dc.successColorKey,dc.dangerColorKey,dc.warningColorKey,dc.infoColorKey],t=window.getComputedStyle(document.body);return e.map((e=>this.getPaletteColor(e,t)))}getPaletteColor(e,t){return t.getPropertyValue(dc.dxblClientComponentPrefix+e)}}dc.dxblPrefix="--dxbl-",dc.dxblClientComponentPrefix=dc.dxblPrefix+"client-component-palette-",dc.primaryColorKey="primary",dc.successColorKey="success",dc.dangerColorKey="danger",dc.warningColorKey="warning",dc.infoColorKey="info";var cc=function(e,t){return cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},cc(e,t)};function hc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}cc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var uc=function(){return uc=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},uc.apply(this,arguments)};function pc(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))}function mc(e,t){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function gc(e,t,i){if(i||2===arguments.length)for(var n,s=0,r=t.length;s<r;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||t)}for(var Cc=function(){function e(e,t,i,n){this.left=e,this.top=t,this.width=i,this.height=n}return e.prototype.add=function(t,i,n,s){return new e(this.left+t,this.top+i,this.width+n,this.height+s)},e.fromClientRect=function(t,i){return new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(t,i){var n=Array.from(i).find((function(e){return 0!==e.width}));return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),fc=function(e,t){return Cc.fromClientRect(e,t.getBoundingClientRect())},vc=function(e){for(var t=[],i=0,n=e.length;i<n;){var s=e.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var r=e.charCodeAt(i++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),i--)}else t.push(s)}return t},bc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var n=[],s=-1,r="";++s<i;){var o=e[s];o<=65535?n.push(o):n.push(55296+((o-=65536)>>10),o%1024+56320),(s+1===i||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},wc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Bc=0;Bc<64;Bc++)yc[wc.charCodeAt(Bc)]=Bc;for(var Ec="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ic="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Sc=0;Sc<64;Sc++)Ic[Ec.charCodeAt(Sc)]=Sc;for(var xc=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},Dc=function(){function e(e,t,i,n,s,r){this.initialValue=e,this.errorValue=t,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return this.data[t=((t=this.index[e>>5])<<2)+(31&e)];if(e<=65535)return this.data[t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e)];if(e<this.highStart)return t=this.index[t=2080+(e>>11)],this.data[t=((t=this.index[t+=e>>5&63])<<2)+(31&e)];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Fc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Hc=0;Hc<64;Hc++)Tc[Fc.charCodeAt(Hc)]=Hc;var Uc=10,Pc=13,Qc=15,Nc=17,Rc=18,Lc=19,Mc=20,kc=21,Kc=22,Oc=24,_c=25,Vc=26,zc=27,Wc=28,$c=30,Gc=32,qc=33,Xc=34,Yc=35,Jc=37,jc=38,Zc=39,eh=40,th=42,ih=[9001,65288],nh="",sh="",rh=function(e,t){var i,n,s,r=function(e){var t,i,n,s,r,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),d=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)i=Ic[e.charCodeAt(t)],n=Ic[e.charCodeAt(t+1)],s=Ic[e.charCodeAt(t+2)],r=Ic[e.charCodeAt(t+3)],d[l++]=i<<2|n>>4,d[l++]=(15&n)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return A}(e),o=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=4)i.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return i}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i.push(e[n+1]<<8|e[n]);return i}(r):new Uint16Array(r),l=xc(a,12,o[4]/2),A=2===o[5]?xc(a,(24+o[4])/2):(i=o,n=Math.ceil((24+o[4])/4),i.slice?i.slice(n,s):new Uint32Array(Array.prototype.slice.call(i,n,s)));return new Dc(o[0],o[1],o[2],o[3],l,A)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),oh=[$c,36],ah=[1,2,3,5],lh=[Uc,8],Ah=[zc,Vc],dh=ah.concat(lh),ch=[jc,Zc,eh,Xc,Yc],hh=[Qc,Pc],uh=function(e,t,i,n){var s=n[i];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var r=i;r<=n.length;){if((l=n[++r])===t)return!0;if(l!==Uc)break}if(s===Uc)for(r=i;r>0;){var o=n[--r];if(Array.isArray(e)?-1!==e.indexOf(o):e===o)for(var a=i;a<=n.length;){var l;if((l=n[++a])===t)return!0;if(l!==Uc)break}if(o!==Uc)break}return!1},ph=function(e,t){for(var i=e;i>=0;){var n=t[i];if(n!==Uc)return n;i--}return 0},mh=function(e,t,i,n,s){if(0===i[n])return nh;var r=n-1;if(Array.isArray(s)&&!0===s[r])return nh;var o=r-1,a=r+1,l=t[r],A=o>=0?t[o]:0,d=t[a];if(2===l&&3===d)return nh;if(-1!==ah.indexOf(l))return"!";if(-1!==ah.indexOf(d))return nh;if(-1!==lh.indexOf(d))return nh;if(8===ph(r,t))return sh;if(11===rh.get(e[r]))return nh;if((l===Gc||l===qc)&&11===rh.get(e[a]))return nh;if(7===l||7===d)return nh;if(9===l)return nh;if(-1===[Uc,Pc,Qc].indexOf(l)&&9===d)return nh;if(-1!==[Nc,Rc,Lc,Oc,Wc].indexOf(d))return nh;if(ph(r,t)===Kc)return nh;if(uh(23,Kc,r,t))return nh;if(uh([Nc,Rc],kc,r,t))return nh;if(uh(12,12,r,t))return nh;if(l===Uc)return sh;if(23===l||23===d)return nh;if(16===d||16===l)return sh;if(-1!==[Pc,Qc,kc].indexOf(d)||14===l)return nh;if(36===A&&-1!==hh.indexOf(l))return nh;if(l===Wc&&36===d)return nh;if(d===Mc)return nh;if(-1!==oh.indexOf(d)&&l===_c||-1!==oh.indexOf(l)&&d===_c)return nh;if(l===zc&&-1!==[Jc,Gc,qc].indexOf(d)||-1!==[Jc,Gc,qc].indexOf(l)&&d===Vc)return nh;if(-1!==oh.indexOf(l)&&-1!==Ah.indexOf(d)||-1!==Ah.indexOf(l)&&-1!==oh.indexOf(d))return nh;if(-1!==[zc,Vc].indexOf(l)&&(d===_c||-1!==[Kc,Qc].indexOf(d)&&t[a+1]===_c)||-1!==[Kc,Qc].indexOf(l)&&d===_c||l===_c&&-1!==[_c,Wc,Oc].indexOf(d))return nh;if(-1!==[_c,Wc,Oc,Nc,Rc].indexOf(d))for(var c=r;c>=0;){if((h=t[c])===_c)return nh;if(-1===[Wc,Oc].indexOf(h))break;c--}if(-1!==[zc,Vc].indexOf(d))for(c=-1!==[Nc,Rc].indexOf(l)?o:r;c>=0;){var h;if((h=t[c])===_c)return nh;if(-1===[Wc,Oc].indexOf(h))break;c--}if(jc===l&&-1!==[jc,Zc,Xc,Yc].indexOf(d)||-1!==[Zc,Xc].indexOf(l)&&-1!==[Zc,eh].indexOf(d)||-1!==[eh,Yc].indexOf(l)&&d===eh)return nh;if(-1!==ch.indexOf(l)&&-1!==[Mc,Vc].indexOf(d)||-1!==ch.indexOf(d)&&l===zc)return nh;if(-1!==oh.indexOf(l)&&-1!==oh.indexOf(d))return nh;if(l===Oc&&-1!==oh.indexOf(d))return nh;if(-1!==oh.concat(_c).indexOf(l)&&d===Kc&&-1===ih.indexOf(e[a])||-1!==oh.concat(_c).indexOf(d)&&l===Rc)return nh;if(41===l&&41===d){for(var u=i[r],p=1;u>0&&41===t[--u];)p++;if(p%2!=0)return nh}return l===Gc&&d===qc?nh:sh},gh=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var i=function(e,t){void 0===t&&(t="strict");var i=[],n=[],s=[];return e.forEach((function(e,r){var o=rh.get(e);if(o>50?(s.push(!0),o-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(r),i.push(16);if(4===o||11===o){if(0===r)return n.push(r),i.push($c);var a=i[r-1];return-1===dh.indexOf(a)?(n.push(n[r-1]),i.push(a)):(n.push(r),i.push($c))}return n.push(r),31===o?i.push("strict"===t?kc:Jc):o===th||29===o?i.push($c):43===o?i.push(e>=131072&&e<=196605||e>=196608&&e<=262141?Jc:$c):void i.push(o)})),[n,i,s]}(e,t.lineBreak),n=i[0],s=i[1],r=i[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map((function(e){return-1!==[_c,$c,th].indexOf(e)?Jc:e})));var o="keep-all"===t.wordBreak?r.map((function(t,i){return t&&e[i]>=19968&&e[i]<=40959})):void 0;return[n,s,o]},Ch=function(){function e(e,t,i,n){this.codePoints=e,this.required="!"===t,this.start=i,this.end=n}return e.prototype.slice=function(){return bc.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),fh=45,vh=43,bh=-1,wh=function(e){return e>=48&&e<=57},yh=function(e){return wh(e)||e>=65&&e<=70||e>=97&&e<=102},Bh=function(e){return 10===e||9===e||32===e},Eh=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},Ih=function(e){return Eh(e)||wh(e)||e===fh},Sh=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},xh=function(e,t){return 92===e&&10!==t},Dh=function(e,t,i){return e===fh?Eh(t)||xh(t,i):!!Eh(e)||!(92!==e||!xh(e,t))},Fh=function(e,t,i){return e===vh||e===fh?!!wh(t)||46===t&&wh(i):wh(46===e?t:e)},Th=function(e){var t=0,i=1;e[t]!==vh&&e[t]!==fh||(e[t]===fh&&(i=-1),t++);for(var n=[];wh(e[t]);)n.push(e[t++]);var s=n.length?parseInt(bc.apply(void 0,n),10):0;46===e[t]&&t++;for(var r=[];wh(e[t]);)r.push(e[t++]);var o=r.length,a=o?parseInt(bc.apply(void 0,r),10):0;69!==e[t]&&101!==e[t]||t++;var l=1;e[t]!==vh&&e[t]!==fh||(e[t]===fh&&(l=-1),t++);for(var A=[];wh(e[t]);)A.push(e[t++]);var d=A.length?parseInt(bc.apply(void 0,A),10):0;return i*(s+a*Math.pow(10,-o))*Math.pow(10,l*d)},Hh={type:2},Uh={type:3},Ph={type:4},Qh={type:13},Nh={type:8},Rh={type:21},Lh={type:9},Mh={type:10},kh={type:11},Kh={type:12},Oh={type:14},_h={type:23},Vh={type:1},zh={type:25},Wh={type:24},$h={type:26},Gh={type:27},qh={type:28},Xh={type:29},Yh={type:31},Jh={type:32},jh=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(vc(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Jh;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),i=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Ih(t)||xh(i,n)){var s=Dh(t,i,n)?2:1;return{type:5,value:this.consumeName(),flags:s}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Qh;break;case 39:return this.consumeStringToken(39);case 40:return Hh;case 41:return Uh;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Oh;break;case vh:if(Fh(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return Ph;case fh:var r=e,o=this.peekCodePoint(0),a=this.peekCodePoint(1);if(Fh(r,o,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Dh(r,o,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===fh&&62===a)return this.consumeCodePoint(),this.consumeCodePoint(),Wh;break;case 46:if(Fh(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(42===l&&47===(l=this.consumeCodePoint()))return this.consumeToken();if(l===bh)return this.consumeToken()}break;case 58:return $h;case 59:return Gh;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===fh&&this.peekCodePoint(2)===fh)return this.consumeCodePoint(),this.consumeCodePoint(),zh;break;case 64:var A=this.peekCodePoint(0),d=this.peekCodePoint(1),c=this.peekCodePoint(2);if(Dh(A,d,c))return{type:7,value:this.consumeName()};break;case 91:return qh;case 92:if(xh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return Xh;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Nh;break;case 123:return kh;case 125:return Kh;case 117:case 85:var h=this.peekCodePoint(0),u=this.peekCodePoint(1);return h!==vh||!yh(u)&&63!==u||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Lh;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Rh;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Mh;break;case bh:return Jh}return Bh(e)?(this.consumeWhiteSpace(),Yh):wh(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Eh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:bc(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();yh(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var i=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),i=!0;if(i)return{type:30,start:parseInt(bc.apply(void 0,e.map((function(e){return 63===e?48:e}))),16),end:parseInt(bc.apply(void 0,e.map((function(e){return 63===e?70:e}))),16)};var n=parseInt(bc.apply(void 0,e),16);if(this.peekCodePoint(0)===fh&&yh(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];yh(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:n,end:parseInt(bc.apply(void 0,s),16)}}return{type:30,start:n,end:n}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===bh)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var i=this.consumeStringToken(this.consumeCodePoint());return 0===i.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===bh||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),_h)}for(;;){var n=this.consumeCodePoint();if(n===bh||41===n)return{type:22,value:bc.apply(void 0,e)};if(Bh(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===bh||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:bc.apply(void 0,e)}):(this.consumeBadUrlRemnants(),_h);if(34===n||39===n||40===n||Sh(n))return this.consumeBadUrlRemnants(),_h;if(92===n){if(!xh(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),_h;e.push(this.consumeEscapedCodePoint())}else e.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;Bh(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===bh)return;xh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var i=Math.min(5e4,e);t+=bc.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",i=0;;){var n=this._value[i];if(n===bh||void 0===n||n===e)return{type:0,value:t+=this.consumeStringSlice(i)};if(10===n)return this._value.splice(0,i),Vh;if(92===n){var s=this._value[i+1];s!==bh&&void 0!==s&&(10===s?(t+=this.consumeStringSlice(i),i=-1,this._value.shift()):xh(n,s)&&(t+=this.consumeStringSlice(i),t+=bc(this.consumeEscapedCodePoint()),i=-1))}i++}},e.prototype.consumeNumber=function(){var e=[],t=4,i=this.peekCodePoint(0);for(i!==vh&&i!==fh||e.push(this.consumeCodePoint());wh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());i=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===i&&wh(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;wh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());i=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((69===i||101===i)&&((n===vh||n===fh)&&wh(s)||wh(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;wh(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Th(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],i=e[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),r=this.peekCodePoint(2);return Dh(n,s,r)?{type:15,number:t,flags:i,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:t,flags:i}):{type:17,number:t,flags:i}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(yh(e)){for(var t=bc(e);yh(this.peekCodePoint(0))&&t.length<6;)t+=bc(this.consumeCodePoint());Bh(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(t,16);return 0===i||function(e){return e>=55296&&e<=57343}(i)||i>1114111?65533:i}return e===bh?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(Ih(t))e+=bc(t);else{if(!xh(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=bc(this.consumeEscapedCodePoint())}}},e}(),Zh=function(){function e(e){this._tokens=e}return e.create=function(t){var i=new jh;return i.write(t),new e(i.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},i=this.consumeToken();;){if(32===i.type||lu(i,e))return t;this.reconsumeToken(i),t.values.push(this.consumeComponentValue()),i=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var i=this.consumeToken();if(32===i.type||3===i.type)return t;this.reconsumeToken(i),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?Jh:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),eu=function(e){return 15===e.type},tu=function(e){return 17===e.type},iu=function(e){return 20===e.type},nu=function(e){return 0===e.type},su=function(e,t){return iu(e)&&e.value===t},ru=function(e){return 31!==e.type},ou=function(e){return 31!==e.type&&4!==e.type},au=function(e){var t=[],i=[];return e.forEach((function(e){if(4===e.type){if(0===i.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(i),void(i=[])}31!==e.type&&i.push(e)})),i.length&&t.push(i),t},lu=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},Au=function(e){return 17===e.type||15===e.type},du=function(e){return 16===e.type||Au(e)},cu=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},hu={type:17,number:0,flags:4},uu={type:16,number:50,flags:4},pu={type:16,number:100,flags:4},mu=function(e,t,i){var n=e[0],s=e[1];return[gu(n,t),gu(void 0!==s?s:n,i)]},gu=function(e,t){if(16===e.type)return e.number/100*t;if(eu(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},Cu="grad",fu="turn",vu=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case Cu:return Math.PI/200*t.number;case"rad":return t.number;case fu:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},bu=function(e){return 15===e.type&&("deg"===e.unit||e.unit===Cu||"rad"===e.unit||e.unit===fu)},wu=function(e){switch(e.filter(iu).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[hu,hu];case"to top":case"bottom":return yu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[hu,pu];case"to right":case"left":return yu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[pu,pu];case"to bottom":case"top":return yu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[pu,hu];case"to left":case"right":return yu(270)}return 0},yu=function(e){return Math.PI*e/180},Bu=function(e,t){if(18===t.type){var i=Hu[t.name];if(void 0===i)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return i(e,t.values)}if(5===t.type){if(3===t.value.length){var n=t.value.substring(0,1),s=t.value.substring(1,2),r=t.value.substring(2,3);return Su(parseInt(n+n,16),parseInt(s+s,16),parseInt(r+r,16),1)}if(4===t.value.length){n=t.value.substring(0,1),s=t.value.substring(1,2),r=t.value.substring(2,3);var o=t.value.substring(3,4);return Su(parseInt(n+n,16),parseInt(s+s,16),parseInt(r+r,16),parseInt(o+o,16)/255)}if(6===t.value.length){n=t.value.substring(0,2),s=t.value.substring(2,4),r=t.value.substring(4,6);return Su(parseInt(n,16),parseInt(s,16),parseInt(r,16),1)}if(8===t.value.length){n=t.value.substring(0,2),s=t.value.substring(2,4),r=t.value.substring(4,6),o=t.value.substring(6,8);return Su(parseInt(n,16),parseInt(s,16),parseInt(r,16),parseInt(o,16)/255)}}if(20===t.type){var a=Pu[t.value.toUpperCase()];if(void 0!==a)return a}return Pu.TRANSPARENT},Eu=function(e){return 0==(255&e)},Iu=function(e){var t=255&e,i=255&e>>8,n=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+n+","+i+","+t/255+")":"rgb("+s+","+n+","+i+")"},Su=function(e,t,i,n){return(e<<24|t<<16|i<<8|Math.round(255*n)<<0)>>>0},xu=function(e,t){if(17===e.type)return e.number;if(16===e.type){var i=3===t?1:255;return 3===t?e.number/100*i:Math.round(e.number/100*i)}return 0},Du=function(e,t){var i=t.filter(ou);if(3===i.length){var n=i.map(xu);return Su(n[0],n[1],n[2],1)}if(4===i.length){var s=i.map(xu);return Su(s[0],s[1],s[2],s[3])}return 0};function Fu(e,t,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(t-e)*i*6+e:i<.5?t:i<2/3?6*(t-e)*(2/3-i)+e:e}var Tu=function(e,t){var i=t.filter(ou),n=i[0],s=i[1],r=i[2],o=i[3],a=(17===n.type?yu(n.number):vu(e,n))/(2*Math.PI),l=du(s)?s.number/100:0,A=du(r)?r.number/100:0,d=void 0!==o&&du(o)?gu(o,1):1;if(0===l)return Su(255*A,255*A,255*A,1);var c=A<=.5?A*(l+1):A+l-A*l,h=2*A-c,u=Fu(h,c,a+1/3),p=Fu(h,c,a),m=Fu(h,c,a-1/3);return Su(255*u,255*p,255*m,d)},Hu={hsl:Tu,hsla:Tu,rgb:Du,rgba:Du},Uu=function(e,t){return Bu(e,Zh.create(t).parseComponentValue())},Pu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Qu={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(iu(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Nu={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ru=function(e,t){var i=Bu(e,t[0]),n=t[1];return n&&du(n)?{color:i,stop:n}:{color:i,stop:null}},Lu=function(e,t){var i=e[0],n=e[e.length-1];null===i.stop&&(i.stop=hu),null===n.stop&&(n.stop=pu);for(var s=[],r=0,o=0;o<e.length;o++){var a=e[o].stop;if(null!==a){var l=gu(a,t);s.push(l>r?l:r),r=l}else s.push(null)}var A=null;for(o=0;o<s.length;o++){var d=s[o];if(null===d)null===A&&(A=o);else if(null!==A){for(var c=o-A,h=(d-s[A-1])/(c+1),u=1;u<=c;u++)s[A+u-1]=h*u;A=null}}return e.map((function(e,i){return{color:e.color,stop:Math.max(Math.min(1,s[i]/t),0)}}))},Mu=function(e,t,i){var n="number"==typeof e?e:function(e,t,i){var n=t/2,s=i/2,r=gu(e[0],t)-n,o=s-gu(e[1],i);return(Math.atan2(o,r)+2*Math.PI)%(2*Math.PI)}(e,t,i),s=Math.abs(t*Math.sin(n))+Math.abs(i*Math.cos(n)),r=t/2,o=i/2,a=s/2,l=Math.sin(n-Math.PI/2)*a,A=Math.cos(n-Math.PI/2)*a;return[s,r-A,r+A,o-l,o+l]},ku=function(e,t){return Math.sqrt(e*e+t*t)},Ku=function(e,t,i,n,s){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var r=ku(i-t[0],n-t[1]);return(s?r<e.optimumDistance:r>e.optimumDistance)?{optimumCorner:t,optimumDistance:r}:e}),{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Ou=function(e,t){var i=yu(180),n=[];return au(t).forEach((function(t,s){if(0===s){var r=t[0];if(20===r.type&&-1!==["top","left","right","bottom"].indexOf(r.value))return void(i=wu(t));if(bu(r))return void(i=(vu(e,r)+yu(270))%yu(360))}var o=Ru(e,t);n.push(o)})),{angle:i,stops:n,type:1}},_u="closest-side",Vu="farthest-side",zu="closest-corner",Wu="farthest-corner",$u="circle",Gu="ellipse",qu="cover",Xu="contain",Yu=function(e,t){var i=0,n=3,s=[],r=[];return au(t).forEach((function(t,o){var a=!0;if(0===o?a=t.reduce((function(e,t){if(iu(t))switch(t.value){case"center":return r.push(uu),!1;case"top":case"left":return r.push(hu),!1;case"right":case"bottom":return r.push(pu),!1}else if(du(t)||Au(t))return r.push(t),!1;return e}),a):1===o&&(a=t.reduce((function(e,t){if(iu(t))switch(t.value){case $u:return i=0,!1;case Gu:return i=1,!1;case Xu:case _u:return n=0,!1;case Vu:return n=1,!1;case zu:return n=2,!1;case qu:case Wu:return n=3,!1}else if(Au(t)||du(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),a)),a){var l=Ru(e,t);s.push(l)}})),{size:n,shape:i,stops:s,position:r,type:2}},Ju=function(e,t){if(22===t.type){var i={url:t.value,type:0};return e.cache.addImage(t.value),i}if(18===t.type){var n=Zu[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)};var ju,Zu={"linear-gradient":function(e,t){var i=yu(180),n=[];return au(t).forEach((function(t,s){if(0===s){var r=t[0];if(20===r.type&&"to"===r.value)return void(i=wu(t));if(bu(r))return void(i=vu(e,r))}var o=Ru(e,t);n.push(o)})),{angle:i,stops:n,type:1}},"-moz-linear-gradient":Ou,"-ms-linear-gradient":Ou,"-o-linear-gradient":Ou,"-webkit-linear-gradient":Ou,"radial-gradient":function(e,t){var i=0,n=3,s=[],r=[];return au(t).forEach((function(t,o){var a=!0;if(0===o){var l=!1;a=t.reduce((function(e,t){if(l)if(iu(t))switch(t.value){case"center":return r.push(uu),e;case"top":case"left":return r.push(hu),e;case"right":case"bottom":return r.push(pu),e}else(du(t)||Au(t))&&r.push(t);else if(iu(t))switch(t.value){case $u:return i=0,!1;case Gu:return i=1,!1;case"at":return l=!0,!1;case _u:return n=0,!1;case qu:case Vu:return n=1,!1;case Xu:case zu:return n=2,!1;case Wu:return n=3,!1}else if(Au(t)||du(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),a)}if(a){var A=Ru(e,t);s.push(A)}})),{size:n,shape:i,stops:s,position:r,type:2}},"-moz-radial-gradient":Yu,"-ms-radial-gradient":Yu,"-o-radial-gradient":Yu,"-webkit-radial-gradient":Yu,"-webkit-gradient":function(e,t){var i=yu(180),n=[],s=1;return au(t).forEach((function(t,i){var r=t[0];if(0===i){if(iu(r)&&"linear"===r.value)return void(s=1);if(iu(r)&&"radial"===r.value)return void(s=2)}if(18===r.type)if("from"===r.name){var o=Bu(e,r.values[0]);n.push({stop:hu,color:o})}else if("to"===r.name){o=Bu(e,r.values[0]);n.push({stop:pu,color:o})}else if("color-stop"===r.name){var a=r.values.filter(ou);if(2===a.length){o=Bu(e,a[1]);var l=a[0];tu(l)&&n.push({stop:{type:16,number:100*l.number,flags:l.flags},color:o})}}})),1===s?{angle:(i+yu(180))%yu(360),stops:n,type:s}:{size:3,shape:0,stops:n,position:[],type:s}}},ep={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var i=t[0];return 20===i.type&&"none"===i.value?[]:t.filter((function(e){return ou(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!Zu[e.name])}(e)})).map((function(t){return Ju(e,t)}))}},tp={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(iu(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},ip={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return au(t).map((function(e){return e.filter(du)})).map(cu)}},np={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return au(t).map((function(e){return e.filter(iu).map((function(e){return e.value})).join(" ")})).map(sp)}},sp=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(ju||(ju={}));var rp,op={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return au(t).map((function(e){return e.filter(ap)}))}},ap=function(e){return iu(e)||du(e)},lp=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Ap=lp("top"),dp=lp("right"),cp=lp("bottom"),hp=lp("left"),up=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return cu(t.filter(du))}}},pp=up("top-left"),mp=up("top-right"),gp=up("bottom-right"),Cp=up("bottom-left"),fp=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},vp=fp("top"),bp=fp("right"),wp=fp("bottom"),yp=fp("left"),Bp=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return eu(t)?t.number:0}}},Ep=Bp("top"),Ip=Bp("right"),Sp=Bp("bottom"),xp=Bp("left"),Dp={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Fp={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},Tp={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(iu).reduce((function(e,t){return e|Hp(t.value)}),0)}},Hp=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Up={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Pp={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(rp||(rp={}));var Qp,Np={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?rp.STRICT:rp.NORMAL}},Rp={name:"line-height",initialValue:"normal",prefix:!1,type:4},Lp=function(e,t){return iu(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:du(e)?gu(e,t):t},Mp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Ju(e,t)}},kp={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Kp={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Op=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},_p=Op("top"),Vp=Op("right"),zp=Op("bottom"),Wp=Op("left"),$p={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(iu).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Gp={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},qp=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Xp=qp("top"),Yp=qp("right"),Jp=qp("bottom"),jp=qp("left"),Zp={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},em={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},tm={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&su(t[0],"none")?[]:au(t).map((function(t){for(var i={color:Pu.TRANSPARENT,offsetX:hu,offsetY:hu,blur:hu},n=0,s=0;s<t.length;s++){var r=t[s];Au(r)?(0===n?i.offsetX=r:1===n?i.offsetY=r:i.blur=r,n++):i.color=Bu(e,r)}return i}))}},im={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},nm={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var i=sm[t.name];if(void 0===i)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return i(t.values)}return null}},sm={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 16===t.length?[t[0],t[1],t[4],t[5],t[12],t[13]]:null}},rm={type:16,number:50,flags:4},om=[rm,rm],am={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var i=t.filter(du);return 2!==i.length?om:[i[0],i[1]]}},lm={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(Qp||(Qp={}));for(var Am={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Qp.BREAK_ALL;case"keep-all":return Qp.KEEP_ALL;default:return Qp.NORMAL}}},dm={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(tu(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},cm=function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")},hm={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return tu(t)?t.number:1}},um={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pm={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(iu).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},mm={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var i=[],n=[];return t.forEach((function(e){switch(e.type){case 20:case 0:i.push(e.value);break;case 17:i.push(e.number.toString());break;case 4:n.push(i.join(" ")),i.length=0}})),i.length&&n.push(i.join(" ")),n.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},gm={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Cm={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return tu(t)?t.number:iu(t)&&"bold"===t.value?700:400}},fm={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(iu).map((function(e){return e.value}))}},vm={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},bm=function(e,t){return 0!=(e&t)},wm={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var i=t[0];return 20===i.type&&"none"===i.value?[]:t}},ym={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var i=t[0];if(20===i.type&&"none"===i.value)return null;for(var n=[],s=t.filter(ru),r=0;r<s.length;r++){var o=s[r],a=s[r+1];if(20===o.type){var l=a&&tu(a)?a.number:1;n.push({counter:o.value,increment:l})}}return n}},Bm={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var i=[],n=t.filter(ru),s=0;s<n.length;s++){var r=n[s],o=n[s+1];if(iu(r)&&"none"!==r.value){var a=o&&tu(o)?o.number:0;i.push({counter:r.value,reset:a})}}return i}},Em={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(eu).map((function(t){return cm(e,t)}))}},Im={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var i=t[0];if(20===i.type&&"none"===i.value)return null;var n=[],s=t.filter(nu);if(s.length%2!=0)return null;for(var r=0;r<s.length;r+=2){n.push({open:s[r].value,close:s[r+1].value})}return n}},Sm=function(e,t,i){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?i?n.open:n.close:""},xm={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&su(t[0],"none")?[]:au(t).map((function(t){for(var i={color:255,offsetX:hu,offsetY:hu,blur:hu,spread:hu,inset:!1},n=0,s=0;s<t.length;s++){var r=t[s];su(r,"inset")?i.inset=!0:Au(r)?(0===n?i.offsetX=r:1===n?i.offsetY=r:2===n?i.blur=r:i.spread=r,n++):i.color=Bu(e,r)}return i}))}},Dm={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var i=[];return t.filter(iu).forEach((function(e){switch(e.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2)}})),[0,1,2].forEach((function(e){-1===i.indexOf(e)&&i.push(e)})),i}},Fm={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Tm={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return eu(t)?t.number:0}},Hm=function(){function e(e,t){var i,n;this.animationDuration=Qm(e,Em,t.animationDuration),this.backgroundClip=Qm(e,Qu,t.backgroundClip),this.backgroundColor=Qm(e,Nu,t.backgroundColor),this.backgroundImage=Qm(e,ep,t.backgroundImage),this.backgroundOrigin=Qm(e,tp,t.backgroundOrigin),this.backgroundPosition=Qm(e,ip,t.backgroundPosition),this.backgroundRepeat=Qm(e,np,t.backgroundRepeat),this.backgroundSize=Qm(e,op,t.backgroundSize),this.borderTopColor=Qm(e,Ap,t.borderTopColor),this.borderRightColor=Qm(e,dp,t.borderRightColor),this.borderBottomColor=Qm(e,cp,t.borderBottomColor),this.borderLeftColor=Qm(e,hp,t.borderLeftColor),this.borderTopLeftRadius=Qm(e,pp,t.borderTopLeftRadius),this.borderTopRightRadius=Qm(e,mp,t.borderTopRightRadius),this.borderBottomRightRadius=Qm(e,gp,t.borderBottomRightRadius),this.borderBottomLeftRadius=Qm(e,Cp,t.borderBottomLeftRadius),this.borderTopStyle=Qm(e,vp,t.borderTopStyle),this.borderRightStyle=Qm(e,bp,t.borderRightStyle),this.borderBottomStyle=Qm(e,wp,t.borderBottomStyle),this.borderLeftStyle=Qm(e,yp,t.borderLeftStyle),this.borderTopWidth=Qm(e,Ep,t.borderTopWidth),this.borderRightWidth=Qm(e,Ip,t.borderRightWidth),this.borderBottomWidth=Qm(e,Sp,t.borderBottomWidth),this.borderLeftWidth=Qm(e,xp,t.borderLeftWidth),this.boxShadow=Qm(e,xm,t.boxShadow),this.color=Qm(e,Dp,t.color),this.direction=Qm(e,Fp,t.direction),this.display=Qm(e,Tp,t.display),this.float=Qm(e,Up,t.cssFloat),this.fontFamily=Qm(e,mm,t.fontFamily),this.fontSize=Qm(e,gm,t.fontSize),this.fontStyle=Qm(e,vm,t.fontStyle),this.fontVariant=Qm(e,fm,t.fontVariant),this.fontWeight=Qm(e,Cm,t.fontWeight),this.letterSpacing=Qm(e,Pp,t.letterSpacing),this.lineBreak=Qm(e,Np,t.lineBreak),this.lineHeight=Qm(e,Rp,t.lineHeight),this.listStyleImage=Qm(e,Mp,t.listStyleImage),this.listStylePosition=Qm(e,kp,t.listStylePosition),this.listStyleType=Qm(e,Kp,t.listStyleType),this.marginTop=Qm(e,_p,t.marginTop),this.marginRight=Qm(e,Vp,t.marginRight),this.marginBottom=Qm(e,zp,t.marginBottom),this.marginLeft=Qm(e,Wp,t.marginLeft),this.opacity=Qm(e,hm,t.opacity);var s=Qm(e,$p,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Qm(e,Gp,t.overflowWrap),this.paddingTop=Qm(e,Xp,t.paddingTop),this.paddingRight=Qm(e,Yp,t.paddingRight),this.paddingBottom=Qm(e,Jp,t.paddingBottom),this.paddingLeft=Qm(e,jp,t.paddingLeft),this.paintOrder=Qm(e,Dm,t.paintOrder),this.position=Qm(e,em,t.position),this.textAlign=Qm(e,Zp,t.textAlign),this.textDecorationColor=Qm(e,um,null!==(i=t.textDecorationColor)&&void 0!==i?i:t.color),this.textDecorationLine=Qm(e,pm,null!==(n=t.textDecorationLine)&&void 0!==n?n:t.textDecoration),this.textShadow=Qm(e,tm,t.textShadow),this.textTransform=Qm(e,im,t.textTransform),this.transform=Qm(e,nm,t.transform),this.transformOrigin=Qm(e,am,t.transformOrigin),this.visibility=Qm(e,lm,t.visibility),this.webkitTextStrokeColor=Qm(e,Fm,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Qm(e,Tm,t.webkitTextStrokeWidth),this.wordBreak=Qm(e,Am,t.wordBreak),this.zIndex=Qm(e,dm,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return Eu(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return bm(this.display,4)||bm(this.display,33554432)||bm(this.display,268435456)||bm(this.display,536870912)||bm(this.display,67108864)||bm(this.display,134217728)},e}(),Um=function(e,t){this.content=Qm(e,wm,t.content),this.quotes=Qm(e,Im,t.quotes)},Pm=function(e,t){this.counterIncrement=Qm(e,ym,t.counterIncrement),this.counterReset=Qm(e,Bm,t.counterReset)},Qm=function(e,t,i){var n=new jh,s=null!=i?i.toString():t.initialValue;n.write(s);var r=new Zh(n.read());switch(t.type){case 2:var o=r.parseComponentValue();return t.parse(e,iu(o)?o.value:t.initialValue);case 0:return t.parse(e,r.parseComponentValue());case 1:return t.parse(e,r.parseComponentValues());case 4:return r.parseComponentValue();case 3:switch(t.format){case"angle":return vu(e,r.parseComponentValue());case"color":return Bu(e,r.parseComponentValue());case"image":return Ju(e,r.parseComponentValue());case"length":var a=r.parseComponentValue();return Au(a)?a:hu;case"length-percentage":var l=r.parseComponentValue();return du(l)?l:hu;case"time":return cm(e,r.parseComponentValue())}}},Nm=function(e,t){var i=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===i||t===i},Rm=function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Nm(t,3),this.styles=new Hm(e,window.getComputedStyle(t,null)),Kg(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=fc(this.context,t),Nm(t,4)&&(this.flags|=16)},Lm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mm="undefined"==typeof Uint8Array?[]:new Uint8Array(256),km=0;km<64;km++)Mm[Lm.charCodeAt(km)]=km;for(var Km=function(e,t,i){return e.slice?e.slice(t,i):new Uint16Array(Array.prototype.slice.call(e,t,i))},Om=function(){function e(e,t,i,n,s,r){this.initialValue=e,this.errorValue=t,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return this.data[t=((t=this.index[e>>5])<<2)+(31&e)];if(e<=65535)return this.data[t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e)];if(e<this.highStart)return t=this.index[t=2080+(e>>11)],this.data[t=((t=this.index[t+=e>>5&63])<<2)+(31&e)];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),_m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vm="undefined"==typeof Uint8Array?[]:new Uint8Array(256),zm=0;zm<64;zm++)Vm[_m.charCodeAt(zm)]=zm;var Wm,$m=8,Gm=9,qm=11,Xm=12,Ym=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var n=[],s=-1,r="";++s<i;){var o=e[s];o<=65535?n.push(o):n.push(55296+((o-=65536)>>10),o%1024+56320),(s+1===i||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},Jm=function(e,t){var i,n,s,r=function(e){var t,i,n,s,r,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),d=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<a;t+=4)i=Mm[e.charCodeAt(t)],n=Mm[e.charCodeAt(t+1)],s=Mm[e.charCodeAt(t+2)],r=Mm[e.charCodeAt(t+3)],d[l++]=i<<2|n>>4,d[l++]=(15&n)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return A}(e),o=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=4)i.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return i}(r):new Uint32Array(r),a=Array.isArray(r)?function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i.push(e[n+1]<<8|e[n]);return i}(r):new Uint16Array(r),l=Km(a,12,o[4]/2),A=2===o[5]?Km(a,(24+o[4])/2):(i=o,n=Math.ceil((24+o[4])/4),i.slice?i.slice(n,s):new Uint32Array(Array.prototype.slice.call(i,n,s)));return new Om(o[0],o[1],o[2],o[3],l,A)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),jm="",Zm=function(e){return Jm.get(e)},eg=function(e,t,i){var n=i-2,s=t[n],r=t[i-1],o=t[i];if(2===r&&3===o)return jm;if(2===r||3===r||4===r)return"";if(2===o||3===o||4===o)return"";if(r===$m&&-1!==[$m,Gm,qm,Xm].indexOf(o))return jm;if(!(r!==qm&&r!==Gm||o!==Gm&&10!==o))return jm;if((r===Xm||10===r)&&10===o)return jm;if(13===o||5===o)return jm;if(7===o)return jm;if(1===r)return jm;if(13===r&&14===o){for(;5===s;)s=t[--n];if(14===s)return jm}if(15===r&&15===o){for(var a=0;15===s;)a++,s=t[--n];if(a%2==0)return jm}return""},tg=function(e){var t=function(e){for(var t=[],i=0,n=e.length;i<n;){var s=e.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var r=e.charCodeAt(i++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),i--)}else t.push(s)}return t}(e),i=t.length,n=0,s=0,r=t.map(Zm);return{next:function(){if(n>=i)return{done:!0,value:null};for(var e=jm;n<i&&(e=eg(0,r,++n))===jm;);if(e!==jm||n===i){var o=Ym.apply(null,t.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},ig=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},ng=function(e,t,i,n,s){var r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(s),o},sg=function(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){return t(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},rg={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height="123px",i.style.display="block",e.body.appendChild(i),t.selectNode(i);var n=t.getBoundingClientRect(),s=Math.round(n.height);if(e.body.removeChild(i),123===s)return!0}}return!1}(document);return Object.defineProperty(rg,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=rg.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var i=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=t.firstChild,s=vc(n.data).map((function(e){return bc(e)})),r=0,o={},a=s.every((function(e,t){i.setStart(n,r),i.setEnd(n,r+e.length);var s=i.getBoundingClientRect();r+=e.length;var a=s.x>o.x||s.y>o.y;return o=s,0===t||a}));return e.body.removeChild(t),a}(document);return Object.defineProperty(rg,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,i=e.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),i.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(rg,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),i=100;t.width=i,t.height=i;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var s=new Image,r=t.toDataURL();s.src=r;var o=ng(i,i,0,0,s);return n.fillStyle="red",n.fillRect(0,0,i,i),sg(o).then((function(t){n.drawImage(t,0,0);var s=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var o=e.createElement("div");return o.style.backgroundImage="url("+r+")",o.style.height=i+"px",ig(s)?sg(ng(i,i,0,0,o)):Promise.reject(!1)})).then((function(e){return n.drawImage(e,0,0),ig(n.getImageData(0,0,i,i).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(rg,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(rg,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(rg,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(rg,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(rg,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},og=function(e,t){this.text=e,this.bounds=t},ag=function(e,t){var i=t.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(n,t);var r=fc(e,n);return n.firstChild&&s.replaceChild(n.firstChild,n),r}}return Cc.EMPTY},lg=function(e,t,i){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(e,t),s.setEnd(e,t+i),s},Ag=function(e){if(rg.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return function(e){for(var t,i=tg(e),n=[];!(t=i.next()).done;)t.value&&n.push(t.value.slice());return n}(e)},dg=function(e,t){return 0!==t.letterSpacing?Ag(e):function(e,t){if(rg.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map((function(e){return e.segment}))}return hg(e,t)}(e,t)},cg=[32,160,4961,65792,65793,4153,4241],hg=function(e,t){for(var i,n=function(e,t){var i=vc(e),n=gh(i,t),s=n[0],r=n[1],o=n[2],a=i.length,l=0,A=0;return{next:function(){if(A>=a)return{done:!0,value:null};for(var e=nh;A<a&&(e=mh(i,r,s,++A,o))===nh;);if(e!==nh||A===a){var t=new Ch(i,e,l,A);return l=A,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],r=function(){if(i.value){var e=i.value.slice(),t=vc(e),n="";t.forEach((function(e){-1===cg.indexOf(e)?n+=bc(e):(n.length&&s.push(n),s.push(bc(e)),n="")})),n.length&&s.push(n)}};!(i=n.next()).done;)r();return s},ug=function(e,t,i){this.text=pg(t.data,i.textTransform),this.textBounds=function(e,t,i,n){var s=dg(t,i),r=[],o=0;return s.forEach((function(t){if(i.textDecorationLine.length||t.trim().length>0)if(rg.SUPPORT_RANGE_BOUNDS){var s=lg(n,o,t.length).getClientRects();if(s.length>1){var a=Ag(t),l=0;a.forEach((function(t){r.push(new og(t,Cc.fromDOMRectList(e,lg(n,l+o,t.length).getClientRects()))),l+=t.length}))}else r.push(new og(t,Cc.fromDOMRectList(e,s)))}else{var A=n.splitText(t.length);r.push(new og(t,ag(e,n))),n=A}else rg.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));o+=t.length})),r}(e,this.text,i,t)},pg=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(mg,gg);case 2:return e.toUpperCase();default:return e}},mg=/(^|\s|:|-|\(|\))([a-z])/g,gg=function(e,t,i){return e.length>0?t+i.toUpperCase():e},Cg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.src=i.currentSrc||i.src,n.intrinsicWidth=i.naturalWidth,n.intrinsicHeight=i.naturalHeight,n.context.cache.addImage(n.src),n}return hc(t,e),t}(Rm),fg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.canvas=i,n.intrinsicWidth=i.width,n.intrinsicHeight=i.height,n}return hc(t,e),t}(Rm),vg=function(e){function t(t,i){var n=e.call(this,t,i)||this,s=new XMLSerializer,r=fc(t,i);return i.setAttribute("width",r.width+"px"),i.setAttribute("height",r.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(i)),n.intrinsicWidth=i.width.baseVal.value,n.intrinsicHeight=i.height.baseVal.value,n.context.cache.addImage(n.svg),n}return hc(t,e),t}(Rm),bg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.value=i.value,n}return hc(t,e),t}(Rm),wg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.start=i.start,n.reversed="boolean"==typeof i.reversed&&!0===i.reversed,n}return hc(t,e),t}(Rm),yg=[{type:15,flags:0,unit:"px",number:3}],Bg=[{type:16,flags:0,number:50}],Eg="checkbox",Ig="radio",Sg="password",xg=707406591,Dg=function(e){function t(t,i){var n,s,r,o=e.call(this,t,i)||this;switch(o.type=i.type.toLowerCase(),o.checked=i.checked,o.value=0===(s=(n=i).type===Sg?new Array(n.value.length+1).join(""):n.value).length?n.placeholder||"":s,o.type!==Eg&&o.type!==Ig||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=(r=o.bounds).width>r.height?new Cc(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Cc(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r),o.type){case Eg:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=yg;break;case Ig:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=Bg}return o}return hc(t,e),t}(Rm),Fg=function(e){function t(t,i){var n=e.call(this,t,i)||this,s=i.options[i.selectedIndex||0];return n.value=s&&s.text||"",n}return hc(t,e),t}(Rm),Tg=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.value=i.value,n}return hc(t,e),t}(Rm),Hg=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.src=i.src,n.width=parseInt(i.width,10)||0,n.height=parseInt(i.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){n.tree=Ng(t,i.contentWindow.document.documentElement);var s=i.contentWindow.document.documentElement?Uu(t,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):Pu.TRANSPARENT,r=i.contentWindow.document.body?Uu(t,getComputedStyle(i.contentWindow.document.body).backgroundColor):Pu.TRANSPARENT;n.backgroundColor=Eu(s)?Eu(r)?n.styles.backgroundColor:r:s}}catch(e){}return n}return hc(t,e),t}(Rm),Ug=["OL","UL","MENU"],Pg=function(e,t,i,n){for(var s=t.firstChild,r=void 0;s;s=r)if(r=s.nextSibling,Mg(s)&&s.data.trim().length>0)i.textNodes.push(new ug(e,s,i.styles));else if(kg(s))if(eC(s)&&s.assignedNodes)s.assignedNodes().forEach((function(t){return Pg(e,t,i,n)}));else{var o=Qg(e,s);o.styles.isVisible()&&(Rg(s,o,n)?o.flags|=4:Lg(o.styles)&&(o.flags|=2),-1!==Ug.indexOf(s.tagName)&&(o.flags|=8),i.elements.push(o),s.shadowRoot?Pg(e,s.shadowRoot,o,n):jg(s)||Wg(s)||Zg(s)||Pg(e,s,o,n))}},Qg=function(e,t){return Xg(t)?new Cg(e,t):Gg(t)?new fg(e,t):Wg(t)?new vg(e,t):_g(t)?new bg(e,t):Vg(t)?new wg(e,t):zg(t)?new Dg(e,t):Zg(t)?new Fg(e,t):jg(t)?new Tg(e,t):Yg(t)?new Hg(e,t):new Rm(e,t)},Ng=function(e,t){var i=Qg(e,t);return i.flags|=4,Pg(e,t,i,i),i},Rg=function(e,t,i){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||$g(e)&&i.styles.isTransparent()},Lg=function(e){return e.isPositioned()||e.isFloating()},Mg=function(e){return e.nodeType===Node.TEXT_NODE},kg=function(e){return e.nodeType===Node.ELEMENT_NODE},Kg=function(e){return kg(e)&&void 0!==e.style&&!Og(e)},Og=function(e){return"object"==typeof e.className},_g=function(e){return"LI"===e.tagName},Vg=function(e){return"OL"===e.tagName},zg=function(e){return"INPUT"===e.tagName},Wg=function(e){return"svg"===e.tagName},$g=function(e){return"BODY"===e.tagName},Gg=function(e){return"CANVAS"===e.tagName},qg=function(e){return"VIDEO"===e.tagName},Xg=function(e){return"IMG"===e.tagName},Yg=function(e){return"IFRAME"===e.tagName},Jg=function(e){return"STYLE"===e.tagName},jg=function(e){return"TEXTAREA"===e.tagName},Zg=function(e){return"SELECT"===e.tagName},eC=function(e){return"SLOT"===e.tagName},tC=function(e){return e.tagName.indexOf("-")>0},iC=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,i=e.counterIncrement,n=e.counterReset,s=!0;null!==i&&i.forEach((function(e){var i=t.counters[e.counter];i&&0!==e.increment&&(s=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=e.increment)}));var r=[];return s&&n.forEach((function(e){var i=t.counters[e.counter];r.push(e.counter),i||(i=t.counters[e.counter]=[]),i.push(e.reset)})),r},e}(),nC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},sC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},rC={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},oC={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aC=function(e,t,i,n,s,r){return e<t||e>i?gC(e,s,r.length>0):n.integers.reduce((function(t,i,s){for(;e>=i;)e-=i,t+=n.values[s];return t}),"")+r},lC=function(e,t,i,n){var s="";do{i||e--,s=n(e)+s,e/=t}while(e*t>=t);return s},AC=function(e,t,i,n,s){var r=i-t+1;return(e<0?"-":"")+(lC(Math.abs(e),r,n,(function(e){return bc(Math.floor(e%r)+t)}))+s)},dC=function(e,t,i){void 0===i&&(i=". ");var n=t.length;return lC(Math.abs(e),n,!1,(function(e){return t[Math.floor(e%n)]}))+i},cC=function(e,t,i,n,s,r){if(e<-9999||e>9999)return gC(e,4,s.length>0);var o=Math.abs(e),a=s;if(0===o)return t[0]+a;for(var l=0;o>0&&l<=4;l++){var A=o%10;0===A&&bm(r,1)&&""!==a?a=t[A]+a:A>1||1===A&&0===l||1===A&&1===l&&bm(r,2)||1===A&&1===l&&bm(r,4)&&e>100||1===A&&l>1&&bm(r,8)?a=t[A]+(l>0?i[l-1]:"")+a:1===A&&l>0&&(a=i[l-1]+a),o=Math.floor(o/10)}return(e<0?n:"")+a},hC="",uC="",pC="",mC="",gC=function(e,t,i){var n=i?". ":"",s=i?"":"",r=i?", ":"",o=i?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=AC(e,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return dC(e,"",s);case 6:return aC(e,1,3999,nC,3,n).toLowerCase();case 7:return aC(e,1,3999,nC,3,n);case 8:return AC(e,945,969,!1,n);case 9:return AC(e,97,122,!1,n);case 10:return AC(e,65,90,!1,n);case 11:return AC(e,1632,1641,!0,n);case 12:case 49:return aC(e,1,9999,sC,3,n);case 35:return aC(e,1,9999,sC,3,n).toLowerCase();case 13:return AC(e,2534,2543,!0,n);case 14:case 30:return AC(e,6112,6121,!0,n);case 15:return dC(e,"",s);case 16:return dC(e,"",s);case 17:case 48:return cC(e,"",hC,"",s,14);case 47:return cC(e,"",uC,"",s,15);case 42:return cC(e,"",hC,"",s,14);case 41:return cC(e,"",uC,"",s,15);case 26:return cC(e,"","",pC,s,0);case 25:return cC(e,"","",pC,s,7);case 31:return cC(e,"","",mC,r,7);case 33:return cC(e,"","",mC,r,0);case 32:return cC(e,"","",mC,r,7);case 18:return AC(e,2406,2415,!0,n);case 20:return aC(e,1,19999,oC,3,n);case 21:return AC(e,2790,2799,!0,n);case 22:return AC(e,2662,2671,!0,n);case 22:return aC(e,1,10999,rC,3,n);case 23:return dC(e,"");case 24:return dC(e,"");case 27:return AC(e,3302,3311,!0,n);case 28:return dC(e,"",s);case 29:return dC(e,"",s);case 34:return AC(e,3792,3801,!0,n);case 37:return AC(e,6160,6169,!0,n);case 38:return AC(e,4160,4169,!0,n);case 39:return AC(e,2918,2927,!0,n);case 40:return AC(e,1776,1785,!0,n);case 43:return AC(e,3046,3055,!0,n);case 44:return AC(e,3174,3183,!0,n);case 45:return AC(e,3664,3673,!0,n);case 46:return AC(e,3872,3881,!0,n);default:return AC(e,48,57,!0,n)}},CC="data-html2canvas-ignore",fC=function(){function e(e,t,i){if(this.context=e,this.options=i,this.scrolledElements=[],this.referenceElement=t,this.counters=new iC,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var i=this,n=bC(e,t);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,r=e.defaultView.pageYOffset,o=n.contentWindow,a=o.document,l=BC(n).then((function(){return pc(i,void 0,void 0,(function(){var e,i;return mc(this,(function(s){switch(s.label){case 0:return this.scrolledElements.forEach(DC),o&&(o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(i=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:s.sent(),s.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,yC(a)]:[3,4];case 3:s.sent(),s.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(a,i)})).then((function(){return n}))]:[2,n]}}))}))}));return a.open(),a.write(SC(document.doctype)+"<html></html>"),xC(this.referenceElement.ownerDocument,s,r),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},e.prototype.createElementClone=function(e){if(Nm(e,2),Gg(e))return this.createCanvasClone(e);if(qg(e))return this.createVideoClone(e);if(Jg(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Xg(t)&&(Xg(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),tC(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return IC(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var i=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),n=e.cloneNode(!1);return n.textContent=i,n}}catch(e){if(this.context.logger.error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var i=e.ownerDocument.createElement("img");try{return i.src=e.toDataURL(),i}catch(t){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var s=e.getContext("2d"),r=n.getContext("2d");if(r)if(!this.options.allowTaint&&s)r.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(o){var a=o.getContextAttributes();!1===(null==a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}r.drawImage(e,0,0)}return n}catch(t){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var i=t.getContext("2d");try{return i&&(i.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||i.getImageData(0,0,t.width,t.height)),t}catch(t){this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},e.prototype.appendChildNode=function(e,t,i){kg(t)&&("SCRIPT"===t.tagName||t.hasAttribute(CC)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&kg(t)&&Jg(t)||e.appendChild(this.cloneNode(t,i))},e.prototype.cloneChildNodes=function(e,t,i){for(var n=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(kg(s)&&eC(s)&&"function"==typeof s.assignedNodes){var r=s.assignedNodes();r.length&&r.forEach((function(e){return n.appendChildNode(t,e,i)}))}else this.appendChildNode(t,s,i)},e.prototype.cloneNode=function(e,t){if(Mg(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var i=e.ownerDocument.defaultView;if(i&&kg(e)&&(Kg(e)||Og(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var s=i.getComputedStyle(e),r=i.getComputedStyle(e,":before"),o=i.getComputedStyle(e,":after");this.referenceElement===e&&Kg(n)&&(this.clonedReferenceElement=n),$g(n)&&UC(n);var a=this.counters.parse(new Pm(this.context,s)),l=this.resolvePseudoContent(e,n,r,Wm.BEFORE);tC(e)&&(t=!0),qg(e)||this.cloneChildNodes(e,n,t),l&&n.insertBefore(l,n.firstChild);var A=this.resolvePseudoContent(e,n,o,Wm.AFTER);return A&&n.appendChild(A),this.counters.pop(a),(s&&(this.options.copyStyles||Og(e))&&!Yg(e)||t)&&IC(s,n),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(jg(e)||Zg(e))&&(jg(n)||Zg(n))&&(n.value=e.value),n}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,i,n){var s=this;if(i){var r=i.content,o=t.ownerDocument;if(o&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==i.display){this.counters.parse(new Pm(this.context,i));var a=new Um(this.context,i),l=o.createElement("html2canvaspseudoelement");IC(i,l),a.content.forEach((function(t){if(0===t.type)l.appendChild(o.createTextNode(t.value));else if(22===t.type){var i=o.createElement("img");i.src=t.value,i.style.opacity="1",l.appendChild(i)}else if(18===t.type){if("attr"===t.name){var n=t.values.filter(iu);n.length&&l.appendChild(o.createTextNode(e.getAttribute(n[0].value)||""))}else if("counter"===t.name){var r=t.values.filter(ou),A=r[1];if((h=r[0])&&iu(h)){var d=s.counters.getCounterValue(h.value),c=A&&iu(A)?Kp.parse(s.context,A.value):3;l.appendChild(o.createTextNode(gC(d,c,!1)))}}else if("counters"===t.name){var h,u=t.values.filter(ou),p=u[1];A=u[2];if((h=u[0])&&iu(h)){var m=s.counters.getCounterValues(h.value),g=A&&iu(A)?Kp.parse(s.context,A.value):3,C=p&&0===p.type?p.value:"",f=m.map((function(e){return gC(e,g,!1)})).join(C);l.appendChild(o.createTextNode(f))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(o.createTextNode(Sm(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(Sm(a.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(t.value))}})),l.className=FC+" "+TC;var A=n===Wm.BEFORE?" "+FC:" "+TC;return Og(t)?t.className.baseValue+=A:t.className+=A,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Wm||(Wm={}));var vC,bC=function(e,t){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=t.width.toString(),i.height=t.height.toString(),i.scrolling="no",i.setAttribute(CC,"true"),e.body.appendChild(i),i},wC=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},yC=function(e){return Promise.all([].slice.call(e.images,0).map(wC))},BC=function(e){return new Promise((function(t,i){var n=e.contentWindow;if(!n)return i("No window assigned for iframe");var s=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var i=setInterval((function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(i),t(e))}),50)}}))},EC=["all","d","content"],IC=function(e,t){for(var i=e.length-1;i>=0;i--){var n=e.item(i);-1===EC.indexOf(n)&&t.style.setProperty(n,e.getPropertyValue(n))}return t},SC=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},xC=function(e,t,i){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,i)},DC=function(e){var t=e[0],i=e[2];t.scrollLeft=e[1],t.scrollTop=i},FC="___html2canvas___pseudoelement_before",TC="___html2canvas___pseudoelement_after",HC='{\n    content: "" !important;\n    display: none !important;\n}',UC=function(e){PC(e,"."+FC+":before"+HC+"\n         ."+TC+":after"+HC)},PC=function(e,t){var i=e.ownerDocument;if(i){var n=i.createElement("style");n.textContent=t,e.appendChild(n)}},QC=function(){function e(){}return e.getOrigin=function(t){var i=e._link;return i?(i.href=t,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),NC=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:_C(e)||kC(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return pc(this,void 0,void 0,(function(){var t,i,n,s,r=this;return mc(this,(function(o){switch(o.label){case 0:return t=QC.isSameOrigin(e),i=!KC(e)&&!0===this._options.useCORS&&rg.SUPPORT_CORS_IMAGES&&!t,n=!KC(e)&&!t&&!_C(e)&&"string"==typeof this._options.proxy&&rg.SUPPORT_CORS_XHR&&!i,t||!1!==this._options.allowTaint||KC(e)||_C(e)||n||i?(s=e,n?[4,this.proxy(s)]:[3,2]):[2];case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,(OC(s)||i)&&(n.crossOrigin="anonymous"),n.src=s,!0===n.complete&&setTimeout((function(){return e(n)}),500),r._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+r._options.imageTimeout+"ms) loading image")}),r._options.imageTimeout)}))];case 3:return[2,o.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise((function(s,r){var o=rg.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===o)s(a.response);else{var e=new FileReader;e.addEventListener("load",(function(){return s(e.result)}),!1),e.addEventListener("error",(function(e){return r(e)}),!1),e.readAsDataURL(a.response)}else r("Failed to proxy resource "+n+" with status code "+a.status)},a.onerror=r;var l=i.indexOf("?")>-1?"&":"?";if(a.open("GET",""+i+l+"url="+encodeURIComponent(e)+"&responseType="+o),"text"!==o&&a instanceof XMLHttpRequest&&(a.responseType=o),t._options.imageTimeout){var A=t._options.imageTimeout;a.timeout=A,a.ontimeout=function(){return r("Timed out ("+A+"ms) proxying "+n)}}a.send()}))},e}(),RC=/^data:image\/svg\+xml/i,LC=/^data:image\/.*;base64,/i,MC=/^data:image\/.*/i,kC=function(e){return rg.SUPPORT_SVG_DRAWING||!VC(e)},KC=function(e){return MC.test(e)},OC=function(e){return LC.test(e)},_C=function(e){return"blob"===e.substr(0,4)},VC=function(e){return"svg"===e.substr(-3).toLowerCase()||RC.test(e)},zC=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,i){return new e(this.x+t,this.y+i)},e}(),WC=function(e,t,i){return new zC(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},$C=function(){function e(e,t,i,n){this.type=1,this.start=e,this.startControl=t,this.endControl=i,this.end=n}return e.prototype.subdivide=function(t,i){var n=WC(this.start,this.startControl,t),s=WC(this.startControl,this.endControl,t),r=WC(this.endControl,this.end,t),o=WC(n,s,t),a=WC(s,r,t),l=WC(o,a,t);return i?new e(this.start,n,o,l):new e(l,a,r,this.end)},e.prototype.add=function(t,i){return new e(this.start.add(t,i),this.startControl.add(t,i),this.endControl.add(t,i),this.end.add(t,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),GC=function(e){return 1===e.type},qC=function(e){var t=e.styles,i=e.bounds,n=mu(t.borderTopLeftRadius,i.width,i.height),s=n[0],r=n[1],o=mu(t.borderTopRightRadius,i.width,i.height),a=o[0],l=o[1],A=mu(t.borderBottomRightRadius,i.width,i.height),d=A[0],c=A[1],h=mu(t.borderBottomLeftRadius,i.width,i.height),u=h[0],p=h[1],m=[];m.push((s+a)/i.width),m.push((u+d)/i.width),m.push((r+p)/i.height),m.push((l+c)/i.height);var g=Math.max.apply(Math,m);g>1&&(s/=g,r/=g,a/=g,l/=g,d/=g,c/=g,u/=g,p/=g);var C=i.width-a,f=i.height-c,v=i.width-d,b=i.height-p,w=t.borderTopWidth,y=t.borderRightWidth,B=t.borderBottomWidth,E=t.borderLeftWidth,I=gu(t.paddingTop,e.bounds.width),S=gu(t.paddingRight,e.bounds.width),x=gu(t.paddingBottom,e.bounds.width),D=gu(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||r>0?XC(i.left+E/3,i.top+w/3,s-E/3,r-w/3,vC.TOP_LEFT):new zC(i.left+E/3,i.top+w/3),this.topRightBorderDoubleOuterBox=s>0||r>0?XC(i.left+C,i.top+w/3,a-y/3,l-w/3,vC.TOP_RIGHT):new zC(i.left+i.width-y/3,i.top+w/3),this.bottomRightBorderDoubleOuterBox=d>0||c>0?XC(i.left+v,i.top+f,d-y/3,c-B/3,vC.BOTTOM_RIGHT):new zC(i.left+i.width-y/3,i.top+i.height-B/3),this.bottomLeftBorderDoubleOuterBox=u>0||p>0?XC(i.left+E/3,i.top+b,u-E/3,p-B/3,vC.BOTTOM_LEFT):new zC(i.left+E/3,i.top+i.height-B/3),this.topLeftBorderDoubleInnerBox=s>0||r>0?XC(i.left+2*E/3,i.top+2*w/3,s-2*E/3,r-2*w/3,vC.TOP_LEFT):new zC(i.left+2*E/3,i.top+2*w/3),this.topRightBorderDoubleInnerBox=s>0||r>0?XC(i.left+C,i.top+2*w/3,a-2*y/3,l-2*w/3,vC.TOP_RIGHT):new zC(i.left+i.width-2*y/3,i.top+2*w/3),this.bottomRightBorderDoubleInnerBox=d>0||c>0?XC(i.left+v,i.top+f,d-2*y/3,c-2*B/3,vC.BOTTOM_RIGHT):new zC(i.left+i.width-2*y/3,i.top+i.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=u>0||p>0?XC(i.left+2*E/3,i.top+b,u-2*E/3,p-2*B/3,vC.BOTTOM_LEFT):new zC(i.left+2*E/3,i.top+i.height-2*B/3),this.topLeftBorderStroke=s>0||r>0?XC(i.left+E/2,i.top+w/2,s-E/2,r-w/2,vC.TOP_LEFT):new zC(i.left+E/2,i.top+w/2),this.topRightBorderStroke=s>0||r>0?XC(i.left+C,i.top+w/2,a-y/2,l-w/2,vC.TOP_RIGHT):new zC(i.left+i.width-y/2,i.top+w/2),this.bottomRightBorderStroke=d>0||c>0?XC(i.left+v,i.top+f,d-y/2,c-B/2,vC.BOTTOM_RIGHT):new zC(i.left+i.width-y/2,i.top+i.height-B/2),this.bottomLeftBorderStroke=u>0||p>0?XC(i.left+E/2,i.top+b,u-E/2,p-B/2,vC.BOTTOM_LEFT):new zC(i.left+E/2,i.top+i.height-B/2),this.topLeftBorderBox=s>0||r>0?XC(i.left,i.top,s,r,vC.TOP_LEFT):new zC(i.left,i.top),this.topRightBorderBox=a>0||l>0?XC(i.left+C,i.top,a,l,vC.TOP_RIGHT):new zC(i.left+i.width,i.top),this.bottomRightBorderBox=d>0||c>0?XC(i.left+v,i.top+f,d,c,vC.BOTTOM_RIGHT):new zC(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=u>0||p>0?XC(i.left,i.top+b,u,p,vC.BOTTOM_LEFT):new zC(i.left,i.top+i.height),this.topLeftPaddingBox=s>0||r>0?XC(i.left+E,i.top+w,Math.max(0,s-E),Math.max(0,r-w),vC.TOP_LEFT):new zC(i.left+E,i.top+w),this.topRightPaddingBox=a>0||l>0?XC(i.left+Math.min(C,i.width-y),i.top+w,C>i.width+y?0:Math.max(0,a-y),Math.max(0,l-w),vC.TOP_RIGHT):new zC(i.left+i.width-y,i.top+w),this.bottomRightPaddingBox=d>0||c>0?XC(i.left+Math.min(v,i.width-E),i.top+Math.min(f,i.height-B),Math.max(0,d-y),Math.max(0,c-B),vC.BOTTOM_RIGHT):new zC(i.left+i.width-y,i.top+i.height-B),this.bottomLeftPaddingBox=u>0||p>0?XC(i.left+E,i.top+Math.min(b,i.height-B),Math.max(0,u-E),Math.max(0,p-B),vC.BOTTOM_LEFT):new zC(i.left+E,i.top+i.height-B),this.topLeftContentBox=s>0||r>0?XC(i.left+E+D,i.top+w+I,Math.max(0,s-(E+D)),Math.max(0,r-(w+I)),vC.TOP_LEFT):new zC(i.left+E+D,i.top+w+I),this.topRightContentBox=a>0||l>0?XC(i.left+Math.min(C,i.width+E+D),i.top+w+I,C>i.width+E+D?0:a-E+D,l-(w+I),vC.TOP_RIGHT):new zC(i.left+i.width-(y+S),i.top+w+I),this.bottomRightContentBox=d>0||c>0?XC(i.left+Math.min(v,i.width-(E+D)),i.top+Math.min(f,i.height+w+I),Math.max(0,d-(y+S)),c-(B+x),vC.BOTTOM_RIGHT):new zC(i.left+i.width-(y+S),i.top+i.height-(B+x)),this.bottomLeftContentBox=u>0||p>0?XC(i.left+E+D,i.top+b,Math.max(0,u-(E+D)),p-(B+x),vC.BOTTOM_LEFT):new zC(i.left+E+D,i.top+i.height-(B+x))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(vC||(vC={}));var XC=function(e,t,i,n,s){var r=(Math.sqrt(2)-1)/3*4,o=i*r,a=n*r,l=e+i,A=t+n;switch(s){case vC.TOP_LEFT:return new $C(new zC(e,A),new zC(e,A-a),new zC(l-o,t),new zC(l,t));case vC.TOP_RIGHT:return new $C(new zC(e,t),new zC(e+o,t),new zC(l,A-a),new zC(l,A));case vC.BOTTOM_RIGHT:return new $C(new zC(l,t),new zC(l,t+a),new zC(e+o,A),new zC(e,A));default:return new $C(new zC(l,A),new zC(l-o,A),new zC(e,t+a),new zC(e,t))}},YC=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},JC=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},jC=function(e,t,i){this.offsetX=e,this.offsetY=t,this.matrix=i,this.type=0,this.target=6},ZC=function(e,t){this.path=e,this.target=t,this.type=1},ef=function(e){this.opacity=e,this.type=2,this.target=6},tf=function(e){return 1===e.type},nf=function(e,t){return e.length===t.length&&e.some((function(e,i){return e===t[i]}))},sf=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},rf=function(){function e(e,t){(this.container=e,this.parent=t,this.effects=[],this.curves=new qC(this.container),this.container.styles.opacity<1&&this.effects.push(new ef(this.container.styles.opacity)),null!==this.container.styles.transform)&&this.effects.push(new jC(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform));if(0!==this.container.styles.overflowX){var i=YC(this.curves),n=JC(this.curves);nf(i,n)?this.effects.push(new ZC(i,6)):(this.effects.push(new ZC(i,2)),this.effects.push(new ZC(n,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),i=this.parent,n=this.effects.slice(0);i;){var s=i.effects.filter((function(e){return!tf(e)}));if(t||0!==i.container.styles.position||!i.parent){if(n.unshift.apply(n,s),t=-1===[2,3].indexOf(i.container.styles.position),0!==i.container.styles.overflowX){var r=YC(i.curves),o=JC(i.curves);nf(r,o)||n.unshift(new ZC(o,6))}}else n.unshift.apply(n,s);i=i.parent}return n.filter((function(t){return bm(t.target,e)}))},e}(),of=function(e,t,i,n){e.container.elements.forEach((function(s){var r=bm(s.flags,4),o=bm(s.flags,2),a=new rf(s,e);bm(s.styles.display,2048)&&n.push(a);var l=bm(s.flags,8)?[]:n;if(r||o){var A=r||s.styles.isPositioned()?i:t,d=new sf(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var c=s.styles.zIndex.order;if(c<0){var h=0;A.negativeZIndex.some((function(e,t){return c>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),A.negativeZIndex.splice(h,0,d)}else if(c>0){var u=0;A.positiveZIndex.some((function(e,t){return c>=e.element.container.styles.zIndex.order?(u=t+1,!1):u>0})),A.positiveZIndex.splice(u,0,d)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?A.nonPositionedFloats.push(d):A.nonPositionedInlineLevel.push(d);of(a,d,r?d:i,l)}else s.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),of(a,t,i,l);bm(s.flags,8)&&af(s,l)}))},af=function(e,t){for(var i=e instanceof wg?e.start:1,n=e instanceof wg&&e.reversed,s=0;s<t.length;s++){var r=t[s];r.container instanceof bg&&"number"==typeof r.container.value&&0!==r.container.value&&(i=r.container.value),r.listValue=gC(i,r.container.styles.listStyleType,!0),i+=n?-1:1}},lf=function(e,t){switch(t){case 0:return df(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return df(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return df(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return df(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Af=function(e,t){var i=[];return GC(e)?i.push(e.subdivide(.5,!1)):i.push(e),GC(t)?i.push(t.subdivide(.5,!0)):i.push(t),i},df=function(e,t,i,n){var s=[];return GC(e)?s.push(e.subdivide(.5,!1)):s.push(e),GC(i)?s.push(i.subdivide(.5,!0)):s.push(i),GC(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),GC(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},cf=function(e){var t=e.styles;return e.bounds.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},hf=function(e){var t=e.styles,i=e.bounds,n=gu(t.paddingLeft,i.width),s=gu(t.paddingRight,i.width),r=gu(t.paddingTop,i.width),o=gu(t.paddingBottom,i.width);return i.add(n+t.borderLeftWidth,r+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+s),-(t.borderTopWidth+t.borderBottomWidth+r+o))},uf=function(e,t,i){var n=function(e,t){return 0===e?t.bounds:2===e?hf(t):cf(t)}(Cf(e.styles.backgroundOrigin,t),e),s=function(e,t){return 0===e?t.bounds:2===e?hf(t):cf(t)}(Cf(e.styles.backgroundClip,t),e),r=gf(Cf(e.styles.backgroundSize,t),i,n),o=r[0],a=r[1],l=mu(Cf(e.styles.backgroundPosition,t),n.width-o,n.height-a);return[ff(Cf(e.styles.backgroundRepeat,t),l,r,n,s),Math.round(n.left+l[0]),Math.round(n.top+l[1]),o,a]},pf=function(e){return iu(e)&&e.value===ju.AUTO},mf=function(e){return"number"==typeof e},gf=function(e,t,i){var n=t[0],s=t[1],r=t[2],o=e[0],a=e[1];if(!o)return[0,0];if(du(o)&&a&&du(a))return[gu(o,i.width),gu(a,i.height)];var l=mf(r);if(iu(o)&&(o.value===ju.CONTAIN||o.value===ju.COVER))return mf(r)?i.width/i.height<r!=(o.value===ju.COVER)?[i.width,i.width/r]:[i.height*r,i.height]:[i.width,i.height];var A=mf(n),d=mf(s),c=A||d;if(pf(o)&&(!a||pf(a)))return A&&d?[n,s]:l||c?c&&l?[A?n:s*r,d?s:n/r]:[A?n:i.width,d?s:i.height]:[i.width,i.height];if(l){var h=0,u=0;return du(o)?h=gu(o,i.width):du(a)&&(u=gu(a,i.height)),pf(o)?h=u*r:a&&!pf(a)||(u=h/r),[h,u]}var p=null,m=null;if(du(o)?p=gu(o,i.width):a&&du(a)&&(m=gu(a,i.height)),null===p||a&&!pf(a)||(m=A&&d?p/n*s:i.height),null!==m&&pf(o)&&(p=A&&d?m/s*n:i.width),null!==p&&null!==m)return[p,m];throw new Error("Unable to calculate background-size for element")},Cf=function(e,t){var i=e[t];return void 0===i?e[0]:i},ff=function(e,t,i,n,s){var r=t[0],o=t[1],a=i[0],l=i[1];switch(e){case 2:return[new zC(Math.round(n.left),Math.round(n.top+o)),new zC(Math.round(n.left+n.width),Math.round(n.top+o)),new zC(Math.round(n.left+n.width),Math.round(l+n.top+o)),new zC(Math.round(n.left),Math.round(l+n.top+o))];case 3:return[new zC(Math.round(n.left+r),Math.round(n.top)),new zC(Math.round(n.left+r+a),Math.round(n.top)),new zC(Math.round(n.left+r+a),Math.round(n.height+n.top)),new zC(Math.round(n.left+r),Math.round(n.height+n.top))];case 1:return[new zC(Math.round(n.left+r),Math.round(n.top+o)),new zC(Math.round(n.left+r+a),Math.round(n.top+o)),new zC(Math.round(n.left+r+a),Math.round(n.top+o+l)),new zC(Math.round(n.left+r),Math.round(n.top+o+l))];default:return[new zC(Math.round(s.left),Math.round(s.top)),new zC(Math.round(s.left+s.width),Math.round(s.top)),new zC(Math.round(s.left+s.width),Math.round(s.height+s.top)),new zC(Math.round(s.left),Math.round(s.height+s.top))]}},vf="Hidden Text",bf=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var i=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),r=this._document.body;i.style.visibility="hidden",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",r.appendChild(i),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(vf)),i.appendChild(s),i.appendChild(n);var o=n.offsetTop-s.offsetTop+2;i.removeChild(s),i.appendChild(this._document.createTextNode(vf)),i.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-i.offsetTop+2;return r.removeChild(i),{baseline:o,middle:a}},e.prototype.getMetrics=function(e,t){var i=e+" "+t;return void 0===this._data[i]&&(this._data[i]=this.parseMetrics(e,t)),this._data[i]},e}(),wf=function(e,t){this.context=e,this.options=t},yf=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._activeEffects=[],n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),i.canvas||(n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px"),n.fontMetrics=new bf(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),n}return hc(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},t.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),tf(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return pc(this,void 0,void 0,(function(){return mc(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(e){return pc(this,void 0,void 0,(function(){return mc(this,(function(t){switch(t.label){case 0:return bm(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(e,t,i){var n=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+i):Ag(e.text).reduce((function(t,s){return n.ctx.fillText(s,t,e.bounds.top+i),t+n.ctx.measureText(s).width}),e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),i=xf(e.fontFamily).join(", "),n=eu(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,n,i].join(" "),i,n]},t.prototype.renderTextNode=function(e,t){return pc(this,void 0,void 0,(function(){var i,n,s,r,o,a,l,A=this;return mc(this,(function(d){return i=this.createFontStyle(t),n=i[1],s=i[2],this.ctx.font=i[0],this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(n,s),o=r.baseline,a=r.middle,l=t.paintOrder,e.textBounds.forEach((function(e){l.forEach((function(i){switch(i){case 0:A.ctx.fillStyle=Iu(t.color),A.renderTextWithLetterSpacing(e,t.letterSpacing,o);var n=t.textShadow;n.length&&e.text.trim().length&&(n.slice(0).reverse().forEach((function(i){A.ctx.shadowColor=Iu(i.color),A.ctx.shadowOffsetX=i.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=i.offsetY.number*A.options.scale,A.ctx.shadowBlur=i.blur.number,A.renderTextWithLetterSpacing(e,t.letterSpacing,o)})),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),t.textDecorationLine.length&&(A.ctx.fillStyle=Iu(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+o),e.bounds.width,1);break;case 2:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:A.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+a),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(A.ctx.strokeStyle=Iu(t.webkitTextStrokeColor),A.ctx.lineWidth=t.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+o)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter"}}))})),[2]}))}))},t.prototype.renderReplacedElement=function(e,t,i){if(i&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var n=hf(e),s=JC(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,e.intrinsicWidth,e.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return pc(this,void 0,void 0,(function(){var i,n,s,r,o,a,l,A,d,c,h,u,p,m,g,C;return mc(this,(function(f){switch(f.label){case 0:this.applyEffects(e.getEffects(4)),n=e.curves,s=(i=e.container).styles,r=0,o=i.textNodes,f.label=1;case 1:return r<o.length?[4,this.renderTextNode(o[r],s)]:[3,4];case 2:f.sent(),f.label=3;case 3:return r++,[3,1];case 4:if(!(i instanceof Cg))return[3,8];f.label=5;case 5:return f.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return p=f.sent(),this.renderReplacedElement(i,n,p),[3,8];case 7:return f.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof fg&&this.renderReplacedElement(i,n,i.canvas),!(i instanceof vg))return[3,12];f.label=9;case 9:return f.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return p=f.sent(),this.renderReplacedElement(i,n,p),[3,12];case 11:return f.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof Hg&&i.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}).render(i.tree)]:[3,14];case 13:a=f.sent(),i.width&&i.height&&this.ctx.drawImage(a,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),f.label=14;case 14:if(i instanceof Dg&&(l=Math.min(i.bounds.width,i.bounds.height),i.type===Eg?i.checked&&(this.ctx.save(),this.path([new zC(i.bounds.left+.39363*l,i.bounds.top+.79*l),new zC(i.bounds.left+.16*l,i.bounds.top+.5549*l),new zC(i.bounds.left+.27347*l,i.bounds.top+.44071*l),new zC(i.bounds.left+.39694*l,i.bounds.top+.5649*l),new zC(i.bounds.left+.72983*l,i.bounds.top+.23*l),new zC(i.bounds.left+.84*l,i.bounds.top+.34085*l),new zC(i.bounds.left+.39363*l,i.bounds.top+.79*l)]),this.ctx.fillStyle=Iu(xg),this.ctx.fill(),this.ctx.restore()):i.type===Ig&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+l/2,i.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=Iu(xg),this.ctx.fill(),this.ctx.restore())),Bf(i)&&i.value.length){switch(A=this.createFontStyle(s),d=this.fontMetrics.getMetrics(g=A[0],A[1]).baseline,this.ctx.font=g,this.ctx.fillStyle=Iu(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=If(i.styles.textAlign),C=hf(i),c=0,i.styles.textAlign){case 1:c+=C.width/2;break;case 2:c+=C.width}h=C.add(c,0,0,-C.height/2+1),this.ctx.save(),this.path([new zC(C.left,C.top),new zC(C.left+C.width,C.top),new zC(C.left+C.width,C.top+C.height),new zC(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new og(i.value,h),s.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!bm(i.styles.display,2048))return[3,20];if(null===i.styles.listStyleImage)return[3,19];if(0!==(u=i.styles.listStyleImage).type)return[3,18];p=void 0,m=u.url,f.label=15;case 15:return f.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return p=f.sent(),this.ctx.drawImage(p,i.bounds.left-(p.width+10),i.bounds.top),[3,18];case 17:return f.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==i.styles.listStyleType&&(g=this.createFontStyle(s)[0],this.ctx.font=g,this.ctx.fillStyle=Iu(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new Cc(i.bounds.left,i.bounds.top+gu(i.styles.paddingTop,i.bounds.width),i.bounds.width,Lp(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new og(e.listValue,C),s.letterSpacing,Lp(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),f.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(e){return pc(this,void 0,void 0,(function(){var t,i,n,s,r,o,a,l,A,d,c,h,u,p;return mc(this,(function(m){switch(m.label){case 0:return bm(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:m.sent(),t=0,i=e.negativeZIndex,m.label=2;case 2:return t<i.length?[4,this.renderStack(i[t])]:[3,5];case 3:m.sent(),m.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:m.sent(),n=0,s=e.nonInlineLevel,m.label=7;case 7:return n<s.length?[4,this.renderNode(s[n])]:[3,10];case 8:m.sent(),m.label=9;case 9:return n++,[3,7];case 10:r=0,o=e.nonPositionedFloats,m.label=11;case 11:return r<o.length?[4,this.renderStack(o[r])]:[3,14];case 12:m.sent(),m.label=13;case 13:return r++,[3,11];case 14:a=0,l=e.nonPositionedInlineLevel,m.label=15;case 15:return a<l.length?[4,this.renderStack(l[a])]:[3,18];case 16:m.sent(),m.label=17;case 17:return a++,[3,15];case 18:A=0,d=e.inlineLevel,m.label=19;case 19:return A<d.length?[4,this.renderNode(d[A])]:[3,22];case 20:m.sent(),m.label=21;case 21:return A++,[3,19];case 22:c=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return c<h.length?[4,this.renderStack(h[c])]:[3,26];case 24:m.sent(),m.label=25;case 25:return c++,[3,23];case 26:u=0,p=e.positiveZIndex,m.label=27;case 27:return u<p.length?[4,this.renderStack(p[u])]:[3,30];case 28:m.sent(),m.label=29;case 29:return u++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach((function(e,i){var n=GC(e)?e.start:e;0===i?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),GC(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},t.prototype.renderRepeat=function(e,t,i,n){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(i,n),this.ctx.fill(),this.ctx.translate(-i,-n)},t.prototype.resizeImage=function(e,t,i){var n;if(e.width===t&&e.height===i)return e;var s=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,i),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,i),s},t.prototype.renderBackgroundImage=function(e){return pc(this,void 0,void 0,(function(){var t,i,n,s,r;return mc(this,(function(o){switch(o.label){case 0:t=e.styles.backgroundImage.length-1,i=function(i){var s,r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b,w,y,B,E,I,S,x,D,F,T,H,U,P,Q;return mc(this,(function(N){switch(N.label){case 0:if(0!==i.type)return[3,5];s=void 0,r=i.url,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,n.context.cache.match(r)];case 2:return s=N.sent(),[3,4];case 3:return N.sent(),n.context.logger.error("Error loading background-image "+r),[3,4];case 4:return s&&(o=uf(e,t,[s.width,s.height,s.width/s.height]),v=o[0],I=o[1],S=o[2],C=n.ctx.createPattern(n.resizeImage(s,y=o[3],B=o[4]),"repeat"),n.renderRepeat(v,C,I,S)),[3,6];case 5:1===i.type?(a=uf(e,t,[null,null,null]),v=a[0],I=a[1],S=a[2],l=Mu(i.angle,y=a[3],B=a[4]),A=l[0],d=l[1],c=l[2],h=l[3],u=l[4],(p=document.createElement("canvas")).width=y,p.height=B,m=p.getContext("2d"),g=m.createLinearGradient(d,h,c,u),Lu(i.stops,A).forEach((function(e){return g.addColorStop(e.stop,Iu(e.color))})),m.fillStyle=g,m.fillRect(0,0,y,B),y>0&&B>0&&(C=n.ctx.createPattern(p,"repeat"),n.renderRepeat(v,C,I,S))):function(e){return 2===e.type}(i)&&(f=uf(e,t,[null,null,null]),v=f[0],b=f[1],w=f[2],B=f[4],I=gu((E=0===i.position.length?[uu]:i.position)[0],y=f[3]),S=gu(E[E.length-1],B),x=function(e,t,i,n,s){var r=0,o=0;switch(e.size){case 0:0===e.shape?r=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(i),Math.abs(i-s)):1===e.shape&&(r=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(i),Math.abs(i-s)));break;case 2:if(0===e.shape)r=o=Math.min(ku(t,i),ku(t,i-s),ku(t-n,i),ku(t-n,i-s));else if(1===e.shape){var a=Math.min(Math.abs(i),Math.abs(i-s))/Math.min(Math.abs(t),Math.abs(t-n)),l=Ku(n,s,t,i,!0);o=a*(r=ku(l[0]-t,(l[1]-i)/a))}break;case 1:0===e.shape?r=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(i),Math.abs(i-s)):1===e.shape&&(r=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(i),Math.abs(i-s)));break;case 3:if(0===e.shape)r=o=Math.max(ku(t,i),ku(t,i-s),ku(t-n,i),ku(t-n,i-s));else if(1===e.shape){a=Math.max(Math.abs(i),Math.abs(i-s))/Math.max(Math.abs(t),Math.abs(t-n));var A=Ku(n,s,t,i,!1);o=a*(r=ku(A[0]-t,(A[1]-i)/a))}}return Array.isArray(e.size)&&(r=gu(e.size[0],n),o=2===e.size.length?gu(e.size[1],s):r),[r,o]}(i,I,S,y,B),F=x[1],(D=x[0])>0&&F>0&&(T=n.ctx.createRadialGradient(b+I,w+S,0,b+I,w+S,D),Lu(i.stops,2*D).forEach((function(e){return T.addColorStop(e.stop,Iu(e.color))})),n.path(v),n.ctx.fillStyle=T,D!==F?(H=e.bounds.left+.5*e.bounds.width,U=e.bounds.top+.5*e.bounds.height,Q=1/(P=F/D),n.ctx.save(),n.ctx.translate(H,U),n.ctx.transform(1,0,0,P,0,0),n.ctx.translate(-H,-U),n.ctx.fillRect(b,Q*(w-U)+U,y,B*Q),n.ctx.restore()):n.ctx.fill())),N.label=6;case 6:return t--,[2]}}))},n=this,s=0,r=e.styles.backgroundImage.slice(0).reverse(),o.label=1;case 1:return s<r.length?[5,i(r[s])]:[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},t.prototype.renderSolidBorder=function(e,t,i){return pc(this,void 0,void 0,(function(){return mc(this,(function(n){return this.path(lf(i,t)),this.ctx.fillStyle=Iu(e),this.ctx.fill(),[2]}))}))},t.prototype.renderDoubleBorder=function(e,t,i,n){return pc(this,void 0,void 0,(function(){var s,r;return mc(this,(function(o){switch(o.label){case 0:return t<3?[4,this.renderSolidBorder(e,i,n)]:[3,2];case 1:return o.sent(),[2];case 2:return s=function(e,t){switch(t){case 0:return df(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return df(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return df(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return df(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(n,i),this.path(s),this.ctx.fillStyle=Iu(e),this.ctx.fill(),r=function(e,t){switch(t){case 0:return df(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return df(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return df(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return df(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(n,i),this.path(r),this.ctx.fill(),[2]}}))}))},t.prototype.renderNodeBackgroundAndBorders=function(e){return pc(this,void 0,void 0,(function(){var t,i,n,s,r,o,a,l,A=this;return mc(this,(function(d){switch(d.label){case 0:return this.applyEffects(e.getEffects(2)),i=!Eu((t=e.container.styles).backgroundColor)||t.backgroundImage.length,n=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],s=Ef(Cf(t.backgroundClip,0),e.curves),i||t.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),Eu(t.backgroundColor)||(this.ctx.fillStyle=Iu(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){A.ctx.save();var i,n,s,r,o=YC(e.curves),a=t.inset?0:1e4,l=(i=(t.inset?1:-1)*t.spread.number-a,n=(t.inset?1:-1)*t.spread.number,s=t.spread.number*(t.inset?-2:2),r=t.spread.number*(t.inset?-2:2),o.map((function(e,t){switch(t){case 0:return e.add(i,n);case 1:return e.add(i+s,n);case 2:return e.add(i+s,n+r);case 3:return e.add(i,n+r)}return e})));t.inset?(A.path(o),A.ctx.clip(),A.mask(l)):(A.mask(o),A.ctx.clip(),A.path(l)),A.ctx.shadowOffsetX=t.offsetX.number+a,A.ctx.shadowOffsetY=t.offsetY.number,A.ctx.shadowColor=Iu(t.color),A.ctx.shadowBlur=t.blur.number,A.ctx.fillStyle=t.inset?Iu(t.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()})),d.label=2;case 2:r=0,o=0,a=n,d.label=3;case 3:return o<a.length?0!==(l=a[o]).style&&!Eu(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,r,e.curves,2)]:[3,11]:[3,13];case 4:return d.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,r,e.curves,3)];case 6:return d.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,r,e.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,r,e.curves)];case 10:d.sent(),d.label=11;case 11:r++,d.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},t.prototype.renderDashedDottedBorder=function(e,t,i,n,s){return pc(this,void 0,void 0,(function(){var r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b;return mc(this,(function(w){return this.ctx.save(),r=function(e,t){switch(t){case 0:return Af(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Af(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Af(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return Af(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(n,i),o=lf(n,i),2===s&&(this.path(o),this.ctx.clip()),GC(o[0])?(a=o[0].start.x,l=o[0].start.y):(a=o[0].x,l=o[0].y),GC(o[1])?(A=o[1].end.x,d=o[1].end.y):(A=o[1].x,d=o[1].y),c=0===i||2===i?Math.abs(a-A):Math.abs(l-d),this.ctx.beginPath(),this.formatPath(3===s?r:o.slice(0,2)),h=t<3?3*t:2*t,u=t<3?2*t:t,3===s&&(h=t,u=t),p=!0,c<=2*h?p=!1:c<=2*h+u?(h*=m=c/(2*h+u),u*=m):(g=Math.floor((c+u)/(h+u)),C=(c-g*h)/(g-1),u=(f=(c-(g+1)*h)/g)<=0||Math.abs(u-C)<Math.abs(u-f)?C:f),p&&this.ctx.setLineDash(3===s?[0,h+u]:[h,u]),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=Iu(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(GC(o[0])&&(v=o[3],b=o[0],this.ctx.beginPath(),this.formatPath([new zC(v.end.x,v.end.y),new zC(b.start.x,b.start.y)]),this.ctx.stroke()),GC(o[1])&&(v=o[1],b=o[2],this.ctx.beginPath(),this.formatPath([new zC(v.end.x,v.end.y),new zC(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},t.prototype.render=function(e){return pc(this,void 0,void 0,(function(){return mc(this,(function(t){switch(t.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Iu(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=new rf(e,null),n=new sf(i),of(i,n,n,s=[]),af(i.container,s),[4,this.renderStack(n)];case 1:return t.sent(),this.applyEffects([]),[2,this.canvas]}var i,n,s}))}))},t}(wf),Bf=function(e){return e instanceof Tg||(e instanceof Fg||e instanceof Dg&&e.type!==Ig&&e.type!==Eg)},Ef=function(e,t){switch(e){case 0:return YC(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);default:return JC(t)}},If=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},Sf=["-apple-system","system-ui"],xf=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===Sf.indexOf(e)})):e},Df=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=i,n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),n}return hc(t,e),t.prototype.render=function(e){return pc(this,void 0,void 0,(function(){var t,i;return mc(this,(function(n){switch(n.label){case 0:return t=ng(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Ff(t)];case 1:return i=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Iu(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(wf),Ff=function(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){t(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Tf=function(){function e(e){var t=e.enabled;this.id=e.id,this.enabled=t,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,gc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,gc([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,gc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,gc([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),Hf=function(){function e(t,i){var n;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new Tf({id:this.instanceName,enabled:t.logging}),this.cache=null!==(n=t.cache)&&void 0!==n?n:new NC(this,t)}return e.instanceCount=1,e}(),Uf=function(e,t){return void 0===t&&(t={}),Pf(e,t)};"undefined"!=typeof window&&QC.setContext(window);var Pf=function(e,t){return pc(void 0,void 0,void 0,(function(){var i,n,s,r,o,a,l,A,d,c,h,u,p,m,g,C,f,v,b,w,y,B,E,I,S,x,D,F,T,H,U,P,Q,N,R,L,M,k;return mc(this,(function(K){switch(K.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(i=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(n=i.defaultView))throw new Error("Document is not attached to a Window");return s={allowTaint:null!==(B=t.allowTaint)&&void 0!==B&&B,imageTimeout:null!==(E=t.imageTimeout)&&void 0!==E?E:15e3,proxy:t.proxy,useCORS:null!==(I=t.useCORS)&&void 0!==I&&I},r=uc({logging:null===(S=t.logging)||void 0===S||S,cache:t.cache},s),o={windowWidth:null!==(x=t.windowWidth)&&void 0!==x?x:n.innerWidth,windowHeight:null!==(D=t.windowHeight)&&void 0!==D?D:n.innerHeight,scrollX:null!==(F=t.scrollX)&&void 0!==F?F:n.pageXOffset,scrollY:null!==(T=t.scrollY)&&void 0!==T?T:n.pageYOffset},a=new Cc(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),l=new Hf(r,a),A=null!==(H=t.foreignObjectRendering)&&void 0!==H&&H,d={allowTaint:null!==(U=t.allowTaint)&&void 0!==U&&U,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),c=new fC(l,e,d),(h=c.clonedReferenceElement)?[4,c.toIFrame(i,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return u=K.sent(),p=$g(h)||"HTML"===h.tagName?function(e){var t=e.body,i=e.documentElement;if(!t||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.offsetWidth,i.offsetWidth),Math.max(t.clientWidth,i.clientWidth)),s=Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.offsetHeight,i.offsetHeight),Math.max(t.clientHeight,i.clientHeight));return new Cc(0,0,n,s)}(h.ownerDocument):fc(l,h),m=p.width,g=p.height,C=p.left,f=p.top,v=Qf(l,h,t.backgroundColor),b={canvas:t.canvas,backgroundColor:v,scale:null!==(Q=null!==(P=t.scale)&&void 0!==P?P:n.devicePixelRatio)&&void 0!==Q?Q:1,x:(null!==(N=t.x)&&void 0!==N?N:0)+C,y:(null!==(R=t.y)&&void 0!==R?R:0)+f,width:null!==(L=t.width)&&void 0!==L?L:Math.ceil(m),height:null!==(M=t.height)&&void 0!==M?M:Math.ceil(g)},A?(l.logger.debug("Document cloned, using foreign object rendering"),[4,new Df(l,b).render(h)]):[3,3];case 2:return w=K.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+C+","+f+" with size "+m+"x"+g+" using computed rendering"),l.logger.debug("Starting DOM parsing"),y=Ng(l,h),v===y.styles.backgroundColor&&(y.styles.backgroundColor=Pu.TRANSPARENT),l.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),[4,new yf(l,b).render(y)];case 4:w=K.sent(),K.label=5;case 5:return(null===(k=t.removeContainer)||void 0===k||k)&&(fC.destroy(u)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,w]}}))}))},Qf=function(e,t,i){var n=t.ownerDocument,s=n.documentElement?Uu(e,getComputedStyle(n.documentElement).backgroundColor):Pu.TRANSPARENT,r=n.body?Uu(e,getComputedStyle(n.body).backgroundColor):Pu.TRANSPARENT,o="string"==typeof i?Uu(e,i):null===i?Pu.TRANSPARENT:4294967295;return t===n.documentElement?Eu(s)?Eu(r)?o:r:s:o};let Nf="";function Rf(e){if(!e)return"";const t=window.getComputedStyle(e);return function(e){const t=((null==e?void 0:e.backgroundColor)||"").replace(/\s+|rgba\(|\)/g,"").toLowerCase();if(""===t||"transparent"===t||"0"===(null==e?void 0:e.opacity))return!0;const i=t.split(",");return 4===i.length&&"0"===i[3]}(t)?Rf(e.parentElement):t.backgroundColor}async function Lf(e,t,i,n,s,r){if(!(e=Lt(e)))return Promise.reject();(await Ld.getInstance().getVizModule()).exportFromMarkup("<div></div>",{fileName:t,format:i,width:e.clientWidth,height:e.clientHeight,backgroundColor:s||Rf(e),margin:n||void 0,svgToCanvas:async function(t,i){const n=await function(e){return new Promise(((t,i)=>{const n=e.cloneNode(!0);Mf(e,n);const s=document.createElement("IFRAME");s.style.cssText="position: absolute; left: -10000px; top: -10000px; visibility: hidden; opacity: 0;",s.onload=()=>{s.contentDocument.body.appendChild(n),s.contentDocument.body.style.margin="0px",t(s)},document.body.appendChild(s)}))}(e),r=n.contentDocument.body;await Uf(r,{canvas:i,backgroundColor:s,scale:1,width:e.clientWidth,height:e.clientHeight}),document.body.removeChild(n)},onFileSaving:r})}function Mf(e,t){!function(e,t){const i=window.getComputedStyle(e);for(let e=0;e<i.length;e++){const n=i[e],s=i.getPropertyValue(n);t.style.setProperty(n,s)}}(e,t);const i=e.childNodes,n=t.childNodes,s=i.length;for(let e=0;e<s;e++){const t=i[e];if(1===t.nodeType){Mf(t,n[e])}}}const kf="dxbl-chart-base";class Kf extends kd{constructor(){super(Kf.eventName)}}Kf.eventName=kf+".drawn";class Of extends CustomEvent{constructor(e){super(Of.eventName,{detail:new qf(e),bubbles:!0,composed:!0,cancelable:!0})}}Of.eventName=kf+".tooltip-showing";class _f extends CustomEvent{constructor(e){super(_f.eventName,{detail:new Xf(e),bubbles:!0,composed:!0,cancelable:!0})}}_f.eventName=kf+".series-click";class Vf extends CustomEvent{constructor(e){super(Vf.eventName,{detail:new Yf(e),bubbles:!0,composed:!0,cancelable:!0})}}Vf.eventName=kf+".selection-changed";class zf extends CustomEvent{constructor(e,t){super(zf.eventName,{detail:new Jf(e,t),bubbles:!0,composed:!0,cancelable:!0})}}zf.eventName=kf+".legend-click";class Wf extends CustomEvent{constructor(e){super(Wf.eventName,{detail:new $f(e),bubbles:!0,composed:!0,cancelable:!0})}}Wf.eventName=kf+".visual-range-changed";class $f{constructor(e){this.IsArgumentAxis=e.axis.isArgumentAxis,this.PreviousRange=e.previousRange,this.CurrentRange=e.range,this.ChangeSource=e.actionType,this.AxisName=e.axis.name}}class Gf{constructor(e){this.SeriesIndex=e.seriesIndex,this.Tag=e.tag,this.Data=e.data}}class qf extends Gf{constructor(e){super(e),this.Id=e.id}}class Xf extends Gf{}class Yf extends Gf{constructor(e){super(e),this.IsSeriesSelected=e.isSeriesSelected,this.IsPointSelected=e.isPointSelected}}class Jf{constructor(e,t){this.SeriesIndex=e,this.PointId=t}}mt.register(Kf.eventName,(e=>e.detail)),mt.register(Of.eventName,(e=>e.detail)),mt.register(_f.eventName,(e=>e.detail)),mt.register(Vf.eventName,(e=>e.detail)),mt.register(zf.eventName,(e=>e.detail)),mt.register(Wf.eventName,(e=>e.detail)),le();const jf="dxChartLegendElementHasMouseoverEvent";class Zf extends tc{get widgetSettingsConverter(){return this._widgetSettingsConverter}get styleHelper(){return this._styleHelper}get selectionController(){return this._selectionController}constructor(){super(),this._isChartUpdating=!1,this.legendMouseOverHandler=this.onLegendMouseOver.bind(this),this._styleHelper=dc.getInstance(),this._drawnExecutor=ic(this.onChartDrawn.bind(this)),this._serverDrawnExecutor=ic(this.dispatchServerDrawnEvent.bind(this)),this._selectionController=new Ud(this),this._tooltipHelper=new Ed(this),this._selectionController.setChartType(this.getWidgetTypeName()),this._widgetSettingsConverter=this.createWidgetSettingsConverter()}disposeComponent(){super.disposeComponent(),this._drawnExecutor.reset(),this._serverDrawnExecutor.reset(),this._selectionController.dispose(),this.removeLegendMouseHandler();const e=this.querySelectorAll("."+pd);for(let t=0;t<e.length;t++){const i=e[t];i&&wi(i)}}resetSelection(){this.selectionController.resetSelection(),this.afterWidgetResolved((e=>{e.clearSelection()}))}selectSeries(e){this.afterWidgetResolved((t=>{const i=t.getSeriesByPos(e);i&&!i.isSelected()&&this.selectionController.toggleSeriesSelection(i)}))}deselectSeries(e){this.afterWidgetResolved((t=>{const i=t.getSeriesByPos(e);(null==i?void 0:i.isSelected())&&this.selectionController.toggleSeriesSelection(i)}))}selectPoints(e,t){this.afterWidgetResolved((i=>{const n=i.getSeriesByPos(e);if(n)for(let e=0;e<t.length;e++){const i=Zf.getPointByData(n,t[e]);i&&!i.isSelected()&&this.selectionController.togglePointSelection(i)}}))}deselectPoints(e,t){this.afterWidgetResolved((i=>{const n=i.getSeriesByPos(e);if(n)for(let e=0;e<t.length;e++){const i=Zf.getPointByData(n,t[e]);(null==i?void 0:i.isSelected())&&this.selectionController.togglePointSelection(i)}}))}onSeriesVisibleChanged(e,t,i){var n;null===(n=this._widgetPromise)||void 0===n||n.then((function(n){const s=wd(n,e,t);i?s.show():s.hide()})).catch((e=>console.error(e)))}exportToFile(e,t,i,n){return function(e,t,i,n,s){return Lf(e,t,i,n,s,void 0)}(this,e,t,i,n)}exportToBase64AndGetLength(e,t,i){return async function(e,t,i,n){return new Promise(((s,r)=>{Lf(e,"",t,i,n,(function(e){e.cancel=!0;const t=new FileReader;t.readAsDataURL(e.data),t.onloadend=function(){Nf=t.result,s(Nf.length)}}))}))}(this,e,t,i)}getBase64ImageChunk(e,t){return async function(e,t){return new Promise(((i,n)=>{i(Nf.substring(e,t))}))}(e,t)}clearBase64ImageData(){return async function(){return new Promise(((e,t)=>{Nf="",e()}))}()}showTooltipForPoint(e,t){var i;null===(i=this._widgetPromise)||void 0===i||i.then((i=>{const n=i.getSeriesByPos(t);if(!n)return;let s=e[nc.defaultSeriesArgumentField];"datetime"===n.argumentType&&"string"==typeof s&&(s=new Date(s));const r=n.getPointsByArg(s),o=(null==r?void 0:r.find((t=>t.originalValue===e[nc.defaultSeriesValueField])))||r[0];null==o||o.showTooltip()})).catch((e=>{ui(this)||console.error(e)}))}correctTooltipPosition(){this._tooltipHelper.positionTooltip()}hideTooltip(e){this._tooltipHelper.hideTooltip(e)}render(){this.executeClientMethod("render")}refreshTheme(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>e.option("palette",this._styleHelper.palette))),this.updateWidgetTheme()}onSeriesClick(e,t,i){const n=new _f({seriesIndex:e,data:t,tag:i});this.dispatchEvent(n)}onSelectionChanged(e){const t=new Vf(e);this.dispatchEvent(t)}onTooltipShowing(e){const t=new Of(e);this.dispatchEvent(t)}createWidgetDefaultOptions(){return{...this.widgetSettingsConverter.createDefaultSettings(),palette:this.styleHelper.palette}}processSpecialOptions(e){super.processSpecialOptions(e),this.onBeforeChartOptionsCompleted(e);const t=this.widgetSettingsConverter.convert(e);Object.getOwnPropertyNames(e).forEach((t=>delete e[t])),Object.assign(e,t),this.correctChartElementHeight()}correctChartElementHeight(){const e=this.getWidgetElement();this.style.getPropertyValue("height")||e.style.setProperty("min-height","300px")}onBeforeChartOptionsCompleted(e){var t;this.configureSelectionController(e),this.hasTooltip(e)&&this.addLegendMouseHandler(),(null===(t=e.legend)||void 0===t?void 0:t.visible)&&this.afterWidgetResolved((e=>{vd(this,e,this.getLegendItemType(),this.selectionController)}))}configureSelectionController(e){void 0!==e.pointSelectionMode&&this._selectionController.setPointSelectionMode(e.pointSelectionMode)}hasTooltip(e){var t;return!!(null===(t=e.tooltip)||void 0===t?void 0:t.enabled)}addLegendMouseHandler(){const e=this.querySelector("."+cd);e&&!e.hasAttribute(jf)&&(e.addEventListener("mouseover",this.legendMouseOverHandler),e.setAttribute(jf,"true"))}removeLegendMouseHandler(){const e=this.querySelector("."+cd);null==e||e.removeEventListener("mouseover",this.legendMouseOverHandler),null==e||e.removeAttribute(jf)}onLegendMouseOver(){this._tooltipHelper.hideTooltip(!0)}createWidgetHandlers(){const e=this.selectionController;return{...super.createWidgetHandlers(),onPointClick:this.getChartOnPointClickHandler(),onSeriesClick:this.getChartOnSeriesClickHandler(),onPointSelectionChanged:t=>{e.pointSelectionChanged(t)},onSeriesSelectionChanged:t=>{e.seriesSelectionChanged(t)},onPointHoverChanged:t=>{this._isChartUpdating||e.pointHoverChanged(t)},onSeriesHoverChanged:t=>{this._isChartUpdating||e.seriesHoverChanged(t)},onDrawn:this.getChartOnDrawnHandler(),onOptionChanged:()=>this.onChartOptionChanged(),onTooltipShown:e=>this._tooltipHelper.onTooltipShown(e,this.onTooltipShowing.bind(this)),onTooltipHidden:e=>this._tooltipHelper.onTooltipHidden(e)}}getChartOnDrawnHandler(){return e=>{const t=this._selectionController;vd(this,e.component,this.getLegendItemType(),t),t.restoreChartSelection(e.component),this.onChartDrawn()}}getChartOnSeriesClickHandler(){}onChartDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this._serverDrawnExecutor.execute(),this.endChartUpdating(),li(this,"dxbl-chart-first-loading",!1)}dispatchServerDrawnEvent(){this.dispatchEvent(new Kf)}onChartOptionChanged(){this._isChartUpdating&&this._drawnExecutor.execute()}onlyContainerSizeChanged(){this.onChartDrawn()}nonWidgetOptionChanged(){this.changeLoadingPanelVisibility(!1)}updateWidgetOptions(e,t){this.startChartUpdating(),t.animation={enabled:!1},this.prepareSpecialOptions(t,e),super.updateWidgetOptions(e,t)}prepareSpecialOptions(e,t){var i;const n=nc.argumentAxisKey,s=nc.visualRangeKey,r=null===(i=e[n])||void 0===i?void 0:i[s],o=t.option(`${n}.${s}`);r&&o&&(e[n][s]=Object.assign(o,r))}getSkippedEmptyOptions(){return["dataSource"]}startChartUpdating(){this._isChartUpdating=!0}endChartUpdating(){this._isChartUpdating=!1}static getPointByData(e,t){let i=t[nc.defaultSeriesArgumentField],n=t[nc.defaultSeriesValueField];const s=e.valueType;return"datetime"===e.argumentType&&"string"==typeof i&&(i=new Date(i)),"datetime"===s&&"string"==typeof n&&(n=new Date(n).getTime()),e.getPointsByArg(i).find((e=>"datetime"===s?e.originalValue.getTime()===n:e.originalValue===n))}onLegendClick(e,t){const i=new zf(e,t);this.dispatchEvent(i)}}const ev=`${nc.commonAxisSettingsKey}.title.font.${nc.colorKey}`,tv=`${nc.commonAxisSettingsKey}.${nc.constantLineStyleKey}.${nc.colorKey}`,iv=`${nc.commonAxisSettingsKey}.${nc.colorKey}`,nv=`${nc.commonSeriesSettingsKey}.valueErrorBar.${nc.colorKey}`,sv=`${nc.commonAnnotationSettingsKey}.${nc.colorKey}`,rv=`${nc.commonAnnotationSettingsKey}.font.${nc.colorKey}`,ov=`${nc.commonSeriesSettingsKey}.candlestick.innerColor`,av=`zoomAndPan.dragBoxStyle.${nc.colorKey}`,lv=`${nc.commonAxisSettingsKey}.label.font.${nc.colorKey}`,Av=`${nc.commonAxisSettingsKey}.label.font.opacity`;let dv=class extends Zf{constructor(){super(...arguments),this._pointClickArgs=null}getWidgetTypeName(){return Id.xyChartName}getLegendItemType(){return fd.series}createWidgetSettingsConverter(){return new oc}getThemeDependentOptionsDict(){const e={[ev]:gd.axisTitleFontColor,[tv]:gd.constantLineColor,[iv]:gd.axisLineColor,containerBackgroundColor:gd.containerBackgroundColor,[nv]:gd.errorBarColor,[sv]:gd.annotationColor,[rv]:gd.annotationTextColor,[ov]:gd.candlestickInnerColor,[av]:gd.zoomAndPanDragBoxColor,[lv]:gd.axisLabelFontColor,[Av]:gd.axisLabelFontOpacity};return{...super.getThemeDependentOptionsDict(),...e}}configureSelectionController(e){void 0!==e.seriesSelectionMode&&this.selectionController.setSeriesSelectionMode(e.seriesSelectionMode),super.configureSelectionController(e)}getChartOnPointClickHandler(){return e=>{this._pointClickArgs=e}}getChartOnSeriesClickHandler(){return e=>{var t;const i=e.target,n=null===(t=this._pointClickArgs)||void 0===t?void 0:t.target;this.onSeriesClick(i.index,null==n?void 0:n.data,null==n?void 0:n.tag),this._pointClickArgs=null,this.selectionController.selectSeriesAndPoint(i,n)}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onZoomEnd:e=>this.onChartVisualRangeChanged(e)}}onChartVisualRangeChanged(e){const t=new Wf(e);this.dispatchEvent(t)}resetVisualRange(){this.afterWidgetResolved((e=>{e.resetVisualRange()}))}setArgumentAxisVisualRange(e){this.afterWidgetResolved((t=>{t.getArgumentAxis().visualRange(e)}))}setValueAxisVisualRange(e,t){this.afterWidgetResolved((i=>{var n;null===(n=i.getValueAxis(t))||void 0===n||n.visualRange(e)}))}};dv=C([rn("dxbl-chart")],dv);let cv=class extends Zf{getWidgetTypeName(){return Id.pieChartName}createWidgetSettingsConverter(){return new ac}getLegendItemType(){return fd.point}getChartOnPointClickHandler(){const e=this.selectionController;return t=>{const i=t.target;this.onSeriesClick(i.series.index,i.data,i.tag),e.togglePointSelection(i)}}};cv=C([rn("dxbl-pie-chart")],cv);const hv="dxbl-polar-chart",uv=`--${hv}`;let pv=class extends Zf{constructor(){super(...arguments),this._pointClickArgs=null}getWidgetTypeName(){return Id.polarChartName}createWidgetSettingsConverter(){return new lc}configureSelectionController(e){void 0!==e.seriesSelectionMode&&this.selectionController.setSeriesSelectionMode(e.seriesSelectionMode),super.configureSelectionController(e)}getLegendItemType(){return fd.series}getChartOnPointClickHandler(){return e=>{this._pointClickArgs=e}}getChartOnSeriesClickHandler(){return e=>{var t;const i=e.target,n=null===(t=this._pointClickArgs)||void 0===t?void 0:t.target;this.onSeriesClick(i.index,null==n?void 0:n.data,null==n?void 0:n.tag),this._pointClickArgs=null,this.selectionController.selectSeriesAndPoint(i,n)}}getThemeDependentOptionsDict(){const e={containerBackgroundColor:`${uv}-container-background-color`};return{...super.getThemeDependentOptionsDict(),...e}}};pv=C([rn(hv)],pv);const mv="dxbl-map";class gv extends CustomEvent{constructor(e,t){super(gv.eventName,{detail:new fv(e,t),bubbles:!0,composed:!0,cancelable:!0})}}gv.eventName=mv+".click";class Cv extends CustomEvent{constructor(e){super(Cv.eventName,{detail:new vv(e),bubbles:!0,composed:!0,cancelable:!0})}}Cv.eventName=mv+".marker-click";class fv{constructor(e,t){this.Latitude=e,this.Longitude=t}}class vv{constructor(e){this.Key=e}}var bv,wv;mt.register(gv.eventName,(e=>e.detail)),mt.register(Cv.eventName,(e=>e.detail)),null!==(bv=(wv=window).sj_evt)&&void 0!==bv||(wv.sj_evt={fire:()=>{},bind:()=>{}});const yv="markerId";let Bv=class extends tc{createWidgetHandlers(){return{...super.createWidgetHandlers(),onClick:e=>this.onMapClick(e),onReady:e=>this.onMapReady(e),onOptionChanged:e=>this.onMapOptionChanged(e)}}getWidgetModuleName(){return"ui"}getWidgetTypeName(){return"dxMap"}disposeWidget(e){var t;null===(t=null==e?void 0:e._lastAsyncAction)||void 0===t||t.catch((e=>{})),super.disposeWidget(e)}createWidgetDefaultOptions(){return{height:"100%",width:"100%"}}processSpecialOptions(e){super.processSpecialOptions(e),this.preapreMarkerClickHandlers(e.markers)}onMapClick(e){this.dispatchEvent(new gv(e.location.lat,e.location.lng))}onMapReady(e){this.changeLoadingPanelVisibility(!1)}onMapOptionChanged(e){this.changeLoadingPanelVisibility(!1)}preapreMarkerClickHandlers(e){null==e||e.forEach((e=>{if(e[yv]){const t=e[yv];e.onClick=()=>{this.onMarkerClick(t)},delete e[yv]}}))}onMarkerClick(e){this.dispatchEvent(new Cv(e))}};Bv=C([rn("dxbl-map")],Bv);const Ev="dxbl-html-editor";class Iv extends CustomEvent{constructor(e,t,i){super(Iv.eventName,{detail:new Tv(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}Iv.eventName=Ev+".state-changed";class Sv extends CustomEvent{constructor(e){super(Sv.eventName,{detail:new Hv(e),bubbles:!0,composed:!0,cancelable:!0})}}Sv.eventName=Ev+".show-hyperlink-dialog";class xv extends CustomEvent{constructor(e){super(xv.eventName,{detail:new Uv(e),bubbles:!0,composed:!0,cancelable:!0})}}xv.eventName=Ev+".show-image-dialog";class Dv extends kd{constructor(){super(Dv.eventName)}}Dv.eventName=Ev+".show-table-dialog";class Fv extends CustomEvent{constructor(e){super(Fv.eventName,{detail:new Pv(e),bubbles:!0,composed:!0,cancelable:!0})}}Fv.eventName=Ev+".value-changed";class Tv{constructor(e,t,i){this.Format=e,this.ButtonsVisibility=t,this.ReadOnly=i}}class Hv{constructor(e){this.Data=e}}class Uv{constructor(e){this.Data=e}}class Pv{constructor(e){this.Value=e}}mt.register(Iv.eventName,(e=>e.detail)),mt.register(Fv.eventName,(e=>e.detail)),mt.register(Sv.eventName,(e=>e.detail)),mt.register(xv.eventName,(e=>e.detail)),mt.register(Dv.eventName,(e=>e.detail));class Qv{static moveFocus(e,t,i){const n=e.querySelectorAll(t);if(n.length<=1)return;const s=Array.from(n).filter((e=>!Te.isHidden(e)));if(s.length<=1)return;const r=document.activeElement,o=s.reduce(((e,t,i)=>t.contains(r)?i:e),-1);if(o<0)return;let a,l=o;if(i)if(l++,l>=s.length){const t=this.findFocusableElements(document),i=this.findFocusableElements(e),n=t.indexOf(i[i.length-1]);a=n>=0&&n<t.length-1?t[n+1]:t[0]}else a=s[l];else if(l--,l<0){const t=this.findFocusableElements(document),i=this.findFocusableElements(e),n=t.indexOf(i[0]);a=n>0?t[n-1]:t[t.length-1]}else a=s[l];null==a||a.focus()}static findFocusableElements(e){return Array.from(e.querySelectorAll(k)).filter((e=>e.tabIndex>-1&&e.offsetWidth&&e.offsetHeight&&!Te.isHidden(e)))}}const Nv="silent",Rv="user",Lv="focusout",Mv="keydown",kv="Normal text";var Kv;!function(e){e.OnLostFocus="onLostFocus",e.OnDelayedInput="onDelayedInput"}(Kv||(Kv={}));let Ov=class extends tc{constructor(){super(...arguments),this._readOnly=!1,this._bindValueMode=Kv.OnLostFocus,this._inputDelay=500,this._timer=0,this._lastQuillFormat={},this._lastButtonsVisibility="",this._valueChangesQueueTimer=0,this._valueChangesQueue=[],this.isBindingUse=!1}getWidgetModuleName(){return"ui"}getWidgetTypeName(){return"dxHtmlEditor"}createInitOptions(){const e=super.createInitOptions();return e.toolbar=void 0,e.mediaResizing={enabled:!0},e}updateWidgetOptions(e,t){if(1===Object.keys(t).length&&"value"in t){if(e.option("value")===t.value&&this.hideLoadingPanel(),this._valueChangesQueue.length>0){if(this._valueChangesQueue.shift()===t.value)return;this._valueChangesQueue=[]}}super.updateWidgetOptions(e,t),this.updateStates(t)}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareValidationOptions(e),this.prepareResizingOptions(e),this.setBindValueOptions(e)}setBindValueOptions(e){e.bindMarkupMode&&(this._bindValueMode=e.bindMarkupMode,delete e.bindMarkupMode),e.inputDelay&&(this._inputDelay=e.inputDelay,delete e.inputDelay)}prepareValidationOptions(e){"showValidationMessageOnFocus"in e&&(e.validationMessageMode="always",delete e.showValidationMessageOnFocus),!1===e.isValid&&(e.validationStatus="invalid",delete e.isValid),e.validationMessage&&(e.validationError={message:e.validationMessage},delete e.validationMessage)}prepareResizingOptions(e){var t,i;"mediaResizeEnabled"in e&&(e.mediaResizing={enabled:e.mediaResizeEnabled},delete e.mediaResizeEnabled),"tableResizeEnabled"in e&&(e.tableResizing={enabled:e.tableResizeEnabled,minColumnWidth:null!==(t=e.tableColumnMinWidth)&&void 0!==t?t:40,minRowHeight:null!==(i=e.tableRowMinHeight)&&void 0!==i?i:24},delete e.tableResizeEnabled),delete e.tableColumnMinWidth,delete e.tableRowMinHeight}createComponent(e){var t;super.createComponent(e),null===(t=this._widgetPromise)||void 0===t||t.then((t=>{this._widgetInstance=t,this._widgetInstance.getQuillInstance().on("editor-change",this.onEditorChange.bind(this)),this.updateStates(e),this.getWidgetElement().removeAttribute("role")}));const i=this.getContainerToSetStyle();i.addEventListener(Lv,this.onFocusOut),i.addEventListener(Mv,this.onKeyDown)}updateStates(e){this.applyHtmlEditorState(e.readOnly)}disposeComponent(){super.disposeComponent();const e=this.getContainerToSetStyle();e.removeEventListener(Lv,this.onFocusOut),e.removeEventListener(Mv,this.onKeyDown)}createWidgetHandlers(){return{...super.createWidgetHandlers(),onContentReady:e=>this.hideLoadingPanel(),onValueChanged:e=>this.onValueChanged(e.value),onOptionChanged:e=>this.hideLoadingPanel()}}onWidgetInitialized(e){super.onWidgetInitialized(e),this.processMentionsModule(e.component)}processMentionsModule(e){const t=e.get("modules/mentions");e.register({"modules/mentions":class extends t{_getPopupConfig(){const e=super._getPopupConfig();return e.container="dxbl-html-editor",e}}})}hideLoadingPanel(){this.changeLoadingPanelVisibility(!1)}setValueInQueue(e){this._valueChangesQueue.push(e),clearTimeout(this._valueChangesQueueTimer),this._valueChangesQueueTimer=setTimeout((()=>{this._valueChangesQueue=[]}),500)}onValueChanged(e){this._bindValueMode===Kv.OnDelayedInput?(clearTimeout(this._timer),this._timer=setTimeout((()=>{this.isBindingUse&&this.setValueInQueue(e),this.sendValue(e)}),this._inputDelay)):this._value=e}onFocusOut(e){this._bindValueMode!==Kv.OnLostFocus||void 0===this._value||ut.containsElement(this.getContainerToSetStyle(),e.relatedTarget)||(this.sendValue(this._value),this._value=void 0)}onKeyDown(e){if(e.shiftKey&&e.altKey){const t=Be.KeyUtils.getEventKeyCode(e);t===Be.KeyCode.Down?(this.moveFocus(!0),e.stopPropagation()):t===Be.KeyCode.Up&&(this.moveFocus(!1),e.stopPropagation())}}moveFocus(e){Qv.moveFocus(this.getContainerToSetStyle(),"dxbl-ribbon-internal, .ql-editor",e)}sendValue(e){let t;""!==e&&(t=this.getJsObjectReference(e)),this.dispatchEvent(new Fv(t))}getJsObjectReference(e){const t=(new TextEncoder).encode(e);return DotNet.createJSStreamReference(t)}onEditorChange(e,...t){"selection-change"===e&&null===t[0]?this._selection=t[1]:!this._readOnly&&this.applyHtmlEditorState()}applyHtmlEditorState(e){const t=!!e,i=this.getQuillFormat(),n=this.modifyFormat(i),s=this.getButtonsVisibility(i);this._readOnly===t&&JSON.stringify(this._lastQuillFormat)===JSON.stringify(i)&&this._lastButtonsVisibility===s||this.dispatchEvent(new Iv(n,s,t)),this._readOnly=t,this._lastQuillFormat=i,this._lastButtonsVisibility=s}getQuillFormat(){var e,t;const i=null===(e=this._widgetInstance)||void 0===e?void 0:e.getSelection();return i?null===(t=this._widgetInstance)||void 0===t?void 0:t.getFormat(i.index,i.length):{}}modifyFormat(e){const t=this.prepareFormatParameters(e),i=this.getFullFormat(t);return JSON.stringify(i)}getFullFormat(e){return e.header||(e.header=kv),e}getButtonsVisibility(e){if(!this._widgetInstance)return"{}";const t=this._widgetInstance.getQuillInstance().history,{undo:i,redo:n}=t.stack,s=this.isTableElement(e);return JSON.stringify({undo:i.length>0,redo:n.length>0,insertTable:!s,insertRowAbove:s,insertRowBelow:s,deleteRow:s,insertColumnLeft:s,insertColumnRight:s,deleteColumn:s,insertHeaderRow:s,deleteTable:s})}isTableElement(e){return!(!e.tableCellLine&&!e.tableHeaderCellLine)}prepareFormatParameters(e){const t={};for(const[i,n]of Object.entries(e))switch(i){case"align":"left"===n?t.alignLeft=!0:"center"===n?t.alignCenter=!0:"right"===n?t.alignRight=!0:t.alignJustify=!0;break;case"list":"ordered"===n?t.orderedList=!0:"bullet"===n&&(t.bulletList=!0);break;case"script":"sub"===n?t.subscript=!0:"super"===n&&(t.superscript=!0);break;case"indent":case"imageSrc":case"background":case"color":case"target":case"link":break;case"code-block":t["code-block"]=!0;break;case"header":t.header=this.getHeaderValue(n);break;default:t[i]=n}return t}parseFormatParameters(e,t){let i,n;switch(e){case"alignLeft":i="align",n=!!t&&"left";break;case"alignCenter":i="align",n=!!t&&"center";break;case"alignRight":i="align",n=!!t&&"right";break;case"alignJustify":i="align",n=!!t&&"justify";break;case"orderedList":i="list",n=!!t&&"ordered";break;case"bulletList":i="list",n=!!t&&"bullet";break;case"subscript":i="script",n=!!t&&"sub";break;case"superscript":i="script",n=!!t&&"super";break;case"increaseIndent":i="indent",n=!!t&&"+1";break;case"decreaseIndent":i="indent",n=!!t&&"-1";break;case"header":n=this.parseHeaderValue(t)}return{formatName:null!=i?i:e,formatValue:null!=n?n:t}}toggleUndoRedo(e){var t,i;"undo"===e?null===(t=this._widgetInstance)||void 0===t||t.undo():null===(i=this._widgetInstance)||void 0===i||i.redo(),this.applyHtmlEditorState()}clearFormat(){var e,t;const i=null===(e=this._widgetInstance)||void 0===e?void 0:e.getSelection();i&&(null===(t=this._widgetInstance)||void 0===t||t.removeFormat(i.index,i.length),this.applyHtmlEditorState())}toggleFontChanges(e,t){var i,n;this.focusEditor(),this._selection&&(null===(i=this._widgetInstance)||void 0===i||i.setSelection(this._selection.index,this._selection.length)),null===(n=this._widgetInstance)||void 0===n||n.format(e,t),this.applyHtmlEditorState()}parseHeaderValue(e){return e!==kv&&e.split(" ")[1]}getHeaderValue(e){return e?`Heading ${e}`:kv}getLeafSelection(e,t){const i=e.getLeaf(t),n=i[0].text;return{index:t-i[1],length:n?n.length:0}}getTableModule(){var e;const t=null===(e=this._widgetInstance)||void 0===e?void 0:e.getQuillInstance();return t.focus(),t.getModule("table")}insertRowAbove(){this.getTableModule().insertRowAbove()}insertRowBelow(){this.getTableModule().insertRowBelow()}deleteRow(){this.getTableModule().deleteRow()}insertColumnLeft(){this.getTableModule().insertColumnLeft()}insertColumnRight(){this.getTableModule().insertColumnRight()}deleteColumn(){this.getTableModule().deleteColumn()}insertHeaderRow(){this.getTableModule().insertHeaderRow()}deleteTable(){this.getTableModule().deleteTable()}insertVariable(e,t){var i,n;const s=null===(i=this._widgetInstance)||void 0===i?void 0:i.getSelection(),r=s?s.index:0,o=null===(n=this._widgetInstance)||void 0===n?void 0:n.getQuillInstance();s&&o.deleteText(r,s.length,Nv),this._widgetInstance.insertEmbed(r,"variable",{value:e,escapeChar:t||["{","}"]})}executeCommand(e,t,i){var n;const{formatName:s,formatValue:r}=this.parseFormatParameters(e,t);switch(s){case"undo":case"redo":this.toggleUndoRedo(s);break;case"clear":this.clearFormat();break;case"header":case"size":case"font":this.toggleFontChanges(s,r);break;case"insertRowAbove":this.insertRowAbove();break;case"insertRowBelow":this.insertRowBelow();break;case"deleteRow":this.deleteRow();break;case"insertColumnLeft":this.insertColumnLeft();break;case"insertColumnRight":this.insertColumnRight();break;case"deleteColumn":this.deleteColumn();break;case"insertHeaderRow":this.insertHeaderRow();break;case"deleteTable":this.deleteTable();break;case"variable":this.insertVariable(t,i);break;default:null===(n=this._widgetInstance)||void 0===n||n.format(s,r),this.applyHtmlEditorState()}}async applyPicture(e,t,i,n){var s,r,o,a;const l=null===(s=this._widgetInstance)||void 0===s?void 0:s.getFormat(),A=null===(r=this._widgetInstance)||void 0===r?void 0:r.getSelection(),d=null===(o=this._widgetInstance)||void 0===o?void 0:o.getQuillInstance(),c=await this.decodeStream(e);let h=null!==(a=A.index)&&void 0!==a?a:0;l.imageSrc&&0===A.length?(h=this.getLeafSelection(d,A.index).index,d.deleteText(h,1,Nv)):A.length&&d.deleteText(h,A.length,Nv),this._widgetInstance.insertEmbed(h,"extendedImage",{src:c,alt:t,width:i,height:n})}applyHyperlink(e,t,i){var n,s,r,o,a;const l=null===(n=this._widgetInstance)||void 0===n?void 0:n.getFormat(),A=null===(s=this._widgetInstance)||void 0===s?void 0:s.getSelection(),d=null===(r=this._widgetInstance)||void 0===r?void 0:r.getQuillInstance();if(A.length>0&&this.hasEmbeddedElement(A))null===(o=this._widgetInstance)||void 0===o||o.format("link",{href:e,target:i});else{const n=0===t.length?e:t;let s=null!==(a=A.index)&&void 0!==a?a:0;if(void 0!==l.link&&0===A.length){const{index:e,length:t}=this.getLeafSelection(d,A.index);s=e,d.deleteText(e,t,Nv)}else A.length&&d.deleteText(A.index,A.length,Nv);d.insertText(s,n,"link",{href:e,target:i},Rv),d.setSelection(s+n.length,0)}}insertTable(e,t){this.getTableModule().insertTable(e,t)}showDialog(e){switch(e){case"ShowHyperlinkDialog":this.passHyperlinkDialogData();break;case"ShowInsertPictureDialog":this.passImageDialogData();break;case"ShowInsertTableDialog":this.passTableDialogData()}}focusEditor(){var e;null===(e=this._widgetInstance)||void 0===e||e.focus()}getSelectedContent(){if(!this._widgetInstance)return;const{start:e,length:t}=this.getCurrentPosition();return this._widgetInstance.getText(e,t)}insertText(e,t){if(!this._widgetInstance)return;const{start:i,length:n}=this.getCurrentPosition();switch(t){case"after":this._widgetInstance.insertText(i+n,e,Rv),this._widgetInstance.setSelection(i+n,e.length);break;case"before":this._widgetInstance.insertText(i,e,Rv),this._widgetInstance.setSelection(i,e.length);break;case"replace":this._widgetInstance.delete(i,n),this._widgetInstance.insertText(i,e,Rv),this._widgetInstance.setSelection(i,e.length)}}getCurrentPosition(){const e=this._widgetInstance.getSelection(!0);return e&&e.length?{start:e.index,length:e.length}:{start:0,length:this._widgetInstance.getLength()}}hasEmbeddedElement(e){var t;const i=(null===(t=this._widgetInstance)||void 0===t?void 0:t.getQuillInstance()).getContents(e.index,e.length).ops;for(const e of i)if(e.insert.extendedImage||e.insert.variable||e.insert.mention)return!0;return!1}async decodeStream(e){const t=await e.arrayBuffer();return new TextDecoder("utf-8").decode(t)}passHyperlinkDialogData(){var e,t,i;let n={};const s=null===(e=this._widgetInstance)||void 0===e?void 0:e.getFormat(),r=null===(t=this._widgetInstance)||void 0===t?void 0:t.getSelection(),o=null===(i=this._widgetInstance)||void 0===i?void 0:i.getQuillInstance();if(r.length>0&&this.hasEmbeddedElement(r))n={url:s.link,text:null,blank:s.link?!!s.target:void 0};else if(void 0===s.link){n={text:this._widgetInstance.getText(r.index,r.length)}}else{const e=o.getLeaf(r.index),t=this._widgetInstance.getText(r.index,r.length);n={url:s.link,text:0===r.length?e[0].text:t,blank:!!s.target}}this.dispatchEvent(new Sv(n))}passImageDialogData(){var e;let t={};const i=null===(e=this._widgetInstance)||void 0===e?void 0:e.getFormat();t={stream:i.imageSrc&&this.getJsObjectReference(i.imageSrc),alt:i.alt,width:i.width,height:i.height},this.dispatchEvent(new xv(t))}passTableDialogData(){this.dispatchEvent(new Dv)}};C([ln({attribute:"is-binding-use",type:Boolean})],Ov.prototype,"isBindingUse",void 0),Ov=C([rn("dxbl-html-editor")],Ov);const _v="dxbl-gauge-base";class Vv extends kd{constructor(){super(Vv.eventName)}}Vv.eventName=_v+".drawn";class zv extends kd{constructor(){super(zv.eventName)}}zv.eventName=_v+".exported",mt.register(Vv.eventName,(e=>e.detail)),mt.register(zv.eventName,(e=>e.detail));class Wv extends tc{constructor(){super(),this._styleHelper=dc.getInstance(),this._drawnExecutor=ic(this.onGaugeDrawn.bind(this))}createWidgetDefaultOptions(){return{palette:this._styleHelper.palette}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onGaugeDrawn(),onOptionChanged:()=>this.onGaugeOptionChanged(),onExported:()=>this.onGaugeExported()}}onGaugeDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new Vv)}onGaugeOptionChanged(){this._drawnExecutor.execute()}onGaugeExported(){this.dispatchEvent(new zv)}onlyContainerSizeChanged(){this.onGaugeDrawn()}exportTo(...e){return this.executeClientMethod("exportTo",...e)}print(...e){return this.executeClientMethod("print",...e)}svg(...e){return this.executeClientMethod("svg",...e)}}const $v="dxbl-bar-gauge",Gv="legend",qv="itemCaptions",Xv="color",Yv="font",Jv="subtitle",jv="title",Zv=`${Yv}.${Xv}`,eb=`${Gv}.${Zv}`,tb=`${jv}.${Zv}`,ib=`${jv}.${Jv}.${Zv}`,nb=`${Gv}.${tb}`,sb=`${Gv}.${ib}`,rb=`--${$v}`,ob=`${rb}-${Gv}`,ab=`${Yv}-${Xv}`,lb=`${jv}-${ab}`,Ab=`${Jv}-${ab}`;let db=class extends Wv{getWidgetTypeName(){return"dxBarGauge"}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareLegend(e[Gv])}prepareLegend(e){const t=null==e?void 0:e[qv];t&&(e.customizeText=e=>{var i,n;const s=null===(i=e.item)||void 0===i?void 0:i.index;return null!==(n=t[s])&&void 0!==n?n:e.text},delete e[qv])}getThemeDependentOptionsDict(){const e={[tb]:`${rb}-${lb}`,[ib]:`${rb}-${Ab}`,[eb]:`${ob}-item-${ab}`,[nb]:`${ob}-${lb}`,[sb]:`${ob}-${Ab}`};return{...super.getThemeDependentOptionsDict(),...e}}};db=C([rn($v)],db);const cb="dxbl-sankey";class hb extends kd{constructor(){super(hb.eventName)}}hb.eventName=cb+".drawn";class ub extends kd{constructor(){super(ub.eventName)}}ub.eventName=cb+".exported";class pb{constructor({label:e,linksIn:t,linksOut:i}){this.Node={label:e,linksIn:t,linksOut:i}}}class mb{constructor(e){this.Connection=e}}class gb extends CustomEvent{constructor(e){super(gb.eventName,{detail:new pb(e),bubbles:!0,composed:!0,cancelable:!0})}}gb.eventName=cb+".nodeClick";class Cb extends CustomEvent{constructor(e){super(Cb.eventName,{detail:new mb(e),bubbles:!0,composed:!0,cancelable:!0})}}Cb.eventName=cb+".linkClick",mt.register(hb.eventName,(e=>e.detail)),mt.register(ub.eventName,(e=>e.detail)),mt.register(gb.eventName,(e=>e.detail)),mt.register(Cb.eventName,(e=>e.detail));const fb="dxbl-sankey",vb="exportTo",bb="print",wb="svg",yb="getAllLinks",Bb="getAllNodes",Eb="color",Ib="font",Sb="subtitle",xb="title",Db="label",Fb=`${Ib}.${Eb}`,Tb=`${xb}.${Fb}`,Hb=`${xb}.${Sb}.${Fb}`,Ub=`${Db}.${Fb}`,Pb=`--${fb}`,Qb=`${Ib}-${Eb}`,Nb=`${xb}-${Qb}`,Rb=`${Sb}-${Qb}`,Lb=`${Db}-${Qb}`;let Mb=class extends tc{constructor(){super(),this._styleHelper=dc.getInstance(),this._drawnExecutor=ic(this.onDrawn.bind(this))}getWidgetTypeName(){return"dxSankey"}createWidgetDefaultOptions(){return{tooltip:{enabled:!1},palette:this._styleHelper.palette}}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onNodeClick:e=>this.onNodeClick(e.target),onLinkClick:e=>this.onLinkClick(e.target),onExported:()=>this.onExported()}}processSpecialOptions(e){super.processSpecialOptions(e),e.dataSource&&(e.dataSource=this._prepareDataSource(e.dataSource))}_prepareDataSource(e){const t=e.sources||[],i=e.targets||[],n=e.weights||[],s=[];for(let e=0;e<t.length;e++)s.push({source:t[e],target:i[e],weight:n[e]});return s}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new hb)}onOptionChanged(){this._drawnExecutor.execute()}onNodeClick({label:e,linksIn:t,linksOut:i}){this.dispatchEvent(new gb({label:e,linksIn:t,linksOut:i}))}onLinkClick({connection:e}){this.dispatchEvent(new Cb(e))}onlyContainerSizeChanged(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>{e.render()})),this.onDrawn()}onExported(){this.dispatchEvent(new ub)}getThemeDependentOptionsDict(){const e={[Tb]:`${Pb}-${Nb}`,[Hb]:`${Pb}-${Rb}`,[Ub]:`${Pb}-${Lb}`};return{...super.getThemeDependentOptionsDict(),...e}}[vb](...e){return this.executeClientMethod(vb,...e)}[bb](...e){return this.executeClientMethod(bb,...e)}[wb](...e){return this.executeClientMethod(wb,...e)}[yb](...e){return this.executeClientMethod(yb,...e).then((e=>e.map((e=>e.connection))))}[Bb](...e){return this.executeClientMethod(Bb,...e).then((e=>e.map((e=>({label:e.label,linksIn:e.linksIn,linksOut:e.linksOut})))))}};Mb=C([rn(fb)],Mb);const kb="dxbl-sparkline";class Kb extends kd{constructor(){super(Kb.eventName)}}Kb.eventName=kb+".drawn";class Ob extends kd{constructor(){super(Ob.eventName)}}Ob.eventName=kb+".exported",mt.register(Kb.eventName,(e=>e.detail)),mt.register(Ob.eventName,(e=>e.detail));const _b="dxbl-sparkline",Vb=`--${_b}`,zb="exportTo",Wb="print",$b="svg";let Gb=class extends tc{constructor(){super(),this._drawnExecutor=ic(this.onDrawn.bind(this))}getWidgetTypeName(){return"dxSparkline"}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onExported:()=>this.onExported()}}createWidgetDefaultOptions(){return{ignoreEmptyPoints:!0,tooltip:{enabled:!1}}}processSpecialOptions(e){super.processSpecialOptions(e),e.dataSource&&(e.dataSource=this._prepareDataSource(e.dataSource))}getContainerToSetStyle(){return this.getWidgetElement()}_prepareDataSource(e){const t=e.arg||[],i=e.val||[],n=[];for(let e=0;e<t.length;e++)n.push({arg:t[e],val:i[e]});return n}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new Kb)}onExported(){this.dispatchEvent(new Ob)}onOptionChanged(){this._drawnExecutor.execute()}onlyContainerSizeChanged(){var e;null===(e=this._widgetPromise)||void 0===e||e.then((e=>{e.render()})),this.onDrawn()}getSkippedEmptyOptions(){return["dataSource"]}[zb](...e){return this.executeClientMethod(zb,...e)}[Wb](...e){return this.executeClientMethod(Wb,...e)}[$b](...e){return this.executeClientMethod($b,...e)}getThemeDependentOptionsDict(){const e={pointColor:`${Vb}-point-color`};return{...super.getThemeDependentOptionsDict(),...e}}};Gb=C([rn(_b)],Gb);const qb="dxbl-range-selector";class Xb extends kd{constructor(){super(Xb.eventName)}}Xb.eventName=qb+".drawn";class Yb extends CustomEvent{constructor(e,t){super(Yb.eventName,{detail:new jb(e,t),bubbles:!0,composed:!0,cancelable:!0})}}Yb.eventName=qb+".value-changed";class Jb extends kd{constructor(){super(Jb.eventName)}}Jb.eventName=qb+".exported";class jb{constructor(e,t){this.Value=e,this.PreviousValue=t}}mt.register(Xb.eventName,(e=>e.detail)),mt.register(Yb.eventName,(e=>e.detail)),mt.register(Jb.eventName,(e=>e.detail));const Zb="title",ew="color",tw="scale",iw="sliderMarker",nw=`font.${ew}`,sw=`${Zb}.${nw}`,rw=`${Zb}.subtitle.${nw}`,ow=`${tw}.tick.${ew}`,aw=`${tw}.minorTick.${ew}`,lw=`${iw}.${ew}`,Aw=`${iw}.${nw}`,dw=`sliderHandle.${ew}`,cw=`shutter.${ew}`,hw=`${tw}.label.${nw}`,uw="--dxbl-range-selector",pw=`${uw}-scale-tick-color`,mw=`${uw}-title-font-color`,gw=`${uw}-selected-range-color`,Cw=`${uw}-slider-marker-color`,fw=`${uw}-slider-marker-font-color`,vw=`${uw}-slider-handle-color`,bw=`${uw}-shutter-color`,ww=`${uw}-container-background-color`,yw=`${uw}-scale-label-font-color`,Bw="exportTo",Ew="print",Iw="svg";let Sw=class extends tc{get styleHelper(){return this._styleHelper}constructor(){super(),this._styleHelper=dc.getInstance(),this._drawnExecutor=ic(this.onDrawn.bind(this)),this._widgetSettingsConverter=this.createWidgetSettingsConverter()}createWidgetHandlers(){return{...super.createWidgetHandlers(),onDrawn:()=>this.onDrawn(),onOptionChanged:()=>this.onOptionChanged(),onValueChanged:e=>this.onValueChanged(e),onExported:()=>this.onExported()}}getWidgetTypeName(){return"dxRangeSelector"}createWidgetSettingsConverter(){return new Ac}createInitOptions(){const e=super.createInitOptions(),t=this._widgetSettingsConverter.createDefaultSettings();return e.scale={label:{font:{opacity:nc.defaultAxisLabelFontOpacity}}},e.chart={commonSeriesSettings:t.commonSeriesSettings,dataPrepareSettings:t.dataPrepareSettings,palette:this.styleHelper.palette},e}onDrawn(){this._drawnExecutor.reset(),this.changeLoadingPanelVisibility(!1),this.dispatchEvent(new Xb)}onlyContainerSizeChanged(){this.onDrawn()}onOptionChanged(){this._drawnExecutor.execute()}onValueChanged(e){this.dispatchEvent(new Yb(e.value,e.previousValue))}onExported(){this.dispatchEvent(new Jb)}createWidgetDefaultOptions(){return{height:"100%",width:"100%"}}processSpecialOptions(e){super.processSpecialOptions(e),this.prepareValueOptions(e),this.prepareImageOptions(e),this.prepareBehaviorOptions(e),e.chart&&this._widgetSettingsConverter.processSpecialChartSettings(e,e.chart)}prepareOptions(e,t,i){e[t]=e[t]||{};for(const[n,s]of Object.entries(i))n in e&&(e[t][s]=e[n],delete e[n])}prepareValueOptions(e){this.prepareOptions(e,"value",{selectedRangeStartValue:"startValue",selectedRangeEndValue:"endValue",selectedRangeLength:"length"})}prepareImageOptions(e){"background"in e&&this.prepareOptions(e.background,"image",{imagePosition:"location",imageUrl:"url"})}prepareBehaviorOptions(e){this.prepareOptions(e,"behavior",{allowSlidersSwap:"allowSlidersSwap",animationEnabled:"animationEnabled",manualRangeSelectionEnabled:"manualRangeSelectionEnabled",moveSelectedRangeByClick:"moveSelectedRangeByClick",snapToTicks:"snapToTicks",valueChangeMode:"valueChangeMode"})}[Bw](...e){return this.executeClientMethod(Bw,...e)}[Ew](...e){return this.executeClientMethod(Ew,...e)}[Iw](...e){return this.executeClientMethod(Iw,...e)}getThemeDependentOptionsDict(){const e={[sw]:mw,[rw]:mw,[ow]:pw,[aw]:pw,selectedRangeColor:gw,[lw]:Cw,[Aw]:fw,[dw]:vw,[cw]:bw,containerBackgroundColor:ww,[hw]:yw};return{...super.getThemeDependentOptionsDict(),...e}}};Sw=C([rn("dxbl-range-selector")],Sw);const xw="dxbl-calendar-table-container";class Dw{}Dw.MainElement=he.Prefix+"-calendar",Dw.SelectedItem=Dw.MainElement+"-selected-item",Dw.SelectedRange=Dw.MainElement+"-selected-range",Dw.SelectedRangeFirst=Dw.SelectedRange+"-first",Dw.SelectedRangeLast=Dw.SelectedRange+"-last",Dw.Header=Dw.MainElement+"-header",Dw.Content=Dw.MainElement+"-content",Dw.DataTableContainerWrapperClassName=Dw.MainElement+"-data-table-container-wrapper",Dw.Footer=Dw.MainElement+"-footer",Dw.WeekRow=Dw.MainElement+"-week-row",Dw.YearRow=Dw.MainElement+"-year-row",Dw.DecadeRow=Dw.MainElement+"-decade-row",Dw.CenturyRow=Dw.MainElement+"-century-row",Dw.Cell=Dw.MainElement+"-cell",Dw.Day=Dw.MainElement+"-day",Dw.NotCurrentView=Dw.MainElement+"-not-current-view",Dw.HeaderHelper=Dw.MainElement+"-header",Dw.HeaderTitleButton=Dw.HeaderHelper+"-title-btn",Dw.HeaderPreviousYearButton=Dw.HeaderHelper+"-previous-year-btn",Dw.HeaderPreviousMonthButton=Dw.HeaderHelper+"-previous-month-btn",Dw.HeaderPreviousPeriodButton=Dw.HeaderHelper+"-previous-period-btn",Dw.HeaderNextYearButton=Dw.HeaderHelper+"-next-year-btn",Dw.HeaderNextMonthButton=Dw.HeaderHelper+"-next-month-btn",Dw.HeaderNextPeriodButton=Dw.HeaderHelper+"-next-period-btn";class Fw{}var Tw,Hw;Fw.MainElement=`.${Dw.MainElement}`,Fw.SelectedItem=`td.${Dw.SelectedItem}`,Fw.Header=`.${Dw.Header}`,Fw.FirstDataTableContainer=`${xw}:nth-of-type(1)`,Fw.DateTableContainer=xw,Fw.DataTable=`.${Dw.Content} > table`,Fw.DataTableContainerWrapperClassName=`.${Dw.DataTableContainerWrapperClassName}`,Fw.Footer=`.${Dw.Footer}`,Fw.Day=`.${Dw.Day}`,Fw.Cell=`.${Dw.Cell}`,function(e){e.class="class",e.view="view",e.minView="min-view",e.viewDate="view-date",e.enableMultiSelect="enable-multi-select",e.minDate="min-date",e.maxDate="max-date",e.visiblePeriodsCount="visible-periods-count",e.enableRangeSelect="enable-range-select",e.periodIndex="period-index",e.hasNullStartXorEndDate="has-null-start-xor-end-date",e.selectDateOnFirstFocus="select-date-on-first-focus"}(Tw||(Tw={})),function(e){e.dataDate="data-date",e.dataMonth="data-month",e.dataYear="data-year",e.dataDecade="data-decade"}(Hw||(Hw={}));const Uw=12,Pw=new Date(new Date(Date.UTC(1,0,1)).setUTCFullYear(1)),Qw=new Date(Date.UTC(9999,11,31)),Nw=864e5;class Rw{constructor(e,t){this._pointerDownDate=e.pointerDownDate,this._pointerUpDate=null,this._clearSelection=e.clearSelection,this.cellElements=e.cellElements,this._callback=t,this.refreshUI(!1)}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate!==e&&e&&(this._pointerUpDate=e,this.refreshUI(!0))}get isValid(){return!!this._pointerUpDate}stop(){this.refreshUI(!1),this.isValid&&null!==this._callback&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){for(let e=0;e<this.cellElements.length;e++){const t=this.cellElements[e];Rw.removeDayCellSelectedClasses(t),t.hasAttribute("data-selected")&&Rw.addSelectedClassesToCell(t)}}refreshUI(e){const t=this.getStartPointedDateRange(),i=this.getEndPointedDateRange();for(let n=0;n<this.cellElements.length;n++){const s=this.cellElements[n];if(Ay.isDateCellDisabled(s))continue;const r=Number(s.dataset.date);Rw.removeDayCellSelectedClasses(s),e&&this.isDateRangeBoundary(r,t,i)&&T.DomUtils.addClassName(s,Dw.SelectedRange),this.needApplySelectedStyle(r,t,i,e)&&Rw.addSelectedClassesToCell(s),s.hasAttribute("data-selected")&&!this.clearSelection&&Rw.addSelectedClassesToCell(s)}}getStartPointedDateRange(){return this.pointerUpDate?Math.min(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}getEndPointedDateRange(){return this.pointerUpDate?Math.max(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}needApplySelectedStyle(e,t,i,n){return!(e<t||e>i)&&(!n||!this.isDateRangeBoundary(e,t,i))}isDateRangeBoundary(e,t,i){if(!this.isDateDisabled(e)&&(e===t||e===i))return!0;return!(!(e>t&&e<i)||e!==this.getBoundaryDate(t,e)&&e!==this.getBoundaryDate(i,e))}getBoundaryDate(e,t){const i=e<t,n=i?1:-1;let s=e;for(;(i?s<t:s>t)&&this.isDateDisabled(s);)s+=n*Nw;return s}isDateDisabled(e){const t=this.getDayCellByDay(e);return null!=t&&Ay.isDateCellDisabled(t)}getDayCellByDay(e){for(let t=0;t<this.cellElements.length;t++)if(this.cellElements[t].getAttribute(Hw.dataDate)===e.toString())return this.cellElements[t];return null}static addSelectedClassesToCell(e){T.DomUtils.addClassName(e,Dw.SelectedItem)}static removeDayCellSelectedClasses(e){T.DomUtils.removeClassName(e,Dw.SelectedItem),T.DomUtils.removeClassName(e,Dw.SelectedRange),T.DomUtils.removeClassName(e,"text-white")}}class Lw{constructor(e,t,i){this._pointerDownDate=e,this._pointerUpDate=null,this._clearSelection=t,this._callback=i}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate=e}get isValid(){var e;return this.pointerDownDate.getTime()===(null===(e=this.pointerUpDate)||void 0===e?void 0:e.getTime())}stop(){null!==this._callback&&this._pointerUpDate&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){}}class Mw{constructor(e,t){this._pointerDownDate=e.pointerDownDate,this._pointerUpDate=null,this._clearSelection=e.clearSelection,this.cellElements=e.cellElements,this._callback=t,this.refreshUI()}get clearSelection(){return this._clearSelection}get pointerDownDate(){return this._pointerDownDate}get pointerUpDate(){return this._pointerUpDate}set pointerUpDate(e){this._pointerUpDate!==e&&e&&(this._pointerUpDate=e,this.refreshUI())}get isValid(){return!!this._pointerUpDate}stop(){this.refreshUI(),this.isValid&&null!==this._callback&&this._callback(this._pointerDownDate,this._pointerUpDate,this._clearSelection)}cancel(){for(let e=0;e<this.cellElements.length;e++){const t=this.cellElements[e];Mw.removeDayCellSelectedClasses(t),t.hasAttribute("data-selected")&&Mw.addSelectedClassesToCell(t)}}refreshUI(){const e=this.getStartPointedDateRange(),t=this.getEndPointedDateRange();for(let i=0;i<this.cellElements.length;i++){const n=this.cellElements[i];if(Ay.isDateCellDisabled(n))continue;const s=Number(n.dataset.date);Mw.removeDayCellSelectedClasses(n),this.isDateDisabled(s)||(this.isDateRangeBoundary(s,e,t)&&T.DomUtils.addClassName(n,Dw.SelectedRange),s===e&&T.DomUtils.addClassName(n,Dw.SelectedRangeFirst),s===t&&T.DomUtils.addClassName(n,Dw.SelectedRangeLast)),this.needApplySelectedStyle(s,e,t)&&Mw.addSelectedClassesToCell(n),n.hasAttribute("data-selected")&&!this.clearSelection&&Mw.addSelectedClassesToCell(n)}}getStartPointedDateRange(){return this.pointerUpDate?Math.min(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}getEndPointedDateRange(){return this.pointerUpDate?Math.max(this.pointerUpDate.getTime(),this.pointerDownDate.getTime()):this.pointerDownDate.getTime()}needApplySelectedStyle(e,t,i){return!(e<t||e>i)&&!this.isDateRangeBoundary(e,t,i)}isDateRangeBoundary(e,t,i){if(e===t||e===i)return!0;return e>t&&e<i&&(e===this.getBoundaryDate(t,e)||e===this.getBoundaryDate(i,e))}getBoundaryDate(e,t){const i=e<t,n=i?1:-1;let s=e;for(;(i?s<t:s>t)&&this.isDateDisabled(s);)s+=n*Nw;return s}isDateDisabled(e){const t=this.getDayCellByDay(e);return null!=t&&Ay.isDateCellDisabled(t)}getDayCellByDay(e){for(let t=0;t<this.cellElements.length;t++)if(this.cellElements[t].getAttribute(Hw.dataDate)===e.toString())return this.cellElements[t];return null}static addSelectedClassesToCell(e){T.DomUtils.addClassName(e,Dw.SelectedItem)}static removeDayCellSelectedClasses(e){T.DomUtils.removeClassName(e,Dw.SelectedItem),T.DomUtils.removeClassName(e,Dw.SelectedRange),T.DomUtils.removeClassName(e,Dw.SelectedRangeFirst),T.DomUtils.removeClassName(e,Dw.SelectedRangeLast),T.DomUtils.removeClassName(e,"text-white")}}var kw,Kw,Ow,_w;!function(e){e[e.PreviousYear=0]="PreviousYear",e[e.PreviousMonth=1]="PreviousMonth",e[e.Title=2]="Title",e[e.NextMonth=3]="NextMonth",e[e.NextYear=4]="NextYear",e[e.PreviousPeriod=5]="PreviousPeriod",e[e.NextPeriod=6]="NextPeriod"}(kw||(kw={})),function(e){e[e.Header=0]="Header",e[e.DataTable=1]="DataTable",e[e.Footer=2]="Footer"}(Kw||(Kw={})),function(e){e[e.Month=0]="Month",e[e.Year=1]="Year",e[e.Decade=2]="Decade",e[e.Century=3]="Century"}(Ow||(Ow={})),function(e){e[e.January=0]="January",e[e.February=1]="February",e[e.March=2]="March",e[e.April=3]="April",e[e.May=4]="May",e[e.June=5]="June",e[e.July=6]="July",e[e.August=7]="August",e[e.September=8]="September",e[e.October=9]="October",e[e.November=10]="November",e[e.December=11]="December"}(_w||(_w={}));class Vw extends Bs{constructor(){super(),this._handlePointerEventsMode=r.None,this.viewDate=new Date,this.viewType=Ow.Month,this.minViewType=Ow.Month,this.periodIndex=0,this._pointerEventsHelper=new q(this)}get calendar(){return this._calendar||(this._calendar=T.DomUtils.getParentByTagName(this,el)),this._calendar}get IsMinMeasure(){return this.viewType===this.minViewType}connectedCallback(){super.connectedCallback(),this._pointerEventsHelper.initialize()}disconnectedCallback(){super.disconnectedCallback(),this._pointerEventsHelper.dispose()}updated(e){e.has("viewDate")&&this.calendar.restoreFocus(),e.has("viewType")&&(this._handlePointerEventsMode=r.None,this.IsMinMeasure&&(this._handlePointerEventsMode=r.Click|r.Dragging)),super.updated(e)}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}}C([ln({attribute:Tw.viewDate,converter:e=>new Date(Number(e))})],Vw.prototype,"viewDate",void 0),C([ln({type:Number,attribute:Tw.view})],Vw.prototype,"viewType",void 0),C([ln({type:Number,attribute:Tw.minView})],Vw.prototype,"minViewType",void 0),C([ln({type:Number,attribute:Tw.periodIndex})],Vw.prototype,"periodIndex",void 0);class zw extends CustomEvent{constructor(e,t,i){super(zw.eventName,{detail:new $w(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}zw.eventName=el+".cellpointerup";class Ww extends Event{constructor(){super(Ww.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}Ww.eventName=el+".keyboardnavigationleaved";class $w{constructor(e,t,i){this.PointerDownDate=e,this.PointerUpDate=t,this.ClearSelection=i}}mt.register(zw.eventName,(e=>e.detail));class Gw extends Li{constructor(e,t){super(e.getKeyboardNavigator(),t),this.calendar=e}isFocusedFromOutside(){return this.calendar.isSameNode(document.activeElement)}isFocusedFromDataTable(){var e,t,i;return null!==(i=null===(t=null!==(e=this.getDataTableContainerWrapper())&&void 0!==e?e:this.getCurrentDataTableContainer())||void 0===t?void 0:t.contains(document.activeElement))&&void 0!==i&&i}getHeader(){return this.calendar.getHeaderElement()}getDataTableContainerWrapper(){return this.calendar.tableContainerWrapper}getCurrentDataTableContainer(){return this.calendar.currentTableContainer}getAllDataTableContainers(){return this.calendar.enumerateTableContainers}getFooter(){return this.calendar.getFooterElement()}}class qw extends Gw{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${he.Button}:not(.${he.Disabled}), :scope > div.${Dw.HeaderTitleButton}:not(.${he.Disabled})`,this.buttonClassToButtonType=new Map([[Dw.HeaderPreviousYearButton,kw.PreviousYear],[Dw.HeaderPreviousMonthButton,kw.PreviousMonth],[Dw.HeaderPreviousPeriodButton,kw.PreviousPeriod],[Dw.HeaderTitleButton,kw.Title],[Dw.HeaderNextYearButton,kw.NextYear],[Dw.HeaderNextMonthButton,kw.NextMonth],[Dw.HeaderNextPeriodButton,kw.NextPeriod]]),this.buttonTypeToButtonClass=new Map([[kw.PreviousYear,Dw.HeaderPreviousYearButton],[kw.PreviousMonth,Dw.HeaderPreviousMonthButton],[kw.PreviousPeriod,Dw.HeaderPreviousPeriodButton],[kw.Title,Dw.HeaderTitleButton],[kw.NextYear,Dw.HeaderNextYearButton],[kw.NextMonth,Dw.HeaderNextMonthButton],[kw.NextPeriod,Dw.HeaderNextPeriodButton]])}getShortcutContext(){return{AreaType:Kw.Header,ButtonType:this.getSelectedButtonType()}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}activate(){const e=this.getButtonIndexByType(this.lastFocusedButtonType);this.selectedItemIndex=this.isFocusedFromOutside()?0:this.isFocusedFromDataTable()?this.itemCount-1:null!=e?e:0,super.activate()}leaveBackward(){this.lastFocusedButtonType=void 0,super.leaveBackward()}leaveForward(){this.lastFocusedButtonType=void 0,super.leaveForward()}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem():this.moveToNextItem();case Be.KeyCode.Space:case Be.KeyCode.Enter:return this.calendar.scheduleFocusRestoration(!1),this.performShortcutEvent(e),!0;case Be.KeyCode.Left:case Be.KeyCode.Up:case Be.KeyCode.Home:case Be.KeyCode.PageUp:case Be.KeyCode.Right:case Be.KeyCode.Down:case Be.KeyCode.End:case Be.KeyCode.PageDown:return!0}return super.handleKeyDown(e)}moveToPrevItem(){return this.selectedItemIndex>0&&(this.selectItem(this.selectedItemIndex-1),!0)}moveToNextItem(){return this.selectedItemIndex<this.itemCount-1&&(this.selectItem(this.selectedItemIndex+1),!0)}updateSelectedItemByIndex(e){super.updateSelectedItemByIndex(e),this.lastFocusedButtonType=this.getSelectedButtonType()}getSelectedButtonType(){for(const e of this.selectedItemElement.classList)if(this.buttonClassToButtonType.has(e))return this.buttonClassToButtonType.get(e)}getButtonIndexByType(e){return e?this.items.findIndex((t=>t.classList.contains(this.buttonTypeToButtonClass.get(e)))):void 0}}class Xw extends Gw{get isObsolete(){return this.calendar.currentView!==this.currentCalendarView}get targetElement(){return super.targetElement}constructor(e,t){super(e,t),this.boundCalendarFocusedDayChangedHandler=this.onCalendarFocusedDayChanged.bind(this),this.calendar.onFocusedDayChanged(this.boundCalendarFocusedDayChangedHandler)}activate(){this.applyCalendarFocus(),super.activate()}onDispose(){this.calendar.offFocusedDayChanged(this.boundCalendarFocusedDayChangedHandler),super.onDispose()}get dateSelectionRenderer(){return this.calendar.dateSelectionRenderer}getShortcutContext(){const e=this.lastShortcutArgs;return delete this.lastShortcutArgs,{AreaType:Kw.DataTable,Offset:null==e?void 0:e.offset,Row:null==e?void 0:e.row,Column:null==e?void 0:e.column,PeriodIndex:null==e?void 0:e.periodIndex,Date:null==e?void 0:e.date}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToPrevDay(e);case Be.KeyCode.Right:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToNextDay(e);case Be.KeyCode.Up:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToPrevRow(e);case Be.KeyCode.Down:return!((e.ctrlKey||e.metaKey||e.altKey)&&!e.shiftKey)&&this.moveToNextRow(e);case Be.KeyCode.Home:return this.handleHomeKey(e);case Be.KeyCode.End:return this.handleEndKey(e);case Be.KeyCode.PageUp:return this.calendar.scheduleFocusRestoration(),this.handlePageUpKey(e);case Be.KeyCode.PageDown:return this.calendar.scheduleFocusRestoration(),this.handlePageDownKey(e);case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.handleItemClick(e),!0}return super.handleKeyDown(e)}handleKeyUp(e){return this.isShiftKeyCode(e)&&this.stopSelectingDays(),super.handleKeyUp(e)}isShiftKeyCode(e){return 16===Be.KeyUtils.getEventKeyCode(e)}getSelectedItemRowIndex(){return Math.floor(this.selectedItemIndex/this.rowLength)}getSelectedItemColumnIndex(){return Math.floor(this.selectedItemIndex%this.rowLength)}handlePageUpKey(e,t){return this.prepareAndPerformShortcutEvent(e,{offset:null!=t?t:e.shiftKey?-12:-1,date:e.shiftKey?Ay.getDateFromCell(this.selectedItemElement):void 0}),!0}handlePageDownKey(e,t){return this.prepareAndPerformShortcutEvent(e,{offset:null!=t?t:e.shiftKey?Uw:1,date:e.shiftKey?Ay.getDateFromCell(this.selectedItemElement):void 0}),!0}prepareAndPerformShortcutEvent(e,t){t.periodIndex=this.targetElement.periodIndex,this.lastShortcutArgs=t,this.performShortcutEvent(e)}tryRemoveTabindexFromSelectedElement(){this.selectedItemElement&&Ci.removeTabIndex(this.selectedItemElement)}onCalendarFocusedDayChanged(e,t=!0){this.tryRemoveTabindexFromSelectedElement(),this.isActive()&&e&&(this.tryRestoreSelectedItem(e),this.selectedItemElement&&Ci.makeElementFocusable(this.selectedItemElement),t&&this.selectItem(this.selectedItemIndex))}applyCalendarFocus(){var e;this.tryRemoveTabindexFromSelectedElement();const t=null!==(e=this.calendar.getFocusedCellElementInView(this.currentCalendarView))&&void 0!==e?e:this.targetElement.querySelector(Fw.SelectedItem);t&&this.tryRestoreSelectedItem(t)}tryRestoreSelectedItem(e){if(!e.isConnected)return;const t=this.navigator.getStrategy(this.getCurrentDataTableContainer());if(!t)return;const i=t.items.indexOf(e);i>-1&&(t.selectedItemIndex=i)}initStartDaySelection(e){null===this.dateSelectionRenderer&&e.shiftKey&&this.calendar.createDateSelectionRenderer(Ay.getDateFromCell(this.selectedItemElement),!e.ctrlKey&&!e.metaKey)}stopSelectingDays(){null!==this.dateSelectionRenderer&&(this.dateSelectionRenderer.pointerUpDate=Ay.getDateFromCell(this.selectedItemElement),this.calendar.stopSelectingDates())}updateSelectedItemFocusableState(){this.selectedItemElement&&(this.isActive()?Ci.makeElementFocusable(this.selectedItemElement):Ci.removeTabIndex(this.selectedItemElement))}isActive(){return this.targetElement===this.calendar.currentTableContainer}}class Yw extends Xw{get rowLength(){return this._rowLength}get currentCalendarView(){return this._currentCalendarView}get itemSelector(){return`:scope tr > .${Dw.Cell}`}constructor(e,t,i,n){super(e,t),this._currentCalendarView=i,this._rowLength=n}activate(){super.activate(),this.extendSelection()}moveToPrevDay(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:-1,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:-1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:-1;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToNextDay(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:1,isHorizontal:!0},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:1;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToPrevRow(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:-1,isHorizontal:!1},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:-1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:-this.rowLength;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}moveToNextRow(e){var t,i;this.initStartDaySelection(e);const n=this.calendar.tryMoveFocus({value:1,isHorizontal:!1},this.selectedItemElement);if(n.needChangePeriod){if(n.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(i=n.periodsToSkip)&&void 0!==i?i:1)}else{const e=null!==(t=n.unitsToSkip)&&void 0!==t?t:this.rowLength;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e),this.extendSelection()}return!0}handleHomeKey(e){var t;const i=this.getSelectedItemRowIndex()*this.rowLength,n={value:i-this.selectedItemIndex,isHorizontal:!0};this.initStartDaySelection(e);const s=this.calendar.tryMoveFocus(n,this.selectedItemElement);if(s.needChangePeriod){if(s.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(t=s.periodsToSkip)&&void 0!==t?t:-1)}else{this.selectItem(void 0!==s.unitsToSkip?this.selectedItemIndex+s.unitsToSkip:i),this.extendSelection()}return!0}handleEndKey(e){var t;const i=(this.getSelectedItemRowIndex()+1)*this.rowLength-1,n={value:i-this.selectedItemIndex,isHorizontal:!0};this.initStartDaySelection(e);const s=this.calendar.tryMoveFocus(n,this.selectedItemElement);if(s.needChangePeriod){if(s.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,null!==(t=s.periodsToSkip)&&void 0!==t?t:1)}else{this.selectItem(void 0!==s.unitsToSkip?this.selectedItemIndex+s.unitsToSkip:i),this.extendSelection()}return!0}handlePageUpKey(e){const t={value:-(e.shiftKey?Ay.getYearOffsetInDaysFrom(-1,this.selectedItemElement):Ay.getMonthOffsetInDaysFrom(-1,this.selectedItemElement)),isHorizontal:!0};this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus(t,this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return this.applyCalendarFocus(),!1;super.handlePageUpKey(e,i.periodsToSkip)}else this.applyCalendarFocus(),this.selectItem(this.selectedItemIndex);return!0}handlePageDownKey(e){const t={value:e.shiftKey?Ay.getYearOffsetInDaysFrom(1,this.selectedItemElement):Ay.getMonthOffsetInDaysFrom(1,this.selectedItemElement),isHorizontal:!0};this.initStartDaySelection(e);const i=this.calendar.tryMoveFocus(t,this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return this.applyCalendarFocus(),!1;super.handlePageDownKey(e,i.periodsToSkip)}else this.applyCalendarFocus(),this.selectItem(this.selectedItemIndex);return!0}extendSelection(){null!==this.dateSelectionRenderer&&(this.dateSelectionRenderer.pointerUpDate=Ay.getDateFromCell(this.selectedItemElement))}handleItemClick(e){const t=Ay.getDateFromCell(this.selectedItemElement);this.calendar.tryCreateRangeSelectionRenderer(t),this.prepareAndPerformShortcutEvent(e,{date:t})}switchCurrentMonth(e,t){this.prepareAndPerformShortcutEvent(e,{offset:t,date:this.calendar.focusedDate})}}class Jw extends Xw{get rowLength(){return 4}moveToPrevDay(e){var t;const i=this.calendar.tryMoveFocus({value:-1,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,-1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:-1;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToNextDay(e){var t;const i=this.calendar.tryMoveFocus({value:1,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:1;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToPrevRow(e){var t;const i=this.calendar.tryMoveFocus({value:-1,isHorizontal:!1},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,-1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:-this.rowLength;this.selectedItemIndex>=e&&this.selectItem(this.selectedItemIndex+e)}return!0}moveToNextRow(e){var t;const i=this.calendar.tryMoveFocus({value:1,isHorizontal:!1},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1;this.switchCurrentMonth(e,1)}else{const e=null!==(t=i.unitsToSkip)&&void 0!==t?t:this.rowLength;this.selectedItemIndex<this.itemCount-e&&this.selectItem(this.selectedItemIndex+e)}return!0}handleHomeKey(e){const t=this.getIndexOfFirstAccessibleItemInCurrentView(),i=this.calendar.tryMoveFocus({value:t-this.selectedItemIndex,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1}else{this.selectItem(void 0!==i.unitsToSkip?this.selectedItemIndex+i.unitsToSkip:t)}return!0}handleEndKey(e){const t=this.getIndexOfLastAccessibleItemInCurrentView(),i=this.calendar.tryMoveFocus({value:t-this.selectedItemIndex,isHorizontal:!0},this.selectedItemElement);if(i.needChangePeriod){if(i.newPeriodFitsIntoVisibleRange)return!1}else{this.selectItem(void 0!==i.unitsToSkip?this.selectedItemIndex+i.unitsToSkip:t)}return!0}handlePageUpKey(e){const t=this.calendar.tryMoveFocus({value:-(this.calendar.currentView===Ow.Year?Uw:10),isHorizontal:!0},this.selectedItemElement);if(t.needChangePeriod){if(t.newPeriodFitsIntoVisibleRange)return!1;super.handlePageUpKey(e,t.periodsToSkip)}return!0}handlePageDownKey(e){const t=this.calendar.tryMoveFocus({value:this.calendar.currentView===Ow.Year?Uw:10,isHorizontal:!0},this.selectedItemElement);if(t.needChangePeriod){if(t.newPeriodFitsIntoVisibleRange)return!1;super.handlePageDownKey(e,t.periodsToSkip)}return!0}handleItemClick(e){this.calendar.scheduleFocusRestoration(),this.prepareAndPerformShortcutEvent(e,{row:this.getSelectedItemRowIndex(),column:this.getSelectedItemColumnIndex()})}switchCurrentMonth(e,t){this.prepareAndPerformShortcutEvent(e,{offset:t})}getIndexOfFirstAccessibleItemInCurrentView(){let e=0;for(;e<=this.selectedItemIndex&&!this.itemBelongsToCurrentView(e);)e++;return e}getIndexOfLastAccessibleItemInCurrentView(){let e=this.itemCount-1;for(;e>=this.selectedItemIndex&&!this.itemBelongsToCurrentView(e);)e--;return e}itemBelongsToCurrentView(e){var t;return!(null===(t=this.getItem(e))||void 0===t?void 0:t.classList.contains(Dw.NotCurrentView))}}class jw extends Jw{get currentCalendarView(){return Ow.Year}get itemSelector(){return`:scope .${Dw.YearRow} > td`}}class Zw extends Jw{get currentCalendarView(){return Ow.Decade}get itemSelector(){return`:scope .${Dw.DecadeRow} > td:not(.${he.Invisible})`}}class ey extends Jw{get currentCalendarView(){return Ow.Century}get itemSelector(){return`:scope .${Dw.CenturyRow} > td:not(.${he.Invisible})`}}class ty extends Gw{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${he.Button}`}getShortcutContext(){return{AreaType:Kw.Footer,ButtonType:this.selectedItemIndex}}queryItems(){return this.queryItemsBySelector(this.itemSelector)}activate(){this.selectedItemIndex=this.isFocusedFromOutside()?this.itemCount-1:0,super.activate()}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return e.shiftKey?this.moveToPrevItem():this.moveToNextItem();case Be.KeyCode.Space:case Be.KeyCode.Enter:return this.performShortcutEvent(e),!0;case Be.KeyCode.Left:case Be.KeyCode.Up:case Be.KeyCode.Home:case Be.KeyCode.PageUp:case Be.KeyCode.Right:case Be.KeyCode.Down:case Be.KeyCode.End:case Be.KeyCode.PageDown:return!0}return super.handleKeyDown(e)}moveToPrevItem(){return this.selectedItemIndex>0&&(this.selectItem(this.selectedItemIndex-1),!0)}moveToNextItem(){return this.selectedItemIndex<this.itemCount-1&&(this.selectItem(this.selectedItemIndex+1),!0)}}class iy extends Gw{constructor(e){super(e,e),this._isFirstFocus=!0}updateSelectedItemByChildElement(e,t=null){super.updateSelectedItemByChildElement(e,t),this.calendar.hasAttribute(Tw.selectDateOnFirstFocus)&&this._isFirstFocus&&(this._isFirstFocus=!1,this.selectedItemIndex=1)}queryItems(){return new Array(this.getHeader(),...this.getAllDataTableContainers(),this.getFooter())}activate(){this.isDateTableStrategy(this.getItemStrategy(this.selectedItemIndex))&&(this.selectedItemIndex=this.findActiveDataTableStrategyIndex()),super.activate()}createItemStrategy(e){if(e.matches(Fw.Header))return new qw(this.calendar,e);if(e.matches(Fw.DateTableContainer))return this.createDataTableStrategy(e);if(e.matches(Fw.Footer))return new ty(this.calendar,e);throw new Error("Not implemented")}createDataTableStrategy(e){switch(e.viewType){case Ow.Month:return new Yw(this.calendar,e,Ow.Month,7);case Ow.Year:return e.IsMinMeasure?new Yw(this.calendar,e,Ow.Year,4):new jw(this.calendar,e);case Ow.Decade:return e.IsMinMeasure?new Yw(this.calendar,e,Ow.Decade,4):new Zw(this.calendar,e);case Ow.Century:return e.IsMinMeasure?new Yw(this.calendar,e,Ow.Century,4):new ey(this.calendar,e)}}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:return this.handleTab(e);case Be.KeyCode.Up:return this.handleArrowUp(e);case Be.KeyCode.Down:return this.handleArrowDown(e);case Be.KeyCode.Left:case Be.KeyCode.Home:case Be.KeyCode.PageUp:return this.handleMove(e,!1);case Be.KeyCode.Right:case Be.KeyCode.End:case Be.KeyCode.PageDown:return this.handleMove(e,!0)}return super.handleKeyDown(e)}handleTab(e){if(this.isDateTableStrategy(this.getSelectedItemStrategy())){const t=this.findNotDataTableStrategyIndex(!e.shiftKey);if(-1!==t)return this.selectItem(t),!0;this.updateDataTableStrategiesFocusableElements(),this.selectedItemIndex=e.shiftKey?0:this.itemCount-1}else{if(this.isDateTableStrategy(this.getItemStrategy(this.selectedItemIndex+(e.shiftKey?-1:1))))return this.updateDataTableStrategiesFocusableElements(),this.selectItem(this.findActiveDataTableStrategyIndex()),!0}return e.shiftKey?(this.selectedItemIndex>0?this.moveToPrevItem():(this.leaveBackward(),this.dispatchKeyboardNavigationLeavedEvent()),!0):this.selectedItemIndex<this.itemCount-1?(this.moveToNextItem(),!0):super.handleKeyDown(e)}handleArrowUp(e){return e.ctrlKey?(this.calendar.scheduleFocusRestoration(),this.performShortcutEvent(e),!0):this.handleMove(e,!1)}handleArrowDown(e){return e.ctrlKey?(this.calendar.scheduleFocusRestoration(),this.performShortcutEvent(e),!0):this.handleMove(e,!0)}handleMove(e,t){return this.isAnyModifierKeyPressed(e)?super.handleKeyDown(e):(t?this.moveToNextItem():this.moveToPrevItem(),!0)}dispatchKeyboardNavigationLeavedEvent(){setTimeout((()=>this.targetElement.dispatchEvent(new Ww)),0)}isAnyModifierKeyPressed(e){return e.shiftKey||e.ctrlKey||e.metaKey||e.altKey}findNotDataTableStrategyIndex(e){if(e){for(let e=this.selectedItemIndex+1;e<this.itemCount;e++)if(!this.isDateTableStrategy(this.getItemStrategy(e)))return e}else for(let e=this.selectedItemIndex-1;e>=0;e--)if(!this.isDateTableStrategy(this.getItemStrategy(e)))return e;return-1}findActiveDataTableStrategyIndex(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);if(this.isDateTableStrategy(t)&&t.isActive())return e}return 0}updateDataTableStrategiesFocusableElements(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);this.isDateTableStrategy(t)&&t.updateSelectedItemFocusableState()}kr.isActivated&&kr.updateSubscriptions()}isDateTableStrategy(e){return e instanceof Xw}}class ny{get focusedItem(){return this._focusedItem}set focusedItem(e){this._focusedItem=e}get focusedElement(){return this._focusedElement}set focusedElement(e){this._focusedElement=e}get minDate(){return this._minDate}set minDate(e){this._minDate=e}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e}get calendar(){return this._calendar}constructor(e){this.boundCalendarMinMaxDatesChangedHandler=this.updateMinMaxDates.bind(this),this._calendar=e,this._focusedElement=null,this._minDate=this._calendar.minDate,this._maxDate=this._calendar.maxDate,this.calendar.onMinMaxDatesChanged(this.boundCalendarMinMaxDatesChangedHandler)}get calendarCurrentViewDate(){return this.calendar.currentViewDate}getUpdatedElementToFocus(){return this.focusedElement=this.findCellElementByItem(this.getUpdatedItemToFocus()),this.focusedElement}updateMinMaxDates(e,t){e&&(this._minDate=e),t&&(this._maxDate=t)}}class sy extends ny{tryMoveFocus(e,t){const i=Ay.getMonthFromCell(t);this.focusedItem=this.getMonthRelativeTo(e,i),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areMonthsDifferByYear(e,i);return{needChangePeriod:n,periodsToSkip:n?e.value:void 0,unitsToSkip:this.focusedItem&&i?this.focusedItem-i:void 0}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?Ay.getMonthFromCell(e):this.calendarCurrentViewDate.getMonth()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${Hw.dataMonth}="${_w[e]}"]`)}applyMinMaxDates(e){return this.calendarCurrentViewDate.getFullYear()===this.minDate.getFullYear()&&e<this.minDate.getMonth()?this.minDate.getMonth():this.calendarCurrentViewDate.getFullYear()===this.maxDate.getFullYear()&&e>this.maxDate.getMonth()?this.maxDate.getMonth():e}getMonthRelativeTo(e,t){if(void 0===t)return;const i=(this.getRawIndex(e,t)%Uw+Uw)%Uw;return _w[_w[i%Uw]]}areMonthsDifferByYear(e,t){if(void 0===t)return!1;const i=this.getRawIndex(e,t);return i<0||i>=Uw}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)}getRawIndex(e,t){return t+this.getEffectiveOffset(e)}}class ry extends ny{tryMoveFocus(e,t){const i=Ay.getYearFromCell(t);this.focusedItem=this.getYearRelativeTo(e,i),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areYearsDifferByDecade(this.calendarCurrentViewDate.getFullYear(),this.focusedItem);return{needChangePeriod:n,periodsToSkip:n?e.value:void 0,unitsToSkip:this.focusedItem&&i?this.focusedItem-i:void 0}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?Ay.getYearFromCell(e):this.calendarCurrentViewDate.getFullYear()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${Hw.dataYear}="${e}"]`)}applyMinMaxDates(e){return e<this.minDate.getFullYear()?this.minDate.getFullYear():e>this.maxDate.getFullYear()?this.maxDate.getFullYear():e}getYearRelativeTo(e,t){if(void 0!==t)return t+this.getEffectiveOffset(e)}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)}areYearsDifferByDecade(e,t){return void 0!==e&&void 0!==t&&Math.floor(e/10)!==Math.floor(t/10)}}class oy extends ny{tryMoveFocus(e,t){const i=Ay.getDateFromCell(t);this.focusedItem=this.applyMinMaxDates(this.getDateRelativeTo(e,t)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areDatesDifferByMonthOrYear(this.calendarCurrentViewDate,this.focusedItem);return{needChangePeriod:n,periodsToSkip:n?this.getShortcutOffsetInMonths(this.focusedItem,this.calendarCurrentViewDate):void 0,unitsToSkip:this.focusedItem?Math.round((this.focusedItem.getTime()-i.getTime())/Nw):void 0}}getUpdatedItemToFocus(){if(this.focusedItem=this.getFindCachedFocusedItem(),this.areDatesDifferByMonthOrYear(this.focusedItem,this.calendarCurrentViewDate)){const e=this.focusedItem.getDate();this.focusedItem=new Date(this.calendarCurrentViewDate);let t=this.trySetDate(this.focusedItem,e);null===t&&(t=this.trySetDate(this.focusedItem,this.calendarCurrentViewDate.getDate())),null===t&&(t=this.trySetDate(this.focusedItem,1)),this.focusedItem=t}return this.focusedItem=this.applyMinMaxDates(this.focusedItem),this.focusedItem}getFindCachedFocusedItem(){let e=this.focusedItem;if(void 0===e){const t=this.calendar.findSelectedCellElement();e=t?Ay.getDateFromCell(t):this.calendarCurrentViewDate}return e}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`.${Dw.Day}[${Hw.dataDate}="${e.getTime()}"]`)}applyMinMaxDates(e){return e<this.minDate?new Date(this.minDate):e>this.maxDate?new Date(this.maxDate):new Date(e)}areDatesDifferByMonthOrYear(e,t){return e.getMonth()!==t.getMonth()||this.areDatesDifferByYear(e,t)}areDatesDifferByYear(e,t){return e.getUTCFullYear()!==t.getUTCFullYear()}trySetDate(e,t){const i=new Date(e);return i.setDate(t),this.areDatesDifferByMonthOrYear(i,e)?null:i}getShortcutOffsetInMonths(e,t){return e.getMonth()-t.getMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*Uw}getDateRelativeTo(e,t){const i=Ay.getDateFromCell(t),n=new Date(i);return new Date(n.setDate(n.getDate()+e.value*(e.isHorizontal?1:7)))}}class ay extends ny{tryMoveFocus(e,t){const i=Ay.getDecadeFromCell(t);this.focusedItem=this.getDecadeRelativeTo(e,i),void 0!==this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedElement=this.findCellElementByItem(this.focusedItem);const n=this.areDecadesDifferByCentury(this.getCurrentDecade(),this.focusedItem),s=this.focusedItem&&i?this.subtractDecade(this.focusedItem,i):void 0;return{needChangePeriod:n,periodsToSkip:n?e.value:void 0,unitsToSkip:s}}getUpdatedItemToFocus(){if(void 0===this.focusedItem){const e=this.calendar.findSelectedCellElement();this.focusedItem=e?Ay.getDecadeFromCell(e):this.getCurrentDecade()}return this.focusedItem&&(this.focusedItem=this.applyMinMaxDates(this.focusedItem)),this.focusedItem}findCellElementByItem(e){return void 0===e?null:this.calendar.currentTableContainer.querySelector(`td[${Hw.dataDecade}="${e.startYear}-${e.endYear}"]`)}applyMinMaxDates(e){return-1===this.compareDecades(e,this.getDecadeOfDate(this.minDate))?this.getDecadeOfDate(this.minDate):1===this.compareDecades(e,this.getDecadeOfDate(this.maxDate))?this.getDecadeOfDate(this.maxDate):e}getDecadeRelativeTo(e,t){if(void 0===t)return;const i=t.startYear+this.getEffectiveOffset(e);return{startYear:i,endYear:i+9}}getEffectiveOffset(e){return e.value*(e.isHorizontal?1:4)*10}areDecadesDifferByCentury(e,t){if(void 0===(null==e?void 0:e.startYear)||void 0===(null==t?void 0:t.startYear))return!1;return Math.floor(e.startYear/100)!==Math.floor(t.startYear/100)}getCurrentDecade(){return this.getDecadeOfDate(this.calendarCurrentViewDate)}getDecadeOfDate(e){const t=e.getFullYear(),i=10*Math.floor(t/10);return{startYear:i,endYear:i+9}}compareDecades(e,t){return e.startYear<t.startYear?-1:e.startYear===t.startYear?0:1}subtractDecade(e,t){return(e.startYear-t.startYear)/10}}const ly=document.createElement("template");ly.innerHTML="\n<style></style>\n<slot />";class Ay extends de{constructor(){super(),this.boundOnStartDateSelectionHandler=this.onStartDateSelection.bind(this),this.boundOnStopDaySelectionHandler=this.onStopDaySelection.bind(this),this.boundOnCancelDateSelectionHandler=this.onCancelDateSelection.bind(this),this.boundOnDateCellPointerEnterHandler=this.onDateCellPointerEnter.bind(this),this._enableMultiSelect=!1,this._enableRangeSelect=!1,this._hasNullStartXorEndDate=!1,this._visiblePeriodsCount=1,this._currentViewIndex=0,this._focusedCellElement=null,this._focusRestorationScheduled=!0,this._needImmediateSelectionAfterFocusRestored=!0,this._tableContainers=new Array,this._minDate=Pw,this._maxDate=Qw,this._dateSelectionRenderer=null,this.calendarTableResizeObservers=new Map,this.focusedDayChangedHandlers=new Set,this.minMaxDatesChangedHandlers=new Set}get enableMultiSelect(){return this._enableMultiSelect}set enableMultiSelect(e){this._enableMultiSelect=e}get enableRangeSelect(){return this._enableRangeSelect}set enableRangeSelect(e){this._enableRangeSelect=e}get hasNullStartXorEndDate(){return this._hasNullStartXorEndDate}set hasNullStartXorEndDate(e){this._hasNullStartXorEndDate=e}get visiblePeriodsCount(){return this._visiblePeriodsCount}set visiblePeriodsCount(e){this._visiblePeriodsCount=e}get currentViewDate(){return this.currentTableContainer.viewDate}get baseViewDate(){return this.baseTableContainer.viewDate}get currentView(){var e,t;return null!==(t=null===(e=this.baseTableContainer)||void 0===e?void 0:e.viewType)&&void 0!==t?t:Ow.Month}get focusedDate(){return this._focusStrategies[Ow.Month].getFindCachedFocusedItem()}get enumerateTableContainers(){return this._tableContainers||this.registerTableContainers(),this._tableContainers}get currentTableContainer(){return this._tableContainers[this._currentViewIndex]}get baseTableContainer(){return this._baseTableContainer||(this._baseTableContainer=this.querySelector(Fw.FirstDataTableContainer)),this._baseTableContainer}get tableContainerWrapper(){return this._tableContainerWrapper||(this._tableContainerWrapper=this.querySelector(Fw.DataTableContainerWrapperClassName)),this._tableContainerWrapper}get minDate(){return this._minDate}set minDate(e){this._minDate=e}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e}get dateSelectionRenderer(){return this._dateSelectionRenderer}connectedCallback(){super.connectedCallback(),this.addEventSubscriptions()}initializeComponent(){super.initializeComponent(),this._focusStrategies={[Ow.Month]:new oy(this),[Ow.Year]:new sy(this),[Ow.Decade]:new ry(this),[Ow.Century]:new ay(this)},this.registerTableContainers(),this.initializeKeyboardNavigator(),this.tryInitializeRangeSelectionSubscriptions()}disposeComponent(){this.removeEventSubscriptions(),this.focusedDayChangedHandlers.clear(),this.minMaxDatesChangedHandlers.clear(),super.disposeComponent()}disconnectedCallback(){this.calendarTableResizeObservers.forEach((e=>e.disconnect())),super.disconnectedCallback()}registerTableContainers(){this._tableContainers=Array.from(this.querySelectorAll(Fw.DateTableContainer))}applyTableSize(e,t,i){e.style.width=t+"px",e.style.height=i+"px"}onCalendarTableSizeChanged(e){var t;if(e.length<1)return;const i=e[0].target,n=e[0].contentRect;st.fromDomRect(n).isEmpty||(this.applyTableSize(i,n.width,n.height),null===(t=this.calendarTableResizeObservers.get(i))||void 0===t||t.disconnect())}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnStartDateSelectionHandler),this.addEventListener(l.eventName,this.boundOnStopDaySelectionHandler),this.addEventListener(A.eventName,this.boundOnCancelDateSelectionHandler),this.enableRangeSelect&&this.addEventListener(d.eventName,this.boundOnStartDateSelectionHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnStartDateSelectionHandler),this.removeEventListener(l.eventName,this.boundOnStopDaySelectionHandler),this.removeEventListener(A.eventName,this.boundOnCancelDateSelectionHandler),this.removeEventListener(d.eventName,this.boundOnStartDateSelectionHandler)}addDayCellEventSubscriptions(){const e=this.findCellElements();for(let t=0;t<e.length;t++){e[t].addEventListener("pointerenter",this.boundOnDateCellPointerEnterHandler)}}removeDateCellEventSubscriptions(){const e=this.findCellElements();for(let t=0;t<e.length;t++){e[t].removeEventListener("pointerenter",this.boundOnDateCellPointerEnterHandler)}}tryInitializeRangeSelectionSubscriptions(){if(!this.hasNullStartXorEndDate)return;const e=this.findSelectedCellElement();if(!e)return;const t=Ay.getDateFromCell(e);t&&(this.createDateSelectionRenderer(t,!0),this._dateSelectionRenderer&&!Ay.isDateCellDisabled(e)&&(this._dateSelectionRenderer.pointerUpDate=t),this.addDayCellEventSubscriptions())}onStartDateSelection(e){if(T.DomUtils.hasClassName(this,he.Disabled)||T.DomUtils.hasClassName(this,he.ReadOnly))return;const t=Ay.getCellByTarget(e.detail.source.target),i=Ay.getDateFromTarget(e.detail.source.target);if(!t||!i)return;this.createDateSelectionRenderer(i,!e.detail.isLongTap&&(!(e.detail.source.ctrlKey||e.detail.source.metaKey)||e.detail.isTouch)),this._dateSelectionRenderer&&!Ay.isDateCellDisabled(t)&&(this._dateSelectionRenderer.pointerUpDate=Ay.getDateFromCell(t)),this.addDayCellEventSubscriptions(),e.stopPropagation()}onStopDaySelection(e){if(!this._dateSelectionRenderer)return;const t=Ay.getCellByTarget(e.detail.source.target);t?Ay.isDateCellDisabled(t)||(this._dateSelectionRenderer.pointerUpDate=Ay.getDateFromCell(t)):this.cancelDateSelection(),this.stopSelectingDates(),this.removeDateCellEventSubscriptions(),e.stopPropagation()}onCancelDateSelection(e){this.cancelDateSelection(),e.stopPropagation()}cancelDateSelection(){this._dateSelectionRenderer&&(this._dateSelectionRenderer.cancel(),this.removeDateCellEventSubscriptions(),this._dateSelectionRenderer=null)}stopSelectingDates(){this._dateSelectionRenderer&&(this._dateSelectionRenderer.stop(),this._dateSelectionRenderer=null)}invokeCellPointerUp(e,t,i){this.dispatchEvent(new zw(e,t,i))}onDateCellPointerEnter(e){const t=Ay.getCellByTarget(e.target);this._dateSelectionRenderer&&t&&!Ay.isDateCellDisabled(t)&&(this._dateSelectionRenderer.pointerUpDate=Ay.getDateFromCell(t))}tryCreateRangeSelectionRenderer(e){this.enableRangeSelect&&(this._dateSelectionRenderer=this.createDateRangeSelectionRenderer(e,!1))}createDateSelectionRenderer(e,t){this._dateSelectionRenderer=this.enableRangeSelect?this.createDateRangeSelectionRenderer(e,t):this.enableMultiSelect?this.createMultipleDateSelectionRenderer(e,t):this.createSingleDateSelectionRenderer(e,t)}createMultipleDateSelectionRenderer(e,t){return new Rw({pointerDownDate:e,clearSelection:t,cellElements:this.findCellElements()},this.invokeCellPointerUp.bind(this))}createSingleDateSelectionRenderer(e,t){return new Lw(e,t,this.invokeCellPointerUp.bind(this))}createDateRangeSelectionRenderer(e,t){return new Mw({pointerDownDate:e,clearSelection:t,cellElements:this.findCellElements()},this.invokeCellPointerUp.bind(this))}findCellElements(){return this.querySelectorAll(Fw.Cell)}findSelectedCellElement(){return this.querySelector(Fw.SelectedItem)}getMainElement(){return this.querySelector(Fw.MainElement)}getHeaderElement(){return this.querySelector(Fw.Header)}getTableElements(){return Array.from(this.querySelectorAll(Fw.DataTable))}getFooterElement(){return this.querySelector(Fw.Footer)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Pi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new iy(this))}getKeyboardNavigator(){return this.keyboardNavigator}getFocusedCellElementInView(e){return this._focusStrategies[e].getUpdatedElementToFocus()}tryMoveFocus(e,t){const i=this._focusStrategies[this.currentView].tryMoveFocus(e,t);if(i.needChangePeriod&&i.periodsToSkip){this.scheduleFocusRestoration();const e=this._currentViewIndex+(this.currentView===Ow.Month?i.periodsToSkip:i.periodsToSkip>0?1:-1);e>=0&&e<this._visiblePeriodsCount&&(this._currentViewIndex=e,i.newPeriodFitsIntoVisibleRange=!0)}return i}scheduleFocusRestoration(e=!0){this._focusRestorationScheduled=!0,this._needImmediateSelectionAfterFocusRestored=e}restoreFocus(){const e=this._focusStrategies[this.currentView].getUpdatedElementToFocus();this._focusRestorationScheduled&&(this.tryFireFocusedDayChanged(e),this.dateSelectionRenderer&&e&&(this.dateSelectionRenderer.pointerUpDate=Ay.getDateFromCell(e)),this._focusRestorationScheduled=!1,this._needImmediateSelectionAfterFocusRestored=!1)}onFocusedDayChanged(e){this.focusedDayChangedHandlers.add(e)}offFocusedDayChanged(e){this.focusedDayChangedHandlers.delete(e)}onMinMaxDatesChanged(e){this.minMaxDatesChangedHandlers.add(e)}tryFireFocusedDayChanged(e){if(null!==e)for(const t of this.focusedDayChangedHandlers)t(e,this._needImmediateSelectionAfterFocusRestored)}fireMinMaxDatesChanged(e,t){for(const i of this.minMaxDatesChangedHandlers)i(e,t)}static getDateFromTarget(e){const t=Ay.getCellByTarget(e);return t?Ay.getDateFromCell(t):null}static getCellByTarget(e){const t=e;return t?T.DomUtils.hasClassName(t,Dw.Cell)?t:t.closest(Fw.Cell):null}static getDateFromCell(e){return new Date(Number(e.getAttribute(Hw.dataDate)))}static getMonthFromCell(e){const t=e.getAttribute(Hw.dataMonth);if(t)return _w[t]}static getYearFromCell(e){const t=e.getAttribute(Hw.dataYear);if(t)return Number(t)}static getDecadeFromCell(e){const t=e.getAttribute(Hw.dataDecade);if(!t)return;const[i,n]=t.split("-").map(Number);return{startYear:i,endYear:n}}static getMonthOffsetInDaysFrom(e,t){const i=Ay.getDateFromCell(t),n=i.getDate(),s=new Date(i);s.setDate(1),s.setMonth(s.getMonth()+e);const r=this.getLastDayOfTheMonth(s);return s.setDate(n>r?r:n),Math.round(Math.abs(s.getTime()-i.getTime())/Nw)}static getYearOffsetInDaysFrom(e,t){const i=Ay.getDateFromCell(t),n=i.getDate(),s=new Date(i);s.setDate(1),s.setFullYear(s.getFullYear()+e);const r=this.getLastDayOfTheMonth(s);return s.setDate(n>r?r:n),Math.round(Math.abs(s.getTime()-i.getTime())/Nw)}static getLastDayOfTheMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}static isDateCellDisabled(e){return e.hasAttribute("data-disabled")}getContentTemplate(){return ly}static get observedAttributes(){return[Tw.class,Tw.enableMultiSelect,Tw.minDate,Tw.maxDate,Tw.enableRangeSelect,Tw.visiblePeriodsCount,Tw.hasNullStartXorEndDate]}attributeChangedCallback(e,t,i){switch(e){case Tw.enableMultiSelect:this.enableMultiSelect=null!==i;break;case Tw.minDate:{const e=new Date(Number(i));this.minDate=e>=Pw?e:Pw,this.fireMinMaxDatesChanged(this.minDate);break}case Tw.maxDate:{const e=new Date(Number(i));this.maxDate=e<=Qw?e:Qw,this.fireMinMaxDatesChanged(void 0,this.maxDate);break}case Tw.visiblePeriodsCount:this.visiblePeriodsCount=Number(i);break;case Tw.enableRangeSelect:this.enableRangeSelect=null!==i,this.removeEventSubscriptions(),this.addEventSubscriptions();break;case Tw.hasNullStartXorEndDate:this.hasNullStartXorEndDate=null!==i,this.removeDateCellEventSubscriptions(),this.tryInitializeRangeSelectionSubscriptions(),this.removeEventSubscriptions(),this.addEventSubscriptions()}}}customElements.define(el,Ay),customElements.define(xw,Vw);class dy{}dy.Prefix=he.Prefix+"-tabs",dy.Item=dy.Prefix+"-item",dy.Content=dy.Prefix+"-content",dy.TabList=dy.Prefix+"-tablist",dy.ContentPanel=dy.Content+"-panel",dy.Scrollable=dy.TabList+"-scrollable",dy.HasOverflow=dy.TabList+"-has-overflow",dy.ButtonScroll=dy.Prefix+"-scroll-btn",dy.ButtonScrollNext=dy.ButtonScroll+"-next",dy.ButtonScrollPrev=dy.ButtonScroll+"-prev",dy.CloseButton=dy.Prefix+"-close-button";class cy{}cy.Prefix="dxbl",cy.Carousel=cy.Prefix+"-carousel",cy.DrawerPanel=cy.Prefix+"-drawer-panel",cy.ExpandableContainer=cy.Prefix+"-expandable-container",cy.FormLayout=cy.Prefix+"-form-layout",cy.FormLayoutGroup=cy.FormLayout+"-group",cy.FormLayoutTab=cy.FormLayout+"-tab",cy.FormLayoutItem=cy.FormLayout+"-item",cy.GridLayout=cy.Prefix+"-grid-layout",cy.GridLayoutRoot=cy.GridLayout+"-root",cy.GridLayoutItem=cy.GridLayout+"-item",cy.GroupControl=cy.Prefix+"-group-control",cy.Splitter=cy.Prefix+"-splitter",cy.SplitterPane=cy.Splitter+"-pane",cy.SplitterSeparator=cy.Splitter+"-separator",cy.StackLayout=cy.Prefix+"-stack-layout",cy.StackLayoutRoot=cy.StackLayout+"-root",cy.StackLayoutItem=cy.StackLayout+"-item",cy.Tabs=cy.Prefix+"-tabs",cy.TabList=cy.Prefix+"-tab-list",cy.TabItem=cy.Prefix+"-tab-item",cy.TabsContentPanel=cy.Tabs+"-content-panel";class hy extends Event{constructor(){super(hy.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}hy.eventName=cy.Tabs+".active-tab-changed";class uy extends CustomEvent{constructor(e,t){super(uy.eventName,{detail:new py(e,t),bubbles:!0,composed:!0,cancelable:!0})}}uy.eventName=cy.Tabs+".tab-reorder";class py{constructor(e,t){this.fromIndex=e,this.toIndex=t}}function my(e){return e*(2-e)}mt.register(uy.eventName,(e=>e.detail));class gy{constructor(){this.subscribers=[]}subscribe(e,t=!1){-1===this.subscribers.indexOf(e)&&this.subscribers.push(e)}unsubscribe(e){const t=this.subscribers.indexOf(e);-1!==t&&this.subscribers.splice(t,1)}}gy.Empty=new gy;class Cy extends gy{emit(e){this.subscribers.forEach((t=>t(e)))}}class fy extends gy{constructor(e){super(),this.isInitialized=1===arguments.length,this.value=e}update(e){this.isInitialized&&e===this.value||(this.isInitialized=!0,this.value=e,this.subscribers.forEach((t=>t(e))))}subscribe(e,t=!1){this.isInitialized&&!t&&e(this.value),super.subscribe(e,t)}asTrigger(e){const t=new fy(null);return this.subscribe("function"!=typeof e?i=>t.update(-1!==e.indexOf(i)):i=>t.update(e(i))),t}or(e){const t=new fy(null);return this.subscribe((i=>t.update(i||e.value))),e.subscribe((e=>t.update(this.value||e))),t}and(e){const t=new fy(null);return this.subscribe((i=>t.update(i&&e.value))),e.subscribe((e=>t.update(this.value&&e))),t}join(e){const t=new fy(null);return this.subscribe((i=>t.update([i,e.value]))),e.subscribe((e=>t.update([this.value,e]))),t}}function vy(e){return e/Math.abs(e)}function by(e,t,i,n){let s=null;const r=e=>s?s(e,null):0,o=()=>{s=null},a=(e,n,r)=>{s=function(e,t,i,n,s){const r=t+i;let o=0;return(a,l)=>{if(l)return l(e-o,a,n(a/r));if(a<t)return null;a>=r&&s&&s();const A=e*n((Math.min(a,r)-t)/i)-o;return o+=A,A}}(n+e,r,t,i,o)},l=e=>{null===s?(a(e.value,0,e.timeStamp),n(r)):s(e.timeStamp,((t,i)=>a(e.value,t,i)))};return e.subscribe(l),()=>{s=null,e.unsubscribe(l)}}function wy(e,t,i,n,s){const r=function(e,t,i){const n=new Cy;return e.addEventListener(t,(e=>{e.preventDefault();const t=i(e);0===t||isNaN(t)||n.emit({value:t,timeStamp:e.timeStamp})}),{capture:!1,passive:!1}),n}(e,"wheel",(e=>vy(e.deltaY)*t)),o=function(e,t){const i=new Cy;let n=0,s=1;return e.subscribe((e=>{(0===n||e.timeStamp>=n||vy(e.value)!==s)&&(n=e.timeStamp+t,s=vy(e.value),i.emit(e))})),i}(r,30);function a(e,t){$t((i=>{const s=e(i);0!==s?(null!==s&&n(s),a(e,t)):t()}))}by(o,300,i,(function(e){s(new Promise(((t,i)=>{a(e,t)})))}))}class yy{}yy.Roller=he.Prefix+"-roller",yy.RollerContainer=yy.Roller+"-container",yy.RollersContainer=he.Prefix+"-rollers-container",yy.RollerTitle=yy.Roller+"-title",yy.RollerItem=yy.Roller+"-item",yy.RollerAfter=yy.Roller+"-after",yy.RollerExpander=yy.Roller+"-expander",yy.RollerFooter=he.Prefix+"-rollers-footer";class By extends Event{constructor(){super(By.eventName,{bubbles:!0,composed:!1,cancelable:!0})}}function Ey(e,t,i){const n=i(e);return n?t||n.visible.value?n:Ey(n,t,i):null}function Iy(e,t){const i=-1===t?"prevItem":"nextItem";return e[i]?e[i]:e[i]=(i=>{const n=e.value+t*i.delta;return-1===t&&-1!==i.min&&n<i.min?i.needLoop?new xy(i,i.max,!1,null,e):null:1===t&&-1!==i.max&&n>i.max?i.needLoop?new xy(i,i.min,!1,e,null):null:new xy(i,n,!1,null,null)})(e.collection)}By.eventName="dxrollerinitialized";class Sy{constructor(e,t,i,n,s,r){this._collection=e,this.prevItem=s,this.nextItem=r,this.value=t,this.visible=i||new fy(!0),this.selected=new fy(!!n),s&&(s.nextItem=this),r&&(r.prevItem=this),this.displayText=new fy(t);const o=this.collection.selectedItem;this.selected.subscribe((e=>{e&&(o.value&&o.value.selected.update(!1),o.update(this))})),this.visible.subscribe((e=>{if(!e&&this.selected.value){const e=this.getPrevious(!1);e&&e.selected.update(!0)}this.collection.visibleItemsChanged.emit(null)}),!0)}get collection(){return this._collection}getPrevious(e){return Ey(this,e,(e=>e.prevItem))}getNext(e){return Ey(this,e,(e=>e.nextItem))}getDisplayText(){return this.displayText.value||this.value}}class xy extends Sy{constructor(e,t,i,n,s){super(e,t,null,i,n,s)}get collection(){return this._collection}getPrevious(e){return Iy(this,-1)}getNext(e){return Iy(this,1)}}class Dy extends xy{constructor(e,t){super(e,t,!0,null,null)}}class Fy{constructor(e=!0){this.needLoop=e,this.items=[],this.selectedItem=new fy(null),this.visibleItemsChanged=new Cy}static createCollection(e,t,i=!0){const n=new Fy(i);for(let i=0;i<t.length;i++)n.add(i+1,null,i+1===e).displayText.value=t[i];return n.initialize(e),n}static createInconsistentCollection(e,t,i=!0){const n=new Fy(i);for(let i=0;i<t.length;i++)n.add(t[i][0],null,t[i][0]===e).displayText.value=t[i][1];return n.initialize(e),n}static createGenerator(e,t,i,n,s=!0){const r=new Ty(t,i,n,s);return r.initialize(e),r}initialize(e){const t=this.items.filter((t=>t.value===e));if(t.length>0)t[0].selected.update(!0);else{const t=function(e,t){if(0===e.length)return null;let i=e[0],n=Math.abs(i.value-t);for(let s=1;s<e.length;s++){const r=e[s],o=Math.abs(r.value-t);o<n&&(i=r,n=o)}return i}(this.items,e);t&&t.selected.update(!0)}this.needLoop&&(this.items[0].prevItem=this.items[this.items.length-1],this.items[this.items.length-1].nextItem=this.items[0])}add(e,t,i){const n=new Sy(this,e,t,i,this.items[this.items.length-1],null);return this.items.push(n),n}}class Ty extends Fy{constructor(e,t,i,n){super(n),this.min=e,this.max=t,this.delta=i,this.originItem=null}initialize(e){this.originItem=new Dy(this,e)}}class Hy{constructor(e,t,i,n,s){this.dataItem=null,this.displayTextSubscription=this.displayTextSubscription.bind(this),this.roller=i,this.prevItem=s,this.nextItem=null,this.index=t,this.elements=i.createRollerItemElements(),this.offset=t*n,this.height=n,this.position=0,this.visibleItemCount=i.visibleItemCount,s&&(s.nextItem=this),this.updateDataItem(e),this.selectItem=this.selectItem.bind(this)}initialize(e){const t=Math.floor(this.visibleItemCount/2);this.elements[1].style.top=(this.index-t)*this.height+"px",e.appendChild(this.elements[1]),this.move(this.offset),this.addEventSubscriptions()}addEventSubscriptions(){this.elements[0].addEventListener("click",(()=>{$t(this.selectItem)}),{signal:Wy(this.elements[0]).signal})}isSelected(){return Math.floor(this.visibleItemCount/2)*this.height===Math.round(this.position)}selectItem(e){if(!this.dataItem)return Promise.resolve();const t=Math.floor(this.visibleItemCount/2);return this.roller.afterMove(Ry(gy.Empty,(e=>this.roller.move(e)),{divisor:this.roller.itemSize.height,startTimestamp:e,endTimestamp:e+300,easing:my,frameCallback:$t,value:(t-this.index)*this.height-(this.position-this.offset)}))}move(e){this.updatePosition(e);const t=this.position-this.offset;this.elements.forEach((e=>e.style.transform="matrix(1, 0, 0, 1, 0, "+t+")"))}updatePosition(e){this.position+=e,this.position>this.visibleItemCount*this.height?(this.position-=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.nextItem&&this.nextItem.dataItem?this.nextItem.dataItem.getPrevious(!1):null)):this.position<-1*this.height&&(this.position+=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.prevItem.dataItem?this.prevItem.dataItem.getNext(!1):null))}updateDataItem(e){this.dataItem!==e&&(this.dataItem&&this.dataItem.displayText.unsubscribe(this.displayTextSubscription),this.dataItem=e,this.dataItem?this.dataItem.displayText.subscribe(this.displayTextSubscription):this.displayTextSubscription(""))}displayTextSubscription(e){this.elements.forEach((t=>Uy(t,e)))}raiseChanges(){this.isSelected()&&this.dataItem&&this.dataItem.selected.update(!0)}}function Uy(e,t){e.innerText=t}function Py(e,t,i){const n=i(e);return n&&Math.abs(Math.round(n.position-e.position))===t?[n].concat(Py(n,t,i)):[]}function Qy(e,t,i){0!==e.length&&(e.shift().updateDataItem(t),Qy(e,i(t),i))}class Ny{constructor(e,t,i,n,s,r){this.itemCollection=e,this.visibleItemCount=t,this.itemContainers=[],this.itemSize=n,this.caption=s,this.longestVisibleDisplayText=r,this.needLoop=e.needLoop,this.container=i,this.rollerElement=null,this.rollerContainer=null,this.move=this.move.bind(this),this.moveReversed=this.moveReversed.bind(this),this.afterMove=this.afterMove.bind(this),this.duplicateContainer=null}initialize(){this.initializeRollerElements();const e=[this.itemCollection.selectedItem.value];for(;e.length<this.visibleItemCount;)e.splice(0,0,e[0]?e[0].getPrevious(!1):null),e.push(e[e.length-1]?e[e.length-1].getNext(!1):null);e.push(e[e.length-1]?e[e.length-1].getNext(!1):null);for(let t=0;t<e.length;t++)this.itemContainers.push(new Hy(e[t],t,this,this.itemSize.height,this.itemContainers[this.itemContainers.length-1]));this.longestVisibleDisplayText&&Uy(this.createRollerItemElement(yy.RollerItem+" "+yy.RollerExpander),this.longestVisibleDisplayText),this.duplicateContainer=this.createRollerItemElement(yy.RollerAfter),this.duplicateContainer.setAttribute("role","spinbutton"),this.duplicateContainer.setAttribute(N.ariaLabel,this.caption),this.duplicateContainer.setAttribute(N.ariaValuenow,this.itemCollection.selectedItem.value.value),this.duplicateContainer.setAttribute(N.ariaValuetext,this.itemCollection.selectedItem.value.displayText.value),this.itemContainers[0].prevItem=this.itemContainers[this.itemContainers.length-1],this.itemContainers[this.itemContainers.length-1].nextItem=this.itemContainers[0];for(let e=0;e<this.itemContainers.length;e++)this.itemContainers[e].initialize(this.duplicateContainer);this.itemCollection.selectedItem.subscribe((()=>this.updateVisibleDataItems()),!0),this.itemCollection.visibleItemsChanged.subscribe((()=>this.updateVisibleDataItems())),wy(this.rollerElement,this.itemSize.height,my,this.moveReversed,this.afterMove),function(e,t,i,n){const s=new Cy,r=new Cy;let o=0;e.addEventListener("touchstart",(e=>{o=e.touches[0].clientY}),{capture:!1,passive:!0,signal:Wy(e).signal}),e.addEventListener("touchend",(()=>{o=0,$t((e=>r.emit(e)))}),{capture:!1,passive:!0,signal:Wy(e).signal}),e.addEventListener("touchmove",(e=>{e.preventDefault();const t=e.changedTouches[0].clientY;s.emit(t-o),o=t}),{capture:!1,passive:!1,signal:Wy(e).signal});const a={divisor:t,accelerationTimeFrame:0};!function(e,t,i,n,s,r){let o,a,l,A=1,d=!1;const c=i.accelerationTimeFrame||300;function h(e){const t=Math.abs(a%i.divisor);return{value:(i.divisor-t)*Math.sign(a),endTimestamp:e+300,startTimestamp:e,easing:my,frameCallback:r,divisor:0}}function u(e,t){return(t*=A)>=o&&e-l<=c&&(A=Math.min(2,1.2*A)),a+=t,o=t,l=e,t}function p(e){a=0,l=e,A=1}e.subscribe((i=>{r((r=>{d||(d=!0,p(r),s(new Promise(((i,s)=>{const o=s=>{t.unsubscribe(o),Ry(e,n,h(s)).then((()=>{d=!1,i()})).catch((()=>{t.subscribe(o)})).finally((()=>p(r)))};t.subscribe(o)})))),n(u(r,i))}))}))}(s,r,a,i,n,$t)}(this.rollerElement,this.itemSize.height,this.move,this.afterMove),this.rollerContainer&&this.rollerContainer.addEventListener("keydown",(e=>{let t=null;e.keyCode===Be.KeyCode.Up?t=this.itemCollection.selectedItem.value.getPrevious():e.keyCode===Be.KeyCode.Down&&(t=this.itemCollection.selectedItem.value.getNext()),t&&(e.preventDefault(),t.selected.update(!0))}),{signal:Wy(this.rollerContainer).signal})}initializeRollerElements(){const e=this.rollerContainer=document.createElement("SPAN");e.className=yy.RollerContainer,e.style.minWidth=this.itemSize.width.toString();const t=document.createElement("SPAN");t.innerText=this.caption,t.className=yy.RollerTitle,e.appendChild(t);const i=this.rollerElement=document.createElement("DIV");i.className=yy.Roller,i.tabIndex=-1,i.style.height=this.itemSize.height*this.visibleItemCount+"px",e.appendChild(i),this.container&&this.container.appendChild(e)}updateVisibleDataItems(){var e,t;const i=this.itemContainers.filter((e=>e.isSelected()))[0];if(!i)return;const n=Py(i,this.itemSize.height,(e=>e.prevItem)),s=Py(i,this.itemSize.height,(e=>e.nextItem)),r=this.itemCollection.selectedItem.value;i.updateDataItem(r),null===(e=this.duplicateContainer)||void 0===e||e.setAttribute(N.ariaValuenow,r.value),null===(t=this.duplicateContainer)||void 0===t||t.setAttribute(N.ariaValuetext,r.displayText.value),Qy(n.concat([]),r.getPrevious(),(e=>e?e.getPrevious(!1):null)),Qy(s.concat([]),r.getNext(),(e=>e?e.getNext(!1):null))}createRollerItemElement(e){const t=document.createElement("SPAN");return t.className=e||yy.RollerItem,this.rollerElement&&this.rollerElement.appendChild(t),t}createRollerItemElements(){const e=this.createRollerItemElement(null);return[e,e.cloneNode()]}moveReversed(e){this.move(0-e)}move(e){if(0===e)return;const t=Math.sign(e),i=this.itemContainers.length-1,n=-1===t?i:0,s=(-1===t?0:i)+t;if(!this.needLoop){if(1===t){const i=Math.floor(this.visibleItemCount/2)*this.itemSize.height;for(let r=n;r!==s;r+=t)!this.itemContainers[r].dataItem&&this.itemContainers[r].position+this.itemSize.height-i<=0&&this.itemContainers[r].position+this.itemSize.height+e-i>0&&(e=Math.min(i-(this.itemContainers[r].position+this.itemSize.height),e))}else{const i=(Math.floor(this.visibleItemCount/2)+1)*this.itemSize.height;for(let r=n;r!==s;r+=t)!this.itemContainers[r].dataItem&&this.itemContainers[r].position-i>=0&&this.itemContainers[r].position+e-i<0&&(e=Math.max(i-this.itemContainers[r].position,e))}if(0===e)return}for(let i=n;i!==s;i+=t)this.itemContainers[i].move(e)}afterMove(e){return e.then((()=>Promise.resolve(this.itemContainers.forEach((e=>e.raiseChanges())))))}}function Ry(e,t,i){return new Promise(((n,s)=>{function r(){e.unsubscribe(r),s()}e.subscribe(r);let o=0;const a=i.frameCallback,l=s=>{if(s<i.endTimestamp){const e=i.easing((s-i.startTimestamp)/(i.endTimestamp-i.startTimestamp)),n=i.value*e-o;t(n),o+=n,a(l)}else e.unsubscribe(r),t(i.value-o),n()};a(l)}))}function Ly(e){return e.value%4==0&&e.value%100!=0||e.value%400==0}function My(e){return 2!==e.value}function ky(e){return-1!==[1,3,5,7,8,10,12].indexOf(e.value)}var Ky;function Oy(e,t,i,n,s,r,o){const a=e.add(t,i,n);r.subscribe((([e,i])=>{if(o){const n=s[function(e,t,i){return new Date(e,t-1,i).getDay()}(i.value,e.value,t)];a.displayText.update(t+" "+n)}else a.displayText.value=s[t-1]}))}function _y(e){return e&&e.length?" "+e.concat([]).sort(((e,t)=>t.length-e.length))[0]:""}function Vy(e){let t="initial";for(;e;){if(t=window.getComputedStyle(e).backgroundColor,t&&"rgba(0, 0, 0, 0)"!==t&&"transparent"!==t)return t;e=e.parentElement}return t}function zy(e){e.eventSubscriptionsController&&e.eventSubscriptionsController.abort(),e.eventSubscriptionsController=new AbortController}function Wy(e){return Qt(e,null,(e=>!!e.eventSubscriptionsController)).eventSubscriptionsController}!function(e){e[e.DayWithoutLeadingZero=0]="DayWithoutLeadingZero",e[e.DayWithLeadingZero=1]="DayWithLeadingZero",e[e.DayWithShortName=2]="DayWithShortName",e[e.DayWithFullName=3]="DayWithFullName",e[e.MonthWithShortName=4]="MonthWithShortName",e[e.MonthWithFullName=5]="MonthWithFullName",e[e.MonthWithoutLeadingZero=6]="MonthWithoutLeadingZero",e[e.MonthWithLeadingZero=7]="MonthWithLeadingZero",e[e.YearWithFourDigit=8]="YearWithFourDigit",e[e.YearWithThreeDigit=9]="YearWithThreeDigit",e[e.YearWithTwoDigit=10]="YearWithTwoDigit",e[e.YearWithOneDigit=11]="YearWithOneDigit"}(Ky||(Ky={}));const $y=1,Gy=2,qy=0,Xy=1,Yy=2,Jy=3;class jy extends Li{constructor(e,t,i){super(e,t),this.dotNetRef=i}queryItems(){return this.queryItemsBySelector(`.${yy.RollerContainer} .${yy.Roller} .${yy.RollerAfter}`)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return t!==Be.KeyCode.Tab&&t!==Be.KeyCode.Right&&t!==Be.KeyCode.Space||e.shiftKey||this.lastItemSelected?t===Be.KeyCode.Tab&&e.shiftKey||t===Be.KeyCode.Left?(this.selectedItemIndex>0?this.moveToPrevItem():t!==Be.KeyCode.Left&&this.leaveBackward(),!0):super.handleKeyDown(e):(this.moveToNextItem(),!0)}}const Zy=new WeakMap;class eB{constructor(e,t,i,n){this.hoursCollection=e,this.minutesCollection=t,this.secondsCollection=i,this.AMPMCollection=n}update(e){if(this.AMPMCollection){let t=this.AMPMCollection?e.hours%12:e.hours;t=0===t?12:t,this.hoursCollection.initialize(t),this.AMPMCollection.initialize(e.hours>=12?Gy:$y)}else this.hoursCollection.initialize(e.hours);this.minutesCollection.initialize(e.minutes),this.secondsCollection.initialize(e.seconds)}}class tB{constructor(e,t,i){this.yearsCollection=e,this.monthsCollection=t,this.daysCollection=i}update(e){const t=e.filter((e=>e.type===Ky.DayWithShortName||e.type===Ky.DayWithFullName||e.type===Ky.DayWithoutLeadingZero||e.type===Ky.DayWithLeadingZero))[0],i=e.filter((e=>e.type===Ky.MonthWithShortName||e.type===Ky.MonthWithFullName||e.type===Ky.MonthWithLeadingZero||e.type===Ky.MonthWithoutLeadingZero))[0],n=e.filter((e=>e.type===Ky.YearWithFourDigit||e.type===Ky.YearWithThreeDigit||e.type===Ky.YearWithTwoDigit||e.type===Ky.YearWithOneDigit))[0];this.yearsCollection.initialize(n.value),this.monthsCollection.initialize(i.value),this.daysCollection.initialize(t.value)}}function iB(e){const t=document.createElement("span");t.className=yy.RollerItem,t.textContent="01234567890",e.appendChild(t);let i=t.offsetHeight;return i||(i=Nt(e,"dxbl-lg")?42:Nt(e,"dxbl-sm")?30:36),e.removeChild(t),i}function nB(e,t,i){const n=[];let s=0;for(let r=e;r<=t;r+=i)n[s]=[r,r.toString()],s++;return n}const sB={initializeDateRoller:function(e,t,i,s,r){n.removeLoaded(e),zy(e);const o=t.items.filter((e=>e.type===Ky.DayWithShortName||e.type===Ky.DayWithFullName||e.type===Ky.DayWithoutLeadingZero||e.type===Ky.DayWithLeadingZero))[0],a=t.items.filter((e=>e.type===Ky.MonthWithShortName||e.type===Ky.MonthWithFullName||e.type===Ky.MonthWithLeadingZero||e.type===Ky.MonthWithoutLeadingZero))[0],l=t.items.filter((e=>e.type===Ky.YearWithFourDigit||e.type===Ky.YearWithThreeDigit||e.type===Ky.YearWithTwoDigit||e.type===Ky.YearWithOneDigit))[0],A=t.yearNames||[];let d=t.monthNames||[];const c=t.dayNames||[],h=iB(e);let u=o?o.value:1,p=null;a?p=a.value:(d=["","","","","","","","","","","",""],p=i);let m=l?l.value:s;const g=l?Fy.createCollection(m,A):Fy.createGenerator(m,1,9999,1),C=Fy.createCollection(p,d),f=C.selectedItem.asTrigger(My),v={29:g.selectedItem.asTrigger(Ly).or(f),30:f,31:C.selectedItem.asTrigger(ky)},b=C.selectedItem.join(g.selectedItem),w=o&&(o.type===Ky.DayWithFullName||o.type===Ky.DayWithShortName),y=new Fy;for(let e=1;e<=31;e++)Oy(y,e,v[e],e===u,c,b,w);y.initialize(u);const B=["25"+_y(c),_y(d),"0000"].reduce(((e,t)=>e.length>t.length?e:t)),E=document.createDocumentFragment();E.eventSubscriptionsController=e.eventSubscriptionsController;const I=document.createElement("STYLE");function S(e){return t=>{e(t),r.invokeMethodAsync("UpdateDateTime",[u,p,m]).catch((e=>console.error(e)))}}I.type="text/css",I.innerText=`.${yy.Roller} { height: ${5*h}px; } .${yy.RollerItem}, .${yy.RollerAfter} { height: ${h}px; } .${yy.RollerAfter} { background-color: ${Vy(e)}; } `,E.appendChild(I),t.items.forEach((e=>{switch(e.type){case Ky.DayWithoutLeadingZero:case Ky.DayWithLeadingZero:case Ky.DayWithFullName:case Ky.DayWithShortName:new Ny(y,5,E,{width:-1,height:h},e.name,B).initialize();break;case Ky.MonthWithFullName:case Ky.MonthWithShortName:case Ky.MonthWithLeadingZero:case Ky.MonthWithoutLeadingZero:new Ny(C,5,E,{width:-1,height:h},e.name,B).initialize();break;case Ky.YearWithFourDigit:case Ky.YearWithThreeDigit:case Ky.YearWithTwoDigit:case Ky.YearWithOneDigit:new Ny(g,5,E,{width:-1,height:h},e.name,B).initialize();break}})),E.appendChild(document.createElement(Pi)),e.textContent="",e.appendChild(E),y.selectedItem.subscribe(S((e=>{u=e.value}))),C.selectedItem.subscribe(S((e=>{p=e.value}))),g.selectedItem.subscribe(S((e=>{m=e.value}))),Zy.set(e,new tB(g,C,y));const x=e.querySelector(Pi);return x&&!x.initialized&&x.initialize(e,new jy(x,e,r)),e.dispatchEvent(new By),n.setLoaded(e),Promise.resolve()},initializeTimeRoller:function(e,t,i){if(n.removeLoaded(e),zy(e),!t)return Promise.reject();const s=t.twelveHourFormat;let r=s?t.time.hours%12:t.time.hours;s&&0===r&&(r=12);let o=t.time.minutes,a=t.time.seconds,l=t.time.hours>=12?Gy:$y;const A=iB(e),d=1===t.secondDelta?Fy.createGenerator(a,0,59,1):Fy.createInconsistentCollection(a,nB(0,59,t.secondDelta),!0),c=1===t.minuteDelta?Fy.createGenerator(o,0,59,1):Fy.createInconsistentCollection(o,nB(0,59,t.minuteDelta),!0),h=1===t.hourDelta?s?Fy.createGenerator(r,1,12,1):Fy.createGenerator(r,0,23,1):Fy.createInconsistentCollection(r,s?nB(1,12,t.hourDelta):nB(0,23,t.hourDelta),!0);let u=null;t.ampmDesignators&&t.ampmDesignators[0]&&t.ampmDesignators[1]&&(u=Fy.createCollection(l,t.ampmDesignators,!1));const p=document.createDocumentFragment();p.eventSubscriptionsController=e.eventSubscriptionsController;const m=document.createElement("STYLE");function g(e){return t=>{e(t),i.invokeMethodAsync("UpdateDateTime",[r,o,a,l]).catch()}}m.type="text/css",m.innerText=`.${yy.Roller} { height: ${5*A}px; } .${yy.RollerItem}, .${yy.RollerAfter} { height: ${A}px; } .${yy.RollerAfter} { background-color: ${Vy(e)}; }`,p.appendChild(m),t.items.forEach((e=>{switch(e.type){case qy:new Ny(h,5,p,{width:-1,height:A},e.name,"15").initialize();break;case Xy:new Ny(c,5,p,{width:-1,height:A},e.name,"55").initialize();break;case Yy:new Ny(d,5,p,{width:-1,height:A},e.name,"55").initialize();break;case Jy:if(u){new Ny(u,5,p,{width:-1,height:A},e.name,"AM").initialize()}}})),h.selectedItem.subscribe(g((e=>{r=e.value}))),c.selectedItem.subscribe(g((e=>{o=e.value}))),d.selectedItem.subscribe(g((e=>{a=e.value}))),u&&u.selectedItem.subscribe(g((e=>{l=e.value}))),p.appendChild(document.createElement(Pi)),Zy.set(e,new eB(h,c,d,u)),e.textContent="",e.appendChild(p);const C=e.querySelector(Pi);return C&&!C.initialized&&C.initialize(e,new jy(C,e,i)),e.dispatchEvent(new By),n.setLoaded(e),Promise.resolve()},updateRoller:function(e,t){if(!Zy.has(e))return;const i=Zy.get(e);if(i)return void i.update(t);const n=Zy.get(e);n&&n.update(t)},disposeRoller:function(e){e.eventSubscriptionsController&&e.eventSubscriptionsController.abort()}};class rB{}rB.Button=he.Prefix+"-btn",rB.SplitButton=rB.Button+"-split",rB.ButtonFirst=rB.Button+"-first",rB.ButtonLast=rB.Button+"-last",rB.ButtonTool=rB.Button+"-tool",rB.ButtonGroup=rB.Button+"-group",rB.ButtonGroupFirst=rB.ButtonGroup+"-first",rB.ButtonGroupVertical=rB.ButtonGroup+"-vertical",rB.ButtonGroupLeft=rB.ButtonGroup+"-left",rB.ButtonGroupRight=rB.ButtonGroup+"-right";class oB extends Ia{constructor(e,t,i){super(e,t),this._focusTrapElement=null,this._parentStrategy=i,this._needRestoreInputFocus=!1}get parentStrategy(){return this._parentStrategy}get dropDownEditor(){return this.parentStrategy.dropDownEditor}getHeaderButtons(){return Array.from(this.targetElement.querySelectorAll(`.${Xl.Header} > .${rB.Button}`))}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnDropDownEditorPointerDownHandler||(this.boundOnDropDownEditorPointerDownHandler=this.onDropDownEditorPointerDownHandler.bind(this),this.targetElement.addEventListener(Sl.eventName,this.boundOnDropDownEditorPointerDownHandler)),this.boundOnPopupClosingResultRequestedHandler||(this.boundOnPopupClosingResultRequestedHandler=this.onPopupClosingResultRequested.bind(this),this.targetElement.addEventListener($r.eventName,this.boundOnPopupClosingResultRequestedHandler),this.targetElement.addEventListener(Wr.eventName,this.boundOnPopupClosingResultRequestedHandler))}onDispose(){this.boundOnDropDownEditorPointerDownHandler&&(this.targetElement.removeEventListener(Sl.eventName,this.boundOnDropDownEditorPointerDownHandler),this.boundOnDropDownEditorPointerDownHandler=void 0),this.boundOnPopupClosingResultRequestedHandler&&(this.targetElement.removeEventListener($r.eventName,this.boundOnPopupClosingResultRequestedHandler),this.targetElement.removeEventListener(Wr.eventName,this.boundOnPopupClosingResultRequestedHandler),this.boundOnPopupClosingResultRequestedHandler=void 0)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab&&(t===Be.KeyCode.Esc||(e.altKey||e.metaKey)&&t===Be.KeyCode.Up?(this._needRestoreInputFocus=!0,this.closeDropDown(),!0):super.handleKeyDown(e))}onDropDownEditorPointerDownHandler(){this.dropDownEditor.focused||this.parentStrategy.closeDropDown()}onPopupClosingResultRequested(){this.targetElement.contains(document.activeElement)?this.dropDownEditor.focusInternal():this.dropDownEditor.raiseFocusOutInternal(),this._needRestoreInputFocus=!1}closeDropDown(){this.parentStrategy.closeDropDown()}focusElementInRootPath(){return!1}handlePopupShown(){this._needRestoreInputFocus=!1;const e=this.getNestedContentElement();this._focusTrapElement=e||this.targetElement,kr.activate(this._focusTrapElement,!1,!0),super.handlePopupShown();const t=this.getInnerControlMainElement();t&&Si(this.dropDownEditor)&&Ei(t),this.dropDownEditor.classList.add(he.Focused)}onPopupClosed(){this.dropDownEditor.classList.remove(he.Focused),kr.deactivate(this._focusTrapElement,!1),this._focusTrapElement=null,this._needRestoreInputFocus&&this.dropDownEditor.focusInternal(),super.onPopupClosed()}}class aB extends Gl{createPopupStrategy(e,t){return new lB(e,t,this)}}class lB extends oB{constructor(e,t,i){super(e,t,i),this.editorInitiallyFocused=this.dropDownEditor.focused}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(e.shiftKey&&t===Be.KeyCode.Tab&&this.isFirstHeaderButtonSelected()&&!this.isRollerFooterExist()){const e=this.getLastRollerItem();if(e)return this.focusItem(e),!0}return t===Be.KeyCode.Enter&&this.isTimeRollerSelected()||t===Be.KeyCode.Space&&this.isLastTimeRollerSelected()?(this.closeDropDownAndApplyValue(e),!0):super.handleKeyDown(e)}handlePopupShown(){super.handlePopupShown(),this.editorInitiallyFocused&&this.focusFirstRollerItem()}onRollerInitialized(){this.editorInitiallyFocused&&this.focusFirstRollerItem()}focusFirstRollerItem(){this.focusItem(this.getFirstRollerItem())}focusLastRollerItem(){this.focusItem(this.getLastRollerItem())}focusItem(e){e&&(Ci.makeElementFocusable(e),Ci.focusElement(e))}getRollersContainer(){return this.targetElement.querySelector(`.${yy.RollersContainer}`)}getFirstRollerItem(){return this.targetElement.querySelector(`.${yy.RollerAfter}`)}getLastRollerItem(){const e=this.targetElement.querySelectorAll(`.${yy.RollerAfter}`);return e[e.length-1]}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnRollerInitializedHandler||(this.boundOnRollerInitializedHandler=this.onRollerInitialized.bind(this),this.targetElement.addEventListener(By.eventName,this.boundOnRollerInitializedHandler))}onDispose(){this.boundOnRollerInitializedHandler&&(this.targetElement.removeEventListener(By.eventName,this.boundOnRollerInitializedHandler),this.boundOnRollerInitializedHandler=void 0)}isTimeRollerSelected(){var e;return null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(`${yy.RollerAfter}`)}isLastTimeRollerSelected(){var e;return this.isTimeRollerSelected()&&!(null===(e=document.activeElement)||void 0===e?void 0:e.nextElementSibling)}isFirstHeaderButtonSelected(){return this.getHeaderButtons()[0]===document.activeElement}isRollerFooterExist(){return!!this.targetElement.querySelector(`.${yy.RollerFooter}`)}closeDropDownAndApplyValue(e){this.parentStrategy.closeDropDownAndApplyValue(e)}getInnerControlMainElement(){return this.getRollersContainer()}}class AB extends aB{createPopupStrategy(e,t){return new dB(e,t,this)}}class dB extends lB{constructor(e,t,i){super(e,t,i)}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Space&&this.isLastDateRollerSelected()?(this.performShortcutEvent(e),!0):super.handleKeyDown(e)}handlePopupShown(){super.handlePopupShown(),this.editorInitiallyFocused&&this.focusItem(this.getSelectedDay())}addEventSubscriptions(){super.addEventSubscriptions(),this.boundOnActiveTabChangedHandler||(this.boundOnActiveTabChangedHandler=this.onActiveTabChanged.bind(this),this.targetElement.addEventListener(hy.eventName,this.boundOnActiveTabChangedHandler)),this.boundOnCalendarKeyboardNavigationLeavedHandler||(this.boundOnCalendarKeyboardNavigationLeavedHandler=this.onCalendarKeyboardNavigationLeaved.bind(this),this.targetElement.addEventListener(Ww.eventName,this.boundOnCalendarKeyboardNavigationLeavedHandler))}onDispose(){this.boundOnActiveTabChangedHandler&&(this.targetElement.removeEventListener(hy.eventName,this.boundOnActiveTabChangedHandler),this.boundOnActiveTabChangedHandler=void 0),this.boundOnCalendarKeyboardNavigationLeavedHandler&&(this.targetElement.removeEventListener(Ww.eventName,this.boundOnCalendarKeyboardNavigationLeavedHandler),this.boundOnCalendarKeyboardNavigationLeavedHandler=void 0),super.onDispose()}onActiveTabChanged(){var e;(null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(dy.Item))||this.focusFirstRollerItem()}onCalendarKeyboardNavigationLeaved(){if(!this.getTabs()){const e=Ci.findFocusableElements(this.targetElement).pop();e&&this.focusItem(e)}}getFirstRollerItem(){var e;const t=null===(e=this.getTabs())||void 0===e?void 0:e.getActiveTabContent();return t?t.querySelector(`.${yy.RollerAfter}`):super.getFirstRollerItem()}isLastTimeRollerSelected(){const e=this.getTabs();return null!==e&&e.activeTabIndex===e.tabCount-1&&super.isLastTimeRollerSelected()}isLastDateRollerSelected(){const e=this.getTabs();return null!==e&&0===e.activeTabIndex&&super.isLastTimeRollerSelected()}getCalendar(){return this.targetElement.querySelector(`.${Dw.MainElement}`)}getTabs(){return this.targetElement.querySelector(`.${dy.Prefix}`)}getSelectedDay(){var e;return null===(e=this.getCalendar())||void 0===e?void 0:e.querySelector(`.${Dw.SelectedItem}`)}getInnerControlMainElement(){var e;return null!==(e=this.getCalendar())&&void 0!==e?e:super.getInnerControlMainElement()}}class cB extends Jl{connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}toggleDropDownVisibility(){this.fieldText!==this.fieldElementValue&&this.raiseFieldChange(),super.toggleDropDownVisibility()}openDropDown(){this.fieldText!==this.fieldElementValue&&this.raiseFieldChange(),super.openDropDown()}createKeyboardStrategy(){return new AB(this)}}const hB="dxbl-dropdown",uB="data-dropdown-thumb";class pB{constructor(e,t){this.width=Math.floor(e),this.height=Math.floor(t)}}class mB extends CustomEvent{constructor(e,t){super(mB.eventName,{detail:new pB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}mB.eventName=hB+".resizeStarted",mt.register(mB.eventName,(e=>e.detail));class gB extends CustomEvent{constructor(e,t){super(gB.eventName,{detail:new pB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}gB.eventName=hB+".resizeCompleted",mt.register(gB.eventName,(e=>e.detail));class CB extends Co{constructor(){super(...arguments),this.dragStart=null,this.dragBounds=null,this.dragStartedHandler=this.handleDragStarted.bind(this),this.dragDeltaHandler=this.handleDragDelta.bind(this),this.dragCompletedHandler=this.handleDragCompleted.bind(this),this.dragWidth=0,this.dragHeight=0,this.dragMaxWidth=0,this.dragMaxHeight=0,this.isInDragOperation=!1,this.dragCssStyle=null}get branchType(){return Hs.DropDown}renderTemplate(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}"
                style="${this.dragCssStyle}">
                <dxbl-dropdown-root
                    id="root"
                    style="${this.rootCssStyle}"
                    ?resizing="${this.resizing}"
                    drop-opposite="${this.actualDropOpposite}"
                    drop-direction="${this.actualDropDirection}"
                    drop-alignment="${this.actualDropAlignment}">
                    ${this.renderDefaultSlot()}
                    ${this.renderAdditionalSlots()}
                    ${this.renderBridgeSlot()}
                </dxbl-dropdown-root>
            </dxbl-branch>
        `}getRootTagName(){return"dxbl-dropdown-root"}connectedCallback(){super.connectedCallback(),this.addEventListener(Oi.eventName,this.dragStartedHandler),this.addEventListener(_i.eventName,this.dragDeltaHandler),this.addEventListener(Vi.eventName,this.dragCompletedHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(Oi.eventName,this.dragStartedHandler),this.removeEventListener(_i.eventName,this.dragDeltaHandler),this.removeEventListener(Vi.eventName,this.dragCompletedHandler)}get child(){return this.root}handleDragStarted(e){const t=H.getOriginalSource(e);if(!t)return;if(!t.hasAttribute(uB))return;if(!this.child)return;this.lockPlacement(),this.dragStart=new Ze(e.detail.x,e.detail.y);const i=this.getRestrictBounds(),n=this.getPlacementTargetInterestPoints(this.placement),s=this.actualDropAlignment,r=this.actualDropDirection,o=rt.getRelativeElementRect(this.child);this.dragBounds=this.calcResizeRect(i,n,s,r),this.dragMaxWidth=this.dragBounds.width,this.dragMaxHeight=this.dragBounds.height,this.isInDragOperation=!0,this.dragWidth=o.width,this.dragHeight=o.height,this.raiseResizeStarted(this.dragWidth,this.dragHeight)}willUpdate(e){super.willUpdate(e),this.dragCssStyle=this.isInDragOperation?`width: ${Te.toPx(this.dragWidth)}; height: ${Te.toPx(this.dragHeight)}; max-width: ${Te.toPx(this.dragMaxWidth)}; max-height: ${Te.toPx(this.dragMaxHeight)};`:null}updated(e){super.updated(e),this.root.offsetWidth<this.root.scrollWidth&&(this.dragWidth=this.root.scrollWidth),this.root.offsetHeight<this.root.scrollHeight&&(this.dragHeight=this.root.scrollHeight)}handleDragDelta(e){const t=H.getOriginalSource(e);if(!t)return;if(!t.hasAttribute(uB))return;const i=Math.min(this.dragMaxWidth,this.actualDropDirection===Jr.Near?e.detail.x-this.offset.x:this.offset.x+this.childSize.width-e.detail.x),n=Math.min(this.dragMaxHeight,this.actualDropAlignment===jr.bottom?e.detail.y-this.offset.y:this.offset.y+this.childSize.height-e.detail.y),s=ha(this.minWidth,this),r=ha(this.minHeight,this);this.dragWidth=s?i>s?i:s:i>0?i:0,this.dragHeight=r?n>r?n:r:n>0?n:0}handleDragCompleted(e){var t,i;const n=H.getOriginalSource(e);n&&n.hasAttribute(uB)&&(this.isInDragOperation=!1,this.dragWidth=null!==(t=this.branch.offsetWidth)&&void 0!==t?t:0,this.dragHeight=null!==(i=this.branch.offsetHeight)&&void 0!==i?i:0,this.desiredWidth=Te.toPx(this.dragWidth),this.desiredHeight=Te.toPx(this.dragHeight),this.unlockPlacement(),this.raiseResizeCompleted(this.dragWidth,this.dragHeight))}calcResizeRect(e,t,i,n){if(n===Jr.Near){if(i===jr.top){return st.intersect(e,nt.createFromPoints(t[Xr.TopLeft],e.topRight))}return st.intersect(e,nt.createFromPoints(t[Xr.BottomLeft],e.bottomRight))}if(i===jr.top){return st.intersect(e,nt.createFromPoints(t[Xr.TopRight],e.topLeft))}return st.intersect(e,nt.createFromPoints(t[Xr.BottomRight],e.bottomLeft))}raiseResizeStarted(e,t){this.dispatchEvent(new mB(e,t))}raiseResizeCompleted(e,t){this.dispatchEvent(new gB(e,t))}calcRenderWidth(){return this.isInDragOperation?null:super.calcRenderWidth()}calcRenderHeight(){return this.isInDragOperation?null:super.calcRenderHeight()}shouldUpdateRootCssStyle(e){return super.shouldUpdateRootCssStyle(e)||e.has("isInDragOperation")||e.has("dragWidth")||e.has("dragHeight")||e.has("dragMaxWidth")||e.has("dragMaxHeight")}createKeyboardNavigationStrategy(){return new xa(this.keyboardNavigator,this)}}C([dn("#root",!0)],CB.prototype,"root",void 0),C([dn("#branch")],CB.prototype,"branch",void 0),C([ln({type:Number,reflect:!1})],CB.prototype,"dragWidth",void 0),C([ln({type:Number,reflect:!1})],CB.prototype,"dragHeight",void 0),C([ln({type:Number,reflect:!1})],CB.prototype,"dragMaxWidth",void 0),C([ln({type:Number,reflect:!1})],CB.prototype,"dragMaxHeight",void 0),C([ln({type:Boolean,reflect:!1})],CB.prototype,"isInDragOperation",void 0),C([ln({type:String,reflect:!1})],CB.prototype,"dragCssStyle",void 0);let fB=class extends CB{updated(e){e.has("zIndex")&&this.zIndex&&this.raiseZIndexChange(),super.updated(e)}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new Ao(new lo(this.zIndex)))}))}};fB=C([rn(hB)],fB);let vB=class extends ms{constructor(){super(...arguments),this.topLeftClass=null,this.topRightClass=null,this.bottomLeftClass=null,this.bottomRightClass=null,this.dropOpposite=!1,this.dropDirection=Jr.Near,this.dropAlignment=jr.bottom,this.resizing=!1}static get styles(){return Cn`
            :host {
                display: flex;
                position: relative;
                flex: 1 1 auto;
                flex-direction: column;
                box-sizing: border-box;
                min-height: 0;
            }
            .hidden {
                display: none;
            }
            ::slotted([slot="top-right"]) {
                position: absolute;
                z-index: 1001;
                top: 0px;
                right: 0px;
                transform: rotate(270deg);
                cursor: ne-resize;
            }
            ::slotted([slot="top-left"]) {
                position: absolute;
                z-index: 1001;
                top: 0px;
                left: 0px;
                transform: rotate(180deg);
                cursor: nw-resize;
            }
            ::slotted([slot="bottom-left"]) {
                position: absolute;
                z-index: 1001;
                bottom: 0px;
                left: 0px;
                transform: rotate(90deg);
                cursor: sw-resize;
            }
            ::slotted([slot="bottom-right"]) {
                position: absolute;
                z-index: 1001;
                bottom: 0px;
                right: 0px;
                cursor: se-resize;
                transform: rotate(0deg);
            }
        }`}connectedCallback(){super.connectedCallback(),this.calculateStyles(this.resizing,this.dropAlignment,this.dropDirection)}willUpdate(e){(e.has("dropAlignment")||e.has("dropDirection")||e.has("resizing"))&&this.calculateStyles(this.resizing,this.dropAlignment,this.dropDirection)}calculateStyles(e,t,i){this.topLeftClass=e&&t===jr.top&&i===Jr.Far?null:"hidden",this.topRightClass=e&&t===jr.top&&i===Jr.Near?null:"hidden",this.bottomLeftClass=e&&t===jr.bottom&&i===Jr.Far?null:"hidden",this.bottomRightClass=e&&t===jr.bottom&&i===Jr.Near?null:"hidden"}render(){return Xn`
            <slot></slot>
            <dxbl-thumb data-qa-thumb-location="top-left" data-dropdown-thumb class="${this.topLeftClass}">
                <slot name="top-left"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="top-right" data-dropdown-thumb class="${this.topRightClass}">
                <slot name="top-right"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="bottom-left" data-dropdown-thumb class="${this.bottomLeftClass}">
                <slot name="bottom-left"></slot>
            </dxbl-thumb>
            <dxbl-thumb data-qa-thumb-location="bottom-right" data-dropdown-thumb class="${this.bottomRightClass}">
                <slot name="bottom-right"></slot>
            </dxbl-thumb>`}};C([ln({type:String,reflect:!1})],vB.prototype,"topLeftClass",void 0),C([ln({type:String,reflect:!1})],vB.prototype,"topRightClass",void 0),C([ln({type:String,reflect:!1})],vB.prototype,"bottomLeftClass",void 0),C([ln({type:String,reflect:!1})],vB.prototype,"bottomRightClass",void 0),C([ln({type:Object,attribute:"drop-opposite"})],vB.prototype,"dropOpposite",void 0),C([ln({type:String,attribute:"drop-direction"})],vB.prototype,"dropDirection",void 0),C([ln({type:String,attribute:"drop-alignment"})],vB.prototype,"dropAlignment",void 0),C([ln({type:Boolean,attribute:"resizing"})],vB.prototype,"resizing",void 0),vB=C([rn("dxbl-dropdown-root")],vB);let bB=class extends Cr{get popup(){var e;for(const t of null!==(e=this.portable)&&void 0!==e?e:[])if(ht(t,["branchType","reposition","desiredWidth","desiredHeight","minDesiredWidth","minDesiredHeight","closeAsync","processCapturedPointerAsync","addEventListener","removeEventListener","contains","focus","positionChanged","renderedVisible"]))return t;return null}get popupBase(){var e;for(const t of null!==(e=this.portable)&&void 0!==e?e:[])if(at(t))return t;return null}};bB=C([rn("dxbl-popup-portal")],bB);let wB=class extends ms{constructor(){super(),this.eventsSet=new Set,this.events=null,this.eventListener=this.handleEvent.bind(this),this._value=null}get value(){return this._value}updated(e){var t,i;e.has("events")&&(this.unsubscribe(null!==(t=e.get("events"))&&void 0!==t?t:null),this.eventsSet=new Set(null===(i=this.events)||void 0===i?void 0:i.split(";")),this.subscribe(this.events))}subscribe(e){var t;null===(t=this.events)||void 0===t||t.split(";").forEach((e=>{this.addEventListener(e,this.eventListener)}))}unsubscribe(e){null==e||e.split(";").forEach((e=>{this.removeEventListener(e,this.eventListener)}))}raise(e,t){try{if(!this.eventsSet.has(e))return;this._value=JSON.stringify([e,t]),this.dispatchEvent(new Event("change",{bubbles:!0}))}finally{this._value=null}}handleEvent(e){}};C([ln({type:String,attribute:"events"})],wB.prototype,"events",void 0),wB=C([rn("dxbl-events-interceptor")],wB);let yB=class extends ms{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChange.bind(this)}render(){return Xn`
            <slot @slotchange=${this.slotChangedHandler}></slot>
        `}handleSlotChange(e){const t=e.target.assignedNodes().find((e=>e instanceof ma)),i=this.closest(Pa);i&&(t?(i.notifyDialogConnected(t),i.notifyRootConnected()):(i.notifyDialogDisconnected(),i.notifyRootDisconnected()))}};var BB;yB=C([rn("dxbl-modal-root")],yB);let EB=BB=class extends ms{constructor(){super(...arguments),this.slotChangedHandler=this.handleSlotChanged.bind(this),this.interceptorSlotChangedHandler=this.handleInterceptorSlotChange.bind(this),this.interceptor=null,this.resizeHandler=this.handleResize.bind(this),this._adaptivityEnabled=!1,this._popupAccessor=null,this.adaptiveWidth=576}get popup(){var e;return(null===(e=this._popupAccessor)||void 0===e?void 0:e.popup)||null}get popupBase(){var e;return(null===(e=this._popupAccessor)||void 0===e?void 0:e.popupBase)||null}get adaptivityEnabled(){return this._adaptivityEnabled}set adaptivityEnabled(e){this._adaptivityEnabled!==e&&(this._adaptivityEnabled=e,this.raiseEnableAdaptivity(e))}createRenderRoot(){const e=super.createRenderRoot(),t=document.createElement("slot");e.appendChild(t),t.addEventListener("slotchange",this.slotChangedHandler);const i=document.createElement("slot");return i.name="interceptor",e.appendChild(i),i.addEventListener("slotchange",this.interceptorSlotChangedHandler),e}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.resizeHandler,{passive:!0}),setTimeout((()=>this.updateAdaptivity()))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.resizeHandler)}handleResize(e){this.updateAdaptivity()}updateAdaptivity(){this.adaptivityEnabled=this.getActualAdaptivityEnabled(),this.raiseEvent("adaptivityChanged",{enabled:this.adaptivityEnabled})}getActualAdaptivityEnabled(){return window.innerWidth<=this.adaptiveWidth}handleSlotChanged(e){const t=e.target.assignedNodes();this._popupAccessor=BB.findPopupAccessor(t)}handleInterceptorSlotChange(e){const t=e.target.assignedNodes();this.interceptor=t[0]}raiseEvent(e,t){this.interceptor&&this.interceptor.raise&&this.interceptor.raise(e,t)}raiseEnableAdaptivity(e){this.raiseEvent("adaptivityChanged",{enabled:e})}static findPopupAccessor(e){const t=e.find((e=>ot(e)));return t||null}};C([ln({type:Number,attribute:"adaptive-width"})],EB.prototype,"adaptiveWidth",void 0),EB=BB=C([rn("dxbl-adaptive-dropdown")],EB);customElements.define("dxbl-date-edit",class extends cB{});class IB extends AB{createPopupStrategy(e,t){return new SB(e,t,this)}}class SB extends dB{handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return e.altKey&&t===Be.KeyCode.Delete?(this.tryClearEditorValue(),!0):super.handleKeyDown(e)}tryClearEditorValue(){this.dropDownEditor.enabled&&!this.dropDownEditor.isReadOnly&&this.dropDownEditor.dispatchClearEditorValue()}}customElements.define("dxbl-date-range-picker",class extends cB{processPointerDown(e){return H.containsInComposedPath(e,this.isFieldElement.bind(this))&&!this.isDropDownOpen&&this.tryOpenDropDown(),super.processPointerDown(e)}createKeyboardStrategy(){return new IB(this)}});class xB{}xB.ClassName=he.Prefix+"-list-box",xB.ContainerNoScrollClassName=xB.ClassName+"-container-no-scroll",xB.TableHeaderRowClassName=xB.ClassName+"-table-header-row",xB.TableSelectionCellClassName=xB.ClassName+"-selection-cell",xB.MultiSelectClassName=xB.ClassName+"-multi-select",xB.SelectedItemClassName=xB.ClassName+"-item-selected",xB.FocusedItemClassName=xB.ClassName+"-item-focused",xB.EmptyDataItemClassName=xB.ClassName+"-empty-data-item",xB.GroupRowClassName=xB.ClassName+"-group-item",xB.ItemDisplayTemplateContainer=xB.ClassName+"-item-display-template-container",xB.RenderContainer=xB.ClassName+"-render-container",xB.SearchContainer=xB.ClassName+"-search-container",xB.ListSelectAllContainer=xB.ClassName+"-select-all-container",xB.ItemDraggingHint=xB.ClassName+"-dragging-hint",xB.ItemDraggingHintPortal=xB.ClassName+"-dragging-hint-portal",xB.DropTargetIndicatorClassName=xB.ClassName+"-drop-target-indicator",xB.EmptyListItem=xB.ClassName+"-empty-list-item",xB.CheckedClassName=xB.ClassName+"-checked",xB.MoveCursorCssClassName=xB.ClassName+"-move-cursor",xB.NotAllowedCursorCssClassName=xB.ClassName+"-not-allowed-cursor";class DB{}DB.VisibleIndexAttributeName="data-visible-index",DB.ItemIdAttributeName="id",DB.ComponentIdAttributeName="id",DB.AllowDragItemsAttributeName="allow-drag-items",DB.DropMode="drop-mode";class FB{}FB.TableSelector=`.${xe.ContentContainerClassName} > table`,FB.ListSelector=`.${xe.ContentContainerClassName} > ul`,FB.TableBodyRows=`table > tbody > tr:not([${Gi}]):not([${qi}])`,FB.ListItems=`ul > li:not([${Gi}]):not([${qi}])`,FB.MultiSelectClassSelector=`.${xB.MultiSelectClassName}`,FB.TablePartsSelector=":scope > *:not(colgroup)",FB.TableBodySelector=":scope > tbody",FB.KeyboardNavigatorSelector=`:scope > ${Pi}`,FB.HeaderRowSelector=`.${xB.TableHeaderRowClassName}`,FB.TableDataRowSelector=`:scope > tr:not([${Gi}]):not([${qi}]):not(.${xB.GroupRowClassName}):not(.${xB.EmptyListItem})`,FB.TableVisibleRowGeneralSelector=`tr[${DB.VisibleIndexAttributeName}]`,FB.TableVisibleRowSelector=`:scope > ${FB.TableVisibleRowGeneralSelector}`,FB.ItemGeneralSelector=`li:not([${Gi}]):not([${qi}]):not(.${xB.GroupRowClassName}):not(.${xB.EmptyListItem})`,FB.ItemSelector=`:scope > ${FB.ItemGeneralSelector}`,FB.ListVisibleItemGeneralSelector=`li[${DB.VisibleIndexAttributeName}]`,FB.ListVisibleItemSelector=`:scope > ${FB.ListVisibleItemGeneralSelector}`,FB.VisibleItemSelector=`:scope > [${DB.VisibleIndexAttributeName}]`,FB.ListItemDisplayTemplateConrainerSelector=`.${xB.ItemDisplayTemplateContainer}`,FB.SelectedItemSelector=`.${xB.SelectedItemClassName}`,FB.FocusedItemSelector=`.${xB.FocusedItemClassName}`,FB.EmptyDataItemSelector=`.${xB.EmptyDataItemClassName}`,FB.EmptyListItemSelector=`.${xB.EmptyListItem}`,FB.SearchBoxSelector=`:scope > .${xB.SearchContainer} > .${yl.TextEdit}`,FB.GroupRowSelector=`.${xB.GroupRowClassName}`,FB.ListSelectAllContainerSelector=`.${xB.ListSelectAllContainer}`,FB.ItemDragHintSelector=`${Ws}.${xB.ItemDraggingHint}`,FB.ItemDisplayTemplateSelector=`.${xB.ItemDisplayTemplateContainer}`,FB.DropTargetIndicatorSelector=`.${xB.DropTargetIndicatorClassName}`;class TB extends CustomEvent{constructor(e){super(TB.eventName,{detail:new HB(e),bubbles:!0,composed:!0,cancelable:!0})}}TB.eventName=ol+".focusedrowchanged";class HB{constructor(e){this.VisibleIndex=e}}class UB extends CustomEvent{constructor(e,t){super(UB.eventName,{detail:new PB(e,t),bubbles:!0,composed:!0,cancelable:!0})}}UB.eventName=ol+".makeelementvisible";class PB{constructor(e,t){this.VisibleIndex=e,this.VerticalEdge=t}}class QB extends CustomEvent{constructor(e){super(QB.eventName,{detail:new NB(e),bubbles:!0,composed:!0,cancelable:!0})}}QB.eventName=ol+".itemdropped";class NB{constructor(e){this.SourceInfo=new RB(e.sourceInfo),this.TargetInfo=new LB(e.targetInfo)}}class RB{constructor(e){this.Key=e.key,this.VisibleIndex=e.visibleIndex}}class LB extends RB{constructor(e){super(e),this.DropPosition=e.dropPosition}}mt.register(TB.eventName,(e=>e.detail)),mt.register(UB.eventName,(e=>e.detail)),mt.register(QB.eventName,(e=>e.detail));class MB{static getVerticalEdge(e){switch(e){case Ue.Top:return 0;case Ue.Bottom:return 1;default:return-1}}static getElementVisibleIndex(e){return Te.getAttributeIntValue(e,DB.VisibleIndexAttributeName,-1)}static findItemIndex(e,t){for(let i=0;i<t.length;i++){const n=t[i];if(n&&this.getElementVisibleIndex(n)===e)return i}return-1}static queryItemsBySelector(e,t){return Array.from(e.querySelectorAll(t))}static isGroupRowElement(e){return!!e&&(e.matches&&e.matches(FB.GroupRowSelector))}static getRow(e,t){const i=e.getItemsContainer();return i?i.querySelector(`:scope > [${DB.VisibleIndexAttributeName}="${t}"]`):null}static isGroupRow(e,t){const i=MB.getRow(e,t);return!!i&&MB.isGroupRowElement(i)}static getElementHeight(e,t,i=0){const n=MB.getRow(e,t);return n?n.getBoundingClientRect().height:i}static calculateItemAverageHeight(e){const t=e[0];return(e[e.length-1].getBoundingClientRect().bottom-t.getBoundingClientRect().top)/e.length}static isOutsideViewportItemRequired(e,t,i,n){const s=n?i+1:i-1,r=MB.getRow(e,s);if(r){const i=r.getBoundingClientRect(),o=t.getElementsRectangle(t.getHeaderElements());if(!n&&o)return!Ya.getIntersectionRectangle(i,o).isEmpty;return Ya.getIntersectionRectangle(i,t.getBoundingClientRect()).height<=MB.getElementHeight(e,s)}return!0}static calculateRowHeight(e,t,i,n){const s=MB.getRow(e,i);let r=MB.getElementHeight(e,i);return s&&r&&!MB.isOutsideViewportItemRequired(e,t,i,n)&&(r+=Ya.calculateHeightOffsetValue(s,t,n)),r}static calculateBoundaryItemVisibleIndex(e,t,i){const n=Math.ceil(Ya.getDataAreaViewportHeight(t)),s=i?0:e.getLastAvailableVisibleIndex();let r=i&&e.getSelectedVisibleIndex()<=s||!i&&e.getSelectedVisibleIndex()>=s?s:e.getSelectedVisibleIndex(),o=MB.calculateRowHeight(e,t,r,i);const a=Ya.isVirtualScrollingEnabled(t)?MB.calculateItemAverageHeight(e.getRows()):void 0,l=i?1:-1;let A=r+l;for(;e.isElementInsideViewport(A)&&(o+=MB.getElementHeight(e,A,a),!(o>n&&r!==e.getSelectedVisibleIndex()));)r=A,A+=l;return r}}class kB{constructor(e){this._selectedItemIndex=-1,this._selectedVisibleIndex=-1,this._firstVisibleIndex=-1,this._lastVisibleIndex=-1,this._firstAvailableVisibleIndex=0,this._lastAvailableVisibleIndex=-1,this._tabKeyPressed=!1,this._isActive=!1,this._renderContainer=null,this._requireUpdateSelectedItemState=-1,this.boundOnRenderContainerMutationHandler=this.onRenderContainerMutation.bind(this),this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this._component=e,this._items=[],this._rows=[],this._renderContainerMutationObserver=new MutationObserver(this.boundOnRenderContainerMutationHandler)}get tabKeyPressed(){return this._tabKeyPressed||Ui.keyboardEventProcessed&&Ui.processingKeyCode===Be.KeyCode.Tab}get items(){return this._items}get itemCount(){return this.items.length}get selectedItemElement(){return this.selectedItemIndex>=0&&this.selectedItemIndex<this.itemCount?this.items[this.selectedItemIndex]:null}get selectedItemIndex(){return this._selectedItemIndex}get isFirstItemSelected(){return this._selectedVisibleIndex<=this._firstAvailableVisibleIndex}get isLastItemSelected(){return this._selectedVisibleIndex>=this._lastAvailableVisibleIndex}get isVirtualRenderModeEnabled(){return this._component.enableVirtualRenderMode}get totalItemCount(){const e=this._component.getScrollViewer();return e&&e instanceof nn?e.totalItemCount:this._rows.length}get searchIsAppliedAndReturnsNoneEmptyData(){return this.itemCount>0&&this._component.searchIsApplied}isIndexWithinBoundaries(e){return e>=0&&e<this.itemCount}onPopupShown(){this._isActive=!0,this.initialize(),this.addEventSubscriptions()}onPopupClosed(){this.removeEventSubscriptions(),this.dispose(),this._isActive=!1}processKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:this._tabKeyPressed=!0;break;case Be.KeyCode.Enter:case Be.KeyCode.Esc:return!this._isActive&&(this._component.processKeyDownEvent(e),!0);case Be.KeyCode.Up:return this._component.handleCloseDropDown(e);case Be.KeyCode.Down:return this._component.handleOpenDropDown(e);case Be.KeyCode.Delete:return this._component.handleTryClearEditorValue(e)}return!1}processCapturedKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Tab:this._tabKeyPressed=!0;break;case Be.KeyCode.Enter:case Be.KeyCode.Esc:return this._component.processKeyDownEvent(e),!0;case Be.KeyCode.Up:return!(e.altKey||e.metaKey)&&this.handleArrowUpKeyDown();case Be.KeyCode.Down:return!(e.altKey||e.metaKey)&&this.handleArrowDownKeyDown();case Be.KeyCode.PageUp:return this.handlePageUp();case Be.KeyCode.PageDown:return this.handlePageDown();case Be.KeyCode.Home:return e.ctrlKey&&e.shiftKey&&this.handleHomeKeyDown();case Be.KeyCode.End:return e.ctrlKey&&e.shiftKey&&this.handleEndKeyDown()}return!1}processKeyUp(e){switch(this._tabKeyPressed=!1,Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:this.notifyFocusedRowChanged();break;case Be.KeyCode.Home:case Be.KeyCode.End:e.shiftKey&&e.ctrlKey&&this.notifyFocusedRowChanged()}return!1}updateState(){this._isActive?(this.udpdateFocusState(),this.updateSelectedItemState()):this._requireUpdateSelectedItemState++}shouldHandleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:case Be.KeyCode.Esc:return this._isActive;default:return!1}}getItem(e){return this.items[e]}addFocusHiddenAttribute(){this._renderContainer&&!Si(this._renderContainer)&&Ei(this._renderContainer)}removeFocusHiddenAttribute(){this._renderContainer&&Si(this._renderContainer)&&Ii(this._renderContainer)}addDataQaLoadedAttribute(){this._renderContainer&&!n.hasLoaded(this._renderContainer)&&n.setLoaded(this._renderContainer)}removeDataQaLoadedAttribute(){this._renderContainer&&n.hasLoaded(this._renderContainer)&&n.removeLoaded(this._renderContainer)}containsFocusHiddenAttribute(){return!!this._renderContainer&&Si(this._renderContainer)}dispose(){this.removeFocusHiddenAttribute(),this.removeDataQaLoadedAttribute(),this._renderContainerMutationObserver.disconnect(),this.setSelectedItem(-1,!0),this.notifyFocusedRowChanged(),this._firstAvailableVisibleIndex=-1,this._lastAvailableVisibleIndex=-1,this._firstVisibleIndex=-1,this._lastVisibleIndex=-1,this._items=[],this._rows=[]}initialize(){if(this._items=this.queryItems(),this._rows=this.queryRows(),this.updateBoundaries(),this._renderContainer=this._component.renderContainer,this._renderContainer&&this._renderContainerMutationObserver.observe(this._renderContainer,{childList:!0,subtree:!0}),this.addFocusHiddenAttribute(),this.updateViewportBoundaries(),this._component.useCustomInput){const e=this.findSelectedDataItemIndex();e>=0&&(this.setSelectedItem(e),this.notifyFocusedRowChanged())}else this.restoreFocusedState();this.addDataQaLoadedAttribute()}restoreFocusedState(){if(this.searchIsAppliedAndReturnsNoneEmptyData&&this._requireUpdateSelectedItemState>=0)this.removeFocusHiddenAttribute(),this._requireUpdateSelectedItemState=-1,this.setSelectedItem(0,!0);else{const e=this.findSelectedDataItemIndex();e>=0&&this.setSelectedItem(e,!0)}this.notifyFocusedRowChanged()}handleArrowUpKeyDown(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToPrevVirtualItem():this.moveToPrevItem(),!0)}handleArrowDownKeyDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToNextVirtualItem():this.moveToNextItem(),!0)}handlePageUp(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToPrevVirtualPageItem():this.moveToPrevPageItem(),!0)}handlePageDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToNextVirtualPageItem():this.moveToNextPageItem(),!0)}moveToNextPageItem(){const e=this._lastAvailableVisibleIndex,t=this._component.getScrollViewer();if(t){const i=MB.calculateBoundaryItemVisibleIndex(this,t,!0),n=i>e?e:i,s=MB.isGroupRow(this,n),r=MB.findItemIndex(s?n-1:n,this.items);this.setSelectedItem(r);const o=s?MB.getRow(this,n):this.selectedItemElement;this.scrollToElement(Ue.Bottom,Pe.None,o)}}moveToPrevPageItem(){const e=this._component.getScrollViewer();if(e){const t=MB.calculateBoundaryItemVisibleIndex(this,e,!1),i=t<0?0:t,n=MB.isGroupRow(this,i),s=MB.findItemIndex(n?i+1:i,this.items);this.setSelectedItem(s);const r=n?MB.getRow(this,i):this.selectedItemElement;this.scrollToElement(Ue.Top,Pe.None,r)}}moveToPrevVirtualPageItem(){const e=this._component.getScrollViewer();if(e){const t=MB.calculateBoundaryItemVisibleIndex(this,e,!1);if(this.isElementInsideViewport(t)){const e=MB.isGroupRow(this,t),i=MB.findItemIndex(e?t+1:t,this.items);this.setSelectedItem(i);const n=e?MB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Ue.Top,Pe.None,n)}else this.notifyMakeElementVisible(t,Ue.Top)}}moveToNextVirtualPageItem(){const e=this._component.getScrollViewer();if(e){const t=MB.calculateBoundaryItemVisibleIndex(this,e,!0);if(this.isElementInsideViewport(t)){const e=MB.isGroupRow(this,t),i=MB.findItemIndex(e?t-1:t,this.items);this.setSelectedItem(i);const n=e?MB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Ue.Bottom,Pe.None,n)}else this.notifyMakeElementVisible(t,Ue.Bottom)}}handleHomeKeyDown(){return this.removeFocusHiddenAttribute(),this.isFirstItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToFirstVirtualItem():this.moveToFirstItem(),!0)}handleEndKeyDown(){return this.removeFocusHiddenAttribute(),this.isLastItemSelected?(this.addFocusMarkerClass(this.selectedItemElement),!0):(this.isVirtualRenderModeEnabled?this.moveToLastVirtualItem():this.moveToLastItem(),!0)}moveToPrevItem(){this.selectedItemIndex>0&&this.setSelectedItem(this.selectedItemIndex-1),this.scrollToElement(null,Pe.None)}moveToNextItem(){this.selectedItemIndex<this.itemCount-1&&this.setSelectedItem(this.selectedItemIndex+1),this.scrollToElement(null,Pe.None)}moveToNextVirtualItem(){let e=this._selectedVisibleIndex+1;this.isElementInsideViewport(e)&&MB.isGroupRow(this,e)&&e++,this.isElementInsideViewport(e)&&this.selectedItemIndex<this.totalItemCount-1?(this.setSelectedItem(this.selectedItemIndex+1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Ue.Bottom)}moveToPrevVirtualItem(){let e=this._selectedVisibleIndex-1;0===e&&0===this.selectedItemIndex||(this.isElementInsideViewport(e)&&MB.isGroupRow(this,e)&&e--,this.isElementInsideViewport(e)&&this.selectedItemIndex>0?(this.setSelectedItem(this.selectedItemIndex-1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Ue.Top))}moveToFirstItem(){if(this._component.getScrollViewer()){const e=MB.isGroupRow(this,0);this.setSelectedItem(0);const t=e?MB.getRow(this,0):this.selectedItemElement;this.scrollToElement(Ue.Top,Pe.None,t)}}moveToFirstVirtualItem(){this.isElementInsideViewport(0)&&this.selectedItemIndex>0?(this.setSelectedItem(0),this.scrollToElement(Ue.Top,Pe.None)):this.notifyMakeElementVisible(0,Ue.Top)}moveToLastItem(){this._component.getScrollViewer()&&(this.setSelectedItem(this.itemCount-1),this.scrollToElement(Ue.Bottom,Pe.None))}moveToLastVirtualItem(){const e=this.totalItemCount-1;this.isElementInsideViewport(e)&&this.selectedItemIndex<this.itemCount-1?(this.setSelectedItem(this.itemCount-1),this.scrollToElement(Ue.Bottom,Pe.None)):this.notifyMakeElementVisible(e,Ue.Bottom)}updateViewportBoundaries(){if(0===this._rows.length||0===this.itemCount)return;this._firstVisibleIndex=this.getElementVisibleIndex(this._rows[0]);this._lastVisibleIndex=this.getElementVisibleIndex(this._rows[this._rows.length-1])}queryRows(){return this.itemsContainer?Array.from(this.itemsContainer.querySelectorAll(FB.VisibleItemSelector)):[]}get itemsContainer(){const e=this._component.getTable();return e?e.querySelector(FB.TableBodySelector):this._component.getList()}updateBoundaries(){let e=0;0!==this._firstAvailableVisibleIndex&&(e++,this._firstAvailableVisibleIndex=0);const t=this.totalItemCount-1;return this._lastAvailableVisibleIndex!==t&&(e++,this._lastAvailableVisibleIndex=t),e>0}isElementInsideViewport(e){return e>=this._firstVisibleIndex&&e<=this._lastVisibleIndex}findItemIndex(e){for(let t=0;t<this.itemCount;t++){const i=this.items[t];if(i&&this.getElementVisibleIndex(i)===e)return t}return-1}getElementVisibleIndex(e){return Te.getAttributeIntValue(e,DB.VisibleIndexAttributeName,-1)}findSelectedDataItemIndex(){for(let e=0;e<this.itemCount;e++){const t=this.items[e];if(t&&t.matches(FB.SelectedItemSelector))return e}return-1}notifyFocusedRowChanged(){this._component.notifyFocusedRowChanged(this._selectedVisibleIndex)}notifyMakeElementVisible(e,t=null){e<0||this._component.notifyMakeElementVisible(e,MB.getVerticalEdge(t))}setSelectedItem(e,t=!1){(this.selectedItemIndex!==e||t)&&(this.removeFocusMarkerClass(this.selectedItemElement),this._selectedItemIndex=e,this.selectedItemElement?(this.addFocusMarkerClass(this.selectedItemElement),this.updateActiveDescendantAttribute(this.selectedItemElement),this._selectedVisibleIndex=this.getElementVisibleIndex(this.selectedItemElement)):(this.removeFocusMarkerClass(this.selectedItemElement),this.updateActiveDescendantAttribute(this.selectedItemElement),this._selectedVisibleIndex=-1),this.notifyFocusedRowChanged())}updateActiveDescendantAttribute(e){if(this.containsFocusHiddenAttribute())return;const t=e&&e.getAttribute(DB.ItemIdAttributeName);this._component.updateActiveDescendantAttributeValue(null!=t?t:"")}removeFocusMarkerClass(e){e&&T.DomUtils.hasClassName(e,xB.FocusedItemClassName)&&T.DomUtils.removeClassName(e,xB.FocusedItemClassName)}addFocusMarkerClass(e){this.containsFocusHiddenAttribute()||!e||T.DomUtils.hasClassName(e,xB.FocusedItemClassName)||T.DomUtils.hasClassName(e,xB.EmptyDataItemClassName)||T.DomUtils.addClassName(e,xB.FocusedItemClassName)}queryItems(){const e=this._component.getTable();if(e){const t=e.querySelector(FB.TableBodySelector);if(t)return MB.queryItemsBySelector(t,FB.TableDataRowSelector)}else{const e=this._component.getList();if(e)return MB.queryItemsBySelector(e,FB.ItemSelector)}return[]}addEventSubscriptions(){const e=this._component.getScrollViewer();e&&e.addEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler)}removeEventSubscriptions(){const e=this._component.getScrollViewer();e&&e.removeEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler)}udpdateFocusState(){this._component.useCustomInput?this.addFocusHiddenAttribute():this.removeFocusHiddenAttribute()}updateSelectedItemState(){this.setSelectedItem(this.searchIsAppliedAndReturnsNoneEmptyData&&!this._component.useCustomInput?0:-1,!0),this.notifyFocusedRowChanged()}onRenderContainerMutation(e,t){if(this._isActive)if(this.removeFocusMarkerClass(this.selectedItemElement),this._items=this.queryItems(),this._rows=this.queryRows(),this.updateViewportBoundaries(),this.updateBoundaries())this.udpdateFocusState(),this.updateSelectedItemState();else if(this.isElementInsideViewport(this._selectedVisibleIndex)){const e=this.findItemIndex(this._selectedVisibleIndex);e>-1&&(this.setSelectedItem(e,!0),this.notifyFocusedRowChanged())}}onVisibleElementChanged(e){if(e.detail.isFocusRequired){const t=MB.getElementVisibleIndex(e.detail.element),i=MB.isGroupRow(this,t),n=MB.findItemIndex(i?t+1:t,this.items);this.setSelectedItem(n),this.notifyFocusedRowChanged()}}scrollToElement(e,t,i=this.selectedItemElement){const n=this._component.getScrollViewer();n&&i&&Oe.scrollToElementRelyOnStickyDescendants(i,e,t,n)}getLastAvailableVisibleIndex(){return this._lastAvailableVisibleIndex}getSelectedVisibleIndex(){return this._selectedVisibleIndex}getItemsContainer(){return this.itemsContainer}getRows(){return this._rows}}class KB extends CustomEvent{constructor(e,t,i,n){super(KB.eventName,{detail:new OB(e,t,i,n),bubbles:!0,composed:!0,cancelable:!0})}}KB.eventName=ll+".keydown";class OB{constructor(e,t,i,n){this.Key=e,this.AltKey=t,this.CtrlKey=i,this.ShiftKey=n}}class _B extends CustomEvent{constructor(){super(_B.eventName,{bubbles:!0,composed:!0,cancelable:!0})}}_B.eventName=ll+".dropdownclosed",mt.register(KB.eventName,(e=>e.detail)),mt.register(_B.eventName,(e=>e.detail));class VB{}var zB;VB.AriaActiveDescendant="aria-activedescendant",function(e){e.Default="Default",e.None="None",e.AutoSearch="AutoSearch"}(zB||(zB={}));class WB extends Jl{constructor(){super(),this._elementHasCalculatedWidthAttribute="has-calculated-width",this._readyAttributeLifespanTimeoutId=null,this._focusedRowIndex=-1,this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnRenderContainerPointerDownHandler=this.onRenderContainerPointerDown.bind(this),this.boundOnVisibleElementChangedHandler=this.onVisibleElementChanged.bind(this),this.boundOnPopupDomElementMutationHandler=this.onPopupDomElementMutationCallback.bind(this),this.boundOnRenderContainerSizeChanged=this.ensureRenderContainerState.bind(this),this.boundOnPopupShownHandler=this.onPopupShown.bind(this),this.boundOnPopupClosedHandler=this.onPopupClosed.bind(this),this._tableHeaderCellSelector=`.${xe.ContentContainerClassName} > table > thead > ${FB.HeaderRowSelector} > th`,this._tableBodyCellSelector=`.${xe.ContentContainerClassName} > table > tbody > ${FB.TableVisibleRowGeneralSelector} > td`,this._hoverTitleElementsSelector=[this._tableBodyCellSelector,this._tableHeaderCellSelector].join(", "),this.searchDelay=null,this._kbdNavigationHelper=new kB(this),this.dropDownWidthMode=Yl.ContentOrEditorWidth,this.searchMode=zB.Default,this.useCustomInput=!1,this._pointerEventsHelper=new q(this),this._popupDomElementMutationObserver=new MutationObserver(this.boundOnPopupDomElementMutationHandler),this._renderContainerResizeObserver=new ResizeObserver(this.boundOnRenderContainerSizeChanged),this.setUpSearchDelay()}connectedCallback(){super.connectedCallback(),this.prepareRenderContainer()}disconnectedCallback(){super.disconnectedCallback(),this.releaseRenderContainer()}ensurePopupElement(){super.ensurePopupElement(),this.popupElement&&(this.popupElement.addEventListener(oo.eventName,this.boundOnPopupShownHandler),this.popupElement.addEventListener(ao.eventName,this.boundOnPopupClosedHandler))}disposePopupElement(){this.popupElement&&(this.popupElement.removeEventListener(oo.eventName,this.boundOnPopupShownHandler),this.popupElement.removeEventListener(ao.eventName,this.boundOnPopupClosedHandler)),super.disposePopupElement()}createKeyboardStrategy(){return new ql(this)}get renderContainer(){return this.popupDOMElement?this.popupDOMElement.querySelector(`.${xB.RenderContainer}`):null}getScrollViewer(){return this.renderContainer?this.renderContainer.querySelector(`.${xe.ClassName}`):null}getScrollViewerContent(){return this.renderContainer?this.renderContainer.querySelector(`.${xe.ContentContainerClassName}`):null}getTable(){return this.renderContainer?this.renderContainer.querySelector(`.${xe.ContentContainerClassName} > table`):null}getList(){return this.renderContainer?this.renderContainer.querySelector(FB.ListSelector):null}notifyFocusedRowChanged(e){e!==this._focusedRowIndex&&(this.dispatchEvent(new TB(e)),this._focusedRowIndex=e)}notifyMakeElementVisible(e,t){e<0||this.dispatchEvent(new UB(e,t))}notifyColumnsChanged(e){}handleOpenDropDown(e){return!(!this.enabled||this.isReadOnly||this.isDropDownOpen||!e.altKey&&!e.metaKey)&&(this.openDropDown(),!0)}handleCloseDropDown(e){return!(!this.enabled||this.isReadOnly||!this.isDropDownOpen||!e.altKey&&!e.metaKey)&&(this.closeDropDown(),!0)}handleTryClearEditorValue(e){return!(!this.enabled||this.isReadOnly||!e.altKey)&&(this.dispatchClearEditorValue(),!0)}processKeyDownEvent(e){this._searchInputDefferedAction.forceExecute();const t=new KB(e.key,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey);this.dispatchEvent(t)}updateActiveDescendantAttributeValue(e){this.inputElement&&this.inputElement.hasAttribute(VB.AriaActiveDescendant)&&this.inputElement.setAttribute(VB.AriaActiveDescendant,e)}get isTableRender(){return!!this.getTable()}get enableVirtualRenderMode(){const e=this.getScrollViewer();return null!==e&&e instanceof nn}get isSearchActive(){switch(this.searchMode){case zB.None:case zB.Default:return!1;default:return!0}}get searchIsApplied(){const e=this.fieldElement?this.fieldElementValue:this.fieldText;return this.isSearchActive&&(e?e.length:-1)>0}onTextInput(e){this.inputElement&&(this.ensureDropDownOpened(e),this._kbdNavigationHelper.updateState(),this.raiseFieldText())}raiseFieldText(){this._searchInputDefferedAction.execute((()=>super.raiseFieldText()))}raiseFocusOut(e){this._searchInputDefferedAction.forceExecute(),super.raiseFocusOut(e,this._kbdNavigationHelper.tabKeyPressed)}ensureDropDownOpened(e){!this.isDropDownOpen&&e.data&&e.data.length>0&&this.tryOpenDropDown()}processKeyDown(e){return!!this.tryProcessKeyDown(e)||super.processKeyDown(e)}processKeyUp(e){return!!this.tryProcessKeyUp(e)||super.processKeyUp(e)}tryProcessKeyDown(e){return this._kbdNavigationHelper.processKeyDown(e)}tryProcessKeyUp(e){return this._kbdNavigationHelper.processKeyUp(e)}processCapturedKeyDownAsync(e,t){return this._kbdNavigationHelper.processCapturedKeyDown(e)?(e.preventDefault(),t.handled=!0,Promise.resolve()):super.processCapturedKeyDownAsync(e,t)}onPopupShown(e){this.renderContainer||!this.popupDOMElement?this.onPopupShownCore():this._popupDomElementMutationObserver.observe(this.popupDOMElement,{childList:!0,subtree:!0})}onPopupClosed(e){this._popupDomElementMutationObserver.disconnect(),this._kbdNavigationHelper.onPopupClosed(),this.releaseRenderContainer()}prepareRenderContainer(){this.renderContainer&&(this.renderContainer.addEventListener(ke.eventName,this.boundOnScrollViewerUpdateHandler),this.renderContainer.addEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler),this.renderContainer.addEventListener("pointerdown",this.boundOnRenderContainerPointerDownHandler),this.isDropDownWidthDependsOnContent&&this._renderContainerResizeObserver.observe(this.renderContainer),this.resizeDropDownElement(),this._pointerEventsHelper.initialize())}releaseRenderContainer(){this.renderContainer&&(this.renderContainer.removeEventListener(ke.eventName,this.boundOnScrollViewerUpdateHandler),this.renderContainer.removeEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler),this.renderContainer.removeEventListener("pointerdown",this.boundOnRenderContainerPointerDownHandler),this._renderContainerResizeObserver.disconnect(),this._pointerEventsHelper.dispose()),this.isDropDownWidthDependsOnContent&&this.dropDownElement&&(this.dropDownElement.desiredWidth=null)}onPopupDomElementMutationCallback(e,t){this.renderContainer&&(t.disconnect(),this.onPopupShownCore())}onPopupShownCore(){this.prepareRenderContainer(),this._kbdNavigationHelper.onPopupShown()}onVisibleElementChanged(e){this.resizeDropDownElement()}resizeDropDownElementCore(){const e=this.getTable();if(e){const t=Array.from(e.querySelectorAll(":scope > colgroup > col")),i=Array.from(e.querySelectorAll(":scope > thead > tr > th")),n=[],s=[];for(let e=0;e<t.length;e++){const i=t[e];(i.style.width.indexOf("%")>0||i.hasAttribute(this._elementHasCalculatedWidthAttribute))&&(i.style.removeProperty("width"),i.removeAttribute(this._elementHasCalculatedWidthAttribute)),i.style.width?n.push(e):s.push(e)}if(s.length<1)return;const r=n.map((e=>i[e])),o=s.map((e=>i[e])),a=r.reduce(((e,t)=>e+t.getBoundingClientRect().width),0),l=e.style.width;e.style.width="auto";const A=o.reduce(((e,t)=>e+t.getBoundingClientRect().width),0),d=this.dropDownElement.minDesiredWidth?T.DomUtils.pxToInt(this.dropDownElement.minDesiredWidth):0;if(this.needAdjustNarrowContent(a,A,d)){if(s.length>1){const e=(d-a)/A;for(let n=0;n<s.length-1;n++){const r=s[n],o=t[r];o.style.width=Te.toPx(Math.ceil(i[r].getBoundingClientRect().width*e)),o.setAttribute(this._elementHasCalculatedWidthAttribute,"")}}}else s.forEach((e=>{const n=t[e];n.style.width=Te.toPx(Math.ceil(i[e].getBoundingClientRect().width)),n.setAttribute(this._elementHasCalculatedWidthAttribute,"")}));e.style.width=l}else{const e=this.getList(),t=window.innerWidth,i=this.getScrollViewerContent(),n=this.popupDOMElement&&i?this.popupDOMElement.getBoundingClientRect().width-i.getBoundingClientRect().width:0,s=Math.ceil(e.getBoundingClientRect().width+n);this.dropDownElement.desiredWidth=Te.toPx(Math.min(s,t))}}needAdjustNarrowContent(e,t,i){if(i){return this.dropDownWidthMode===Yl.ContentOrEditorWidth&&e+t<i}return!1}resizeDropDownElement(){this.dropDownElement&&(this.isDropDownWidthDependsOnContent?this.resizeDropDownElementCore():this.ensureRenderContainerState())}onSizeChanged(e,t){if(!this.dropDownElement)return;const i=this.getScrollViewer();i&&i.refreshUI&&i.refreshUI(),super.onSizeChanged(e,t)}onRenderContainerPointerDown(e){var t;h.Browser.Firefox&&this.isTableRender&&e.ctrlKey&&e.preventDefault(),null!==(null===(t=this.renderContainer)||void 0===t?void 0:t.querySelector(FB.EmptyDataItemSelector))&&H.markHandled(e)}onScrollViewerUpdate(e){const t=this.getScrollViewerContent(),i=this.getTable();t&&i&&(i.offsetHeight<t.clientHeight?T.DomUtils.addClassName(i,xB.ContainerNoScrollClassName):i.offsetHeight>t.clientHeight&&T.DomUtils.removeClassName(i,xB.ContainerNoScrollClassName)),e.stopPropagation()}ensureRenderContainerState(){const e=this.renderContainer;if(!e)return;const t="ready";n.removeAttribute(e,t),this._readyAttributeLifespanTimeoutId&&clearTimeout(this._readyAttributeLifespanTimeoutId),this._readyAttributeLifespanTimeoutId=setTimeout((()=>{n.setAttribute(e,t)}),1e3)}shouldHandleKeyDown(e){return this._kbdNavigationHelper.shouldHandleKeyDown(e)}get isDropDownWidthDependsOnContent(){return this.dropDownWidthMode===Yl.ContentWidth||this.dropDownWidthMode===Yl.ContentOrEditorWidth}get handlePointerEventsMode(){return r.None}get handlePointerEventsTarget(){var e;return null!==(e=this.getTable())&&void 0!==e?e:this}get hoverTitleElementsSelector(){return this._hoverTitleElementsSelector}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}setUpSearchDelay(){var e;this._searchInputDefferedAction=new Ja(this.isSearchActive&&null!==(e=this.searchDelay)&&void 0!==e?e:0)}updated(e){e.has("searchDelay")&&this.setUpSearchDelay(),super.updated(e)}}var $B;C([ln({type:zB,attribute:"search-mode"})],WB.prototype,"searchMode",void 0),C([ln({type:Boolean,attribute:"use-custom-input"})],WB.prototype,"useCustomInput",void 0),C([ln({type:Number,attribute:"search-delay"})],WB.prototype,"searchDelay",void 0),function(e){e.Input="Input",e.Click="Click"}($B||($B={}));class GB extends WB{constructor(){super(),this.dropDownTriggerMode=$B.Input}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}applyTextPropertyCore(){super.applyTextPropertyCore(),this.allowInput||this.fieldElement&&this.fieldText&&""!==this.fieldText&&this.fieldElement.setSelectionRange(0,0)}ensureDropDownOpened(e){if(!this.isDropDownOpen){(e.data&&e.data.length>0||(this.fieldElement?this.fieldElementValue:this.fieldText))&&super.tryOpenDropDown()}}processPointerDown(e){const t=H.containsInComposedPath(e,this.isFieldElement.bind(this));let i=!1;return H.containsInComposedPath(e,this.isEditBoxTemplateElement.bind(this))?i=!0:t&&(i=this.dropDownTriggerMode===$B.Click||this.isFieldElementReadonly),i&&this.toggleDropDownVisibility(),super.processPointerDown(e)}}C([ln({type:$B,attribute:"drop-down-trigger-mode"})],GB.prototype,"dropDownTriggerMode",void 0),customElements.define(al,GB);class qB extends Gl{createPopupStrategy(e,t){return new XB(e,t,this)}}class XB extends oB{constructor(e,t,i){super(e,t,i),this._focusableElements=[],this._timeoutId=null}get editDropDownElement(){return this.targetElement.querySelector(`.${Xl.ClassName}`)}updateFocusableElementsList(){if(this.editDropDownElement){const e=Ci.findFocusableElements(this.editDropDownElement);this._focusableElements=e.length>0?e:[this.editDropDownElement]}}get focusableElements(){return this._focusableElements}handlePopupShown(){super.handlePopupShown(),this.addDropDownElementsEventSubscriptions(),this.waitForNavigatorInitialization()}handlePopupClosed(){super.handlePopupClosed(),this.targetElement.removeEventListener("focus",this.boundDropDownElementFocusHandler),this.editDropDownElement&&this.editDropDownElement.removeEventListener("focus",this.boundEditDropDownElementFocusHandler)}addDropDownElementsEventSubscriptions(){this.boundDropDownElementFocusHandler||(this.boundDropDownElementFocusHandler=this.dropDownElementFocusHandler.bind(this)),this.targetElement.addEventListener("focus",this.boundDropDownElementFocusHandler),this.editDropDownElement&&(this.boundEditDropDownElementFocusHandler||(this.boundEditDropDownElementFocusHandler=this.editDropDownElementFocusHandler.bind(this)),this.editDropDownElement.addEventListener("focus",this.boundEditDropDownElementFocusHandler))}waitForNavigatorInitialization(){if(this._timeoutId&&clearTimeout(this._timeoutId),document.activeElement===this.targetElement){const e=this.getFirstKeyboardNavigator();e&&!e.initialized?this._timeoutId=setTimeout((()=>this.waitForNavigatorInitialization()),50):this.handlePopupShownInternal()}}handlePopupShownInternal(){this.updateFocusableElementsList(),this.tryFocusFirstFocusableElement(),this.synchronizeInnerComponentFocusState()}tryFocusFirstFocusableElement(){this.focusableElements.length>0&&Ci.focusElement(this.focusableElements[0])}tryFocusLastFocusableElement(){this.focusableElements.length>0&&Ci.focusElement(this.focusableElements[this.focusableElements.length-1])}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.focusableElements.length<=1?(H.markHandled(e),!1):super.handleKeyDown(e)}onDropDownEditorPointerDownHandler(){T.DomUtils.isItParent(this.targetElement,document.activeElement)||super.onDropDownEditorPointerDownHandler()}dropDownElementFocusHandler(e){this.tryFocusFirstFocusableElement()}editDropDownElementFocusHandler(e){this.tryFocusLastFocusableElement()}getInnerControlMainElement(){return null}getFirstKeyboardNavigator(){return this.editDropDownElement.querySelector(Pi)}synchronizeInnerComponentFocusState(){const e=this.getFirstKeyboardNavigator();e&&e.isActive&&Si(this.dropDownEditor)&&Ei(e.targetElement)}}let YB=class extends Jl{constructor(){super()}processPointerDown(e){const t=e.target===this.editBoxElement,i=this.editBoxTemplateElement&&this.editBoxTemplateElement.contains(e.target)&&!this.isFocusableElementInMainElementTemplate(e.target);return this.isDropDownOpen||!t&&!i||this.tryOpenDropDown(),super.processPointerDown(e)}createKeyboardStrategy(){return new qB(this)}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}};YB=C([rn("dxbl-dropdown-box")],YB);let JB=class extends Bl{constructor(){super(),this.textAreaObserver=new MutationObserver(this.textAreaSizeChanged.bind(this))}connectedOrContentChanged(){super.connectedOrContentChanged();const e=this.getFieldElement();e&&this.textAreaObserver.observe(e,{attributes:!0})}disconnectedCallback(){this.textAreaObserver.disconnect(),super.disconnectedCallback()}textAreaSizeChanged(e,t){var i,n;const s=e[0].target,r=parseInt(s.style.width);if(!isNaN(r)){const e=this.offsetWidth-this.clientWidth+r;this.offsetWidth!==e&&(this.style.width=e+"px")}const o=parseInt(s.style.height),a=parseInt(s.style.marginBottom);if(!isNaN(o)){const e=parseInt(getComputedStyle(s).minHeight),t=o>=e?o:e,r=null!==(n=null===(i=this.getButtonsArea())||void 0===i?void 0:i.getBoundingClientRect().height)&&void 0!==n?n:0,l=this.offsetHeight-this.clientHeight+t+r+a;this.offsetHeight!==l&&(this.style.height=l+"px")}}get shouldForceInputOnEnter(){return!1}getFieldElement(){return this.querySelector("textarea")}getButtonsArea(){return this.querySelector(".dxbl-memo-edit-buttons-area")}};JB=C([rn("dxbl-memo-editor")],JB);customElements.define("dxbl-date-time-edit",class extends cB{createKeyboardStrategy(){return new aB(this)}});class jB extends Li{constructor(e,t){super(e.getKeyboardNavigator(),t),this.component=e}getTable(){return this.component.getTable()}getList(){return this.component.getList()}getSearchBox(){return this.component.getSearchBox()}getListSelectAll(){return this.component.getListSelectAll()}getScrollViewer(){return this.component.getScrollViewer()}getScrollViewerContent(){return this.component.getScrollViewerContent()}getColumnInfoByCell(e){return this.component.getColumnInfoByCell(e)}get isFocusedRowEnabled(){return this.component.enableFocusedRow}get isMultipleSelectionEnabled(){return this.component.enableMultipleSelection}get isShowCheckboxesEnabled(){return this.component.isShowCheckboxesEnabled}canSwitchToNestedContentMode(){return!0}handleTabKeyDown(e,t=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{if(this.lastItemSelected)return!1;this.moveToNextItem()}return!0}}class ZB extends jB{constructor(e,t,i){super(t,i),this.lockScroll=0}isImmediatelyClickEnabled(){return!1}get preventScrollOnFocus(){return this.lockScroll>0}getVisibleIndex(){return Te.getAttributeIntValue(this.targetElement,DB.VisibleIndexAttributeName,-1)}leave(){Ci.removeTabIndex(this.selectedItemElement)}lockScrollOnFocus(){this.lockScroll++}unlockScrollOnFocus(){this.lockScroll--}getShortcutContext(){return{ElementType:this.getElementType(),VisibleIndex:this.getVisibleIndex()}}}class eE extends ZB{handleKeyDown(e){return this.nestedContentSelected||Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Space?super.handleKeyDown(e):(this.performShortcutEvent(e),!0)}}class tE extends jB{constructor(e,t){super(e,t),this.savedVisibleIndex=-1,this.selectedVisibleIndex=-1,this.firstVisibleIndex=-1,this.lastVisibleIndex=-1,this.firstAvailableVisibleIndex=0,this.lastAvailableVisibleIndex=-1,this.requestRestoreSelectedElementIndex=-1,this.boundOnVisibleElementChangedHandler=this.onMakeRowVisible.bind(this),this._rows=[],this.addEventSubscriptions()}get enableVirtualRenderMode(){return this.component.enableVirtualRenderMode}get isFirstItemSelected(){return this.selectedVisibleIndex<=this.firstAvailableVisibleIndex}get isLastItemSelected(){return this.selectedVisibleIndex>=this.lastAvailableVisibleIndex}get totalItemCount(){const e=this.component.virtualItemCount;return e>=0?e:this._rows.length}get preventScrollOnFocus(){return this.enableVirtualRenderMode}updateSelectedItemByChildElement(e,t=null){const i=this.findItemElementIndexByChild(e);if(i<0)return;const n=t instanceof MouseEvent;if(n&&(this.selectedVisibleIndex=MB.getElementVisibleIndex(this.items[i])),this.enableVirtualRenderMode)return!n&&i!==this.selectedItemIndex&&this.isElementInsideViewport(this.selectedVisibleIndex)&&(this.requestRestoreSelectedElementIndex=this.selectedVisibleIndex),void this.updateSelectedItemByIndex(i);super.updateSelectedItemByChildElement(e,t)}initialize(){super.initialize(),this._rows=this.queryRows(),this.resetState(),this.updateBoundaries(),this.updateViewportBoundaries()}activate(){if(this.enableVirtualRenderMode)if(this.requestRestoreSelectedElementIndex>-1)this.notifyMakeElementVisible(this.requestRestoreSelectedElementIndex,null),this.requestRestoreSelectedElementIndex=-1;else if(this.selectedVisibleIndex>-1)if(this.isElementInsideViewport(this.selectedVisibleIndex)){const e=MB.findItemIndex(this.selectedVisibleIndex,this.items);e>-1&&this.selectViewportItem(e)}else Ei(this.component);else this.selectViewportItem(this.selectedItemIndex);else super.activate()}onDispose(){this._rows=[],this.resetState(),this.removeEventSubscriptions(),super.onDispose()}getSelectedItemStrategy(){return super.getSelectedItemStrategy()}selectItem(e){const t=this.getSelectedItemStrategy(),i=this.getStrategy(e),n=i.getVisibleIndex();this.selectedVisibleIndex=n,this.savedVisibleIndex=n,Ii(this.component),super.selectItem(e),t&&t!==i&&t.leave()}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return!(e.altKey||e.metaKey)&&this.handleArrowUpKeyDown();case Be.KeyCode.Down:return this.handleArrowDownKeyDown();case Be.KeyCode.PageDown:return this.handlePageDown();case Be.KeyCode.PageUp:return this.handlePageUp();case Be.KeyCode.Home:return this.handleHomeKeyDown(e)||this.performShortcutEvent(e),!0;case Be.KeyCode.End:return this.handleEndKeyDown(e)||this.performShortcutEvent(e),!0;case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return!1}handleKeyUp(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageUp:case Be.KeyCode.PageDown:case Be.KeyCode.Home:case Be.KeyCode.End:this.notifyFocusedRowChanged()}return!1}moveToPrevItem(){super.moveToPrevItem(),this.scrollToElement(null,Pe.None)}moveToNextItem(){super.moveToNextItem(),this.scrollToElement(null,Pe.None)}selectViewportItem(e){const t=this.getStrategy(e);t.lockScrollOnFocus(),this.selectItem(e),t.unlockScrollOnFocus()}moveToPrevVirtualItem(){let e=this.selectedVisibleIndex-1;0===e&&0===this.selectedItemIndex||(this.isElementInsideViewport(e)&&MB.isGroupRow(this,e)&&e--,this.isElementInsideViewport(e)&&this.selectedItemIndex>0?(this.selectViewportItem(this.selectedItemIndex-1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Ue.Top))}moveToNextVirtualItem(){let e=this.selectedVisibleIndex+1;this.isElementInsideViewport(e)&&MB.isGroupRow(this,e)&&e++,this.isElementInsideViewport(e)&&this.selectedItemIndex<this.totalItemCount-1?(this.selectViewportItem(this.selectedItemIndex+1),this.scrollToElement(null,Pe.None)):this.notifyMakeElementVisible(e,Ue.Bottom)}handleArrowUpKeyDown(){return this.isFirstItemSelected||(this.enableVirtualRenderMode?this.moveToPrevVirtualItem():this.moveToPrevItem()),!0}handleArrowDownKeyDown(){return this.isLastItemSelected||(this.enableVirtualRenderMode?this.moveToNextVirtualItem():this.moveToNextItem()),!0}handleHomeKeyDown(e){return!!this.isFirstItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToFirstVirtualItem():this.moveToFirstItem(),!(e.ctrlKey&&e.shiftKey))}moveToFirstItem(){if(this.getScrollViewer()){const e=MB.isGroupRow(this,0);this.selectItem(0);const t=e?MB.getRow(this,0):this.selectedItemElement;this.scrollToElement(Ue.Top,Pe.None,t)}}moveToFirstVirtualItem(){this.isElementInsideViewport(0)&&this.selectedItemIndex>0?(this.selectViewportItem(0),this.scrollToElement(Ue.Top,Pe.None)):this.notifyMakeElementVisible(0,Ue.Top)}handleEndKeyDown(e){return!!this.isLastItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToLastVirtualItem():this.moveToLastItem(),!(e.ctrlKey&&e.shiftKey))}moveToLastItem(){this.component.getScrollViewer()&&(this.selectItem(this.itemCount-1),this.scrollToElement(Ue.Bottom,Pe.None))}moveToLastVirtualItem(){const e=this.totalItemCount-1;this.isElementInsideViewport(e)&&this.selectedItemIndex<this.itemCount-1?(this.selectViewportItem(this.itemCount-1),this.scrollToElement(Ue.Bottom,Pe.None)):this.notifyMakeElementVisible(e,Ue.Bottom)}handlePageUp(){return this.isFirstItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToPrevVirtualPageItem():this.moveToPrevPageItem()),!0}moveToPrevPageItem(){const e=this.component.getScrollViewer();if(e){const t=MB.calculateBoundaryItemVisibleIndex(this,e,!1),i=t<0?0:t,n=MB.isGroupRow(this,i),s=MB.findItemIndex(n?i+1:i,this.items);this.selectItem(s);const r=n?MB.getRow(this,i):this.selectedItemElement;this.scrollToElement(Ue.Top,Pe.None,r)}}moveToPrevVirtualPageItem(){const e=this.component.getScrollViewer();if(e){const t=MB.calculateBoundaryItemVisibleIndex(this,e,!1);if(this.isElementInsideViewport(t)){const e=MB.isGroupRow(this,t),i=MB.findItemIndex(e?t+1:t,this.items);this.selectViewportItem(i);const n=e?MB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Ue.Top,Pe.None,n)}else this.notifyMakeElementVisible(t,Ue.Top)}}handlePageDown(){return this.isLastItemSelected||(this.savedVisibleIndex=-1,this.enableVirtualRenderMode?this.moveToNextVirtualPageItem():this.moveToNextPageItem()),!0}moveToNextPageItem(){const e=this.lastAvailableVisibleIndex,t=this.component.getScrollViewer();if(t){const i=MB.calculateBoundaryItemVisibleIndex(this,t,!0),n=i>e?e:i,s=MB.isGroupRow(this,n),r=MB.findItemIndex(s?n-1:n,this.items);this.selectItem(r);const o=s?MB.getRow(this,n):this.selectedItemElement;this.scrollToElement(Ue.Bottom,Pe.None,o)}}moveToNextVirtualPageItem(){const e=this.component.getScrollViewer();if(e){const t=MB.calculateBoundaryItemVisibleIndex(this,e,!0);if(this.isElementInsideViewport(t)){const e=MB.isGroupRow(this,t),i=MB.findItemIndex(e?t-1:t,this.items);this.selectViewportItem(i);const n=e?MB.getRow(this,t):this.selectedItemElement;this.scrollToElement(Ue.Bottom,Pe.None,n)}else this.notifyMakeElementVisible(t,Ue.Bottom)}}onMakeRowVisible(e){if(e.detail.isFocusRequired){const t=MB.getElementVisibleIndex(e.detail.element),i=MB.isGroupRow(this,t),n=MB.findItemIndex(i?t+1:t,this.items);this.selectItem(n)}}addEventSubscriptions(){const e=this.getScrollViewer();e&&e.addEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler)}removeEventSubscriptions(){const e=this.getScrollViewer();e&&e.removeEventListener(Ke.eventName,this.boundOnVisibleElementChangedHandler)}getStrategy(e){return this.getItemStrategy(e)}notifyFocusedRowChanged(){this.isFocusedRowEnabled&&this.savedVisibleIndex>-1&&(this.component.notifyFocusedRowChanged(this.savedVisibleIndex),this.savedVisibleIndex=-1)}scrollToElement(e,t,i=this.selectedItemElement){const n=this.getScrollViewer();n&&i&&Oe.scrollToElementRelyOnStickyDescendants(i,e,t,n)}notifyMakeElementVisible(e,t=null){e<0||this.component.notifyMakeElementVisible(e,MB.getVerticalEdge(t))}updateBoundaries(){this.firstAvailableVisibleIndex=0,this.lastAvailableVisibleIndex=this.totalItemCount-1}updateViewportBoundaries(){if(0===this._rows.length)return;this.firstVisibleIndex=MB.getElementVisibleIndex(this._rows[0]);this.lastVisibleIndex=MB.getElementVisibleIndex(this._rows[this._rows.length-1])}queryRows(){return Array.from(this.targetElement.querySelectorAll(FB.VisibleItemSelector))}isElementInsideViewport(e){return e>=this.firstVisibleIndex&&e<=this.lastVisibleIndex}resetState(){this.firstAvailableVisibleIndex=-1,this.lastAvailableVisibleIndex=-1,this.firstVisibleIndex=-1,this.lastVisibleIndex=-1}getLastAvailableVisibleIndex(){return this.lastAvailableVisibleIndex}getSelectedVisibleIndex(){return this.selectedVisibleIndex}getItemsContainer(){return this.targetElement}getRows(){return this._rows}}var iE,nE;!function(e){e[e.Undefined=0]="Undefined",e[e.HeaderRow=1]="HeaderRow",e[e.DataRow=2]="DataRow",e[e.ListItem=3]="ListItem",e[e.EmptyData=4]="EmptyData",e[e.EmptyItem=5]="EmptyItem"}(iE||(iE={})),function(e){e[e.None=0]="None",e[e.Table=1]="Table",e[e.List=2]="List",e[e.SearchBox=3]="SearchBox",e[e.ListSelectAll=4]="ListSelectAll"}(nE||(nE={}));class sE{static getElementType(e){return e.matches(FB.HeaderRowSelector)?iE.HeaderRow:e.matches(FB.TableVisibleRowGeneralSelector)?iE.DataRow:e.matches(FB.EmptyDataItemSelector)?iE.EmptyData:e.matches(FB.ListVisibleItemGeneralSelector)?iE.ListItem:e.matches(FB.EmptyListItemSelector)?iE.EmptyItem:iE.Undefined}static getNavigationAreaType(e){return e.matches(FB.TableSelector)?nE.Table:e.matches(FB.ListSelector)?nE.List:e.matches(FB.SearchBoxSelector)?nE.SearchBox:e.matches(FB.ListSelectAllContainerSelector)?nE.ListSelectAll:nE.None}static isSelectionCell(e){var t;return null!==(t=null==e?void 0:e.matches(`.${xB.TableSelectionCellClassName}`))&&void 0!==t&&t}static isItemDisplayTemplateContainer(e){var t;return null!==(t=null==e?void 0:e.matches(`.${xB.ItemDisplayTemplateContainer}`))&&void 0!==t&&t}}class rE extends jB{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(FB.TablePartsSelector)}createItemStrategy(e){return e.matches("thead")?new oE(this.component,e):e.matches("tbody")?new aE(this,this.component,e):null}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.handleTabKeyDown(e)}getShortcutContext(){return{AreaType:nE.Table}}}class oE extends jB{constructor(e,t){super(e,t)}queryItems(){return this.queryItemsBySelector(FB.HeaderRowSelector)}createItemStrategy(e){if(sE.getElementType(e)===iE.HeaderRow)return new lE(this.component,e);throw new Error("Not implemented")}}class aE extends tE{constructor(e,t,i){super(t,i)}createItemStrategy(e){return e.matches(FB.TableVisibleRowGeneralSelector)?new AE(this,this.component,e):e.matches(FB.EmptyDataItemSelector)?new dE(this,this.component,e):null}queryItems(){return this.queryItemsBySelector(FB.TableDataRowSelector)}}class lE extends jB{constructor(e,t){super(e,t)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Space:return this.handleSpace(e);case Be.KeyCode.Enter:case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageDown:case Be.KeyCode.PageUp:case Be.KeyCode.Home:case Be.KeyCode.End:return!0}return super.handleKeyDown(e)}handleSpace(e){return this.performShortcutEvent(e),!0}getShortcutContext(){return{ElementType:iE.HeaderRow}}}class AE extends eE{getElementType(){return iE.DataRow}handleKeyDown(e){if(!this.nestedContentSelected&&Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter){const e=this.findFocusableElements().length;if(this.isShowCheckboxesEnabled&&1===e||0===e)return!0}return super.handleKeyDown(e)}}class dE extends ZB{constructor(e,t,i){super(e,t,i)}getElementType(){return iE.EmptyData}}class cE extends tE{constructor(e,t){super(e,t)}getShortcutContext(){return{AreaType:nE.List}}queryItems(){return this.queryItemsBySelector(FB.ItemSelector)}createItemStrategy(e){return e.matches(FB.ListVisibleItemGeneralSelector)?new hE(this,this.component,e):e.matches(FB.EmptyDataItemSelector)?new uE(this,this.component,e):null}}class hE extends eE{getElementType(){return iE.ListItem}hasItemDisplayTemplate(){return!!this.targetElement.querySelector(FB.ItemDisplayTemplateSelector)}handleKeyDown(e){if(!this.nestedContentSelected){const t=this.findFocusableElements().length;if(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter&&(!this.hasItemDisplayTemplate()||0===t||1===t&&this.isShowCheckboxesEnabled))return!0}return super.handleKeyDown(e)}}class uE extends ZB{constructor(e,t,i){super(e,t,i)}getElementType(){return iE.EmptyData}}class pE extends jB{constructor(e,t){super(e,t)}}class mE extends jB{constructor(e,t){super(e,t)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Space:return this.performShortcutEvent(e),!0;case Be.KeyCode.Enter:case Be.KeyCode.Down:case Be.KeyCode.Up:case Be.KeyCode.PageDown:case Be.KeyCode.PageUp:case Be.KeyCode.Home:case Be.KeyCode.End:return!0}return super.handleKeyDown(e)}getShortcutContext(){return{AreaType:nE.ListSelectAll}}}class gE extends jB{constructor(e){super(e,e)}getShortcutContext(){return{IsMacOSPlatform:this.isMacOSPlatform}}queryItems(){return new Array(this.getSearchBox(),this.getListSelectAll(),this.getList(),this.getTable())}createItemStrategy(e){switch(sE.getNavigationAreaType(e)){case nE.SearchBox:return new pE(this.component,e);case nE.ListSelectAll:return new mE(this.component,e);case nE.Table:return new rE(this.component,e);case nE.List:return new cE(this.component,e)}return null}moveToPrevItem(){this.selectedItemIndex>0?super.moveToPrevItem():this.leaveBackward()}moveToNextItem(){this.selectedItemIndex<this.itemCount-1?super.moveToNextItem():this.leaveForward()}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.handleTabKeyDown(e)}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}}class CE{constructor(e){this._uID=e}get uID(){return this._uID}}var fE;!function(e){e[e.Item=0]="Item",e[e.Component=1]="Component"}(fE||(fE={}));class vE extends JA{constructor(e){super(),this.listBox=e}getKey(){return this.listBox.uId}getItemDropArea(){return this.listBox.getList()}getDropMode(){return this.listBox.getDropMode()}activateDropTarget(e){var t;super.activateDropTarget(e),null===(t=this.listBox.getScrollViewer())||void 0===t||t.startAutoScrolling(Ne.Vertical)}deactivateDropTarget(){var e;super.deactivateDropTarget(),null===(e=this.listBox.getScrollViewer())||void 0===e||e.stopAutoScrolling()}getDraggableElement(e){return this.listBox.getItemDragHint()}getItemVisibleIndex(e){return this.listBox.getItemVisibleIndex(e)}getDropRestrictions(){return this.listBox.getDropRestrictions()}start(e,t){this.isItemDraggingAllowed(e)&&super.start(e,t)}stop(){super.stop(),document.body.classList.remove(xB.MoveCursorCssClassName,xB.NotAllowedCursorCssClassName)}findItemElementUpToParent(e,t){return Qt(e,null,(e=>e.matches(FB.ListItems)&&e.closest(FB.ListSelector)===t))}getDroppableTargets(){const{restrictions:e}=this.draggableRowItemContext||{};return e?e.allowedComponents.map((e=>PA.find(e))):[]}getDropTargetIndicator(){return this.listBox.getDropTargetIndicator()}static isEmptyItem(e){const t=sE.getElementType(e);return t===iE.EmptyData||t===iE.EmptyItem}getDropPosition(){if(!this.draggableRowItemContext)return TA.Append;const{currentCursorPosition:e,mouseOverElementRect:t,mouseOverElement:i,target:n}=this.draggableRowItemContext;return n.getDropMode()===fE.Component?TA.Append:i&&t?vE.isEmptyItem(i)?TA.Append:this.isRestrictedTopArea()?TA.Before:this.isRestrictedBottomArea()?TA.After:UA.getDropPositionByCursor(e.y,t):TA.Inside}isItemDropPossible(e){return!(!this.draggableRowItemContext||e===this.draggableRowItemContext.srcElement)&&(this.isWithinDragging()?this.isReorderPossible(e):this.isDropAllowed())}isReorderPossible(e){const t=sE.getElementType(e);if(!this.draggableRowItemContext)return!1;const{target:i}=this.draggableRowItemContext;if(i.getDropMode()===fE.Component)return!1;if(t===iE.EmptyItem)return!0;if(t!==iE.ListItem)return!1;const n=this.getItemDropArea();if(!n||e.closest(n.tagName)!==n)return!1;const s=this.getItemVisibleIndex(e);return!this.isWithinDeniedRange(s)}refreshUICore(){if(super.refreshUICore(),!this.draggableRowItemContext)return;const e=this.isDropAllowed();document.body.classList.toggle(xB.MoveCursorCssClassName,e),document.body.classList.toggle(xB.NotAllowedCursorCssClassName,!e)}isDropAllowed(){const e=this.listBox.getDragMediator();return!e||!this.draggableRowItemContext||e.isDropAllowed(this.draggableRowItemContext.srcElement,this.draggableRowItemContext.mouseOverElement)}isItemDraggingAllowed(e){const t=sE.getElementType(e);return t===iE.DataRow||t===iE.ListItem}}function bE(e){return{fromAttribute:t=>e[t],toAttribute:t=>e[t]}}const wE=-1;let yE=class extends Bs{constructor(){super(),this._focusedRowIndex=wE,this._columnsInfo=[],this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this._handlePointerEventsMode=r.None,this.allowDragItems=!1,this.dropMode=fE.Item,this._pointerEventsHelper=new q(this),this.resizeObserver=new ResizeObserver(this.onSizeChanged.bind(this)),this.itemDraggingHelper=new vE(this)}connectedCallback(){super.connectedCallback(),this._pointerEventsHelper.initialize(),this.addEventSubscriptions(),this.resizeObserver.observe(this)}disconnectedCallback(){delete this.keyboardNavigator,this._pointerEventsHelper.dispose(),this.removeEventSubscriptions(),this.resizeObserver.disconnect(),super.disconnectedCallback()}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}getScrollViewer(){return this.querySelector(`.${xe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${xe.ContentContainerClassName}`)}getTable(){return this.querySelector(FB.TableSelector)}getList(){return this.querySelector(FB.ListSelector)}getSearchBox(){return this.querySelector(FB.SearchBoxSelector)}getListSelectAll(){return this.querySelector(FB.ListSelectAllContainerSelector)}getItemDragHint(){var e,t;const i=this.querySelector(`.${xB.ItemDraggingHintPortal}`);return null!==(t=null===(e=null==i?void 0:i.portable)||void 0===e?void 0:e.find((e=>{var t;return null===(t=e.matches)||void 0===t?void 0:t.call(e,FB.ItemDragHintSelector)})))&&void 0!==t?t:null}getKeyboardNavigator(){return this.keyboardNavigator}getDropTargetIndicator(){return this.querySelector(FB.DropTargetIndicatorSelector)}getDropRestrictions(){return this.querySelector(be)}getDragMediator(){const e=this.dataset.dragMediatorSelector;return void 0===e||0===e.length?null:this.querySelector(e)}getDropMode(){return this.dropMode}notifyFocusedRowChanged(e){e!==this.focusedRowIndex&&this.enableFocusedRow&&(this.focusedRowIndex=e,this.dispatchEvent(new TB(e)))}notifyMakeElementVisible(e,t){e<0||this.dispatchEvent(new UB(e,t))}notifyColumnsChanged(e){this._columnsInfo=e}getColumnInfoByCell(e){if(e instanceof HTMLElement){const t=this.getElementIndex(e);if(t>=0&&t<this._columnsInfo.length)return this._columnsInfo[t]}return null}getItemVisibleIndex(e){if(e){const t=e.getAttribute(DB.VisibleIndexAttributeName);return t?parseInt(t):wE}return wE}get isTableRender(){return!!this.getTable()}get focusedRowIndex(){return this._focusedRowIndex}set focusedRowIndex(e){this._focusedRowIndex=e}get enableFocusedRow(){return!1}get enableMultipleSelection(){return this.classList.contains(xB.MultiSelectClassName)}get enableVirtualRenderMode(){const e=this.getScrollViewer();return null!==e&&e instanceof nn}get isShowCheckboxesEnabled(){return this.classList.contains(xB.CheckedClassName)}get virtualItemCount(){const e=this.getScrollViewer();return e&&e instanceof nn?e.totalItemCount:wE}get uId(){return this.getAttribute(DB.ComponentIdAttributeName)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(FB.KeyboardNavigatorSelector),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new gE(this))}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(ke.eventName,this.boundOnScrollViewerUpdateHandler),h.Browser.Firefox&&this.isTableRender&&this.addEventListener("mousedown",this.boundOnMouseDownHandler)}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(ke.eventName,this.boundOnScrollViewerUpdateHandler),h.Browser.Firefox&&this.isTableRender&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler)}onScrollViewerUpdate(e){var t;const i=this.getScrollViewerContent(),n=null!==(t=this.getTable())&&void 0!==t?t:this.getList();i&&n&&(n.offsetHeight<i.clientHeight?T.DomUtils.addClassName(n,xB.ContainerNoScrollClassName):n.offsetHeight>i.clientHeight&&T.DomUtils.removeClassName(n,xB.ContainerNoScrollClassName)),e.stopPropagation()}onSizeChanged(e){const t=this.getScrollViewer();t&&t.refreshUI&&t.refreshUI()}onMouseDown(e){e.ctrlKey&&e.preventDefault()}getListItemElement(e){return Ai(e,FB.ItemGeneralSelector)}onDragStart(e){const t=e.detail.source,i=this.getListItemElement(t.target);i&&this.itemDraggingHelper.start(i,t),e.stopPropagation()}onDragStop(e){if(this.itemDraggingHelper.isStarted()){const e=this.itemDraggingHelper.createItemDraggedHandlerArgs();this.itemDraggingHelper.stop(),this.notifyItemDropped(e)}e.stopPropagation()}onDragCancel(e){this.itemDraggingHelper.isStarted()&&this.itemDraggingHelper.stop(),e.stopPropagation()}notifyItemDropped(e){e&&this.dispatchEvent(new QB(e))}getElementIndex(e){if(!e)return wE;if(e instanceof HTMLTableCellElement)return e.cellIndex;if(e&&e.parentElement)for(let t=0;t<e.parentElement.children.length;t++)if(e.parentElement.children[t]===e)return t;return wE}updateHandlePointerEventsMode(){this._handlePointerEventsMode|=r.None,this.allowDragItems&&(this._handlePointerEventsMode|=r.Dragging)}onAllowDragItemsStateChanged(){this.itemDraggingHelper.initItemDropTarget(this.allowDragItems),this.updateHandlePointerEventsMode()}updated(e){super.updated(e),e.has("allowDragItems")&&this.onAllowDragItemsStateChanged()}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}};var BE,EE,IE;C([ln({attribute:DB.AllowDragItemsAttributeName,type:Boolean})],yE.prototype,"allowDragItems",void 0),C([ln({attribute:DB.DropMode,type:fE,converter:bE(fE)})],yE.prototype,"dropMode",void 0),yE=C([rn(ol)],yE),customElements.define("dxbl-list-box-columns-info",class extends de{get data(){return this.getAttribute("data")}get componentClassName(){return this.getAttribute("component-class-name")}get columns(){return null!==this.data?this.parseColumns(this.data):[]}constructor(){super()}connectedCallback(){var e;super.connectedCallback(),this.component=this.closest(`.${this.componentClassName}`),null===(e=this.component)||void 0===e||e.notifyColumnsChanged(this.columns)}parseColumns(e){const t=JSON.parse(e),i=[];for(let e=0;e<t.length;e++){const n=new CE(t[e].UID);i.push(n)}return i}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,i){var n;if("data"===e)null===(n=this.component)||void 0===n||n.notifyColumnsChanged(this.parseColumns(i))}});class SE{}BE=SE,SE.TagClass=he.Prefix+"-tag",SE.TagTemplateClass=BE.TagClass+"-tmpl",SE.TagCloseButtonClass=BE.TagClass+"-btn-close";customElements.define("dxbl-tag-box",class extends WB{constructor(){super()}connectedCallback(){super.connectedCallback()}isFocusableElementInMainElementTemplate(e){return!(!Ai(e,`.${SE.TagTemplateClass}`)||!Fi(e))||super.isFocusableElementInMainElementTemplate(e)}disconnectedCallback(){super.disconnectedCallback()}get isSearchActive(){return this.searchMode!==zB.None}processPointerDown(e){var t;const i=H.containsInComposedPath(e,this.isTagCloseButtonElement),n=H.containsInComposedPath(e,Bl.isClearButtonElement),s=H.containsInComposedPath(e,Bl.isEditorButtonElement),r=e.target===this.fieldElement,o=!i&&!this.isFocusableElementInMainElementTemplate(e.target);return(r||o)&&this.toggleDropDownVisibility(),Ei(this),s&&this.focused&&this.raiseFieldChange(),(n||s||i)&&e.preventDefault(),this.focused||!s||this.useAdaptiveLayout||null===(t=this.editBoxElement)||void 0===t||t.focus(),!0}applyTextPropertyCore(){super.applyTextPropertyCore(),this.fieldElementValue&&(this.selectAll(),this.raiseFieldText()),this.setInputSizeAttribute()}onFieldReady(e,t){super.onFieldReady(e,t),t&&this.setInputSizeAttribute()}updatePlaceholder(){super.updatePlaceholder(),this.setInputSizeAttribute()}onTextInput(e){super.onTextInput(e),this.setInputSizeAttribute()}tryProcessKeyDown(e){return!!super.tryProcessKeyDown(e)||Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Backspace&&(!this.fieldElementValue&&(this.processKeyDownEvent(e),!0))}setInputSizeAttribute(){this.inputElement&&this.inputElement.setAttribute("size",this.getInputSize().toString())}getInputSize(){return this.fieldElementValue?this.fieldElementValue.length:this.placeholder?this.placeholder.length:1}isTagTemplateElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(SE.TagTemplateClass))}isTagCloseButtonElement(e){var t;return!!e&&(null===(t=e.classList)||void 0===t?void 0:t.contains(SE.TagCloseButtonClass))}});class xE extends CustomEvent{constructor(e,t){super(xE.eventName,{detail:new DE(e,t),bubbles:!0,composed:!0,cancelable:!0})}}xE.eventName=Za+".incrementValue";class DE{constructor(e,t){this.Increment=e,this.PreviousValue=t}}mt.register(xE.eventName,(e=>e.detail)),function(e){e.allowMouseWheel="allow-mouse-wheel",e.needExponentialView="need-exponential-view",e.decimalSeparator="decimal-separator"}(IE||(IE={}));const FE=e=>e;class TE{}EE=TE,TE.Prefix=he.Prefix+"-spin",TE.BtnsContainer=EE.Prefix+"-btns",TE.IncBtn=EE.Prefix+"-btn-inc",TE.DecBtn=EE.Prefix+"-btn-dec";class HE extends zl{constructor(){super(...arguments),this.regex=/^-?(\d)*$/,this.pointerDownTimer={id:-1,button:null},this.buttonObserver=new MutationObserver(this.buttonRemovedHandler.bind(this)),this.boundButtonOnPointerUpHandler=this.onButtonPointerUp.bind(this),this.allowMouseWheel=!1,this.needExponentialView=!1}get pointerDownTimerId(){return this.pointerDownTimer.id}get shouldProcessWheel(){return this.allowMouseWheel}disconnectedCallback(){this.buttonObserver.disconnect(),this.stopPointerLongTap(),super.disconnectedCallback()}connectedOrContentChanged(){super.connectedOrContentChanged(),this.buttonObserver.observe(this,{childList:!0})}onTextInput(e){if(this.isMaskDefined||!this.inputElement||!H.containsInComposedPath(e,(e=>e===this.inputElement)))return;let t=this.fieldElementValue.trim();if(this.decimalSeparator){t=t.replace(/[.,]/g,this.decimalSeparator);const e=t.split(this.decimalSeparator);t=e.length>1?e[0]+this.decimalSeparator+e.slice(1).join(""):e[0]}this.regex.test(t)||(t=t.replace(this.decimalSeparator?new RegExp(`[^0-9${this.decimalSeparator}]`):/[^0-9]/g,"")),t!==this.fieldElementValue&&(this.fieldElementValue=t),super.onTextInput(e)}processKeyDown(e){const t=this.getFieldElement();return!!H.containsInComposedPath(e,(e=>e===t))&&(this.isNavigationKey(e)?(H.markHandled(e),this.incrementValue(e.keyCode===Be.KeyCode.Up),!0):!!super.processKeyDown(e))}processWheel(e){this.incrementValue(e.deltaY<0)}processPointerDown(e){const t=this.getButton(e);if(t&&this.inputElement){e.preventDefault(),this.useAdaptiveLayout||T.DomUtils.setFocus(this.inputElement);const i=T.DomUtils.hasClassName(t,TE.IncBtn);this.incrementValue(i),this.pointerDownTimer={id:window.setTimeout(this.startPointerLongTap.bind(this),1e3,i),button:t},t.addEventListener("pointerup",this.boundButtonOnPointerUpHandler),t.addEventListener("pointerout",this.boundButtonOnPointerUpHandler)}return super.processPointerDown(e)}getButton(e){const t=e.composedPath();for(const e in t){const i=t[e];if(i&&this.hasSpinBtnClass(i))return i}return null}hasSpinBtnClass(e){return T.DomUtils.hasClassName(e,TE.IncBtn)||T.DomUtils.hasClassName(e,TE.DecBtn)}startPointerLongTap(e,t){this.pointerDownTimer={id:window.setInterval(this.incrementValue.bind(this),50,e),button:t}}stopPointerLongTap(){-1!==this.pointerDownTimer.id&&(clearTimeout(this.pointerDownTimer.id),this.pointerDownTimer={id:-1,button:null},this.bindValueMode===bl.OnDelayedInput?this.applyDefferedValue():this.raiseApplyValue())}onButtonPointerUp(e){let t=e.target;this.hasSpinBtnClass(t)||(t=T.DomUtils.getParentByTagName(t,"button")),this.stopPointerLongTap(),t.removeEventListener("pointerup",this.boundButtonOnPointerUpHandler),t.removeEventListener("pointerout",this.boundButtonOnPointerUpHandler)}buttonRemovedHandler(e,t){if(-1===this.pointerDownTimer.id)return;const i=e.some((e=>Array.from(e.removedNodes).some((e=>{var t,i;return T.DomUtils.isElementNode(e)&&e.classList.contains(TE.BtnsContainer)&&((null===(t=this.pointerDownTimer.button)||void 0===t?void 0:t.isEqualNode(T.DomUtils.getChildNodesByClassName(e,TE.IncBtn)[0]))||(null===(i=this.pointerDownTimer.button)||void 0===i?void 0:i.isEqualNode(T.DomUtils.getChildNodesByClassName(e,TE.DecBtn)[0])))}))));i&&this.stopPointerLongTap()}incrementValue(e){this.dispatchEvent(new xE(e,this.fieldElementValue))}isNavigationKey(e){return e.keyCode===Be.KeyCode.Up||e.keyCode===Be.KeyCode.Down}updated(e){super.updated(e),(e.has(FE("decimalSeparator"))||e.has(FE("needExponentialView")))&&this.applyRegex()}applyRegex(){this.decimalSeparator&&(this.regex=this.needExponentialView?/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?([eE]?[+-]?(\d)*)?$/:/^-?(\d+|[,.]\d+|\d+[,.]\d+|\d+[,.]|[,.])?$/)}shouldProcessKeyUp(e){switch(e.key){case"ArrowUp":case"ArrowDown":return this.isMaskDefined||this.bindValueMode===bl.OnDelayedInput}return super.shouldProcessKeyUp(e)}}var UE,PE,QE,NE,RE;C([ln({type:Boolean,attribute:IE.allowMouseWheel})],HE.prototype,"allowMouseWheel",void 0),C([ln({type:Boolean,attribute:IE.needExponentialView})],HE.prototype,"needExponentialView",void 0),C([ln({type:String,attribute:IE.decimalSeparator})],HE.prototype,"decimalSeparator",void 0),customElements.define(Za,HE);class LE{}UE=LE,LE.DefaultCssClass=he.Prefix+"-color-palette",LE.SelectedTileCssClass=UE.DefaultCssClass+"-selected-tile",LE.NoColorContainerCssClass=UE.DefaultCssClass+"-no-color-container",LE.ColorValueAttribute="color-value",function(e){e[e.Undefined=0]="Undefined",e[e.ColorTile=1]="ColorTile",e[e.NoColorTile=2]="NoColorTile"}(PE||(PE={})),function(e){e[e.First=0]="First",e[e.LastSelected=1]="LastSelected",e[e.Last=2]="Last"}(QE||(QE={}));class ME extends Li{constructor(e,t,i){super(e,i),this.rootStrategy=t}getItemStrategy(e){return super.getItemStrategy(e)}getSelectedItemStrategy(){return super.getSelectedItemStrategy()}getShortcutContext(){return{ElementType:this.getElementType(),Value:this.getElementValue()}}selectItem(e){this.resetFocusableState(),super.selectItem(e)}resetFocusableState(){const e=this.findLastSelectedStrategy().selectedItemElement;e&&Ci.removeTabIndex(e)}getElementType(){return PE.Undefined}getElementValue(){return null}move(e,t,i=!0){const n=this.selectedItemIndex+(e?1:-1);if(!this.isIndexWithinBoundaries(n))return!1;if(i){const i=this.getItemStrategy(n);if(!i||!this.canMove(i,e,t))return!1;this.setSelectedItemIndex(i,e,t)}return e?this.moveToNextItem():this.moveToPrevItem(),!0}canMove(e,t,i){return!0}}class kE extends ME{constructor(e,t,i){super(e,t,i)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:case Be.KeyCode.Right:return!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return super.handleKeyDown(e)}setSelectedItemIndex(e,t,i){}getElementType(){return PE.NoColorTile}}class KE extends ME{constructor(e,t,i){super(e,t,i)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.move(!1,!1,!1);case Be.KeyCode.Right:return this.move(!0,!1,!1);case Be.KeyCode.Home:return this.moveToFirstItem(),!0;case Be.KeyCode.End:return this.moveToLastItem(),!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performShortcutEvent(e),!0}return super.handleKeyDown(e)}focusSelectedItem(){var e;super.focusSelectedItem(),null===(e=this.rootStrategy)||void 0===e||e.setLastColumnIndex(this.selectedItemIndex)}setRowSelectedItemIndex(e){var t,i;switch(e){case QE.First:this.selectedItemIndex=0;break;case QE.LastSelected:this.selectedItemIndex=null!==(i=null===(t=this.rootStrategy)||void 0===t?void 0:t.getLastColumnIndex())&&void 0!==i?i:0;break;case QE.Last:this.selectedItemIndex=this.itemCount-1}}findAndSetRowSelectedTile(){for(let e=0;e<this.itemCount;e++){const t=this.getItem(e);if(t&&t.classList.contains(LE.SelectedTileCssClass))return this.selectedItemIndex=e,!0}return!1}queryItems(){return this.queryItemsBySelector("td > div")}getElementType(){return PE.ColorTile}getElementValue(){return this.selectedItemElement.getAttribute(LE.ColorValueAttribute)}setSelectedItemIndex(e,t,i){}}class OE{static isGroupStrategy(e){return e instanceof _E}static isRowStrategy(e){return e instanceof KE}static isButtonStrategy(e){return e instanceof kE}}class _E extends ME{constructor(e,t,i){super(e,t,i)}queryItems(){return this.queryItemsBySelector("tbody > tr")}createItemStrategy(e){if(e.matches("tr"))return new KE(this.navigator,this.rootStrategy,e);throw new Error("Color palete kbd strategy not implemented ")}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.move(!1,!1);case Be.KeyCode.Up:return this.move(!1,!0);case Be.KeyCode.Right:return this.move(!0,!1);case Be.KeyCode.Down:return this.move(!0,!0)}return super.handleKeyDown(e)}getShortcutContext(){return{}}setGroupSelectedItemIndex(e,t){this.selectedItemIndex=t===QE.First?0:this.itemCount-1;const i=this.getItemStrategy(this.selectedItemIndex);OE.isRowStrategy(i)&&i.setRowSelectedItemIndex(e)}findAndSetGroupSelectedTile(){for(let e=0;e<this.itemCount;e++){const t=this.getItemStrategy(e);if(OE.isRowStrategy(t)&&t.findAndSetRowSelectedTile())return void(this.selectedItemIndex=e)}}setSelectedItemIndex(e,t,i){OE.isRowStrategy(e)&&e.setRowSelectedItemIndex(i?QE.LastSelected:t?QE.First:QE.Last)}}class VE extends ME{constructor(e,t){super(e,null,t),this.lastColumnIndex=0}queryItems(){return new Array(...this.queryItemsBySelector("& > table"),...this.queryItemsBySelector(`& > div.${LE.NoColorContainerCssClass}`))}createItemStrategy(e){if(e.matches("table"))return new _E(this.navigator,this,e);if(e.matches(`div.${LE.NoColorContainerCssClass}`))return new kE(this.navigator,this,e);throw new Error("Color palete kbd strategy not implemented ")}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Left:return this.move(!1,!1);case Be.KeyCode.Up:return this.move(!1,!0);case Be.KeyCode.Right:return this.move(!0,!1);case Be.KeyCode.Down:return this.move(!0,!0);case Be.KeyCode.Tab:return this.handleTab(e)}return super.handleKeyDown(e)}getShortcutContext(){return{}}setLastColumnIndex(e){this.lastColumnIndex=e}getLastColumnIndex(){return this.lastColumnIndex}setSelectedItemIndex(e,t,i){OE.isGroupStrategy(e)&&(t?e.setGroupSelectedItemIndex(i?QE.LastSelected:QE.First,QE.First):e.setGroupSelectedItemIndex(i?QE.LastSelected:QE.Last,QE.Last))}canMove(e,t,i){return!t||i||!OE.isButtonStrategy(e)}handleTab(e){const t=this.selectedItemIndex+(e.shiftKey?-1:1);if(this.isIndexWithinBoundaries(t)){const e=this.getItemStrategy(t);return OE.isGroupStrategy(e)&&e.findAndSetGroupSelectedTile(),this.selectItem(t),!0}return e.shiftKey?(this.leaveBackward(),!0):super.handleKeyDown(e)}}customElements.define("dxbl-color-palette",class extends Bs{constructor(){super()}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}disconnectedCallback(){delete this.keyboardNavigator,super.disconnectedCallback()}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(Pi),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new VE(this.getKeyboardNavigator(),this))}getKeyboardNavigator(){return this.keyboardNavigator}}),function(e){e[e.TopStart=1]="TopStart",e[e.Top=2]="Top",e[e.TopEnd=4]="TopEnd",e[e.RightStart=8]="RightStart",e[e.Right=16]="Right",e[e.RightEnd=32]="RightEnd",e[e.BottomStart=64]="BottomStart",e[e.Bottom=128]="Bottom",e[e.BottomEnd=256]="BottomEnd",e[e.LeftStart=512]="LeftStart",e[e.Left=1024]="Left",e[e.LeftEnd=2048]="LeftEnd"}(RE||(RE={}));class zE extends io{constructor(e,t,i,n,s,r){super(t,i,n,s,r),this.flyoutPosition=e}}let WE=NE=class extends Co{get actualDistance(){var e;return null!==(e=this.flyoutDistance)&&void 0!==e?e:2}get actualOffset(){var e;return null!==(e=this.flyoutOffset)&&void 0!==e?e:0}get branchType(){return Hs.DropDown}constructor(){super(),this.slotChangedHandler=this.handleSlotChange.bind(this),this.dialog=null,this.flyoutDistance=null,this.flyoutOffset=null,this.calcStartAlignment=()=>0,this.calcEndAlignment=(e,t)=>t-e,this.calcAlignment=(e,t)=>t/2-e/2,this.placement=Yr.Custom,this.fitToRestriction=!0,this.flyoutPosition=0}get child(){return this.root}processCustomPlacement(e,t){return this.calcCustomPlacements(e,t)}calcCustomPlacements(e,t){const i=[];if(!this.dialog||!this.dialog.arrow)return i;const n=this.getBounds(t),s=this.getBounds(e),r=this.dialog.arrow.arrowSize;return this.flyoutPosition&RE.Bottom&&i.push(this.calcBottomPlacement(n,r,this.calcAlignment(s.width,n.width),RE.Bottom)),this.flyoutPosition&RE.BottomStart&&i.push(this.calcBottomPlacement(n,r,this.calcStartAlignment(),RE.BottomStart)),this.flyoutPosition&RE.BottomEnd&&i.push(this.calcBottomPlacement(n,r,this.calcEndAlignment(s.width,n.width),RE.BottomEnd)),this.flyoutPosition&RE.Top&&i.push(this.calcTopPlacement(s,r,this.calcAlignment(s.width,n.width),RE.Top)),this.flyoutPosition&RE.TopStart&&i.push(this.calcTopPlacement(s,r,this.calcStartAlignment(),RE.TopStart)),this.flyoutPosition&RE.TopEnd&&i.push(this.calcTopPlacement(s,r,this.calcEndAlignment(s.width,n.width),RE.TopEnd)),this.flyoutPosition&RE.Left&&i.push(this.calcLeftPlacement(s,r,this.calcAlignment(s.height,n.height),RE.Left)),this.flyoutPosition&RE.LeftStart&&i.push(this.calcLeftPlacement(s,r,this.calcStartAlignment(),RE.LeftStart)),this.flyoutPosition&RE.LeftEnd&&i.push(this.calcLeftPlacement(s,r,this.calcEndAlignment(s.height,n.height),RE.LeftEnd)),this.flyoutPosition&RE.Right&&i.push(this.calcRightPlacement(n,r,this.calcAlignment(s.height,n.height),RE.Right)),this.flyoutPosition&RE.RightStart&&i.push(this.calcRightPlacement(n,r,this.calcStartAlignment(),RE.RightStart)),this.flyoutPosition&RE.RightEnd&&i.push(this.calcRightPlacement(n,r,this.calcEndAlignment(s.height,n.height),RE.RightEnd)),i}calcLeftPlacement(e,t,i,n){const s=new Ze(-e.width-t.width-this.actualDistance,i+this.actualOffset);return new zE(n,s,Zr.Horizontal,!0,Jr.Near,jr.bottom)}calcTopPlacement(e,t,i,n){const s=new Ze(i+this.actualOffset,-e.height-t.height-this.actualDistance);return new zE(n,s,Zr.Vertical,!0,Jr.Near,jr.top)}calcRightPlacement(e,t,i,n){const s=new Ze(e.width+t.width+this.actualDistance,i+this.actualOffset);return new zE(n,s,Zr.Horizontal,!1,Jr.Far,jr.bottom)}calcBottomPlacement(e,t,i,n){const s=new Ze(i+this.actualOffset,e.height+t.height+this.actualDistance);return new zE(n,s,Zr.Vertical,!1,Jr.Near,jr.bottom)}processBestTranslationResults(e,t,i,n,s,r,o,a,l){if(super.processBestTranslationResults(e,t,i,n,s,r,o,a,l),!this.dialog||!this.dialog.arrow)return;const A=this.calcArrowAlignment(r,o,a);this.dialog.arrowAlignment=A;const d=this.dialog.arrow;d.position=this.getArrowPosition(d,t,i,n,a,null==l?void 0:l.flyoutPosition),d.alignment=A}getArrowPosition(e,t,i,n,s,r){const o=s===Zr.Vertical,a=o?e.arrowSize.width:e.arrowSize.height,l=it.rectToRange(i,o),A=it.rectToRange(t,o),d=it.rectToRange(n,o);let c=A.start,h=A.end;this.fitToRestriction&&(A.start<=d.start?(c=d.start,h=c+A.size):A.end>=d.end&&(c=d.end-A.size,h=c+A.size));const[u,p]=[Math.max(c,l.start),Math.min(h,l.end)];let m;m=r&(RE.RightStart|RE.RightEnd|RE.LeftStart|RE.LeftEnd)?l.start:l.start+l.size/2;const g=this.alignWithinBoundaries(m-a/2,u,p),C=this.calculateArrowOffsetFromEdge(l,a,A);return o?new vr(Math.min(Math.max(g-c,C),t.width-C-a),0):new vr(0,Math.min(Math.max(g-h,C-t.height),-C-a))}calcArrowAlignment(e,t,i){return i===Zr.Vertical?t===jr.bottom?va.bottom:va.top:e===Jr.Near?va.start:va.end}alignWithinBoundaries(e,t,i){return t>=i?(t+i)/2:Math.min(Math.max(e,t),i)}calculateArrowOffsetFromEdge(e,t,i){const n=Math.min(e.size-t,e.size/2-t/2);return Math.max(NE.DefaultArrowOffsetFromEdge,Math.min(n,.2*i.size))}renderTemplate(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${Hs.Flyout}">
                <dxbl-flyout-root
                    id="root"
                    style="${this.rootCssStyle}">
                    ${this.renderDefaultSlot()}
                    ${this.renderBridgeSlot()}
                </dxbl-flyout-root>
            </dxbl-branch>
        `}renderDefaultSlot(){return Xn`<slot @slotchange="${this.slotChangedHandler}"></slot>`}handleSlotChange(e){const t=e.target.assignedNodes();this.dialog=t.find((e=>e instanceof Ba)),this.dialog&&(this.dialog.animationEnabled=this.animationEnabled),this.reposition()}updated(e){super.updated(e),this.dialog&&e.has("animationEnabled")&&(this.dialog.animationEnabled=this.animationEnabled)}createKeyboardNavigationStrategy(){return new Fa(this.keyboardNavigator,this)}};WE.DefaultArrowOffsetFromEdge=8,C([dn("#root",!0)],WE.prototype,"root",void 0),C([ln({type:Number,attribute:"flyout-position"})],WE.prototype,"flyoutPosition",void 0),C([ln({type:Number,attribute:"flyout-distance"})],WE.prototype,"flyoutDistance",void 0),C([ln({type:Number,attribute:"flyout-offset"})],WE.prototype,"flyoutOffset",void 0),WE=NE=C([rn("dxbl-flyout")],WE);let $E=class extends ms{constructor(){super(...arguments),this.dropOpposite=!1,this.dropDirection=Jr.Near,this.dropAlignment=jr.bottom}static get styles(){return Cn`
            :host {
                display: flex;
                flex: 1 1 auto;
                flex-direction: column;
                align-items: stretch;
                justify-items: stretch;
                min-height: 0;
            }
        }`}render(){return Xn`
            <slot></slot>
            <slot name="arrow"/>
        `}};function GE(){return new Promise(((e,t)=>{requestAnimationFrame((()=>{setTimeout(e)}))}))}C([ln({type:Object,attribute:"drop-opposite"})],$E.prototype,"dropOpposite",void 0),C([ln({type:String,attribute:"drop-direction"})],$E.prototype,"dropDirection",void 0),C([ln({type:String,attribute:"drop-alignment"})],$E.prototype,"dropAlignment",void 0),$E=C([rn("dxbl-flyout-root")],$E);class qE{constructor(){let e,t;this.promise=new Promise(((i,n)=>{e=i,t=n})),this.resolve=e,this.reject=t}}class XE extends Error{}var YE;!function(e){e[e.Set=0]="Set",e[e.Disposed=1]="Disposed"}(YE||(YE={}));class JE{constructor(e=!1){this.state=e?YE.Set:void 0}wait(){var e;return this.state===YE.Set?Promise.resolve():this.state===YE.Disposed?Promise.reject():(null!==(e=this.state)&&void 0!==e||(this.state=new qE),this.state.promise)}then(e,t){if(this.state===YE.Set)try{const t=null==e?void 0:e();return Promise.resolve(t)}catch(e){return Promise.reject(e)}if(this.state===YE.Disposed)try{const e=new XE;return null==t||t(e),Promise.reject(e)}catch(e){return Promise.reject(e)}return this.wait().then(e,t)}set(){var e;this.state!==YE.Set&&this.state!==YE.Disposed&&(null===(e=this.state)||void 0===e||e.resolve(),this.state=YE.Set)}reset(){this.state!==YE.Disposed&&this.state===YE.Set&&(this.state=void 0)}dispose(){var e;this.state!==YE.Disposed&&(this.state!==YE.Set&&(null===(e=this.state)||void 0===e||e.reject(new XE)),this.state=YE.Disposed)}get isSet(){return this.state===YE.Set}get isDisposed(){return this.state===YE.Disposed}}function jE(e,t,i){let n;const s=(r=`sync ${t.toString()}`,o=function(...e){return this.syncPoint.then((()=>n.apply(this).apply(this,e)))},{[r]:function(...e){return o.apply(this,e)}}[r]);var r,o;if(null!=i||(i={enumerable:!1,configurable:!0}),void 0===i.value&&i.get)n=i.get,i.get=()=>s;else{if(!i.value)throw new Error("syncMethod decorator can only be applied to methods or method getters.");{const e=i.value;n=()=>e,i.value=s}}return i}var ZE,eI,tI;!function(e){e.Center="Center",e.Left="Left",e.Right="Right"}(eI||(eI={})),function(e){e.Top="Top",e.Center="Center",e.Bottom="Bottom"}(tI||(tI={}));let iI=class extends ko{constructor(){super(...arguments),this.allowResize=!1}get header(){return this.querySelector(".dxbl-window-header")}render(){return this.allowResize?Xn`<dxbl-popup-resizable-container><slot></slot></dxbl-popup-resizable-container>`:Xn`<slot></slot>`}};C([ln({type:Boolean,attribute:"allow-resize",reflect:!1})],iI.prototype,"allowResize",void 0),iI=C([rn("dxbl-window-dialog")],iI);let nI=class extends vB{constructor(){super()}};nI=C([rn(dr)],nI);let sI=ZE=class extends CB{constructor(){super(),this.actualSize=null,this.actualPosition=null,this.initialSize=null,this.initialPosition=null,this.actualMinWidth=null,this.actualMaxWidth=null,this.actualMinHeight=null,this.actualMaxHeight=null,this.sizeDirty=!1,this.positionYDirty=!1,this.positionXDirty=!1,this.showAnchorElement=null,this._showOptionsToApply=null,this.childContentObserver=null,this.isAdjustDialogEnabled=!0,this.horizontalAlignment=eI.Center,this.verticalAlignment=tI.Center,this.closeOnEscape=!1,this.placement=Yr.Custom,this.closeMode=qr.None,ua(this)}get branchType(){return Hs.Window}get canAdjustZIndexOnShow(){return!1}get positionY(){return this.offset.y}set positionY(e){this.positionYDirty=!0,this.offset=new Ze(this.positionX||0,e||0)}get positionX(){return this.offset.x}set positionX(e){this.positionXDirty=!0,this.offset=new Ze(e||0,this.positionY||0)}get showOptionsToApply(){return this._showOptionsToApply}set showOptionsToApply(e){this._showOptionsToApply=e,this.positionXDirty=!1,this.positionYDirty=!1}move(e){return this.showOptionsToApply=e,this.forceReposition(),GE()}showAt(e){return this.showOptionsToApply=e,this.observeChildContent(this),super.show(),GE()}show(){this.showAt(this.showOptionsToApply).catch((e=>{}))}observeChildContent(e){var t;null===(t=this.childContentObserver)||void 0===t||t.disconnect(),this.contentLoaded()?this.enableVisibility():(this.childContentObserver=new MutationObserver(this.handleChildContentChanged.bind(this)),this.childContentObserver.observe(e,{childList:!0}))}handleChildContentChanged(e){var t;const i=this.querySelector(cr);i?i.childElementCount>0?(this.enableVisibility(),null===(t=this.childContentObserver)||void 0===t||t.disconnect()):this.observeChildContent(i):this.observeChildContent(this)}contentLoaded(){const e=this.querySelector(cr);return null!==e&&e.childElementCount>0}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.childContentObserver)||void 0===e||e.disconnect()}static getPlacementTargetClientRect(e){if(null!==e){if(null!==e.targetReference&&e.targetReference instanceof HTMLElement)return e.targetReference.getBoundingClientRect();if(null!==e.targetSelector){const t=document.querySelector(e.targetSelector);if(null!==t)return t.getBoundingClientRect()}}return{x:0,y:0,width:window.innerWidth,height:window.innerHeight}}static getShowAtBox(e){return null===e?null:null!==e.targetReference&&e.targetReference instanceof HTMLElement?ZE.getElementTopLeftPoint(e.targetReference):null!==e.targetSelector?ZE.getElementTopLeftPoint(document.querySelector(e.targetSelector)):e.targetPoint}static getElementTopLeftPoint(e){if(null===e)return null;const t=e.getBoundingClientRect();return new Ze(t.left,t.top)}canProcessEscapeKeyDown(){return this.closeOnEscape}activatePopupContent(){this.dispatchEvent(new po(this.initialVisibility))}renderTemplate(){return Xn`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}"
                style="${this.dragCssStyle}">
                <dxbl-window-root
                    id="root"
                    style="${this.rootCssStyle}"
                    ?resizing="${this.resizing}"
                    drop-opposite="${this.actualDropOpposite}"
                    drop-direction="${this.actualDropDirection}"
                    drop-alignment="${this.actualDropAlignment}">
                    ${this.renderDefaultSlot()}
                    ${this.renderAdditionalSlots()}
                    ${this.renderBridgeSlot()}
                </dxbl-window-root>
            </dxbl-branch>
        `}raiseResizeCompleted(e,t){this.sizeDirty=!0,super.raiseResizeCompleted(e,t)}processCustomPlacement(e,t){if(this.positionXDirty||this.positionYDirty||this.isInDragOperation||this.sizeDirty)return null;const i=this.showOptionsToApply;if(i){const e=i.targetPoint||this.calcShowPoint(i);return[new io(e,Zr.None,!1,Jr.Near,jr.bottom)]}return null}calcShowPoint(e){const t=ZE.getPlacementTargetClientRect(e),i=this.getBoundingClientRect(),n=document.body.getBoundingClientRect(),s=null!=window.visualViewport?{x:0,y:0,width:window.visualViewport.width,height:window.visualViewport.height}:n,r=this.calcShowXPoint(i,t),o=this.calcShowYPoint(i,t),a=s.y+s.height-i.height;return new Ze(Math.max(0,r+window.scrollX-Math.max(0,r-(s.x+s.width-i.width))),Math.max(0,o+window.scrollY-Math.max(0,o-a)))}calcShowXPoint(e,t){return Math.floor((()=>{switch(this.horizontalAlignment){case eI.Left:return t.x;case eI.Right:return t.x+t.width-e.width;case eI.Center:return t.x+t.width/2-e.width/2}throw new Error("calcShowXPoint not supported for horizontalAlignment:"+this.horizontalAlignment)})())}calcShowYPoint(e,t){return Math.floor((()=>{switch(this.verticalAlignment){case tI.Top:return t.y;case tI.Bottom:return t.y+t.height-e.height;case tI.Center:return t.y+t.height/2-e.height/2}throw new Error("calcShowYPoint not supported for horizontalAlignment:"+this.verticalAlignment)})())}updated(e){super.update(e),e.has("zIndex")&&this.zIndex&&this.raiseZIndexChange()}raiseZIndexChange(){this.updateComplete.then((e=>{this.dispatchEvent(new Ao(new lo(this.zIndex)))}))}createKeyboardNavigationStrategy(){return new Da(this.keyboardNavigator,this,!0)}};C([ln({type:eI,attribute:"horizontal-alignment",reflect:!1})],sI.prototype,"horizontalAlignment",void 0),C([ln({type:eI,attribute:"vertical-alignment",reflect:!1})],sI.prototype,"verticalAlignment",void 0),C([ln({type:Number,attribute:"position-y",reflect:!1})],sI.prototype,"positionY",null),C([ln({type:Number,attribute:"position-x",reflect:!1})],sI.prototype,"positionX",null),C([ln({type:Boolean,attribute:"close-on-escape"})],sI.prototype,"closeOnEscape",void 0),sI=ZE=C([rn(Ar)],sI);const rI="dxbl-upload";class oI{constructor(e){this.progress=e}}class aI{constructor(e){this.requestOptions=e}}class lI{constructor(e){this.lastErrorCode=e}}class AI extends CustomEvent{constructor(e){super(AI.eventName,{detail:new oI(e),bubbles:!0,composed:!0})}}AI.eventName=rI+".uploadprogress",mt.register(AI.eventName,(e=>e.detail));class dI extends CustomEvent{constructor(e){super(dI.eventName,{detail:new aI(e),bubbles:!0,composed:!0})}}dI.eventName=rI+".customizeformdata",mt.register(dI.eventName,(e=>e.detail));class cI extends CustomEvent{constructor(e){super(cI.eventName,{detail:new lI(e),bubbles:!0,composed:!0})}}cI.eventName=rI+".erroroccurred",mt.register(cI.eventName,(e=>e.detail));var hI,uI,pI,mI,gI;!function(e){e.acceptedFileTypes="accepted-file-types",e.allowedFileExtensions="allowed-file-extensions",e.externalSelectButtonCssSelector="external-select-button-css-selector",e.showEmbeddedSelectButton="show-embedded-select-button",e.chunkSize="chunk-size",e.maxFileSize="max-file-size",e.minFileSize="min-file-size",e.maxFileCount="max-file-count",e.multiple="multiple",e.uploadMode="upload-mode",e.uploadTechnology="upload-technology",e.dragOverClassName="drag-over-class-name",e.dropZoneCssSelector="drop-zone-css-selector",e.customizeFormData="customize-form-data",e.visible="visible"}(hI||(hI={})),function(e){e[e.Instant=0]="Instant",e[e.OnButtonClick=1]="OnButtonClick"}(uI||(uI={})),function(e){e[e.Http=0]="Http",e[e.JsInterop=1]="JsInterop"}(pI||(pI={})),function(e){e[e.WaitingStart=0]="WaitingStart",e[e.PendingUpload=1]="PendingUpload",e[e.Uploading=2]="Uploading",e[e.Paused=3]="Paused",e[e.Complete=4]="Complete",e[e.Canceled=5]="Canceled",e[e.Error=6]="Error",e[e.Removing=7]="Removing"}(mI||(mI={})),function(e){e[e.MaxFileCountExceeded=0]="MaxFileCountExceeded",e[e.DragAndDropMultipleFiles=1]="DragAndDropMultipleFiles"}(gI||(gI={}));class CI{constructor(){this.guids=[],this.actions=[],this.reloadedFileGuids=[]}}class fI{constructor(e){this.FileName=e.fileInfo.name,this.FileSize=e.fileInfo.size,this.FileType=e.fileInfo.type,this.LastModified=e.fileInfo.lastModified,this.FileGuid=e.fileInfo.guid,this.Index=e.chunkIndex,this.TotalCount=e.totalChunkCount}}class vI{constructor(e,t,i){this._value=e,this._status=i.uploadMode===uI.Instant?mI.PendingUpload:mI.WaitingStart,this._chunkIndex=0,this._loadedBytes=0,this._totalChunkCount=0,this._isFileExtensionValid=vI.validateFileExtension(e,i),this._isMinSizeValid=vI.validateMinFileSize(e,i),this._isMaxSizeValid=vI.validateMaxFileSize(e,i),this._fileInfo={name:e.name,size:e.size,type:e.type,lastModified:1e4*e.lastModified+621355968e9,guid:t},this._request=null,this._onLoadStart=null,this._onProgress=null,this._onAbort=null,this._onPause=null,this._onError=null,this._onLoadEnd=null,this.isValid()||(this._status=mI.Error)}get value(){return this._value}get status(){return this._status}set status(e){this._status=e}get chunkIndex(){return this._chunkIndex}set chunkIndex(e){this._chunkIndex=e}get loadedBytes(){return this._loadedBytes}set loadedBytes(e){this._loadedBytes=e}get totalChunkCount(){return this._totalChunkCount}set totalChunkCount(e){this._totalChunkCount=e}get isFileExtensionValid(){return this._isFileExtensionValid}get isMinSizeValid(){return this._isMinSizeValid}get isMaxSizeValid(){return this._isMaxSizeValid}get fileInfo(){return this._fileInfo}get request(){return this._request}set request(e){this._request=e}get onLoadStart(){return this._onLoadStart}set onLoadStart(e){this._onLoadStart=e}get onProgress(){return this._onProgress}set onProgress(e){this._onProgress=e}get onAbort(){return this._onAbort}set onAbort(e){this._onAbort=e}get onError(){return this._onError}set onError(e){this._onError=e}get onLoadEnd(){return this._onLoadEnd}set onLoadEnd(e){this._onLoadEnd=e}isValid(){return this.isFileExtensionValid&&this.isMaxSizeValid&&this.isMinSizeValid}isUploadComplete(){return this.loadedBytes>=this.fileInfo.size}loadStart(){this.status!==mI.Uploading&&(this.status=mI.Uploading,this.onLoadStart&&this.onLoadStart.call(this))}progress(){this.onProgress&&this.onProgress.call(this)}loadEnd(){this.isUploadComplete()&&(this.status=mI.Complete,this.onLoadEnd&&this.onLoadEnd.call(this))}abort(e=!0){this.status!==mI.Canceled&&(this.status=mI.Canceled,this.request&&this.request.abort(),e&&this.onAbort&&this.onAbort.call(this),this.chunkIndex=0,this.loadedBytes=0)}error(e){this.status=mI.Error,this.onError&&this.onError.call(this,e)}static validateFileExtension(e,t){const i=t.allowedFileExtensions,n=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();if(0===i.length)return!0;for(let e=0;e<i.length;e++)if(n===i[e].toLowerCase())return!0;return!1}static validateMinFileSize(e,t){const i=t.minFileSize;return!(i>0)||e.size>=i}static validateMaxFileSize(e,t){const i=t.maxFileSize;return!(i>0)||e.size<=i}updateStatus(e,t){var i,n,s,r,o,a,l;switch(this.status=e,this.status){case mI.WaitingStart:case mI.PendingUpload:break;case mI.Uploading:null===(i=this.onLoadStart)||void 0===i||i.call(this);break;case mI.Paused:break;case mI.Complete:this.loadedBytes=this.value.size,null===(n=this.onLoadEnd)||void 0===n||n.call(this);break;case mI.Canceled:null===(s=this.onAbort)||void 0===s||s.call(this);break;case mI.Error:{const e=new EventTarget;e.status=null!==(r=null==t?void 0:t.status)&&void 0!==r?r:-1,e.statusText=null!==(o=null==t?void 0:t.statusText)&&void 0!==o?o:"Unexpected error",e.responseText=null!==(a=null==t?void 0:t.responseText)&&void 0!==a?a:"Unexpected error",null===(l=this.onError)||void 0===l||l.call(this,e);break}}}}class bI{constructor(e){this.control=e,this.requestMetadata=null}customizeFormData(e){return this.control.dispatchEvent(new dI(e)),Promise.resolve()}}class wI extends bI{constructor(e){super(e)}upload(e,t,i,n){if(!e)return Promise.reject();e.totalChunkCount||(e.chunkIndex=0,e.totalChunkCount=wI.calculateTotalChunkCount(e.fileInfo.size,t));const s=t.chunkSize*e.chunkIndex,r=e.value.slice(s,s+t.chunkSize);return this.requestMetadata={formData:new FormData,request:t,file:e,loadEnd:n},this.createFormData(t.name,r,e,i)}createFormData(e,t,i,n){var s,r;const o=new fI(i);return null===(s=this.requestMetadata)||void 0===s||s.formData.append(e,t),null===(r=this.requestMetadata)||void 0===r||r.formData.append("chunkMetadata",JSON.stringify(o)),this.control.customizeFormData||n||(n={}),n?this.onCustomizeChunkMetadataResponse(n):this.customizeFormData(o)}onCustomizeChunkMetadataResponse(e){return new Promise(((t,i)=>{if(null==this.requestMetadata)return void i();const{formData:n,request:s,file:r,loadEnd:o}=this.requestMetadata;if(r.status!==mI.Paused&&r.status!==mI.Canceled){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];n.append(t,i instanceof Object?JSON.stringify(i):i)}for(const e in s.requestData)Object.prototype.hasOwnProperty.call(s.requestData,e)&&n.append(e,s.requestData[e]);r.request=BI.sendRequest(n,{crossDomain:!1,url:s.uploadUrl,method:"POST",headers:s.requestHeaders,onAbort:()=>{r.abort(),i()},onProgress:()=>{},onError:e=>{e.target&&r.error(e.target),i()},onLoadStart:()=>{r.loadStart()},onLoad:e=>{if(e.target)if(200===e.target.status){const a=n.get(s.name);r.chunkIndex++,r.loadedBytes+=a.size,r.progress(),o(r).then(t,i).catch((()=>{i(),r.error(e.target)}))}else r.error(e.target),i()},onLoadEnd:null})}else i()}))}static calculateTotalChunkCount(e,t){let i=Math.trunc(e/t.chunkSize);return e%t.chunkSize>0&&i++,i}}class yI extends bI{constructor(e){super(e)}upload(e,t,i,n){return e?(this.requestMetadata={formData:new FormData,request:t,file:e,loadEnd:n},this.createFormData(t.name,e,i)):Promise.reject()}createFormData(e,t,i){var n;return null===(n=this.requestMetadata)||void 0===n||n.formData.append(e,t.value),this.onCustomizeChunkMetadataResponse(i||{})}onCustomizeChunkMetadataResponse(e){return new Promise(((e,t)=>{if(null==this.requestMetadata)return void t();const{formData:i,request:n,file:s,loadEnd:r}=this.requestMetadata;for(const e in n.requestData)Object.prototype.hasOwnProperty.call(n.requestData,e)&&i.append(e,n.requestData[e]);let o=!1;s.request=BI.sendRequest(i,{url:n.uploadUrl,method:"POST",headers:n.requestHeaders,crossDomain:!1,onProgress:e=>{o=!0,s.loadedBytes=e.loaded>s.fileInfo.size?s.fileInfo.size:e.loaded,s.progress()},onAbort:e=>{s.abort(),t()},onError:e=>{e.target&&s.error(e.target),t()},onLoadStart:e=>{s.loadStart()},onLoad:i=>{i.target&&(200===i.target.status?(o||(s.loadedBytes=s.fileInfo.size,s.progress()),r(s,i).then(e,t).catch((()=>{t(),s.error(i.target)}))):(s.error(i.target),t()))},onLoadEnd:null})}))}}class BI{static sendRequest(e,t){const i=new XMLHttpRequest;t.crossDomain=BI.isCrossDomain(t.url);const n=BI.getRequestHeaders(t);i.open(t.method,t.url,!0),t.onLoadStart&&(i.upload.onloadstart=t.onLoadStart),t.onLoad&&(i.onload=t.onLoad),t.onLoadEnd&&(i.upload.onloadend=t.onLoadEnd),t.onProgress&&(i.upload.onprogress=t.onProgress),t.onError&&(i.upload.onerror=t.onError),t.onAbort&&(i.upload.onabort=t.onAbort);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&n[e]&&i.setRequestHeader(e,n[e]);return i.send(e),i}static getRequestHeaders(e){const t=e.headers||{};return t.Accept=t.Accept||BI.getAcceptHeader(),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t}static getAcceptHeader(){return"*/*"}static isCrossDomain(e){let t=!1;const i=document.createElement("a"),n=document.createElement("a");i.href=window.location.href;try{n.href=e,n.href=n.href,t=i.protocol+"//"+i.host!=n.protocol+"//"+n.host}catch(e){t=!0}return t}}class EI{constructor(e){this.control=e,this.state=new II,this.indexMap=new Map,this.dispatchTimerId=-1,this.idleTimerId=-1}dispatch(e,t,i=null){const n=this.getFileIndex(t),s=new SI(n,e,t.loadedBytes,t.status);this.state.progressInfos.push(s),i&&this.state.errors.push(i),this.tryPerformDispatch()}forceDelayedDispatch(){-1!==this.dispatchTimerId&&clearTimeout(this.dispatchTimerId),this.performDispatch()}tryPerformDispatch(){if(-1===this.dispatchTimerId){let e=50;-1!==this.idleTimerId&&(clearTimeout(this.idleTimerId),this.idleTimerId=-1,e=200),this.dispatchTimerId=setTimeout((()=>this.performDispatch()),e)}}performDispatch(){this.dispatchTimerId=-1,this.control.dispatchEvent(new AI(this.state)),this.state=new II,this.indexMap.clear(),this.idleTimerId=setTimeout((()=>{this.idleTimerId=-1}),1e3)}cancelSendingOfLastEvent(){clearTimeout(this.dispatchTimerId),this.dispatchTimerId=-1}getFileIndex(e){let t=this.indexMap.get(e.fileInfo.guid);return void 0!==t||(t=this.state.fileGuids.length,this.state.fileGuids.push(e.fileInfo.guid),this.indexMap.set(e.fileInfo.guid,t)),t}}class II{constructor(){this.fileGuids=[],this.progressInfos=[],this.errors=[]}}class SI{constructor(e,t,i,n){this.index=e,this.type=t,this.loaded=i,this.status=n}}var xI,DI;!function(e){e[e.Started=0]="Started",e[e.Progress=1]="Progress",e[e.Uploaded=2]="Uploaded",e[e.Aborted=3]="Aborted",e[e.Error=4]="Error"}(xI||(xI={}));class FI{}FI.MainElement=he.Prefix+"-upload",FI.SelectButton=FI.MainElement+"-select-btn",function(e){e.accept="accept",e.multiple="multiple"}(DI||(DI={}));var TI=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TouchUtils=void 0;var i=function(){function e(){}return e.onEventAttachingToDocument=function(t,i){return!h.Browser.MacOSMobilePlatform||!e.isTouchEventName(t)||(e.documentTouchHandlers[t]||(e.documentTouchHandlers[t]=[]),e.documentTouchHandlers[t].push(i),e.documentEventAttachingAllowed)},e.isTouchEventName=function(e){return h.Browser.WebKitTouchUI&&(e.indexOf("touch")>-1||e.indexOf("gesture")>-1)},e.isTouchEvent=function(e){return h.Browser.WebKitTouchUI&&p.isDefined(e.changedTouches)},e.getEventX=function(e){return h.Browser.IE?e.pageX:e.changedTouches[0].pageX},e.getEventY=function(e){return h.Browser.IE?e.pageY:e.changedTouches[0].pageY},e.touchMouseDownEventName=h.Browser.WebKitTouchUI?"touchstart":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointerdown":"mousedown",e.touchMouseUpEventName=h.Browser.WebKitTouchUI?"touchend":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointerup":"mouseup",e.touchMouseMoveEventName=h.Browser.WebKitTouchUI?"touchmove":h.Browser.Edge&&h.Browser.MSTouchUI&&window.PointerEvent?"pointermove":"mousemove",e.msTouchDraggableClassName="dxMSTouchDraggable",e.documentTouchHandlers={},e.documentEventAttachingAllowed=!0,e}();t.TouchUtils=i}));t(TI);var HI=e((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EvtUtils=void 0;var i=function(){function e(){}return e.preventEvent=function(e){e.cancelable&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},e.getEventSource=function(t){return p.isDefined(t)?e.getEventSourceCore(t):null},e.getEventSourceByPosition=function(t){if(!p.isDefined(t))return null;if(!document.elementFromPoint)return e.getEventSourceCore(t);var i=e.getEventX(t)-(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollLeft():0),n=e.getEventY(t)-(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollTop():0);return void 0===i||void 0===n?e.getEventSourceCore(t):document.elementFromPoint(i,n)},e.getEventSourceCore=function(e){return e.srcElement?e.srcElement:e.target},e.getMouseWheelEventName=function(){return h.Browser.Safari?"mousewheel":h.Browser.NetscapeFamily&&h.Browser.MajorVersion<17?"DOMMouseScroll":"wheel"},e.isLeftButtonPressed=function(t){return!!TI.TouchUtils.isTouchEvent(t)||!!(t=h.Browser.IE&&p.isDefined(event)?event:t)&&(h.Browser.IE&&h.Browser.Version<11?!!h.Browser.MSTouchUI||t.button%2==1:h.Browser.WebKitFamily?"pointermove"===t.type||"pointerenter"===t.type||"pointerleave"===t.type?1===t.buttons:1===t.which:h.Browser.NetscapeFamily||h.Browser.Edge||h.Browser.IE&&h.Browser.Version>=11?e.isMoveEventName(t.type)?1===t.buttons:1===t.which:!h.Browser.Opera||0===t.button)},e.isMoveEventName=function(t){return t===TI.TouchUtils.touchMouseMoveEventName||t===e.getMoveEventName()},e.getMoveEventName=function(){return window.PointerEvent?"pointermove":h.Browser.TouchUI?"touchmove":"mousemove"},e.preventEventAndBubble=function(t){e.preventEvent(t),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},e.clientEventRequiresDocScrollCorrection=function(){return h.Browser.AndroidDefaultBrowser||h.Browser.AndroidChromeBrowser||!(h.Browser.Safari&&h.Browser.Version<3||h.Browser.MacOSMobilePlatform&&h.Browser.Version<5.1)},e.getEventX=function(t){return TI.TouchUtils.isTouchEvent(t)?TI.TouchUtils.getEventX(t):t.clientX+(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollLeft():0)},e.getEventY=function(t){return TI.TouchUtils.isTouchEvent(t)?TI.TouchUtils.getEventY(t):t.clientY+(e.clientEventRequiresDocScrollCorrection()?T.DomUtils.getDocumentScrollTop():0)},e.cancelBubble=function(e){e.cancelBubble=!0},e.getWheelDelta=function(e){var t;return t=h.Browser.NetscapeFamily&&h.Browser.MajorVersion<17?-e.detail:h.Browser.Safari?e.wheelDelta:-e.deltaY,h.Browser.Opera&&h.Browser.Version<9&&(t=-t),t},e}();t.EvtUtils=i}));t(HI);class UI extends Bs{constructor(){super(),this.DRAG_EVENT_DELTA=1,this.onInputChangeHandler=this.onFileInputChange.bind(this),this.onSelectButtonClickHandler=this.onSelectButtonClick.bind(this),this.onFilesDropHandler=this.onFilesDrop.bind(this),this.onFilesDragOverHandler=this.onFilesDragOver.bind(this),this.onFilesDragLeaveHandler=this.onFilesDragLeave.bind(this),this.acceptedFileTypes=null,this.allowedFileExtensions=[],this.externalSelectButtonCssSelector="",this.showEmbeddedSelectButton=!0,this.chunkSize=0,this.maxFileSize=0,this.minFileSize=0,this.maxFileCount=1e3,this.multiple=!1,this.uploadMode=uI.Instant,this.uploadTechnology=pI.Http,this.dragOverClassName="",this.dropZoneCssSelector="",this.customizeFormData=!1,this.visible=!1,this.files=new Map,this.progressDispatcher=new EI(this),this.recentlyAddedFilesStream=null}firstUpdated(e){super.firstUpdated(e),this.initEvents(),this.prepareInputElement()}initDotNetReference(e){this.dotnetHelper=e,this.dotnetHelper&&this.tryAttachSelectButtonClickHandler()}updateFileStatus(e,t,i){var n,s;null===(s=null===(n=this.files.get(e))||void 0===n?void 0:n.updateStatus)||void 0===s||s.call(n,t,i)}getFileBytes(e){var t;return null===(t=this.files.get(e))||void 0===t?void 0:t.value}getFileInput(){return this.querySelector("input")}getSelectButton(e){return null!=e||(e=this.externalSelectButtonCssSelector),e?document.querySelector(e):this.querySelector(`.${FI.SelectButton}`)}getDropZoneContainer(){return this.dropZoneCssSelector?document.querySelector(this.dropZoneCssSelector):null}initEvents(){this.getFileInput().addEventListener("change",this.onInputChangeHandler),this.dotnetHelper&&this.tryAttachSelectButtonClickHandler();const e=this.getDropZoneContainer();e&&(e.addEventListener("drop",this.onFilesDropHandler),e.addEventListener("dragover",this.onFilesDragOverHandler),e.addEventListener("dragleave",this.onFilesDragLeaveHandler))}tryAttachSelectButtonClickHandler(){var e;null===(e=this.getSelectButton())||void 0===e||e.addEventListener("click",this.onSelectButtonClickHandler)}tryDetachSelectButtonClickHandler(e){var t;null===(t=this.getSelectButton(e))||void 0===t||t.removeEventListener("click",this.onSelectButtonClickHandler)}prepareInputElement(){const e=this.getFileInput();this.multiple?e.setAttribute(DI.multiple,""):e.removeAttribute(DI.multiple),this.acceptedFileTypes&&e.setAttribute(DI.accept,this.acceptedFileTypes.join(","))}onFileInputChange(e){this.addFiles(this.createFileItems(this.getFileInput().files)),this.getFileInput().value=""}onSelectButtonClick(e){this.getFileInput().click()}onFilesDrop(e){e.preventDefault(),this.addFiles(this.createFileItems(this.getFileFromDataTransfer(e.dataTransfer))),this.tryRemoveExternalDropZoneDragOverClass(e,!0)}onFilesDragOver(e){const t=this.getDropZoneContainer();this.dragOverClassName&&t&&T.DomUtils.addClassName(t,this.dragOverClassName),e.preventDefault()}onFilesDragLeave(e){e.preventDefault(),this.tryRemoveExternalDropZoneDragOverClass(e)}tryRemoveExternalDropZoneDragOverClass(e,t=!1){const i=this.getDropZoneContainer();this.dragOverClassName&&i&&(t||!this.isMouseOverElement(e,i,-this.DRAG_EVENT_DELTA))&&T.DomUtils.removeClassName(i,this.dragOverClassName)}isMouseOverElement(e,t,i=this.DRAG_EVENT_DELTA){if(!t)return!1;const n=this.getOffset(t).left,s=this.getOffset(t).top,r=t.offsetWidth,o=t.offsetHeight,a=HI.EvtUtils.getEventX(e),l=HI.EvtUtils.getEventY(e);return a+i>=n&&a-i<n+r&&l+i>=s&&l-i<s+o}getOffset(e){if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect(),i=e.ownerDocument.documentElement;return{top:t.top+window.scrollY-i.clientTop,left:t.left+window.scrollX-i.clientLeft}}raiseErrorOccurred(e){this.dispatchEvent(new cI(e))}createFileItems(e){if(!e)return[];const t=[],i=this.getAllowedFileTypes();for(let n=0,s=e[n];s;n++,s=e[n]){const r=new vI(s,this.getUUID4(),this);r.isValid()&&i&&!this.isFileTypeAllowed(e[n],i)||t.push(r)}return t}isFileTypeAllowed(e,t){return t.some((function(t){if("."===t[0]){if(t=t.replace(".","\\."),e.name.match(new RegExp(t+"$","i")))return!0}else if(t=t.replace("*",""),e.type.match(new RegExp(t,"i")))return!0}))}addFiles(e){this.dotnetHelper&&0!==e.length&&(this.maxFileCount>0&&this.files.size+e.length>this.maxFileCount?this.raiseErrorOccurred(gI.MaxFileCountExceeded):(e.forEach((e=>this.files.set(e.fileInfo.guid,e))),this.registerFileInfos(e)))}registerFileInfos(e){var t;this.recentlyAddedFilesStream=(new TextEncoder).encode(JSON.stringify(this.getFileInfosCollection(e))),null===(t=this.dotnetHelper)||void 0===t||t.invokeMethodAsync("RegisterAddedFiles",this.recentlyAddedFilesStream.length)}getRecentlyAddedFileInfosStream(){return this.recentlyAddedFilesStream}getFileFromDataTransfer(e){const t=[];if(e)if(e.items){if(!this.multiple&&this.files.size+e.items.length>1)return this.raiseErrorOccurred(gI.DragAndDropMultipleFiles),null;for(let i=0,n=e.items[i];n;i++,n=e.items[i])if("file"===n.kind){const e=n.getAsFile();e&&t.push(e)}}else for(let i=0,n=e.files[i];n;i++,n=e.files[i])t.push(n);return t}getFileInfosCollection(e){return e.map(this.createFileViewInfo)}createFileViewInfo(e){return{name:e.fileInfo.name,size:e.fileInfo.size,type:e.fileInfo.type,lastModified:e.fileInfo.lastModified,guid:e.fileInfo.guid,loadedBytes:e.loadedBytes,status:e.status,isFileExtensionValid:e.isFileExtensionValid,isMinSizeValid:e.isMinSizeValid,isMaxSizeValid:e.isMaxSizeValid}}getAllowedFileTypes(){return this.acceptedFileTypes&&this.acceptedFileTypes.length>0?this.acceptedFileTypes.map((e=>e.trim())):null}getUUID4(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[8]&=63,e[8]|=128,e[6]&=15,e[6]|=64;let t=0;return"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX".replace(/XX/g,(()=>e[t++].toString(16).padStart(2,"0")))}reloadFile(e,t){if(e.status===mI.Canceled&&t){const i=this.createFileItems([e.value])[0];i.status=mI.PendingUpload,i.fileInfo.guid=t,this.files=UI.replaceFileInFilesMap(this.files,e.fileInfo.guid,i)}}static replaceFileInFilesMap(e,t,i){const n=new Map;for(const s of e.values()){const e=s.fileInfo.guid===t?i:s;n.set(e.fileInfo.guid,e)}return n}attachEventsToFileItem(e){e.onLoadStart||(e.onLoadStart=()=>{this.fileUploadStarted(e)}),e.onProgress||(e.onProgress=()=>{this.fileProgress(e)}),e.onAbort||(e.onAbort=()=>{this.fileUploadAborted(e)}),e.onError||(e.onError=t=>{this.fileUploadError(e,t.status,t.statusText,t.responseText)}),e.onLoadEnd||(e.onLoadEnd=()=>{this.fileUploaded(e)})}fileUploadStarted(e){this.progressDispatcher.dispatch(xI.Started,e)}fileUploaded(e){this.progressDispatcher.dispatch(xI.Uploaded,e)}fileUploadAborted(e){this.progressDispatcher.dispatch(xI.Aborted,e)}fileProgress(e){e.status!==mI.WaitingStart&&e.status!==mI.PendingUpload&&e.status!==mI.Uploading||this.progressDispatcher.dispatch(xI.Progress,e)}fileUploadError(e,t,i,n){this.progressDispatcher.dispatch(xI.Error,e,{status:t,statusText:i,responseText:n})}processUploadedFilesOptions(e){this.updateFileStates(e),this.processUploadedFilesOptionsCore(e)}updateFileStates(e){var t;for(const i of e){const e=this.files.get(null!==(t=i.beforeReloadGuid)&&void 0!==t?t:i.fileGuid);e&&(e.status!==i.status&&this.changeStatus(e,i.status,i.fileGuid))}}createActionRequest(e){const t=new CI,i=new Map;return e.forEach((e=>{const n=e.file.fileInfo.guid;let s=i.get(n);void 0===s&&(s=t.guids.length,t.guids.push(n),i.set(n,s)),t.actions.push(e.action,s),e.action===mI.PendingUpload&&e.newReloadedFile&&t.reloadedFileGuids.push(e.newReloadedFile.fileInfo.guid)})),t}changeStatus(e,t,i){switch(t){case mI.PendingUpload:this.reloadFile(e,i);break;case mI.Paused:e.status=mI.Paused;break;case mI.Canceled:this.progressDispatcher.cancelSendingOfLastEvent(),e.abort(!1);break;case mI.Removing:this.progressDispatcher.cancelSendingOfLastEvent(),e.abort(!1),this.files.delete(e.fileInfo.guid);break;default:throw new Error("Status not supported.")}}update(e){super.update(e);const t=e.has("showEmbeddedSelectButton"),i=e.has("externalSelectButtonCssSelector"),n=e.has("visible");this.dotnetHelper&&(t||i||n)&&this.tryDetachSelectButtonClickHandler(e.get("externalSelectButtonCssSelector"))}updated(e){(e.has("acceptedFileTypes")||e.has("multiple"))&&this.prepareInputElement();const t=e.has("showEmbeddedSelectButton")&&this.showEmbeddedSelectButton,i=e.has("externalSelectButtonCssSelector")&&this.externalSelectButtonCssSelector,n=e.has("visible");this.dotnetHelper&&(t||i||n)&&this.tryAttachSelectButtonClickHandler()}disconnectedCallback(){super.disconnectedCallback(),this.tryDetachSelectButtonClickHandler()}showFileSelectorDialog(){var e;null===(e=this.getFileInput())||void 0===e||e.click()}}function PI(e,t){var i,n;null===(n=null===(i=NI(e))||void 0===i?void 0:i.initDotNetReference)||void 0===n||n.call(i,t)}function QI(e){var t;return(null===(t=NI(e))||void 0===t?void 0:t.getRecentlyAddedFileInfosStream())||null}function NI(e){return e.isConnected?e:null}C([ln({attribute:hI.acceptedFileTypes,type:Array})],UI.prototype,"acceptedFileTypes",void 0),C([ln({attribute:hI.allowedFileExtensions,type:Array})],UI.prototype,"allowedFileExtensions",void 0),C([ln({attribute:hI.externalSelectButtonCssSelector})],UI.prototype,"externalSelectButtonCssSelector",void 0),C([ln({attribute:hI.showEmbeddedSelectButton,type:Boolean})],UI.prototype,"showEmbeddedSelectButton",void 0),C([ln({attribute:hI.chunkSize,type:Number})],UI.prototype,"chunkSize",void 0),C([ln({attribute:hI.maxFileSize,type:Number})],UI.prototype,"maxFileSize",void 0),C([ln({attribute:hI.minFileSize,type:Number})],UI.prototype,"minFileSize",void 0),C([ln({attribute:hI.maxFileCount,type:Number})],UI.prototype,"maxFileCount",void 0),C([ln({attribute:hI.multiple,type:Boolean})],UI.prototype,"multiple",void 0),C([ln({attribute:hI.uploadMode,type:Number})],UI.prototype,"uploadMode",void 0),C([ln({attribute:hI.uploadTechnology,type:Number})],UI.prototype,"uploadTechnology",void 0),C([ln({attribute:hI.dragOverClassName})],UI.prototype,"dragOverClassName",void 0),C([ln({attribute:hI.dropZoneCssSelector})],UI.prototype,"dropZoneCssSelector",void 0),C([ln({attribute:hI.customizeFormData,type:Boolean})],UI.prototype,"customizeFormData",void 0),C([ln({attribute:hI.visible,type:Boolean})],UI.prototype,"visible",void 0);customElements.define("dxbl-upload",class extends UI{constructor(){super(),this.uploaders=new Map,this.uploadPromises=new Set,this.pendingFiles=new Array}processUploadedFilesOptionsCore(e){for(const t of e)t.status===mI.PendingUpload&&t.uploadStartOptions&&this.onUploadStartCallback(t.uploadStartOptions,t.customFormDataOptions)}onUploadStartCallback(e,t){const{guid:i,requestJSOptions:n}=e,s=this.files.get(i);s&&(this.attachEventsToFileItem(s),n?this.uploadTechnology!==pI.Http||n.uploadUrl?this.startUpload(s,n,(null==t?void 0:t.customData)||{}):s.error(new EventTarget):s.abort())}startUpload(e,t,i){e.status=mI.PendingUpload,this.scheduleUpload(e,t,i)}handleUploadError(e,t){var i;e&&e.status&&e.statusText&&e.responseText&&(null===(i=t.onError)||void 0===i||i.call(t,e))}scheduleUpload(e,t,i){if(this.uploadPromises.size<10){const n=this.uploadFileCore(e,t,i);this.uploadPromises.add(n),n.catch((t=>this.handleUploadError(t,e))).finally((()=>{this.onAfterUpload(n)}))}else this.pendingFiles.push({file:e,requestOptions:t,customData:i})}onAfterUpload(e){if(this.uploadPromises.delete(e),this.pendingFiles.length>0){const e=this.pendingFiles.shift(),t=e.file,i=this.uploadFileCore(t,e.requestOptions,e.customData);this.uploadPromises.add(i),i.catch((e=>this.handleUploadError(e,t))).finally((()=>{this.onAfterUpload(i)}))}}getUploadStrategy(e){const t=this.chunkSize>0?new wI(this):new yI(this),i=this.uploaders.get(e.fileInfo.guid);return(i!==t&&e.status!==mI.Uploading||!i)&&this.uploaders.set(e.fileInfo.guid,t),this.uploaders.get(e.fileInfo.guid)}uploadFileCore(e,t,i){return this.getUploadStrategy(e).upload(e,t,i,(e=>(e.loadEnd(),e.isUploadComplete()||e.status!==mI.Uploading?Promise.resolve():this.uploadFileCore(e,t,null))))}onCustomizeFormDataCallback(e){var t;const i=e.fileGuid;null===(t=this.uploaders.get(i))||void 0===t||t.onCustomizeChunkMetadataResponse(e.customData),this.uploaders.delete(i)}});const RI={initDotNetReference:PI,getRecentlyAddedFileInfosStream:QI};customElements.define("dxbl-file-input",class extends UI{processUploadedFilesOptionsCore(e){var t;const i=e.filter((e=>e.status===mI.PendingUpload&&e.uploadStartOptions));for(const e of i){const t=this.files.get(e.fileGuid);t&&(this.attachEventsToFileItem(t),t.loadStart())}const n=i.map((e=>e.fileGuid));n.length&&(null===(t=this.dotnetHelper)||void 0===t||t.invokeMethodAsync("UploadFileViaJsInterop",n))}});const LI={initDotNetReference:PI,getFileBytes:function(e,t){var i,n;return null===(n=null===(i=NI(e))||void 0===i?void 0:i.getFileBytes)||void 0===n?void 0:n.call(i,t)},updateFileStatus:function(e,t,i,n){var s;null===(s=NI(e))||void 0===s||s.updateFileStatus(t,i,n)},getRecentlyAddedFileInfosStream:QI};class MI extends kd{constructor(){super(MI.eventName)}}MI.eventName=cy.Carousel+".swipe-start";class kI extends CustomEvent{constructor(e){super(kI.eventName,{detail:new KI(e),bubbles:!0,composed:!0,cancelable:!0})}}kI.eventName=cy.Carousel+".swipe-end";class KI{constructor(e){this.Direction=e}}class OI extends CustomEvent{constructor(e){super(OI.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}OI.eventName=cy.Carousel+".mouse-scroll";class _I extends CustomEvent{constructor(e){super(_I.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}}_I.eventName=cy.Carousel+".shortcut",mt.register(MI.eventName,(e=>e.detail)),mt.register(kI.eventName,(e=>e.detail)),mt.register(OI.eventName,(e=>{const t=e.detail;return{DeltaX:t.deltaX,DeltaY:t.deltaY,DeltaZ:t.deltaZ,DeltaMode:t.deltaMode}})),mt.register(_I.eventName,(e=>{const t=e.detail;return{Key:t.key,Code:t.code,CtrlKey:t.ctrlKey,AltKey:t.altKey,ShiftKey:t.shiftKey,MetaKey:t.metaKey}}));const VI="none";var zI;!function(e){e[e.None=0]="None",e[e.Touch=1]="Touch",e[e.TouchAndPointer=2]="TouchAndPointer"}(zI||(zI={}));let WI=class extends Bs{get content(){return this.querySelector(".dxbl-carousel-content")}constructor(){super(),this.width=0,this.swipingStart=new Ze(0,0),this.isSwiping=!1,this.lastWheelExecutionTime=null,this.gestureCover=null,this.keyDownHandler=this.onKeyDown.bind(this),this.mouseWheelHandler=this.onMouseWheel.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.pointerDownHandler=this.onPointerDown.bind(this),this.stopSwipingHandler=this.stopSwiping.bind(this),this.cancelSwipingHandler=this.cancelSwiping.bind(this),this.performSwipingHandler=this.performSwiping.bind(this),this.allowMouseWheel=!1,this.animation="",this.activeIndex=-1,this.displayIndex=-1,this.loop=!1,this.swipeMode=zI.Touch,this.resizeObserver=new ResizeObserver((e=>{for(const t of e)this.width=t.contentRect.width}))}moveNext(e=this.animation){var t;if(this.setTransition(e),this.activeIndex===this.displayIndex){const e=this.getTransform(this.activeIndex);this.content&&this.content.style.transform!==e&&this.applyTransform(e)}else{const e=this.getTransform(this.displayIndex);if(this.content&&this.content.style.transform!==e){const i=this.activeIndex;this._moveFast=()=>{var e,t;null===(e=this.content)||void 0===e||e.removeEventListener("transitionend",this._moveFast),this.setTransition(VI),this.applyTransform(this.getTransform(i)),null===(t=this.content)||void 0===t||t.getBoundingClientRect(),this._moveFast=void 0},null===(t=this.content)||void 0===t||t.addEventListener("transitionend",this._moveFast),this.applyTransform(e)}}}createRenderRoot(){return this}updated(e){super.updated(e),e.has("loop")?this.moveNext(VI):e.has("activeIndex")&&(this._moveFast&&this._moveFast(),this.moveNext())}connectedOrContentChanged(){super.connectedOrContentChanged(),this.applyTransform(this.getTransform(this.activeIndex))}connectedCallback(){this.addEventListener("pointerdown",this.pointerDownHandler),this.addEventListener("wheel",this.mouseWheelHandler),this.addEventListener("keydown",this.keyDownHandler),super.connectedCallback(),this.resizeObserver.observe(this)}disconnectedCallback(){var e;this.removeEventListener("pointerdown",this.pointerDownHandler),this.removeEventListener("wheel",this.mouseWheelHandler),this.removeEventListener("keydown",this.keyDownHandler),super.disconnectedCallback(),null===(e=this.resizeObserver)||void 0===e||e.unobserve(this)}onKeyDown(e){if(e.target!==this)return;const t=Be.KeyUtils.getEventKeyCode(e);t!==Be.KeyCode.Left&&t!==Be.KeyCode.Right&&t!==Be.KeyCode.Space||(e.preventDefault(),this.dispatchEvent(new _I(e)))}onMouseWheel(e){if(this.allowMouseWheel){e.preventDefault();const t=new Date;if(this.lastWheelExecutionTime&&t.getTime()-this.lastWheelExecutionTime.getTime()<100)return;this.lastWheelExecutionTime=t,this.dispatchEvent(new OI(e))}}onPointerDown(e){if(0!==e.button)return;if(this.swipeMode===zI.None)return;const t="touch"===e.pointerType;if(this.swipeMode===zI.Touch&&!t)return;const i=e.target;if(i&&(this.content.contains(i)||i.classList.contains("dxbl-carousel-substrate-button"))){if(i instanceof HTMLElement&&(i.isContentEditable||i.hasAttribute("contenteditable"))||i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement||i instanceof HTMLSelectElement){if(!t)return;if(document.activeElement===i)return}this.onStartSwiping(e.clientX,e.clientY)}}onStartSwiping(e,t){this.swipingStart=new Ze(e,t),document.addEventListener("pointermove",this.performSwipingHandler),document.addEventListener("pointerup",this.stopSwipingHandler),document.addEventListener("pointercancel",this.cancelSwipingHandler),document.addEventListener("touchmove",this.touchMoveHandler,{passive:!1})}stopSwiping(e){this.onStopSwiping(e.clientX)}cancelSwiping(e){this.onStopSwiping(this.swipingStart.x)}onStopSwiping(e){var t;if(this.isSwiping){const i=e-this.swipingStart.x,n=this.width/3,s=Math.abs(i)<n?0:Math.sign(i);this.setTransition(this.animation),(0===s||1===s&&!this.loop&&0===this.activeIndex||-1===s&&!this.loop&&this.activeIndex===this.content.childElementCount-1)&&this.applyTransform(this.getTransform(this.activeIndex)),null===(t=this.gestureCover)||void 0===t||t.remove(),this.isSwiping=!1,this.dispatchEvent(new kI(s))}this.swipingStart=new Ze(0,0),document.removeEventListener("pointermove",this.performSwipingHandler),document.removeEventListener("pointerup",this.stopSwipingHandler),document.removeEventListener("pointercancel",this.cancelSwipingHandler),document.removeEventListener("touchmove",this.touchMoveHandler)}onTouchMove(e){if(!e.cancelable)return;const t=Math.abs(e.touches[0].clientX-this.swipingStart.x);t>Math.abs(e.touches[0].clientY-this.swipingStart.y)&&t>5&&e.preventDefault()}performSwiping(e){this.isSwiping||(this.isSwiping=!0,this.setTransition(VI),this.gestureCover=document.createElement("div"),this.gestureCover.classList.add("dxbl-gesture-cover"),this.appendChild(this.gestureCover),this.dispatchEvent(new MI));this.applyTransform(this.getTransform(this.activeIndex,e.clientX-this.swipingStart.x))}getTransform(e,t=0){return`translateX(${-100*e+(0===t?0:Math.min(100,Math.max(-100,Math.round(t/this.width*100))))}%)`}applyTransform(e){this.content&&(this.content.style.transform=e)}setTransition(e){this.content&&(this.content.style.transition=e)}};C([ln({attribute:"allow-mouse-wheel",type:Boolean})],WI.prototype,"allowMouseWheel",void 0),C([ln({attribute:"animation",type:String})],WI.prototype,"animation",void 0),C([ln({attribute:"active-index",type:Number})],WI.prototype,"activeIndex",void 0),C([ln({attribute:"display-index",type:Number})],WI.prototype,"displayIndex",void 0),C([ln({attribute:"loop",type:Boolean})],WI.prototype,"loop",void 0),C([ln({attribute:"swipe-mode",type:zI,converter:bE(zI)})],WI.prototype,"swipeMode",void 0),WI=C([rn(cy.Carousel)],WI);let $I=class extends Bs{constructor(){super(...arguments),this._focusInHandler=this.focusIn.bind(this),this._focusOutHandler=this.focusOut.bind(this),this.focusLoop=!1}disconnectedCallback(){super.disconnectedCallback(),this.focusLoop&&this.removeFocusTrapEvents()}updated(e){super.updated(e),e.has("focusLoop")&&this.onFocusLoopUpdated()}onFocusLoopUpdated(){this.focusLoop?(this.addFocusTrapEvents(),this.contains(document.activeElement)&&this.activateFocusTrap()):(this.removeFocusTrapEvents(),this.deactivateFocusTrap())}addFocusTrapEvents(){this.addEventListener("focusin",this._focusInHandler),this.addEventListener("focusout",this._focusOutHandler)}removeFocusTrapEvents(){this.removeEventListener("focusin",this._focusInHandler),this.removeEventListener("focusout",this._focusOutHandler)}focusIn(e){this.contains(e.relatedTarget)||this.activateFocusTrap()}focusOut(e){this.contains(e.relatedTarget)||this.contains(document.activeElement)||this.deactivateFocusTrap()}activateFocusTrap(){kr.activate(this,!0,!0,!1)}deactivateFocusTrap(){kr.deactivate(this,!1)}};C([ln({type:Boolean,attribute:"focus-loop"})],$I.prototype,"focusLoop",void 0),$I=C([rn(cy.DrawerPanel)],$I);class GI{constructor(e){this.eventTokens=[],this.context=e}attachEventWithContext(e,t,i,n){if(!this.eventTokens||!n||!e)return{item:null,name:null,delegate:null,dispose:()=>{}};const s=i.bind(n);e.addEventListener(t,s);const r={item:e,name:t,delegate:s,dispose:()=>{this.detachEvent(r)}};return this.eventTokens.push(r),r}attachEvent(e,t,i){return this.attachEventWithContext(e,t,i,this.context)}detachEvent(e){if(!this.eventTokens)return null;if(!(e&&e.item&&e.name&&e.delegate))return!1;const t=this.eventTokens.indexOf(e);return t>=0&&(e.item.removeEventListener(e.name,e.delegate),this.eventTokens.splice(t,1),e.item=null,e.delegate=null,e.dispose=()=>{},!0)}dispose(){return!!this.eventTokens&&(this.eventTokens.forEach((function(e){e.item&&e.name&&e.delegate&&(e.item.removeEventListener(e.name,e.delegate),e.item=null,e.delegate=null,e.dispose=()=>{})})),this.eventTokens=[],!0)}}const qI="is-animating",XI="data-items-container";var YI;!function(e){e.None="None",e.Slide="Slide"}(YI||(YI={}));let JI=class extends Bs{constructor(){super(),this.isAnimating=!1,this.mutationObserver=null,this._expandedState="False",this._previousNodeCount=null,this._getNodeCount=e=>{var t;return e?this.childElementCount:(null===(t=this.firstElementChild)||void 0===t?void 0:t.childElementCount)||null},this.animationType=YI.None,this.expanded=!1,this.events=new GI(this),this.isRendered=!1,this._expandedState="False"}connectedCallback(){super.connectedCallback(),this.isRendered=!0,this.expanded||this.setElementVisibility(!1)}disconnectedCallback(){super.disconnectedCallback(),this.isRendered=!1}set expandedState(e){const t=this._expandedState;this._expandedState=e,this.expanded="True"===e,this.requestUpdate("expandedState",t),this.isRendered||"True"!==e?this.onExpandedChanged():this.notifyActualExpandedChanged()}get expandedState(){return this._expandedState}onExpandedChanged(){this.applyExpandedStateToElements()}notifyActualExpandedChanged(){this.dispatchEvent(new Event("change",{bubbles:!0}))}get value(){return this.expandedState}applyExpandedStateToElements(){var e,t,i,n;const s=this.expanded;if(this.animationType===YI.None)return this.notifyActualExpandedChanged(),void this.setContainerElementVisibility(s);const r=null===(e=this.firstElementChild)||void 0===e?void 0:e.hasAttribute(XI),o=this._getNodeCount(!r);if(s){if(0===this.childElementCount)return void this.waitForContent(this);if((null===(t=this.firstElementChild)||void 0===t?void 0:t.hasAttribute(XI))&&!o)return void this.waitForContent(this.firstElementChild)}if(s&&this.firstElementChild&&(this._previousNodeCount===o||!r)&&(null===(i=this.mutationObserver)||void 0===i||i.disconnect(),r&&!o))return;this._previousNodeCount=this._getNodeCount(!r);const a=this.token,l=s&&!a?0:this.getContainerStartHeight(s);this.toggleAttribute(qI,!1),a&&(this.style.maxHeight=l+"px");const A=this.getContainerEndHeight(s);if(null===(n=this.token)||void 0===n||n.dispose(),this.token=null,this.prepareElementsForAnimation(s,0,!!a),l!==A){const e=()=>{this.onAnimationComplete(),this.token.dispose(),this.token=null};this.startAnimation(l,A,(()=>{e()}))}else this.onAnimationComplete()}waitForContent(e){var t;null===(t=this.mutationObserver)||void 0===t||t.disconnect(),this.mutationObserver=new MutationObserver((e=>{this.applyExpandedStateToElements()})),this.mutationObserver.observe(e,{childList:!0})}setContainerElementVisibility(e){this.setElementVisibility(e)}setElementVisibility(e){e?(this.style.display="",this.style.height=""):(this.style.display="none",this.style.height="0px")}getContainerStartHeight(e){return e?this.getClearClientHeight():this.offsetHeight}getContainerEndHeight(e){if(!e)return 0;const t=this.getClearClientHeight(),i=this.getElementVisibility(!1);this.style.maxHeight="",this.setElementVisibility(!0);const n=this.getClearClientHeight();return this.setElementVisibility(i),this.style.maxHeight=t+"px",n}prepareElementsForAnimation(e,t,i){if(this.style.overflow="hidden",e)this.setContainerElementVisibility(!0),this.style.maxHeight=(i?0:this.getClearClientHeight())+"px";else{const e=this.offsetHeight+t;e>=0&&this.setOffsetHeight(e,null)}}getClearClientHeight(){return this.offsetHeight}getElementVisibility(e){if(e){const e=T.DomUtils.getCurrentStyle(this);if(e)return"none"!==e.display}return"none"!==this.style.display}setOffsetHeight(e,t){t||(t=T.DomUtils.getCurrentStyle(this));let i=e-T.DomUtils.pxToInt(t.marginTop)-T.DomUtils.pxToInt(t.marginBottom);i-=Vt(this,t),i>-1&&(this.style.maxHeight=i+"px")}startAnimation(e,t,i){this.isAnimating=!0,e!==t?(this.token=this.events.attachEvent(this,"transitionend",i),$t((()=>{this.isAnimating&&(this.toggleAttribute(qI,!0),setTimeout((()=>this.style.maxHeight=t+"px")))}))):i()}onAnimationComplete(){this.toggleAttribute(qI,!1),this.setContainerElementVisibility(this.expanded),jt((()=>{this.style.overflow="",this.style.maxHeight=""})),this.notifyActualExpandedChanged(),this.checkChildContent()}checkChildContent(){if(!this.expanded&&0!==this.childElementCount&&null!==this.firstElementChild&&this.firstElementChild.hasAttribute(XI)){const e=this.querySelectorAll(" ul[data-items-container]");if(!e)return;for(let t=0;t<e.length;t+=1)e[t].style.overflowY="hidden"}}};C([ln({type:String,attribute:"expanded-state"})],JI.prototype,"expandedState",null),C([ln({type:YI,attribute:"animation-type"})],JI.prototype,"animationType",void 0),C([An()],JI.prototype,"expanded",void 0),JI=C([rn(cy.ExpandableContainer)],JI);class jI{}var ZI;jI.Root=he.Prefix+"-fl",jI.Loading=jI.Root+"-loading",jI.RowBreak=jI.Root+"-row-break",jI.Group=jI.Root+"-group",jI.GroupBody=jI.Group+"-body",jI.GroupDecoration=jI.Root+"-gd",jI.GroupTab=jI.Root+"-gt",jI.GroupHeaderTemplate=jI.Root+"-group-header-tmpl",jI.Item=jI.Root+"-item",jI.TabItem=jI.Root+"-tab-item",jI.Caption=jI.Root+"-cpt",jI.EmptyCaption=jI.Root+"-empty-caption",jI.BeginRow=jI.Root+"-begin-row",jI.TabContent=jI.Root+"-tab-content",jI.ItemContentWithCaption=jI.Root+"-ctrl",jI.ItemContentWithoutCaption=jI.Root+"-ctrl-nc",jI.ItemHorizontal=jI.Root+"-item-horizontal",jI.HeaderContentTemplate=jI.Root+"-header-content-tmpl",jI.CaptionTemplate=jI.Root+"-caption-tmpl",jI.ItemCaptionWidthCalculation=jI.Root+"-calc",jI.Row=he.Prefix+"-row",function(e){e.v4="v4",e.v5="v5"}(ZI||(ZI={}));const eS={};function tS(e){!function(e,t,i){const n=eS[e]||(eS[e]=T.DomUtils.getCurrentStyle(document.body).getPropertyValue(e)||t);if(n){const e=Ut();e&&e.insertRule("@media (min-width: "+n+") {\n"+i+"\n}\n",e.cssRules.length)}}("--breakpoint-lg","992px",e)}var iS,nS;!function(e){e[e.None=0]="None",e[e.InGroups=1]="InGroups",e[e.All=2]="All"}(iS||(iS={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(nS||(nS={}));const sS=` > .${jI.Caption}`,rS=e=>`${cy.FormLayoutItem}[fl-id=${e}].${jI.Item}.${jI.ItemHorizontal}`,oS=/\./g;class aS extends Bs{constructor(){super(...arguments),this.captionAlignment=iS.InGroups}get itemSelector(){return` > .${jI.Row} > ${rS(this.mainElementId)}`}get mainElementId(){return this.id}getMainElement(){return document.getElementById(this.mainElementId)}calculateAdaptivityCssRules(){}startCalculationItems(e){const t=this.querySelectorAll(`:scope${` .${e}`}[fl-id=${this.mainElementId}]`);for(let e=0;e<t.length;e++)t[e].calculateAdaptivityCssRules()}updateGroups(){this.startCalculationItems(jI.Group)}updateTabs(){this.startCalculationItems(jI.TabContent)}createAdaptivityCssRules(){var e;let t=0;T.DomUtils.addClassName(this,jI.ItemCaptionWidthCalculation);const i=` .${jI.Group}[fl-id=${this.mainElementId}] .${jI.GroupBody}[expanded-state=False]`,n=null===(e=this.getMainElement())||void 0===e?void 0:e.querySelectorAll(`:scope${i}`),s=e=>{for(let t=0;t<(null==n?void 0:n.length);t++)n[t].style.display=e?"":"none",n[t].style.visibility=e?"hidden":""};s(!0);const r=this.findCaptions();r&&r.length>0&&(t=this.getMaxCaptionWidth(r),this.createAdaptivityCssRulesForElements(t)),s(!1),T.DomUtils.removeClassName(this,jI.ItemCaptionWidthCalculation)}findCaptions(){return[...this.querySelectorAll(`:scope${this.itemSelector}${sS}`)]}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!1,!1)}getMaxCaptionWidth(e){let t=0;if(e.length>0){const i=e.find((e=>e.classList.contains(jI.EmptyCaption)));let n="0 px";i&&(n=window.getComputedStyle(i,null).getPropertyValue("height"));for(let i=0;i<e.length;i++){const s=e[i].offsetWidth;this.isEmptyCaption(e[i])&&(e[i].style.height=n);const r=e[i].parentNode;r&&s>t&&s<r.offsetWidth&&(t=s)}}return t>0?t+1:0}isEmptyCaption(e){return e.classList.contains(jI.EmptyCaption)}getFilteredElements(e){return function(e,t){const i=[];for(let n=0;n<e.length;n++){const s=e[n];t&&!t(s)||i.push(s)}return i}(e,(e=>Nt(e,jI.Root)===this))}encodeDotsForMediaQuiery(e){return e.replace(oS,"\\$&")}getAdaptivityCssRulesPrefix(){const e=this.getMainElement();if(!e)return null;let t=`.${jI.Root}`,i=e;for(;i;)t=" #"+this.encodeDotsForMediaQuiery(i.id)+t,i=Nt(i.parentNode,jI.Root);t.slice(1);let n="",s=this;for(;s&&s!==e&&e.contains(s);)s.id&&(n=" #"+this.encodeDotsForMediaQuiery(s.id)+n),s=Nt(s.parentNode,jI.Group);return t+=n,t}createCssRulesForElementsInternal(e,t,i){if(0===e)return;this.itemCaptionWidth=e;const n=this.getAdaptivityCssRulesPrefix(),s=this.captionAlignment===iS.InGroups?this.itemSelector:` ${rS(this.mainElementId)}`;let r=n+s+`${sS} {\n width:`+e+"px;\n}\n";r+=n+s+` > .${jI.ItemContentWithCaption}:not(img):not(.${jI.EmptyCaption} + .${jI.ItemContentWithCaption}):not(.${jI.ItemContentWithoutCaption}) {\n width: calc(100% - `+e+"px);\n}\n",tS(r)}}C([ln({attribute:"caption-alignment",type:iS,converter:bE(iS)})],aS.prototype,"captionAlignment",void 0);class lS extends aS{constructor(){super(),this._enchancedCallback=()=>{},this._calculationProcess=null,this.sizeMode=nS.Medium,this._isRendered=!1,this._mutationObserver=new MutationObserver((e=>{this.itemVisibilityChangeHandler(e)})),this._enchancedCallback=()=>this.calculateAdaptivityCssRules(),this._formSizeObserver=new ResizeObserver(this.calculateAdaptivityCssRules.bind(this))}needReasignAttributes(){return!1}connectedCallback(){var e;super.connectedCallback(),(null===(e=window.Blazor)||void 0===e?void 0:e.addEventListener)&&window.Blazor.addEventListener("enhancedload",this._enchancedCallback),this._mutationObserver.observe(this,{childList:!0,subtree:!0}),this._formSizeObserver.observe(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this._isRendered=!1,this._mutationObserver.disconnect(),(null===(e=window.Blazor)||void 0===e?void 0:e.removeEventListener)&&window.Blazor.removeEventListener("enhancedload",this._enchancedCallback),this._formSizeObserver.disconnect()}itemVisibilityChangeHandler(e){if(this._isRendered){const t=e.some((e=>(e.addedNodes.length||e.removedNodes.length)&&e.target.classList.contains("dxbl-row")));t&&this.calculateAdaptivityCssRules()}}willUpdate(e){(e.has("sizeMode")||e.has("captionAlignment"))&&this.calculateAdaptivityCssRules()}findCaptions(){return this.captionAlignment===iS.All?this.getFilteredElements(this.querySelectorAll(`${rS(this.mainElementId)}:not(.${he.Invisible})`+sS)):super.findCaptions()}calculateAdaptivityCssRules(){this._calculationProcess&&clearTimeout(this._calculationProcess),this._calculationProcess=setTimeout((()=>{this.captionAlignment!==iS.None&&this.createAdaptivityCssRules(),this.captionAlignment===iS.InGroups&&(this.updateGroups(),this.updateTabs()),T.DomUtils.removeClassName(this,jI.Loading),this._isRendered=!0}))}}C([ln({attribute:"size-mode",type:nS,converter:bE(nS)})],lS.prototype,"sizeMode",void 0);class AS extends aS{constructor(e){super(),this._isMainTabElement=e,this.flId=""}get mainElementId(){return this.flId}calculateAdaptivityCssRules(){this.captionAlignment!==iS.None&&this.createAdaptivityCssRules()}}C([ln({attribute:"fl-id",type:String})],AS.prototype,"flId",void 0);class dS extends Bs{constructor(){super(),this._currentCaption=null,this.captionFor=null}get useShadowDom(){return!1}_findFormLayout(){let e=this.parentNode;for(;e&&!(e instanceof lS);)e=null==e?void 0:e.parentNode;return e}contentChanged(){var e;super.contentChanged();const t=this.initAndGetCaptionForInput();if((null===(e=this._currentCaption)||void 0===e?void 0:e.innerHTML)!==(null==t?void 0:t.innerHTML)){const e=this._findFormLayout();null==e||e.calculateAdaptivityCssRules()}this._currentCaption=t}initAndGetCaptionForInput(){var e;const t=this.getCaption();if(t&&""!==this.captionFor){const i=this.captionFor||(null===(e=this.getEditorInput())||void 0===e?void 0:e.id);i&&(t.htmlFor=i)}return t}getCaption(){return this.querySelector(`:scope > .${jI.Caption}`)}getEditorInput(){return this.querySelector(`.${yl.TextEdit} > input, .${yl.TextEdit} > textarea, .dxbl-checkbox-check-element > input`)}}C([ln({attribute:"caption-for"})],dS.prototype,"captionFor",void 0);class cS{}cS.Group=he.Prefix+"-group",cS.Header=cS.Group+"-header",cS.Body=cS.Group+"-body",cS.BodyContent=cS.Body+"-content";let hS=class extends AS{constructor(){super(!0),this.isActiveTab=!1}get itemSelector(){return` > .${jI.Row} > .${jI.TabItem}.${jI.ItemHorizontal}`}willUpdate(e){e.has("isActiveTab")&&this.isActiveTab&&(this.captionAlignment===iS.InGroups&&(this.calculateAdaptivityCssRules(),this.updateTabs(),this.updateGroups()),this.captionAlignment===iS.All&&this.getMainElement().calculateAdaptivityCssRules())}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!0,!1)}};C([ln({attribute:"is-active-tab",type:Boolean})],hS.prototype,"isActiveTab",void 0),hS=C([rn(cy.FormLayoutTab)],hS);let uS=class extends AS{constructor(){super(!1)}get itemSelector(){const e=` > .${jI.Row} > ${rS(this.flId)}`,t=` > .${cS.Group} > .${cS.Body} > .${cS.BodyContent}${e}`;return this.isMainElementCardGroup()?t:e}isMainElementCardGroup(){return this.classList.contains(jI.GroupDecoration)}createAdaptivityCssRulesForElements(e){this.createCssRulesForElementsInternal(e,!1,this.isMainElementCardGroup())}};uS=C([rn(cy.FormLayoutGroup)],uS);let pS=class extends dS{};pS=C([rn(cy.FormLayoutItem)],pS);let mS=class extends lS{};mS=C([rn(cy.FormLayout)],mS);class gS{}class CS extends CustomEvent{constructor(e){super(CS.eventName,{detail:e,bubbles:!0,composed:!0,cancelable:!0})}static create(){return new CS(new gS)}}CS.eventName="dxbl-grid-layout-root-element-base.contentchanged",mt.register(CS.eventName,(e=>e.detail));class fS extends Bs{constructor(){super(...arguments),this.layoutInfo=""}willUpdate(e){e.has("layoutInfo")&&this.applyLayout()}applyLayout(){if(this.layoutInfo){const e=JSON.parse(this.layoutInfo);for(const t in e)this.style.setProperty(t,`${e[t]}`)}}}C([ln({attribute:"layout-info"})],fS.prototype,"layoutInfo",void 0);class vS extends fS{createRenderRoot(){return this.applyLayout(),super.createRenderRoot()}contentChanged(){this.makeChildrenVisible(),this.dispatchEvent(CS.create())}restoreState(){super.restoreState(),this.makeChildrenVisible()}makeChildrenVisible(){T.DomUtils.removeClassName(this,he.Invisible)}}let bS=class extends fS{createRenderRoot(){return this}};bS=C([rn(cy.GridLayoutItem)],bS);let wS=class extends vS{};wS=C([rn(cy.GridLayoutRoot)],wS);let yS=class extends Bs{};yS=C([rn(cy.GridLayout)],yS);let BS=class extends de{};var ES;BS=C([rn(cy.GroupControl)],BS),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(ES||(ES={}));let IS=class extends Bs{constructor(){super(...arguments),this._orientation=null}get isVertical(){return this._orientation===ES.Vertical}};C([ln({type:ES,converter:bE(ES),attribute:"orientation"})],IS.prototype,"_orientation",void 0),IS=C([rn(cy.Splitter)],IS);let SS=class extends Bs{constructor(){super(...arguments),this.forceIsFlexible=!1,this.minSize=null,this.maxSize=null}get size(){return this.style.flexBasis}set size(e){this.forceIsFlexible&&(e=""),this.style.flex=e?`0 0 ${e}`:""}updated(e){super.updated(e),e.has("forceIsFlexible")&&this.forceIsFlexible&&(this.size="")}};C([ln({type:Boolean,attribute:"force-flexible"})],SS.prototype,"forceIsFlexible",void 0),C([ln({type:String,attribute:"min-size"})],SS.prototype,"minSize",void 0),C([ln({type:String,attribute:"max-size"})],SS.prototype,"maxSize",void 0),SS=C([rn(cy.SplitterPane)],SS);class xS{}xS.Splitter=he.Prefix+"-splitter",xS.SplitterButton=xS.Splitter+"-button";class DS{constructor(e,t){this.prevPaneSize=e,this.nextPaneSize=t}}class FS{constructor(e,t){this.prevPaneSize=e,this.nextPaneSize=t}}class TS extends CustomEvent{constructor(e){super(TS.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}TS.eventName=cy.Splitter+".separator-dragged";class HS extends CustomEvent{constructor(e){super(HS.eventName,{detail:e,bubbles:!0,composed:!1,cancelable:!0})}}HS.eventName=cy.Splitter+".separator-collapse-toggled",mt.register(TS.eventName,(e=>e.detail)),mt.register(HS.eventName,(e=>e.detail));class US{constructor(e){this.prevPaneInitialSizeValue="",this.nextPaneInitialSizeValue="";const t=e.splitter;this._separator=e,this._prevPane=e.prevPane,this._nextPane=e.nextPane,this._splitterInitialSize=t.isVertical?t.clientHeight:t.clientWidth,this._prevPaneInitialSize=this.getPaneVisibleSize(this._prevPane),this._nextPaneInitialSize=this.getPaneVisibleSize(this._nextPane),this.prevPaneInitialSizeValue=this._prevPane.size,this.nextPaneInitialSizeValue=this._nextPane.size}cancel(){this._prevPane.size=this.prevPaneInitialSizeValue,this._nextPane.size=this.nextPaneInitialSizeValue}stop(){if(0===this.accumulatedOffset)this.cancel();else{const e=new DS(this._prevPane.size,this._nextPane.size);this._separator.dispatchEvent(new TS(e))}}get accumulatedOffset(){return this.getPaneVisibleSize(this._prevPane)-this._prevPaneInitialSize}resizePanes(e){const[t,i]=this.calculatePreviousOffsetRange(this._prevPane,this._prevPaneInitialSize),[n,s]=this.calculateNextOffsetRange(this._nextPane,this._nextPaneInitialSize),r=Math.max(t,n),o=Math.min(i,s);r>o||(e=Math.min(o,Math.max(r,e)),this.setPaneSize(this._prevPane,this._prevPaneInitialSize+e),this.setPaneSize(this._nextPane,this._nextPaneInitialSize-e))}calculatePreviousOffsetRange(e,t){const[i,n]=this.calculateMinMaxSizes(e);return[i-t,n-t]}calculateNextOffsetRange(e,t){const[i,n]=this.calculateMinMaxSizes(e);return[t-n,t-i]}calculateMinMaxSizes(e){return[e.minSize?this.parseMinMaxSize(e.minSize):0,e.maxSize?this.parseMinMaxSize(e.maxSize):this._splitterInitialSize]}parseMinMaxSize(e){const t=parseFloat(e);return e.includes("%")?t*this._splitterInitialSize/100:t}setPaneSize(e,t){e.size=e.size.includes("%")?t/this._splitterInitialSize*100+"%":t+"px"}getPaneVisibleSize(e){return this._separator.splitter.isVertical?e.offsetHeight:e.offsetWidth}}var PS;let QS=PS=class extends Bs{constructor(){super(...arguments),this.allowCollapse=!1,this.allowResize=!1,this._pointerEventsHelper=new q(this),this._dragStartHandler=this.onDragStart.bind(this),this._dragCancelHandler=this.onDragCancel.bind(this),this._dragStopHandler=this.onDragStop.bind(this),this._keyDownResizeHandler=this.onKeyDownResize.bind(this),this._keyUpResizeHandler=this.onKeyUpResize.bind(this),this._keyDownCollapseHandler=this.onKeyDownCollapse.bind(this),this._dblClickCollapseHandler=this.onDblClickCollapse.bind(this)}disconnectedCallback(){super.disconnectedCallback(),this.allowResize&&this.disposeResizing(),this.allowCollapse&&this.disposeCollapsing()}updated(e){super.updated(e),e.has("allowResize")&&(this.allowResize?this.initializeResizing():this.disposeResizing()),e.has("allowCollapse")&&(this.allowCollapse?this.initializeCollapsing():this.disposeCollapsing())}get splitter(){return this.closest(cy.Splitter)}get prevPane(){return this.previousElementSibling}get nextPane(){return this.nextElementSibling}initializeResizing(){this._pointerEventsHelper.initialize(),this.addEventListener(a.eventName,this._dragStartHandler),this.addEventListener(A.eventName,this._dragCancelHandler),this.addEventListener(l.eventName,this._dragStopHandler),this.addEventListener("keydown",this._keyDownResizeHandler),this.addEventListener("keyup",this._keyUpResizeHandler)}disposeResizing(){this._pointerEventsHelper.dispose(),this.removeEventListener(a.eventName,this._dragStartHandler),this.removeEventListener(A.eventName,this._dragCancelHandler),this.removeEventListener(l.eventName,this._dragStopHandler),this.removeEventListener("keydown",this._keyDownResizeHandler),this.removeEventListener("keyup",this._keyUpResizeHandler)}initializeCollapsing(){this.addEventListener("keydown",this._keyDownCollapseHandler),this.addEventListener("dblclick",this._dblClickCollapseHandler)}disposeCollapsing(){this.removeEventListener("keydown",this._keyDownCollapseHandler),this.removeEventListener("dblclick",this._dblClickCollapseHandler)}onDragStart(e){PS.dragHelper.start(this,e.detail.source),e.stopPropagation()}onDragCancel(e){PS.dragHelper.cancel(),e.stopPropagation()}onDragStop(e){PS.dragHelper.stop(),e.stopPropagation()}onKeyDownResize(e){var t;const i=this.getResizeDirection(e);0!==i&&(null!==(t=this.resizeHelper)&&void 0!==t||(this.resizeHelper=new US(this)),this.resizeHelper.resizePanes(this.resizeHelper.accumulatedOffset+i*PS.KeyboardResizeStep),this.clearKeyboardResizeTimeout(),e.preventDefault())}onKeyUpResize(e){this.resizeHelper&&0!==this.getResizeDirection(e)&&(this.keyboardResizeTimeoutId=setTimeout((()=>{this.resizeHelper.stop(),this.resizeHelper=null,this.clearKeyboardResizeTimeout()}),PS.KeyboardResizeTimeout))}getResizeDirection(e){var t;const i=Be.KeyUtils.getEventKeyCode(e);if(null===(t=this.splitter)||void 0===t?void 0:t.isVertical){if(i===Be.KeyCode.Up)return-1;if(i===Be.KeyCode.Down)return 1}else{if(i===Be.KeyCode.Left)return-1;if(i===Be.KeyCode.Right)return 1}return 0}clearKeyboardResizeTimeout(){this.keyboardResizeTimeoutId&&(clearTimeout(this.keyboardResizeTimeoutId),delete this.keyboardResizeTimeoutId)}onKeyDownCollapse(e){Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Enter&&(this.toggleCollapsed(),e.preventDefault())}onDblClickCollapse(e){this.toggleCollapsed(),e.preventDefault()}toggleCollapsed(){var e;const t=(null===(e=this.splitter)||void 0===e?void 0:e.isVertical)?new FS(this.prevPane.offsetHeight,this.nextPane.offsetHeight):new FS(this.prevPane.offsetWidth,this.nextPane.offsetWidth);this.dispatchEvent(new HS(t))}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!e.target.closest(`.${xS.SplitterButton}`)}handlePointerEventsDelay(e){return s.Default}};QS.KeyboardResizeTimeout=500,QS.KeyboardResizeStep=5,QS.dragHelper=new class extends QA{cancel(){this.splitterDragContext.resizeHelper.cancel(),super.stop()}stop(){this.splitterDragContext.resizeHelper.stop(),super.stop()}getDraggableElement(e){return document.createElement("div")}hideDraggableElement(){}get splitterDragContext(){return this.draggableContext}createDraggableContext(e,t,i){const n=e;return{...super.createDraggableContext(e,t,i),resizeHelper:new US(n),isVertical:n.splitter.isVertical}}refreshUICore(){if(super.refreshUICore(),!this.splitterDragContext)return;this.splitterDragContext.resizeHelper.resizePanes(this.splitterDragContext.isVertical?this.splitterDragContext.currentCursorPosition.y-this.splitterDragContext.initialCursorPosition.y:this.splitterDragContext.currentCursorPosition.x-this.splitterDragContext.initialCursorPosition.x)}},C([ln({type:Boolean,attribute:"allow-collapse"})],QS.prototype,"allowCollapse",void 0),C([ln({type:Boolean,attribute:"allow-resize"})],QS.prototype,"allowResize",void 0),QS=PS=C([rn(cy.SplitterSeparator)],QS);let NS=class extends fS{};NS=C([rn(cy.StackLayoutItem)],NS);let RS=class extends vS{};RS=C([rn(cy.StackLayoutRoot)],RS);let LS=class extends Bs{};LS=C([rn(cy.StackLayout)],LS);var MS;let kS=MS=class extends Bs{constructor(){super(...arguments),this.boundOnDragStartHandler=this.handleDragStart.bind(this),this.boundOnDragStopHandler=this.handleDrop.bind(this),this.boundOnDragCancelHandler=this.handleDragEnd.bind(this),this.pointerEventsHelper=new q(this),this.allowReorder=!1,this.index=-1}handleDragStart(e){MS.draggingHelper.start(this,e.detail.source),e.stopPropagation()}handleDragEnd(e){MS.draggingHelper.stop(),e.stopPropagation()}handleDrop(e){if(MS.draggingHelper.isValidTarget(this)){const e=MS.draggingHelper.getDragIndex(),t=MS.draggingHelper.getDropIndex();e!==t&&this.dispatchEvent(new uy(e,t))}MS.draggingHelper.stop(),e.stopPropagation()}isDraggableTab(){return this.allowReorder}get tabs(){return this.closest(cy.Tabs)}connectedCallback(){super.connectedCallback(),this.isDraggableTab()&&this.addDragEventSubscriptions()}disconnectedCallback(){this.isDraggableTab()&&this.removeDragEventSubscriptions(),super.disconnectedCallback()}updated(e){e.has("allowReorder")&&this.onAllowTabReorderChanged(),super.updated(e)}addDragEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.pointerEventsHelper.initialize()}removeDragEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.pointerEventsHelper.dispose()}onAllowTabReorderChanged(){this.isDraggableTab()?this.addDragEventSubscriptions():this.removeDragEventSubscriptions()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!e.target.closest(`.${dy.CloseButton}`)}handlePointerEventsDelay(e){return s.Default}};kS.draggingHelper=new class extends QA{constructor(){super(...arguments),this.dragIndex=-1,this.dropIndex=-1,this.dxTabs=null,this.tabsUl=null,this.dxTabItems=null,this.dropTargetIndicator=null,this.restoreDisabled=!1,this.boundOnScroll=this.onScroll.bind(this)}start(e,t){var i;this.dxTabs=e.tabs,this.tabsUl=e.closest("ul"),this.dxTabItems=Array.from(this.tabsUl.querySelectorAll(`:scope > li > .${dy.Item}`)),this.dragIndex=this.dxTabItems.indexOf(e),this.dropIndex=this.dragIndex,super.start(e,t),this.dropTargetIndicator=this.addDropTargetIndicator(),this.dxTabs.classList.add(he.Dragging),document.body.classList.add(he.GrabbingCursor),e.classList.contains(he.Disabled)||(e.classList.add(he.Disabled),this.restoreDisabled=!0);const n=this.dxTabs.scrollViewer;n&&(n.startAutoScrolling(this.dxTabs.isVertical?Ne.Vertical:Ne.Horizontal),null===(i=this.dxTabs.scrollViewerContentContainer)||void 0===i||i.addEventListener("scroll",this.boundOnScroll)),document.addEventListener("wheel",this.boundOnScroll)}stop(){var e,t;const i=this.draggableContext.srcElement;super.stop(),this.removeDropTargetIndicator(),this.dxTabs.classList.remove(he.Dragging),this.restoreDisabled&&(i.classList.remove(he.Disabled),this.restoreDisabled=!1),document.body.classList.remove(he.GrabbingCursor);this.dxTabs.scrollViewer&&(null===(e=this.dxTabs.scrollViewer)||void 0===e||e.stopAutoScrolling(),null===(t=this.dxTabs.scrollViewerContentContainer)||void 0===t||t.removeEventListener("scroll",this.boundOnScroll)),document.removeEventListener("wheel",this.boundOnScroll),this.dxTabs=null,this.tabsUl=null,this.dxTabItems=null,this.dragIndex=-1,this.dropIndex=-1}isValidTarget(e){return this.dxTabs===e.tabs}getDragIndex(){return Number(this.dxTabItems[this.dragIndex].index)}getDropIndex(){return Number(this.dxTabItems[this.dropIndex].index)}getDraggableElement(e){const t=e.getBoundingClientRect(),i=e.cloneNode(!0);return i.id="",i.style.position="fixed",i.style.top=`${t.top}px`,i.style.left=`${t.left}px`,i.classList.add(he.Dragging),e.parentElement.insertBefore(i,e),i}hideDraggableElement(){super.hideDraggableElement(),this.draggableContext.dragableElement.remove()}addDropTargetIndicator(){const e=document.createElement("div");return e.classList.add(he.DropTargetIndicator,he.Invisible),this.tabsUl.parentElement.insertBefore(e,null),e}removeDropTargetIndicator(){this.dropTargetIndicator.remove(),this.dropTargetIndicator=null}showDropTargetIndicator(){this.dropTargetIndicator.classList.remove(he.Invisible)}hideDropTargetIndicator(){this.dropIndex=this.dragIndex,this.dropTargetIndicator.classList.add(he.Invisible)}onScroll(){this.hideDropTargetIndicator()}onDocumentScroll(e){super.onDocumentScroll(e),this.onScroll()}onDocumentMouseMove(e){if(super.onDocumentMouseMove(e),e.target===this.dropTargetIndicator)return;const t=e.target.closest(`.${dy.Item}`);t&&this.isValidTarget(t)?(this.updateDropIndex(e,t),this.updateDropTargetIndicatorPosition()):this.hideDropTargetIndicator()}updateDropIndex(e,t){var i;const n=this.dxTabItems.indexOf(t);let s,r;const o=t.getBoundingClientRect();(null===(i=this.dxTabs)||void 0===i?void 0:i.isVertical)?(r=o.y+o.height/2,s=e.clientY):(r=o.x+o.width/2,s=e.clientX),this.dropIndex=s>r?n+1:n,this.dragIndex<this.dropIndex&&(this.dropIndex=this.dropIndex-1)}updateDropTargetIndicatorPosition(){if(this.dragIndex===this.dropIndex)return void this.hideDropTargetIndicator();this.showDropTargetIndicator();const e=this.dxTabItems[this.dropIndex].getBoundingClientRect();let t=e.y,i=e.x;this.dragIndex<this.dropIndex&&(this.dxTabs.isVertical?t+=e.height-this.dropTargetIndicator.offsetHeight:i+=e.width-this.dropTargetIndicator.offsetWidth),this.dropTargetIndicator.style.top=`${t}px`,this.dropTargetIndicator.style.left=`${i}px`,this.dxTabs.isVertical?this.dropTargetIndicator.style.width=`${e.width}px`:this.dropTargetIndicator.style.height=`${e.height}px`}updateDraggableElementPosition(){if(super.updateDraggableElementPosition(),!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.draggableElementPosition.x-e.draggableElementOffset.x,y:e.draggableElementPosition.y-e.draggableElementOffset.y}}},C([ln({type:Boolean,attribute:"allow-reorder"})],kS.prototype,"allowReorder",void 0),C([ln({type:Number,attribute:"index"})],kS.prototype,"index",void 0),kS=MS=C([rn(cy.TabItem)],kS);class KS{}var OS,_S,VS,zS;KS.Toolbar=he.Prefix+"-toolbar",KS.ToolbarItem=KS.Toolbar+"-item",KS.ToolbarEdit=KS.Toolbar+"-edit",KS.ToolbarTitle=KS.Toolbar+"-title",KS.ToolbarPlaceholder=KS.Toolbar+"-placeholder",KS.ToolbarGroup=KS.Toolbar+"-group",KS.ToolbarGroupSeparator=KS.ToolbarGroup+"-separator",KS.ToolbarDefaultLayer="default",KS.ToolbarHiddenItem=KS.Toolbar+"-hidden-item",KS.ToolbarItemCollapsed=KS.ToolbarItem+"-collapsed",KS.ToolbarNoItemText=KS.Toolbar+"-no-item-text",KS.ToolbarHasEllipsis=KS.Toolbar+"-has-ellipsis",KS.ButtonToolbar=he.Prefix+"-btn-toolbar",KS.ButtonPlainToolbar=he.Prefix+"-btn-plain-toolbar",KS.ButtonEllipsis=KS.Toolbar+"-btn-ellipsis",KS.ToolbarAdaptive=KS.Toolbar+"-adaptive",KS.AdaptiveItem=KS.ToolbarAdaptive+"-item",KS.AdaptiveItemText=KS.AdaptiveItem+"-text",KS.AdaptiveItemAllHidden=KS.AdaptiveItem+"-all-hidden",KS.AdaptiveItemHidden=KS.AdaptiveItem+"-hidden",KS.AdaptiveItemTextHidden=KS.AdaptiveItemText+"-hidden",KS.AdaptivePreviewImage=KS.AdaptiveItem+"-preview-image",KS.DropDownToggle=KS.Toolbar+"-dropdown-toggle",KS.Loading=he.Prefix+"-loading",KS.Loaded=he.Prefix+"-loaded",KS.VirtualToolbar=he.Prefix+"-virtual-toolbar",KS.VirtualToolbarItem=KS.VirtualToolbar+"-item",function(e){e.Default="Default",e.AllTabs="AllTabs",e.OnDemand="OnDemand"}(OS||(OS={})),function(e){e.Auto="Auto",e.NavButtons="NavButtons",e.Swipe="Swipe",e.NoScroll="NoScroll"}(_S||(_S={})),function(e){e.Small="Small",e.Medium="Medium",e.Large="Large"}(VS||(VS={})),function(e){e.Top="Top",e.Bottom="Bottom",e.Left="Left",e.Right="Right"}(zS||(zS={}));const WS={};var $S,GS;WS.getIsParent=function(e,t){if(!e||!t)return!1;for(;t;){if(t===e)return!0;if("BODY"===t.tagName)return!1;t=t.parentNode}return!1},WS.getChildElementNodes=function(e){return e?T.DomUtils.getChildNodes(e,(function(e){return 1===e.nodeType})):null},WS.getChildElementNodesByPredicate=function(e,t){return e?t?T.DomUtils.getChildNodes(e,(function(e){return 1===e.nodeType&&t(e)})):WS.getChildElementNodes(e):null},WS.getChildByClassName=function(e,t,i){if(null!=e){return Ft(T.DomUtils.getChildNodesByClassName(e,t),i)}return null},WS.elementMatchesSelector=function(e){return t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,function(e,i){return!!e&&!!i&&t.call(e,i)};var t}(Element.prototype),function(e){e[e.None=0]="None",e[e.Back=1]="Back",e[e.Forward=2]="Forward"}($S||($S={}));class qS{static calculate(e,t,i,n,s,r){const o=t?i.height:i.width,a=t?n.bottom:n.right,l=t?n.top:n.left,A=t?i.bottom:i.right,d=t?i.top:i.left,c=r?t?r.bottom:r.right:0,h=s?t?s.top:s.left:0;let u=l-d;switch(e){case $S.Forward:u=Math.round(a-A),0===Math.round(u)&&r&&(u=Math.round(c-A)),u=Math.min(Math.max(0,u),o),0===u&&(u=o);break;case $S.Back:u=Math.round(l)-Math.round(d),0===Math.round(u)&&s&&(u=Math.round(h-d)),u=-Math.min(Math.max(0,Math.abs(u)),o),0===u&&(u=-o);break;default:{const e=l<d,t=a>A;if(!e&&!t)return 0;if(t){const e=r?c-A:0;u=r&&l-e>=d?u=e:a-A}else if(e){const e=-l+d,t=s?-h+d:0;u=s&&a+t<=A?-t:a+e<=A?-e:0}break}}return Math.ceil(u)}}const XS="data-dxtabs-tab-id",YS="data-dxtabs-content-id",JS="tab-count",jS="scroll-mode",ZS="render-mode",ex="active-tab",tx="size-mode",ix="tabs-position";let nx=GS=class extends Bs{constructor(){super(...arguments),this.mainElementContentWidthSubscription=null,this.contentPanelWidthSubscription=null,this.currentSize={width:null,height:null},this.contentSize={width:null,height:null},this.scrollContainerElement=null,this.canTrackScroll=!1,this.tabListElement=null,this.updateOverflowStateTimeout=0,this.isReady=!1,this.neededCheckSize=!1,this.unsubscribeFocusUtils=null,this.unsubscribe=null,this.onScrollHandler=this.onScroll.bind(this),this.onNextButtonClickHandler=this.onScrollToNext.bind(this),this.onPrevButtonClickHandler=this.onScrollToPrev.bind(this),this.onClickHandler=this.onClick.bind(this),this.tabCount=0,this.scrollMode=_S.Auto,this.renderMode=OS.Default,this.activeTab="",this.sizeMode=VS.Medium,this.tabsPosition=zS.Top}get isVertical(){return this.tabsPosition===zS.Left||this.tabsPosition===zS.Right}get listElement(){return this.tabListElement.getElementsByTagName("ul")[0]}getActiveTab(){return this.querySelector(GS.getSelector(XS,this.activeTab))}getActiveTabContent(){return this.querySelector(GS.getSelector(YS,this.activeTab))}get activeTabIndex(){return Array.from(this.querySelectorAll(`.${dy.Item}`)).findIndex((e=>e.classList.contains(he.Active)))}get scrollViewer(){return this.querySelector(`.${xe.ClassName}`)}get scrollViewerContentContainer(){return this.tabListElement?T.DomUtils.getNodesByClassName(this.tabListElement,xe.ContentContainerClassName)[0]:null}get prevButton(){var e;return null===(e=this.findScrollContainer())||void 0===e?void 0:e.querySelector(`:scope > .${dy.ButtonScrollPrev}`)}get nextButton(){var e;return null===(e=this.findScrollContainer())||void 0===e?void 0:e.querySelector(`:scope > .${dy.ButtonScrollNext}`)}get tabsContentElement(){return this.querySelector(`:scope > .${dy.ContentPanel}`)}connectedOrContentChanged(){const e=this.querySelector(`:scope > .${dy.TabList}`);e&&e!==this.tabListElement&&(this.tabListElement=e,this.dispose(),this.subscribeToEvents(),this.initialize(),this.isReady=!0)}disconnectedCallback(){super.disconnectedCallback(),this.disposeEvents(),this.dispose()}disposeEvents(){var e,t;null===(e=this.unsubscribe)||void 0===e||e.call(this),this.unsubscribe=null,null===(t=this.unsubscribeFocusUtils)||void 0===t||t.call(this),this.unsubscribeFocusUtils=null}subscribeToEvents(){if(!this.tabListElement)return;if(this.disposeEvents(),this.scrollMode!==_S.NavButtons&&this.scrollMode!==_S.Swipe)return;const e=this.scrollViewerContentContainer;null==e||e.addEventListener("scroll",this.onScrollHandler),null==e||e.addEventListener("click",this.onClickHandler);const t=this.prevButton;null==t||t.addEventListener("click",this.onPrevButtonClickHandler);const i=this.nextButton;null==i||i.addEventListener("click",this.onNextButtonClickHandler),this.unsubscribe=()=>{null==e||e.removeEventListener("scroll",this.onScrollHandler),null==e||e.removeEventListener("click",this.onClickHandler),null==t||t.removeEventListener("click",this.onPrevButtonClickHandler),null==i||i.removeEventListener("click",this.onNextButtonClickHandler)},this.unsubscribeFocusUtils=xi(this.tabListElement)}dispose(){this.isReady=!1,this.updateOverflowStateTimeout&&(clearTimeout(this.updateOverflowStateTimeout),this.updateOverflowStateTimeout=0),this.mainElementContentWidthSubscription&&ii(this.mainElementContentWidthSubscription),this.contentPanelWidthSubscription&&ii(this.contentPanelWidthSubscription),this.neededCheckSize=!1}activate(e){if(!e)return;const t=document.querySelector(GS.getSelector(XS,e));if(null!=(null==t?void 0:t.parentNode)){const e=this.listElement;for(let i=0;i<this.tabCount;i++)if(WS.getChildByClassName(e.children[i],dy.Item)===t){this.scrollToIndex(i);break}}}onScroll(e){this.updateOverflowState()}initialize(){$t((()=>{this.prepareScrollMode(),T.DomUtils.addClassName(this.tabListElement,KS.Loaded),this.checkForOverflow()})),this.mainElementContentWidthSubscription=ni(this.tabListElement,(e=>{this.currentSize.width===e.width&&this.currentSize.height===e.height||(this.currentSize={width:e.width,height:e.height},this.checkForOverflow())}));const e=this.tabsContentElement;e&&(this.contentPanelWidthSubscription=ni(e,(e=>{this.contentSize.width===e.width&&this.contentSize.height===e.height||(this.contentSize={width:e.width,height:e.height},this.onContentElementResize())})))}onContentElementResize(){this.updateSelectedContent()}updated(e){this.isReady&&((e.has("scrollMode")||e.has("tabCount")||e.has("sizeMode")||e.has("tabsPosition"))&&($t((()=>{this.prepareScrollMode(),this.checkForOverflow()})),this.subscribeToEvents()),e.has("activeTab")&&this.activate(this.activeTab),(e.has("renderMode")||e.has("activeTab"))&&this.updateSelectedContent(this.dispatchActiveTabChangedEvent.bind(this)),super.updated(e))}dispatchActiveTabChangedEvent(){this.dispatchEvent(new hy)}queryUpdateOverflowState(e){this.updateOverflowStateTimeout&&clearTimeout(this.updateOverflowStateTimeout),this.updateOverflowStateTimeout=setTimeout((()=>{this.updateOverflowStateTimeout=0,this.updateOverflowState()}),e)}prepareScrollMode(){this.neededCheckSize=!!this.tabListElement&&this.scrollMode===_S.NavButtons}checkForOverflow(){if(!this.neededCheckSize||!this.tabListElement)return;const e=this.isVertical?this.tabListElement.getBoundingClientRect().height-Vt(this.tabListElement):this.tabListElement.getBoundingClientRect().width-_t(this.tabListElement);this.togleScrollState(e-this.calcNeededSize()<=-1)}togleScrollState(e){$t((()=>{T.DomUtils.toggleClassName(this.tabListElement,dy.HasOverflow,e),this.canTrackScroll=e,e&&this.queryUpdateOverflowState()}))}calcNeededSize(){var e;const t=null===(e=this.tabListElement)||void 0===e?void 0:e.getElementsByTagName("ul")[0];if(!t)return 0;let i=this.isVertical?Vt(t):_t(t);const n=t.getElementsByTagName("li");for(const e of n)i+=this.isVertical?e.getBoundingClientRect().height+Ot(e):e.getBoundingClientRect().width+Kt(e);return i}updateOverflowState(){if(!this.canTrackScroll||this.scrollMode!==_S.NavButtons)return;if(!this.findScrollContainer())return;const e=this.scrollViewerContentContainer;if(!e)return;const[t,i]=this.getScrollAccess(e),n=this.nextButton,s=this.prevButton;jt((()=>{n&&kt(n,"disabled",!i),s&&kt(s,"disabled",!t)}))}getScrollAccess(e){if(this.isVertical){const t=Math.ceil(e.scrollTop);return[t>0,Math.round(e.scrollHeight-t)-Math.round(e.clientHeight)>GS.minScrollStep]}{const t=Math.ceil(e.scrollLeft);return[t>0,Math.round(e.scrollWidth-t)-Math.round(e.clientWidth)>GS.minScrollStep]}}findScrollContainer(){if(!this.scrollContainerElement){if(!this.tabListElement)return null;this.scrollContainerElement=WS.elementMatchesSelector(this.tabListElement,`.${dy.Scrollable}`)?this.tabListElement:this.tabListElement.querySelector(`.${dy.Scrollable}`)}return this.scrollContainerElement}onScrollToPrev(e){e.preventDefault();const t=this.findExtremeTabItemIndex($S.Back);this.scrollToIndex(t,$S.Back)}onScrollToNext(e){e.preventDefault();const t=this.findExtremeTabItemIndex($S.Forward);this.scrollToIndex(t,$S.Forward)}onClick(e){let t=e.target;for(;t;){if(St(t,dy.Item)){const e=t.getAttribute(XS);e&&this.activate(e);break}t=t.parentElement}}getTabElement(e){return this.listElement.querySelectorAll(":scope > li > ."+dy.Item)[e]}scrollToIndex(e,t=$S.None){var i,n;if(e>-1&&this.scrollViewerContentContainer){const s=e=>e.closest("li"),r=this.getTabElement(e),o=null===(i=s(r))||void 0===i?void 0:i.nextElementSibling,a=null===(n=s(r))||void 0===n?void 0:n.previousElementSibling;this.scrollToTab(r,a,o,t)}}findExtremeTabItemIndex(e){if(e===$S.None)return-1;const t=this.scrollViewerContentContainer;if(!t)return-1;const i=this.listElement.querySelectorAll(":scope > li > ."+dy.Item),n=this.getContentFrameRect(t),[s,r,o]=e===$S.Forward?[0,this.tabCount,1]:[this.tabCount-1,-1,-1];for(let t=s;t!==r;t+=o){const s=i[t].getBoundingClientRect();if(this.isVertical){if(e===$S.Back&&s.top<n.top||e===$S.Forward&&s.bottom>n.bottom)return t}else if(e===$S.Back&&s.left<n.left||e===$S.Forward&&s.right>n.right)return t}return-1}getContentFrameRect(e){const t=T.DomUtils.getCurrentStyle(e),i=e.querySelector("ul"),n=T.DomUtils.getCurrentStyle(i),s=e.getBoundingClientRect();return new nt(s.left+T.DomUtils.pxToInt(t.paddingLeft)+T.DomUtils.pxToInt(t.borderLeftWidth)+T.DomUtils.pxToInt(n.paddingLeft),s.top+T.DomUtils.pxToInt(t.paddingTop)+T.DomUtils.pxToInt(t.borderTopWidth)+T.DomUtils.pxToInt(n.paddingTop),s.width-T.DomUtils.pxToInt(t.paddingRight)-T.DomUtils.pxToInt(t.paddingLeft)-T.DomUtils.pxToInt(t.borderRightWidth)-T.DomUtils.pxToInt(t.borderLeftWidth)-T.DomUtils.pxToInt(n.paddingRight)-T.DomUtils.pxToInt(n.paddingLeft),s.height-T.DomUtils.pxToInt(t.paddingBottom)-T.DomUtils.pxToInt(t.paddingTop)-T.DomUtils.pxToInt(t.borderBottomWidth)-T.DomUtils.pxToInt(t.borderTopWidth)-T.DomUtils.pxToInt(n.paddingBottom)-T.DomUtils.pxToInt(n.paddingTop))}scrollToTab(e,t,i,n){const s=this.scrollViewerContentContainer;if(!s)return;const r=qS.calculate(n,this.isVertical,this.getContentFrameRect(s),st.fromDomRect(e.getBoundingClientRect()),t?st.fromDomRect(t.getBoundingClientRect()):void 0,i?st.fromDomRect(i.getBoundingClientRect()):void 0);0!==r?this.isVertical?s.scrollTop+=r:s.scrollLeft+=r:s.scrollLeft>0&&n===$S.Back&&(this.isVertical?s.scrollTop=0:s.scrollLeft=0)}updateSelectedContent(e=null){const t=this.tabsContentElement;if(t){const i=this.activeTab?t.querySelector(GS.getSelector(YS,this.activeTab)):null,n=Array.from(t.querySelectorAll(`:scope > .${dy.Content}${this.activeTab?`:not(${GS.getSelector(YS,this.activeTab)})`:""}`));$t((()=>{if(i&&(i.style.cssText="",i.setAttribute("data-dx-tab-loaded","")),this.renderMode!==OS.Default){const e=`position:absolute;visibility:hidden;left:-10000px;top:-10000px;width:${t.clientWidth}px;height:${t.clientHeight}px`;n.forEach((t=>{t.style.cssText=e}))}t&&T.DomUtils.addClassName(t,KS.Loaded),e&&setTimeout((()=>e()),0)}))}}static getSelector(e,t){return`[${e}=${t}]`}};nx.minScrollStep=1,C([ln({type:Number,attribute:JS})],nx.prototype,"tabCount",void 0),C([ln({type:_S,attribute:jS})],nx.prototype,"scrollMode",void 0),C([ln({type:OS,attribute:ZS})],nx.prototype,"renderMode",void 0),C([ln({attribute:ex})],nx.prototype,"activeTab",void 0),C([ln({attribute:tx})],nx.prototype,"sizeMode",void 0),C([ln({attribute:ix})],nx.prototype,"tabsPosition",void 0),nx=GS=C([rn(cy.Tabs)],nx);class sx extends Li{constructor(e,t,i){super(t,i),this.tabs=e}queryItems(){return this.queryItemsBySelector(`:scope.${dy.Item}`)}}class rx extends Li{constructor(e,t,i){super(t,i),this.tabs=e}queryItems(){return this.queryItemsBySelector(`:scope .${dy.Item}`)}createItemStrategy(e){return new sx(this.tabs,this.navigator,e)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(this.tabs.isVertical){if(t===Be.KeyCode.Down)return this.moveForward(e),!0;if(t===Be.KeyCode.Up)return this.moveBackward(e),!0}else{if(t===Be.KeyCode.Right)return this.moveForward(e),!0;if(t===Be.KeyCode.Left)return this.moveBackward(e),!0}return t===Be.KeyCode.Tab?(e.shiftKey?this.leaveBackward():this.leaveForward(),!0):(t===Be.KeyCode.Delete&&this.performShortcutEvent(e),!1)}moveForward(e){this.moveToNextItem(!0),this.performShortcutEvent(e)}moveBackward(e){this.moveToPrevItem(!0),this.performShortcutEvent(e)}getShortcutContext(){return{TabId:this.getSelectedTabId()}}focusSelectedItem(){var e;((null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(dy.Prefix))||this.isTabActive())&&Ci.focusElement(this.selectedItemElement)}isTabActive(){var e;return null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains(dy.Item)}getSelectedTabId(){const e=this.getItem(this.selectedItemIndex);return null==e?void 0:e.getAttribute(XS)}updateSelectedItemByChildElement(e,t=null){if(e===this.targetElement){const e=this.tabs.getActiveTab(),t=this.items.findIndex((t=>t===e));this.updateSelectedItemByIndex(this.validateItemIndex(t))}else super.updateSelectedItemByChildElement(e,t)}}let ox=class extends Bs{constructor(){super(...arguments),this.tabs=null,this.tabId=""}connectedOrContentChanged(){if(this.keyboardNavigator=this.querySelector(`:scope > ${Pi}`),this.keyboardNavigator&&"initialized"in this.keyboardNavigator&&!this.keyboardNavigator.initialized){this.tabs=document.querySelector(`#${this.tabId}`);const e=new rx(this.tabs,this.keyboardNavigator,this);this.keyboardNavigator.initialize(this,e)}}initializeKeyboardNavigator(){if(this.keyboardNavigator=this.querySelector(`:scope > ${Pi}`),this.keyboardNavigator&&"initialized"in this.keyboardNavigator&&!this.keyboardNavigator.initialized){const e=new rx(this.tabs,this.keyboardNavigator,this);this.keyboardNavigator.initialize(this,e)}}};var ax;C([ln({attribute:"data-dxtabs-id"})],ox.prototype,"tabId",void 0),ox=C([rn(cy.TabList)],ox),function(e){e.Left="left",e.Right="right",e.FitPositionTarget="fitpositiontarget"}(ax||(ax={}));let lx=class extends CB{constructor(){super(...arguments),this.windowAlignment=ax.Left}get dropFromRight(){return this.windowAlignment===ax.Right}createKeyboardNavigationStrategy(){return new Ta(this.keyboardNavigator,this)}};var Ax,dx;C([ln({type:String,attribute:"window-alignment"})],lx.prototype,"windowAlignment",void 0),lx=C([rn("dxbl-itemlist-dropdown")],lx);class cx{}Ax=cx,cx.prefix="dxbl",cx.invisible=`${Ax.prefix}-invisible`,cx.menu=`${Ax.prefix}-menu`,cx.menuItem=`${Ax.prefix}-menu-item`,cx.menuTitle=`${Ax.menu}-title`,cx.menuListItem=`${Ax.prefix}-menu-list-item`,cx.menuItemTemplate=`${Ax.prefix}-menu-item-tmpl`,cx.menuBar=`${Ax.prefix}-menu-bar`,cx.menuLoading=`${Ax.prefix}-menu-loading`,cx.menuItemTextContainer=`${Ax.prefix}-menu-item-text-container`,cx.navigation=`${Ax.prefix}-menu-item-list`,cx.menuItemTextHiddenClass=`${Ax.prefix}-menu-text-hidden`,cx.menuListItemHiddenClass=`${Ax.prefix}-menu-list-item-hidden`,cx.dropdown=`${Ax.prefix}-menu-dropdown`,cx.dropdownItem=`${Ax.prefix}-menu-dropdown-item`,cx.menuNav=`${Ax.prefix}-menu-nav`,cx.menuNavBar=`${Ax.prefix}-menu-nav-bar`,cx.subMenuTemplate=`${Ax.prefix}-sub-menu-template`;class hx{}dx=hx,hx.prefix="dxbl",hx.menuComponentName=dx.prefix+"-menu",hx.menuItemComponentName=dx.menuComponentName+"-item",hx.menuNavBarComponentName=dx.menuComponentName+"-navbar",hx.menuItemsContainerSelector=`.${cx.menuBar} ul.${cx.navigation}`,hx.menuItemDataIdAttribute="data-dxmenu-item-id";let ux=class extends Bs{constructor(){super(),this._prevActiveElement=null,this.adaptivePriority=-1,this.canCrop=!1,this.isVisible=!1,this._onButtonFocusInHandler=this.onButtonFocusIn.bind(this),this.subscribeToEvents()}desktopMenuSelector(e){return`${hx.menuComponentName}:has(.${cx.menuBar} > ul > li[${hx.menuItemDataIdAttribute}=${e}])`}mobileMenuSelector(e){return`${hx.menuComponentName}:has(ul > li[${hx.menuItemDataIdAttribute}=${e}])`}get menu(){return this.getClosestMenu()}getClosestMenu(){return document.querySelector(`${this.desktopMenuSelector(this.id)}, ${this.mobileMenuSelector(this.id)}`)}connectedCallback(){var e;super.connectedCallback();const t=this.menu;t&&t.isDOMAttached&&(null===(e=this.menu)||void 0===e||e.onItemConnected())}disconnectedCallback(){var e;null===(e=this.menu)||void 0===e||e.onItemDisconnected(),super.disconnectedCallback()}isDropDownItem(e){return e.classList.contains(cx.dropdownItem)}subscribeToEvents(){this.addEventListener("pointerdown",(e=>{e.target instanceof HTMLElement&&this.isDropDownItem(e.target)&&(document.activeElement instanceof HTMLElement&&(this._prevActiveElement=document.activeElement),e.target.addEventListener("focusin",this._onButtonFocusInHandler))}))}onButtonFocusIn(e){e.currentTarget&&(e.currentTarget.removeEventListener("focusin",this._onButtonFocusInHandler),this._prevActiveElement?this._prevActiveElement.focus():e.currentTarget.blur())}};C([ln({type:Number,attribute:"adaptive-priority"})],ux.prototype,"adaptivePriority",void 0),C([ln({type:Boolean,attribute:"can-crop"})],ux.prototype,"canCrop",void 0),ux=C([rn(hx.menuItemComponentName)],ux);class px extends ws{constructor(){super(),this.boundOnDropDownElementChangedHandler=this.onDropDownElementChanged.bind(this),this.boundOnDropDownShownHandler=this.onDropDownShown.bind(this),this.boundOnDropDownClosedHandler=this.onDropDownClosed.bind(this),this.boundOnDropDownPortalElementsChangedHandler=this.onDropDownPortalElementsChanged.bind(this),this.boundSlotChangedHandler=this.onSlotChanged.bind(this),this.dropDownPortal=null,this._dropDownElement=null,this._adaptiveDropDownElement=null}get dropDownElement(){return this._dropDownElement}get useMobileFocusBehaviour(){var e;return(null===(e=this._adaptiveDropDownElement)||void 0===e?void 0:e.adaptivityEnabled)||!1}connectedCallback(){super.connectedCallback(),this.ensureDropDownInfrastructure(),this.addEventListener(gr.eventName,this.boundOnDropDownElementChangedHandler)}disconnectedCallback(){this.removeEventListener(gr.eventName,this.boundOnDropDownElementChangedHandler),this.disposeDropDownInfrastructure(),super.disconnectedCallback()}render(){return Xn`
            <slot @slotchange="${this.boundSlotChangedHandler}">
            </slot>
        `}processCapturedKeyDownAsync(e,t){return this.invokeKeyDownServerCommand(e)?(e.preventDefault(),t.handled=!0,Promise.resolve()):super.processCapturedKeyDownAsync(e,t)}processCapturedPointerAsync(e,t){return this.canHandlePointerDown(e)?(t.handled=!0,Promise.resolve()):super.processCapturedPointerAsync(e,t)}canHandlePointerDown(e){return!1}invokeKeyDownServerCommand(e){return!1}onSlotChanged(e){this.disposeDropDownInfrastructure(),this.ensureDropDownInfrastructure()}getDropDownPortal(){if(!this.shadowRoot)return null;const e=this.shadowRoot.querySelector("slot");if(!e)return null;return e.assignedNodes().find((e=>ot(e)))}onDropDownElementChanged(e){this.dropDownPortal||this.ensureDropDownInfrastructure(),H.getOriginalSource(e)===this.dropDownPortal&&(this.disposeDropDownElement(),this.ensureDropDownElement())}onDropDownShown(e){this.dropDownElement&&lt(this.dropDownElement)&&this.addLogicalChild(this.dropDownElement)}onDropDownClosed(e){this.dropDownElement&&lt(this.dropDownElement)&&this.removeLogicalChild(this.dropDownElement)}onDropDownPortalElementsChanged(e){this.ensureDropDownElement()}ensureDropDownInfrastructure(){var e;this.dropDownPortal=this.getDropDownPortal(),null===(e=this.dropDownPortal)||void 0===e||e.addEventListener(gr.eventName,this.boundOnDropDownPortalElementsChangedHandler),this.ensureDropDownElement()}ensureDropDownElement(){var e,t,i;this.dropDownPortal&&(this._dropDownElement=null===(e=this.dropDownPortal)||void 0===e?void 0:e.popup,null===(t=this._dropDownElement)||void 0===t||t.addEventListener(oo.eventName,this.boundOnDropDownShownHandler),null===(i=this._dropDownElement)||void 0===i||i.addEventListener(ao.eventName,this.boundOnDropDownClosedHandler),this._dropDownElement&&dt(this._dropDownElement)&&(this._adaptiveDropDownElement=this._dropDownElement))}disposeDropDownInfrastructure(){var e;null===(e=this.dropDownPortal)||void 0===e||e.removeEventListener(gr.eventName,this.boundOnDropDownPortalElementsChangedHandler),this.dropDownPortal=null,this._adaptiveDropDownElement=null,this.disposeDropDownElement()}disposeDropDownElement(){var e,t;null===(e=this._dropDownElement)||void 0===e||e.removeEventListener(oo.eventName,this.boundOnDropDownShownHandler),null===(t=this._dropDownElement)||void 0===t||t.removeEventListener(ao.eventName,this.boundOnDropDownClosedHandler),this._dropDownElement=null}}let mx=class extends px{constructor(){super(),this.desiredWidth=null,this.dropDownWidthSourceResizeObserver=new ResizeObserver(this.onDropDownWidthSourceSizeChanged.bind(this))}connectedCallback(){super.connectedCallback(),this.observeForDropDownWidthSourceElementSize()}disconnectedCallback(){this.dropDownWidthSourceResizeObserver.disconnect(),super.disconnectedCallback()}ensureDropDownElement(){super.ensureDropDownElement(),this.updateDropDownDesiredWidth()}onDropDownWidthSourceSizeChanged(e,t){if(e.length<1)return;this.desiredWidth=e[0].contentRect.width+"px",this.updateDropDownDesiredWidth()}updateDropDownDesiredWidth(){this.dropDownElement&&(this.dropDownElement.desiredWidth=this.desiredWidth)}observeForDropDownWidthSourceElementSize(){this.dropDownWidthSourceResizeObserver.disconnect();const e=this.getDropDownWidthSourceElement();e&&this.dropDownWidthSourceResizeObserver.observe(e)}getDropDownWidthSourceElement(){return this}};mx=C([rn(hx.menuNavBarComponentName)],mx);class gx extends CustomEvent{constructor(e){super(gx.eventName,{bubbles:!0,composed:!0,detail:new Cx(e)})}}gx.eventName=`${hx.menuComponentName}.collapse-changed`;class Cx{constructor(e){this.collapsed=e}}mt.register(gx.eventName,(e=>e.detail));class fx{constructor(e){var t;this.menuItem=e,this.id=null!==(t=e.id)&&void 0!==t?t:"",this.width=-1,this.adaptivePriority=e.adaptivePriority,this.canCrop=e.canCrop,this.textElement=null,this.textWidth=-1,this.container=e.closest(`[data-dxmenu-item-id="${this.id}"]`),this.initialize()}canCollapse(){return this.canCrop&&null!==this.textElement}canReduce(){return this.canCollapse()&&!T.DomUtils.hasClassName(this.textElement,cx.menuItemTextHiddenClass)}canIncrease(){return this.canCollapse()&&T.DomUtils.hasClassName(this.textElement,cx.menuItemTextHiddenClass)}showTextElement(){this.toggleCssClass(this.textElement,cx.menuItemTextHiddenClass,!1),this.toggleCssClass(this.container,cx.menuListItemHiddenClass,!1)}hideTextElement(){this.toggleCssClass(this.textElement,cx.menuItemTextHiddenClass,!0),this.toggleCssClass(this.container,cx.menuListItemHiddenClass,!0)}initialize(){let e=0;this.container&&(e=this.calculateChildrenOffsetWidth(this.container));const t=this.menuItem.querySelector(`*:not(${Y})`);if(t){e+=this.calculateChildrenOffsetWidth(t);for(let i=0;i<t.children.length;i++){const n=t.children[i],s=this.calculateElementWidth(n);n.matches(`div.${cx.menuItemTextContainer}`)&&(this.textElement=n,this.textWidth=s),e+=s}}this.width=e}isHTMLElement(e){return!!e.offsetWidth}calculateElementWidth(e){const t=getComputedStyle(e);return(this.isHTMLElement(e)?e.offsetWidth:e.getBoundingClientRect().width)+parseFloat(t.marginLeft)+parseFloat(t.marginRight)}calculateChildrenOffsetWidth(e){const t=T.DomUtils.getCurrentStyle(e);return parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.marginLeft)+parseFloat(t.marginRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)}toggleCssClass(e,t,i){e&&e.classList.toggle(t,i)}}class vx{constructor(e,t){this.width=e,this.minWidth=t}}class bx{constructor(e){this._currentWidth=0,this._itemsWidth=new vx(0,0),this._itemsOffset=0,this._collapseToHamburgerWidth=-1,this._menuItemInfos=[],this._resizeObserver=null,this._menuView=e}get isCollapsed(){return this._menuView.isCollapsed}get isVertical(){return this._menuView.isVertical}get canCollapse(){return this._menuView.canCollapse}get collapseToIcons(){return this._menuView.collapseToIcons}get collapseToIconsAll(){return this._menuView.collapseToIconsAll}get collapseToHamburgerMenu(){return this._menuView.collapseToHamburgerMenu}async initialize(e,t){this.unsubsribeFromSizeChanges(),void 0!==t&&this.canCollapse&&(this.collapseToIcons||this.collapseToIconsAll||this.collapseToHamburgerMenu)?(this._menuItemInfos=this.createMenuItemInfos(e),this._currentWidth=t,this.isCollapsed||(this.isVertical?(this._itemsOffset=0,this._itemsWidth=new vx(Math.max(...this._menuItemInfos.map((e=>e.width))),0),this._collapseToHamburgerWidth=-1):(this._itemsOffset=this._menuView.itemsOffset,this._itemsWidth=new vx(this.calculateItemsWidth(),this.calculateItemsMinWidth()),this._collapseToHamburgerWidth=this.collapseToIcons||this.collapseToIconsAll?this._itemsWidth.minWidth+this._itemsOffset:this._itemsWidth.width+this._itemsOffset)),this.resize(this._currentWidth),this.subscribeToSizeChanges()):(this.isCollapsed?this._menuView.onCollapseChanged(!1):this.increaseAllItems(),this._menuItemInfos=[])}resize(e){if(this.isCollapsed)(e>this._collapseToHamburgerWidth||!this.collapseToHamburgerMenu)&&this._menuView.onCollapseChanged(!1);else{const t=e-this._currentWidth;if(this.isVertical)this.collapseToIconsAll&&(t<=0&&this._itemsWidth.width>e?this.reduceAllItems():this._itemsWidth.width<e&&this.increaseAllItems());else{if(this.collapseToIcons){let i=this._itemsOffset;this._menuItemInfos.forEach((e=>{i+=e.width,e.canIncrease()&&(i-=e.textWidth)})),t<=0&&i>e?this.reduceItems(e,i):t>=0&&this.increaseItems(e,i)}else if(this.collapseToIconsAll){const i=this._itemsWidth.width+this._itemsOffset;t<=0&&i>e?this.reduceAllItems():t>=0&&i<e&&this.increaseAllItems()}else this.increaseAllItems();this.collapseToHamburgerMenu&&t<=0&&e<this._collapseToHamburgerWidth&&this._menuView.onCollapseChanged(!0)}}this._currentWidth=e}dispose(){this.unsubsribeFromSizeChanges(),this._menuItemInfos=[]}subscribeToSizeChanges(){this.subscribeToRootElementSizeChange()}unsubsribeFromSizeChanges(){this.unsubscribeFromRootElementSizeChange()}subscribeToRootElementSizeChange(){this._resizeObserver=new ResizeObserver((e=>{const t=e[0];t&&this.resize(t.contentRect.width)})),this._resizeObserver.observe(this._menuView.root)}unsubscribeFromRootElementSizeChange(){var e;null===(e=this._resizeObserver)||void 0===e||e.disconnect(),this._resizeObserver=null}createMenuItemInfos(e){const t=[];return e&&(e.forEach((e=>{t.push(new fx(e))})),t.sort(((e,t)=>e.adaptivePriority-t.adaptivePriority))),t}calculateItemsWidth(){let e=0;return this._menuItemInfos.forEach((t=>e+=t.width)),e}calculateItemsMinWidth(){let e=0;return this._menuItemInfos.forEach((t=>{e+=t.width,t.canCollapse()&&(e-=t.textWidth)})),e}reduceItems(e,t){for(let i=this._menuItemInfos.length-1;i>=0&&t>e;i--){const e=this._menuItemInfos[i];e.canReduce()&&(e.hideTextElement(),t-=e.textWidth)}}increaseItems(e,t){for(let i=0;i<this._menuItemInfos.length;i++){const n=this._menuItemInfos[i];if(n.canIncrease()){if(t+n.textWidth>e)break;n.showTextElement(),t+=n.textWidth}}}reduceAllItems(){for(let e=0;e<this._menuItemInfos.length;e++){const t=this._menuItemInfos[e];t.canReduce()&&t.hideTextElement()}}increaseAllItems(){for(let e=0;e<this._menuItemInfos.length;e++){const t=this._menuItemInfos[e];t.canIncrease()&&t.showTextElement()}}}class wx{constructor(){this._objCaptured=new Fr,this._objReleased=new Fr,this._obj=null}get subject(){return this._obj}capture(e){if(null==e)throw new Error(`Value cannot be ${e}`);null!==this._obj&&this._objReleased.tryReject(`The object ${this._obj} was not released.`),this._objReleased=new Fr,this._obj=e,this._objCaptured.tryResolve(e)}release(){const e=this._obj;this._obj=null,e&&this._objReleased.tryResolve(e),this._objCaptured=new Fr}waitCapture(){return this._objCaptured.promise}waitRelease(){return this._objReleased.promise}}class yx{constructor(){this._selectedItemIndices=[],this._initialSelectedItem=null,this._initNewState=!1,this._selectedItemIndex=0}get currentLevel(){return this._selectedItemIndices.length}get selectedItemIndex(){return this._selectedItemIndex}updateState(e,t){var i;this._initNewState?(this._selectedItemIndices.push(e),this._selectedItemIndex=this._initialSelectedItem===Fx.Last?t-1:0):this._selectedItemIndex=null!==(i=this._selectedItemIndices.pop())&&void 0!==i?i:e}moveToNextLevel(e){this._initNewState=!0,this._initialSelectedItem=e}moveToPrevLevel(){this._initNewState=!1}clearState(){this._selectedItemIndices=[],this._selectedItemIndex=0,this._initNewState=!1,this._initialSelectedItem=Fx.First}}class Bx{constructor(){this.allowCount=0}get Allowed(){return this.allowCount>0}allow(){this.allowCount++}disallow(){this.Allowed&&this.allowCount--}reset(){this.allowCount=0}doAllowedAction(e){this.allow();try{e()}finally{this.disallow()}}doAllowedFunc(e){this.allow();try{return e()}finally{this.disallow()}}doIfAllowed(e){this.Allowed&&e()}}function Ex(e){return e&&"hasPopup"in e.dataset}function Ix(e){return!!e&&"expanded"in e.dataset}function Sx(e,t){return e.classList.contains(t)}function xx(e){return e.isConnected&&e.matches(":scope:focus-within")}var Dx,Fx;!function(e){e[e.Expand=0]="Expand",e[e.Collapse=1]="Collapse",e[e.Execute=2]="Execute"}(Dx||(Dx={}));class Tx extends CustomEvent{constructor(e){super(Tx.eventName,{detail:{action:e},bubbles:!0,composed:!1,cancelable:!0})}}Tx.eventName="dxbl-dropdown.action-request",mt.register(Tx.eventName,(e=>e.detail)),function(e){e[e.First=0]="First",e[e.Last=1]="Last"}(Fx||(Fx={}));class Hx extends Ia{canSwitchToNestedContentMode(){return!0}isImmediatelyClickEnabled(){return!1}updateSelectedItemByIndex(e){e<0&&(e=Math.min(this.selectedItemIndex,this.itemCount-1)),super.updateSelectedItemByIndex(e)}handleKeyDown(e){return!(Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&!this.nestedContentSelected)&&(!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e))}focusFirstItem(){this.focusItem(0)}focusLastItem(){this.focusItem(this.itemCount-1)}focusItem(e){Ii(this.targetElement),this.updateSelectedItemByIndex(e),this.selectedItemElement.hasAttribute("data-is-templated-item")?this.switchToNestedContent():this.focusSelectedItem()}doClick(e,t){this.raiseClickEvent(e,t.ctrlKey,t.metaKey,t.shiftKey)}onPopupShown(){Ei(this.targetElement),super.onPopupShown()}}class Ux extends Hx{constructor(e,t,i=!1){super(e,t,i),this._subMenuHolder=new wx,this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this._shouldRestoreFocus=!1,this.subscribeToEvents()}get subMenuStrategy(){return this._subMenuHolder.subject}canSwitchToNestedContentMode(){return!this.subMenuStrategy}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return!(e.ctrlKey||e.shiftKey||e.altKey)&&(this.moveToNextItem(!0),!0);case Be.KeyCode.Up:return!(e.ctrlKey||e.shiftKey||e.altKey)&&(this.moveToPrevItem(!0),!0);case Be.KeyCode.Home:return this.selectItem(0),!0;case Be.KeyCode.End:return this.selectItem(this.itemCount-1),!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.selectedItemElement===this.targetElement&&this.switchToNestedContent()||this.doAction(e),!0;case Be.KeyCode.Right:return this.handleRightKey(e);case Be.KeyCode.Left:return this.handleLeftKey(e);default:return!1}}handleRightKey(e){return!(!Ex(this.selectedItemElement)||Ix(this.selectedItemElement))&&(this.openSubMenu(Fx.First),!0)}handleLeftKey(e){return this.closeSelf(Be.KeyCode.Left)}onSubMenuClosed(e){this._subMenuHolder.subject===e&&this._subMenuHolder.release(),this.navigator.leaveDirection===Qi.None&&this._shouldRestoreFocus&&this.restoreFocus(),this._shouldRestoreFocus=!1}restoreFocus(){this.focusSelectedItem()}onSubMenuShown(e){this._subMenuHolder.capture(e),this._shouldRestoreFocus=this._shouldRestoreFocus||xx(this.targetElement)}waitSubMenuShown(){return this._subMenuHolder.waitCapture()}waitSubMenuClosed(){return this._subMenuHolder.waitRelease()}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Collapse))}subscribeToEvents(){this.targetElement.addEventListener(go.eventName,this.boundOnPopupKeyboardStrategyCreating)}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createSubMenuStrategy(e,t)}}}const Px=`.${cx.menuItem} > .dxbl-btn, .${cx.menuItem} > .dxbl-menu-item-tmpl`,Qx=`.${cx.menuTitle}`,Nx="data-keyboard-navigator-is-ready",Rx="data-is-templated-item",Lx="dxbl-btn-split-dropdown",Mx=`.${rB.SplitButton}`;class kx extends Li{initialize(){super.initialize(),this.targetElement.setAttribute(Nx,"")}updateSelectedItemByIndex(e){e<0&&(e=Math.min(this.selectedItemIndex,this.itemCount-1)),super.updateSelectedItemByIndex(e)}isImmediatelyClickEnabled(){return!1}canSwitchToNestedContentMode(){return!0}handleKeyDown(e){return!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e)}isTitle(e){return e.classList.contains(cx.menuTitle)}needToAddTitle(){const e=this.targetElement.querySelector(Qx);return null!=e&&e.querySelectorAll(k).length>0}handleTabKeyDown(e){return e.shiftKey?this.selectedItemIndex>0&&this.isTitle(this.items[0])?this.selectItem(0):this.leaveBackward():this.isTitle(this.selectedItemElement)?this.selectItem(this.selectedItemIndex+1):this.leaveForward(),!0}}class Kx extends kx{constructor(e,t){super(e,t),this.boundOnPopupKeyboardStrategyCreating=this.onPopupKeyboardStrategyCreating.bind(this),this._subMenuHolder=new wx,this._shouldRestoreFocus=!1,this._allowedToRestoreFocus=!1,this.subscribeToEvents()}get allowedToRestoreFocus(){return this._allowedToRestoreFocus}get shouldRestoreFocus(){return this._shouldRestoreFocus}set shouldRestoreFocus(e){this._shouldRestoreFocus=e}hasMenu(){return Ex(this.selectedItemElement)||Sx(this.selectedItemElement,Lx)}isMenuExpanded(){return Ix(this.selectedItemElement)||Sx(this.selectedItemElement,Lx)&&Ix(this.selectedItemElement.closest(Mx))}subscribeToEvents(){this.targetElement.addEventListener(go.eventName,this.boundOnPopupKeyboardStrategyCreating)}onPopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>this.createPopupStrategy(e,t),createModal:(e,t)=>this.createModalStrategy(e,t)}}get subMenuStrategy(){return this._subMenuHolder.subject}canSwitchToNestedContentMode(){return!this.subMenuStrategy}onSubMenuShown(e){this.tryAddLogicalChild(e.targetElement),this._subMenuHolder.capture(e),this.shouldRestoreFocus=this.shouldRestoreFocus||xx(this.targetElement)}onSubMenuClosed(e){this._subMenuHolder.subject===e&&this._subMenuHolder.release(),this.navigator.leaveDirection===Qi.None&&this.shouldRestoreFocus&&this.focusSelectedItem(),this.shouldRestoreFocus=!1,this.tryRemoveLogicalChild(e.targetElement)}closeSubMenu(){}tryAddLogicalChild(e){At(this.targetElement)&&lt(e)&&(e.logicalParent||this.targetElement.addLogicalChild(e))}tryRemoveLogicalChild(e){At(this.targetElement)&&lt(e)&&e.logicalParent===this.targetElement&&this.targetElement.removeLogicalChild(e)}waitSubMenuShown(){return this._subMenuHolder.waitCapture()}waitSubMenuClosed(){return this._subMenuHolder.waitRelease()}async focusSubMenuItemAsync(e){const t=await this.waitSubMenuShown();e===Fx.First?t.focusFirstItem():t.focusLastItem()}allowRestoreFocus(){this._allowedToRestoreFocus=!0}disallowRestoreFocus(){this._allowedToRestoreFocus=!1}}class Ox extends Ux{constructor(e,t,i,n,s=!1){super(e,t,s),this._focusSemaphore=new Bx,this._menuItemSelector=i,this._parentStrategy=n}get parentStrategy(){return this._parentStrategy}get menuItemSelector(){return this._menuItemSelector}queryItems(){return this.queryItemsBySelector(this._menuItemSelector)}doAction(e){this.doClick(this.selectedItemElement,e),Ex(this.selectedItemElement)&&this.focusSubMenuItemAsync(Fx.First)}allowRestoreFocus(){}handleKeyDown(e){return this._focusSemaphore.doAllowedFunc((()=>Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Right&&this.subMenuStrategy&&xx(this.targetElement)?(this.subMenuStrategy.focusFirstItem(),!0):super.handleKeyDown(e)))}openSubMenu(e){this.openSubMenuAsync(e)}async openSubMenuAsync(e){this.requestSubMenuOpen(),await this.focusSubMenuItemAsync(e)}async focusSubMenuItemAsync(e){const t=await this.waitSubMenuShown();Ii(t.targetElement),e===Fx.Last?t.focusLastItem():t.focusFirstItem()}closeSubMenu(){this.selectedItemElement.dispatchEvent(new Tx(Dx.Collapse))}handlePopupShown(){this._parentStrategy.onSubMenuShown(this)}handlePopupClosed(){this._parentStrategy.onSubMenuClosed(this)}focusFirstItem(){this.subMenuStrategy?this.subMenuStrategy.focusFirstItem():super.focusFirstItem()}focusLastItem(){this.subMenuStrategy?this.subMenuStrategy.focusLastItem():super.focusLastItem()}focusItem(e){this._focusSemaphore.doAllowedAction((()=>{super.focusItem(e)}))}restoreFocus(){this._focusSemaphore.doAllowedAction((()=>{super.restoreFocus()}))}focusSelectedItem(){this._focusSemaphore.doIfAllowed((()=>{super.focusSelectedItem()}))}hasTransitContainer(e){return e.hasAttribute(Rx)}findFocusableElements(){return Ci.findFocusableElements(this.selectedItemElement).filter((e=>!e.classList.contains("dxbl-dropdown-dialog")))}leaveTransitContainer(e){this.parentStrategy.closeSubMenu()}}class _x extends Ox{createSubMenuStrategy(e,t){return new Vx(e,t,this.menuItemSelector,this,this.hasTransitContainer(t))}closeSelf(e){return!1}}class Vx extends Ox{createSubMenuStrategy(e,t){return new Vx(e,t,this.menuItemSelector,this)}closeSelf(e){return this.parentStrategy.closeSubMenu(),!0}}var zx;!function(e){e[e.Unknown=0]="Unknown",e[e.MoveToNextItem=2]="MoveToNextItem",e[e.MoveToPrevItem=4]="MoveToPrevItem",e[e.MoveToFirstItem=8]="MoveToFirstItem",e[e.MoveToLastItem=16]="MoveToLastItem",e[e.OpenSubMenu=32]="OpenSubMenu",e[e.Execute=64]="Execute",e[e.Leave=128]="Leave"}(zx||(zx={}));class Wx extends Kx{constructor(e,t){super(e,t),this._keyCodeToCommandMap=this.createKeyCodeToCommandMap()}get menuItemSelector(){return Px}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${Px}, ${Qx}`):this.queryItemsBySelector(Px)}getCommands(e){var t;return null!==(t=this._keyCodeToCommandMap.get(e))&&void 0!==t?t:zx.Unknown}createPopupStrategy(e,t){return new _x(e,t,Px,this,this.hasTransitContainer(t))}hasTransitContainer(e){return e.hasAttribute(Rx)}createModalStrategy(e,t){throw new Error("This strategy type is not supported in the current context.")}moveToNextItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex<this.itemCount-1?this.selectItem(this.selectedItemIndex+1):e&&!this.isTitle(this.items[0])&&this.selectItem(0))}moveToPrevItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex>0&&!this.isTitle(this.items[this.selectedItemIndex-1])?this.selectItem(this.selectedItemIndex-1):e&&!this.isTitle(this.items[this.itemCount-1])&&this.selectItem(this.itemCount-1))}handleKeyDownCore(e){switch(this.getCommands(Be.KeyUtils.getEventKeyCode(e))){case zx.MoveToNextItem:return this.subMenuStrategy?this.closeSubMenuAndMoveToNextItem():this.moveToNextItem(!0),!0;case zx.MoveToPrevItem:return this.subMenuStrategy?this.closeSubMenuAndMoveToPrevItem():this.moveToPrevItem(!0),!0;case zx.OpenSubMenu|zx.MoveToLastItem:return!(!Ex(this.selectedItemElement)||!xx(this.targetElement))&&(this.subMenuStrategy?this.subMenuStrategy.focusLastItem():this.openSubMenuAndFocusItem(Fx.Last),!0);case zx.OpenSubMenu|zx.MoveToFirstItem:return!(!Ex(this.selectedItemElement)||!xx(this.targetElement))&&(this.subMenuStrategy?this.subMenuStrategy.focusFirstItem():this.openSubMenuAndFocusItem(Fx.First),!0);case zx.MoveToFirstItem:return this.isTitle(this.items[0])?this.itemCount>1&&this.selectItem(1):this.selectItem(0),!0;case zx.MoveToLastItem:return this.isTitle(this.items[this.itemCount-1])?this.itemCount>1&&this.selectItem(this.itemCount-2):this.selectItem(this.itemCount-1),this.selectItem(this.itemCount-1),!0;case zx.Execute:return this.isTitle(this.selectedItemElement)||this.doAction(e),!0;case zx.Leave:return this.subMenuStrategy&&this.requestSubMenuClose(),this.handleTabKeyDown(e);default:return!1}}doAction(e){this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),Ex(this.selectedItemElement)&&this.focusSubMenuItemAsync(Fx.First)}closeSubMenu(){this.requestSubMenuClose()}closeSubMenuAndMoveToPrevItem(){this.requestSubMenuClose(),this.moveToPrevItem(!0),this.requestSubMenuOpen()}closeSubMenuAndMoveToNextItem(){this.requestSubMenuClose(),this.moveToNextItem(!0),this.requestSubMenuOpen()}openSubMenuAndFocusItem(e){return this.requestSubMenuOpen(),this.focusSubMenuItemAsync(e)}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Collapse))}}class $x extends Wx{createKeyCodeToCommandMap(){return new Map([[Be.KeyCode.Down,zx.MoveToNextItem],[Be.KeyCode.Up,zx.MoveToPrevItem],[Be.KeyCode.Right,zx.OpenSubMenu|zx.MoveToFirstItem],[Be.KeyCode.Left,zx.OpenSubMenu|zx.MoveToLastItem],[Be.KeyCode.Home,zx.MoveToFirstItem],[Be.KeyCode.End,zx.MoveToLastItem],[Be.KeyCode.Enter,zx.Execute],[Be.KeyCode.Space,zx.Execute],[Be.KeyCode.Tab,zx.Leave]])}closeSubMenuAndMoveToNextItem(){this.requestSubMenuClose()}closeSubMenuAndMoveToPrevItem(){this.requestSubMenuClose()}createPopupStrategy(e,t){return new Gx(e,t,Px,this,this.hasTransitContainer(t))}}class Gx extends Ox{createSubMenuStrategy(e,t){return new Vx(e,t,this.menuItemSelector,this,this.hasTransitContainer(t))}closeSelf(e){return this.parentStrategy.closeSubMenu(),!0}}class qx extends Wx{createKeyCodeToCommandMap(){return new Map([[Be.KeyCode.Right,zx.MoveToNextItem],[Be.KeyCode.Left,zx.MoveToPrevItem],[Be.KeyCode.Down,zx.OpenSubMenu|zx.MoveToFirstItem],[Be.KeyCode.Up,zx.OpenSubMenu|zx.MoveToLastItem],[Be.KeyCode.Home,zx.MoveToFirstItem],[Be.KeyCode.End,zx.MoveToLastItem],[Be.KeyCode.Enter,zx.Execute],[Be.KeyCode.Space,zx.Execute],[Be.KeyCode.Tab,zx.Leave]])}}class Xx extends kx{constructor(){super(...arguments),this._levelController=new yx}get menuLevel(){return this._levelController.currentLevel}initialize(){super.initialize(),this._levelController.updateState(this.selectedItemIndex,this.itemCount),this.selectedItemIndex=this._levelController.selectedItemIndex}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${Px}, .${cx.subMenuTemplate}, ${Qx}`):this.queryItemsBySelector(`${Px}, .${cx.subMenuTemplate}`)}moveToNextItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex<this.itemCount-1?this.selectItem(this.selectedItemIndex+1):e&&!this.isTitle(this.items[0])&&this.selectItem(0))}moveToPrevItem(e=!1){this.isTitle(this.selectedItemElement)||(this.selectedItemIndex>0&&!this.isTitle(this.items[this.selectedItemIndex-1])?this.selectItem(this.selectedItemIndex-1):e&&!this.isTitle(this.items[this.itemCount-1])&&this.selectItem(this.itemCount-1))}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return this.moveToNextItem(!0),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.isTitle(this.selectedItemElement)||(this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),this.selectedItemElement.hasAttribute("data-header")?this.onMoveToPrevLevel():Ex(this.selectedItemElement)&&this.onMoveToNextLevel(Fx.First)),!0;case Be.KeyCode.Right:return!!Ex(this.selectedItemElement)&&(this.performShortcutEvent(e),this.onMoveToNextLevel(Fx.First),!0);case Be.KeyCode.Left:return this.menuLevel>0?(this.performShortcutEvent(e),this.onMoveToPrevLevel(),!0):Ex(this.selectedItemElement)?(this.performShortcutEvent(e),this.onMoveToNextLevel(Fx.Last),!0):this.menuLevel>0&&(this.performShortcutEvent(e),this.onMoveToPrevLevel(),!0);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);default:return!1}}getShortcutContext(){const e=this.menuLevel>0||this.needToAddTitle()?this.selectedItemIndex-1:this.selectedItemIndex;return{level:this.menuLevel,selectedItemIndex:e}}onMoveToNextLevel(e){this._levelController.moveToNextLevel(e)}onMoveToPrevLevel(){this._levelController.moveToPrevLevel()}}const Yx=`.${cx.menuNav} > .${cx.menuNavBar} > .dxbl-btn`;class Jx extends Kx{createModalStrategy(e,t){throw new Error("This strategy type is not supported in the current context.")}createPopupStrategy(e,t){return new jx(e,t,this)}queryItems(){return this.needToAddTitle()?this.queryItemsBySelector(`${Yx}, ${Qx}`):this.queryItemsBySelector(Yx)}handleKeyDownCore(e){if(!this.isTitle(this.selectedItemElement))switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Up:return this.performShortcutEvent(e),this.focusSubMenuItemAsync(Fx.Last),!0;case Be.KeyCode.Down:case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performShortcutEvent(e),this.focusSubMenuItemAsync(Fx.First),!0}return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&(this.performShortcutEvent(e),this.handleTabKeyDown(e))}isImmediatelyClickEnabled(){return!1}}class jx extends Hx{constructor(e,t,i){super(e,t),this._itemIdToParentIdMap=new Map,this._parentStrategy=i}initialize(){super.initialize(),this._itemIdToParentIdMap.clear();const e=this.targetElement.querySelector(`.${cx.navigation}`);e&&this.mapItemsToParent(e,null)}mapItemsToParent(e,t){for(const i of e.children){const e=i.dataset.dxmenuItemId;if(!e)continue;this._itemIdToParentIdMap.set(e,t);const n=Array.from(i.children).find((e=>e instanceof HTMLUListElement));n&&this.mapItemsToParent(n,e)}}queryItems(){return this.queryItemsBySelector(`${Px}, .${cx.subMenuTemplate}`)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);return!(!this.nestedContentSelected&&t===Be.KeyCode.Tab)&&super.handleKeyDown(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return this.moveToNextItem(!0),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Home:return this.focusFirstItem(),!0;case Be.KeyCode.End:return this.focusLastItem(),!0;case Be.KeyCode.Right:return Ex(this.selectedItemElement)&&(Ix(this.selectedItemElement)?this.moveToNextItem(!0):this.requestSubMenuOpen()),!0;case Be.KeyCode.Left:if(Ix(this.selectedItemElement))this.requestSubMenuClose();else{const e=this.getParentNode(this.selectedItemElement);e&&(this.updateSelectedItemByChildElement(e),this.focusSelectedItem())}return!0;case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.doClick(this.selectedItemElement,e),!0;default:return!1}}getParentNode(e){var t;const i=null===(t=e.closest(`.${cx.menuItem}`))||void 0===t?void 0:t.getAttribute("id");if(i){const e=this._itemIdToParentIdMap.get(i);if(e)return this.targetElement.querySelector(`#${e}${Px}`)}return null}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Collapse))}handlePopupShown(){this._parentStrategy.onSubMenuShown(this)}handlePopupClosed(){this._parentStrategy.onSubMenuClosed(this)}}var Zx;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(Zx||(Zx={}));let eD=class extends Bs{constructor(){super(),this._menuItems=[],this._sizeController=null,this._handlePromise=Promise.resolve(),this._keyboardNavigator=null,this._hasVisibleItems=!1,this.isVertical=!1,this.isCollapsed=!1,this.canCollapse=!1,this.collapseToIcons=!1,this.collapseToIconsAll=!1,this.collapseToHamburgerMenu=!1,this.loadMode=!1,this._hasVisibleItems=!1,this.sizeMode=Zx.Medium,this.isMobileMode=!1,this._menuItemsChanged=!1,this._firstUpdate=!0,this._intersectionObserver=new IntersectionObserver(this.onItemsIntersectionChanged.bind(this),{root:this,threshold:[0,1]})}onItemConnected(){this.updateItems()}onItemDisconnected(){this.updateItems()}get hasVisibleItems(){return this._hasVisibleItems}set hasVisibleItems(e){this._hasVisibleItems=e,e&&this._menuItemsChanged&&this.showMenuItems()}async showMenuItems(){var e;this._menuItemsChanged=!1;const t=this.offsetWidth;await(null===(e=this._sizeController)||void 0===e?void 0:e.initialize(this._menuItems,t)),this.toggleItemsContainerCssClasses(cx.invisible,!1),this.toggleItemsContainerCssClasses(cx.menuLoading,!1)}updateItems(e=!0){this._menuItems=e?this.collectMenuItems():[],this._intersectionObserver.disconnect(),this._menuItems.forEach((e=>this._intersectionObserver.observe(e))),this._menuItemsChanged=!0}get root(){return this}get items(){return this._menuItems}get itemsOffset(){return this.calculateItemsOffset()}restoreState(){n.setLoaded(this),this.getAttribute("tabindex")||this.initializeKeyboardNavigatior()}connectedCallback(){super.connectedCallback(),this._sizeController=new bx(this)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._sizeController)||void 0===e||e.dispose(),this._sizeController=null,this._intersectionObserver.disconnect()}initializeKeyboardNavigatior(){this._keyboardNavigator=this.querySelector(Pi),this._keyboardNavigator&&this._keyboardNavigator.initialize(this,this.createKeyboardStrategy(this._keyboardNavigator))}createKeyboardStrategy(e){return this.isMobileMode?this.isVertical?new Xx(e,this):new Jx(e,this):this.isVertical?new $x(e,this):new qx(e,this)}async getUpdateComplete(){return await this._handlePromise,super.getUpdateComplete()}firstUpdated(){this._firstUpdate=!1}willUpdate(e){this._handlePromise=this.handleChangedProperties(e,this._firstUpdate)}async handleChangedProperties(e,t){var i;if(this.anyOf(e,"isMobileMode","isVertical")&&this.initializeKeyboardNavigatior(),this.anyOf(e,"canCollapse","isCollapsed","isVertical")){this.updateItems(!this.isCollapsed)}!t&&this.canCollapse&&e.has("sizeMode")&&(this.isCollapsed||(this._menuItemsChanged=!0,this.toggleItemsContainerCssClasses(cx.invisible,!0)),await(null===(i=this._sizeController)||void 0===i?void 0:i.initialize(this._menuItems))),this.hasVisibleItems&&await this.showMenuItems()}onCollapseChanged(e){this.dispatchEvent(new gx(e))}anyOf(e,...t){for(const i of t)if(e.has(i))return!0;return!1}collectMenuItems(){const e=this.querySelectorAll(`:scope ${hx.menuItemComponentName}`),t=[];return e&&e.forEach((e=>t.push(e))),t}onItemsIntersectionChanged(e){e.forEach((e=>e.target.isVisible=e.isIntersecting)),this.hasVisibleItems=this._menuItems.filter((e=>e.isVisible)).length>0}toggleItemsContainerCssClasses(e,t){const i=this.querySelector(hx.menuItemsContainerSelector);i&&requestAnimationFrame((()=>i.classList.toggle(e,t)))}calculateItemsOffset(){const e=this.querySelector(hx.menuItemsContainerSelector);return e?e.offsetLeft-this.offsetLeft:0}};C([ln({type:Boolean,attribute:"is-vertical"})],eD.prototype,"isVertical",void 0),C([ln({type:Boolean,attribute:"is-collapsed"})],eD.prototype,"isCollapsed",void 0),C([ln({type:Boolean,attribute:"can-collapse"})],eD.prototype,"canCollapse",void 0),C([ln({type:Boolean,attribute:"collapse-to-icons"})],eD.prototype,"collapseToIcons",void 0),C([ln({type:Boolean,attribute:"collapse-to-icons-all"})],eD.prototype,"collapseToIconsAll",void 0),C([ln({type:Boolean,attribute:"collapse-to-hamburger-menu"})],eD.prototype,"collapseToHamburgerMenu",void 0),C([ln({type:Boolean,attribute:"load-mode"})],eD.prototype,"loadMode",void 0),C([ln({type:Zx,attribute:"size-mode"})],eD.prototype,"sizeMode",void 0),C([ln({type:Boolean,attribute:"data-dx-menu-mobile"})],eD.prototype,"isMobileMode",void 0),eD=C([rn(hx.menuComponentName)],eD);const tD=document;function iD(e,t,i){const n=tD.querySelectorAll(t),s=n.length;for(let t=0;t<s;t++)e.upgrade(n[t]);e.define(t,i)}class nD extends HTMLElement{constructor(){super()}static get observedAttributes(){return["menu-id"]}attributeChangedCallback(e,t,i){"menu-id"===e&&this.updateAttributes(i)}updateAttributes(e){const t=document.querySelector(`[data-dxmenu-id=${e}]`);if(t){$().isMobileDevice&&t.toggleAttribute("data-dx-menu-mobile",!0),t.toggleAttribute("data-dx-menu-loaded",!0)}}}iD(customElements,"dxbl-menu-preloader",nD);class sD{constructor(e,t){this.toolbarModel=e,this.id=t,this.state="",this._isWidthCalculationLocked=!1,this.index=-1,this.adaptivePriority=0,this._width=0}getWidth(){return this.isVisible()?sF(this.getElement(),!1,YD):0}getNoTextWidth(){return this.getWidth()}isVisible(){return!0}get isWidthCalculationLocked(){return this._isWidthCalculationLocked}updateState(e){this.state=e,this.updateStateCore(e)}updateStateCore(e){}lockWidthCalculation(){this._isWidthCalculationLocked=!0}unlockWidthCalculation(){this._isWidthCalculationLocked=!1}getGroupElement(){return null}reset(){}}class rD extends sD{constructor(e,t){var i,n,s,r,o;super(e,null!==(s=null!==(n=null===(i=t.element)||void 0===i?void 0:i.id)&&void 0!==n?n:t.id)&&void 0!==s?s:"-1"),this.item=t,this.adaptivePriority=null!==(o=null===(r=null==t?void 0:t.adaptivePriority)||void 0===r?void 0:r.value)&&void 0!==o?o:0}getElement(){return this.item.getElement()}updateStateCore(e){this.item.isDisplayed.update(e.indexOf("has-"+this.getName())>-1)}updateVisible(e){e||this.lockWidthCalculation(),this.item.updateVisible(e),e&&this.unlockWidthCalculation()}reset(){const e=this.getElement();e&&e.classList.remove(KS.ToolbarHiddenItem)}}class oD extends rD{constructor(e,t){super(e,t)}getNoTextWidth(){return this.item.isDisplayed.value?function(e){let t=sF(e,!1,YD);if(0===t)return t;if(e){if(e.querySelector(tF))return t;const i=e.querySelector(ZD);if(i){const n=e.querySelector(eF);t-=oF(i);let s=i;for(;s=s.nextElementSibling;)!aF(s)&&lF(s)&&s!==n&&(t-=sF(s))}}return t}(this.getElement()):0}getName(){return"item"}isVisible(){return this.item.isDisplayed.value}updateStateCore(e){const t=this.item.toolbar,i=-1===e.indexOf(KS.ToolbarHasEllipsis);this.updateVisible(t.minRootItems>0?i||this.index<t.minRootItems:i)}getGroupElement(){return this.item.getGroupElement()}}class aD extends rD{constructor(e,t){super(e,t)}getName(){return"ellipsis"}updateStateCore(e){super.updateStateCore(e),this.updateVisible(this.item.isDisplayed.value)}reset(){this.updateVisible(!0)}}class lD extends oD{constructor(e,t){super(e,t),this.itemBlocks=[],this.addItem(t)}addItem(e){this.itemBlocks.push(new oD(this.toolbarModel,e))}isVisible(){const e=this.itemBlocks.reduce((function(e,t){return e&&t.isVisible()}),!0);return e}getWidth(){return this.itemBlocks.reduce((function(e,t){return e+t.getWidth()}),0)}getNoTextWidth(){return this.itemBlocks.reduce((function(e,t){return e+t.getNoTextWidth()}),0)}updateVisible(e){this.itemBlocks.forEach((function(t){t.updateVisible(e)}))}tryAddItem(e){const t=this.itemBlocks[this.itemBlocks.length-1].item,i=t.groupName===e.groupName&&t.group===e.group&&t.adaptivePriority.value===e.adaptivePriority.value;return i&&this.addItem(e),i}}class AD extends sD{constructor(e,t,i){super(e,i),this.item=t}getName(){return"title"}getWidth(){return sF(this.getElement(),!1,YD)}getElement(){return this.item.getElement()}}class dD{constructor(e){this.items=[],this.isLocked=!1,this.subscriptions=[],e&&this.addRange(e)}subscribe(e){return this.isLocked||e(this.getChanges(this.items,[])),this.subscriptions.push(e),new vi((()=>{const t=this.subscriptions.indexOf(e);t>-1&&this.subscriptions.splice(t,1)}))}getChanges(e,t){return{addedItems:e||[],removedItems:t||[]}}forEach(e,t){this.items.forEach(e,t)}selectMany(e,t){return this.map(e,t).reduce((function(e,t){return e.concat(t)}),[])}reduce(e,t){return this.items.reduce(e,t)}map(e,t){return this.items.map(e,t)}filter(e,t){return this.items.filter(e,t)}any(){return this.count()>0}count(){return this.items.length}get(e){return this.items[e]}add(e){this.addItemCore(e)&&this.raiseChanges([e],[])}remove(e){this.removeItemCore(e)&&this.raiseChanges([],[e])}addRange(e){this.raiseChanges(e.map(this.addItemCore.bind(this)).filter((function(e){return!!e})),[])}removeRange(e){this.raiseChanges([],e.map(this.removeItemCore.bind(this)).filter((function(e){return!!e})))}addItemCore(e){return this.items.indexOf(e)>-1?null:this.items[this.items.length]=e}removeItemCore(e){const t=this.items.indexOf(e);return-1===t?null:this.items.splice(t,1)[0]}raiseChanges(e,t){const i=this.getChanges(e,t);(i.addedItems.length>0||i.removedItems.length>0)&&this.subscriptions.forEach((function(e){e(i)}))}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}}class cD{constructor(e){this.id=e,this._margins=void 0,this.blocks=[]}push(e){this.blocks.includes(e)||this.blocks.push(e),this.update()}toArray(){return Array.from(this.blocks)}get margins(){return this._margins||0}update(){if(!this._margins&&this.blocks.length){const e=this.blocks[0].getGroupElement();if(e){const t=T.DomUtils.getCurrentStyle(e);this._margins=T.DomUtils.pxToInt(t.marginRight)+T.DomUtils.pxToInt(t.marginLeft)}}}}class hD{constructor(e,t,i){var n;this.layer=e,this.block=t,this.width=0,this._blockCollection=void 0;const s=t.getGroupElement();s&&(this._blockCollection=this.layer.getBlockCollection(s),null===(n=this._blockCollection)||void 0===n||n.push(t)),i.subscribe(t,((e,i=!1)=>{var n;null===e&&(e=null===(n=this.layer.getPrevLayer())||void 0===n?void 0:n.getActualBlocks().filter((function(e){return e.block===t}))[0].width),e!==this.width&&(this.width=null!=e?e:0,i||this.layer.requestUpdateLayoutModel())}))}get blockCollection(){return this._blockCollection||new cD(null)}getMinWidth(){return this.width}getMaxWidth(e){return this.getMinWidth()}}class uD extends hD{getPrevLayerMinWidth(){const e=this.layer.getPrevLayer();return e?e.getActualBlocks().filter((e=>e.block===this.block))[0].getMinWidth():0}getMaxWidth(e){return e===this.layer?this.getPrevLayerMinWidth():this.getMinWidth()}}class pD extends hD{}class mD extends hD{}class gD{constructor(e,t){this.widthCalculator=e,this.triggersResolver=t,this.widthSubscriber=null,this.widthCalculator=e,this.triggersResolver=t}subscribe(e,t){this.widthSubscriber=t;const i=this.widthCalculator.bind(this);this.triggersResolver(e).forEach((function(n){n.subscribe((function(){e.isWidthCalculationLocked||Zt((function(){t(i(e),!1)}))}),!0)})),Zt((function(){t(i(e),!0)}))}updateWidth(e){const t=this.widthSubscriber,i=this.widthCalculator.bind(this);Zt((function(){t(i(e),!0)}))}}let CD;CD={fullWidthItem:new gD((function(e){return e.getWidth()}),rF),fullWidthSystemItem:new gD((function(e){return e.getWidth()}),(function(e){return[]})),titleItem:new gD((function(e){return e.getWidth()}),(function(e){var t,i;return[null===(t=e.toolbarModel.title)||void 0===t?void 0:t.hasTitle,null===(i=e.toolbarModel.title)||void 0===i?void 0:i.text]})),noTextItem:new gD((function(e){return e.getNoTextWidth()}),rF),contextItem:function(e){return new gD((function(t){const i=e.items.filter((function(e){return"item"===e.getName()&&e.index<t.index&&e.isVisible()}));return i.length>=t.toolbarModel.minRootItems||!t.isVisible()?0:null}),rF)},hiddenItem:new gD((function(){return 0}),(function(){return[]}))};class fD{getMin(e){return e.map((e=>e.minSize)).reduce(((e,t)=>e+t))}getMax(e){return e.map((e=>e.fullSize)).reduce(((e,t)=>e+t))}}class vD extends fD{getRange(e,t,i){return{min:this.getMin(e)+t,max:this.getMax(e)+t}}}class bD extends fD{getRange(e,t,i){return{min:this.getMin(e),max:this.getMax(e)+t}}}class wD extends fD{constructor(){super(...arguments),this.prevLayerRangeCalculator=new bD}getRange(e,t,i=[]){return{min:this.getMin(e)+t,max:this.getMax(i)+t-1}}}class yD{constructor(e,t,i,n){this.name=e,this.canApply=t,this.blocks=i,this.margin=n}orderBlock(e,t){const i=this.blocks.find((t=>t.id===e));if(!i)throw new Error(`No block with id ${e} in layer with type: ${this.type}`);i.index=t,this.blocks.sort(((e,t)=>DD(e,t)))}getBlock(e){const t=this.blocks.find((t=>t.id===e));if(!t)throw new Error(`No block with id ${e} in layer with type: ${this.type}`);return t}}class BD extends yD{constructor(){super(...arguments),this.type=TD.Default}updateBlock(e,t){const i=this.getBlock(e.id);if(0===e.width)return!1;const n=i.minWidth!==e.width||i.maxWidth!==e.width;return i.minWidth=e.width,i.maxWidth=e.width,n}}class ED extends yD{constructor(){super(...arguments),this.type=TD.FullSequential}updateBlock(e,t){const i=this.getBlock(e.id);let n=i.maxWidth!==e.width;return i.maxWidth=e.width,i.minWidth&&(n=n||i.minWidth!==e.width,i.minWidth=e.width),t||(n=n||0!==i.minWidth,i.minWidth=0),n}}class ID extends yD{constructor(){super(...arguments),this.type=TD.NoText}updateBlock(e,t){const i=this.getBlock(e.id);if(0===e.width)return!1;const n=i.minWidth!==e.width||i.maxWidth!==e.width;return i.minWidth=e.width,i.maxWidth=e.width,n}}class SD extends yD{constructor(){super(...arguments),this.type=TD.NoTextSequential}updateBlock(e,t){const i=this.getBlock(e.id);let n=i.maxWidth!==e.width;return i.maxWidth=e.width,i.minWidth&&(n=n||i.minWidth!==e.width,i.minWidth=e.width),t||(n=n||0!==i.minWidth,i.minWidth=0),n}}class xD{constructor(){this.layers=[],this.fullLayerTypes=[TD.Default,TD.FullSequential],this.noTextLayerTypes=[TD.NoText,TD.NoTextSequential]}get isEmpty(){if(0===this.layers.length)return!0;const e=this.layers.find((e=>e.type===TD.Default));return 0===e.blocks.filter((e=>!e.isEllipse&&!e.isTitle&&0!==e.maxWidth)).length}get blockIds(){const e=this.layers.find((e=>e.type===TD.Default));return e&&0!==e.blocks.length?e.blocks.filter((e=>!e.isEllipse)).map((e=>e.id)):[]}resetLayers(e){this.layers=this.convertLayers(e).map(this.toLayer)}initLayers(e){return!!this.isEmpty&&(this.resetLayers(e),!0)}convertLayers(e){return e.map((e=>{const t=e.getActualBlocks();return{name:e.stateName,canApply:e.canApply,type:e.type,blocks:dF(t,e).sort(((e,t)=>DD(e,t))),margin:(i=t,[...new Set(i.map((e=>e.blockCollection)))].map((e=>e.margins)).reduce(((e,t)=>e+t),0))};var i}))}updateFullSizeBlock(e,t){return this.updateBlock(e,t,this.fullLayerTypes)}updateNoTextBlock(e,t){return this.updateBlock(e,t,this.noTextLayerTypes)}updateBlock(e,t,i){let n=!1;for(const s of this.layers.filter((e=>i.includes(e.type))))n=s.updateBlock(e,t)||n;return n}orderBlock(e,t){for(const i of this.layers)i.orderBlock(e,t)}updateBlockByLayer(e,t,i){const n=this.layers.find((e=>e.type===i));return n.updateBlock(e,t)}getItemsByName(e){const t=this.layers.find((t=>t.name===e));return this.getBlocks(t)}getItemsByType(e){const t=this.layers.find((t=>t.type===e));return this.getBlocks(t)}getBlocks(e){return e.blocks.filter((e=>-1!==e.index))}getBlock(e,t){const i=this.layers.find((t=>t.name===e));if(i)return i.blocks.find((e=>e.index===t))}getBlockInEveryLayer(e){return this.layers.map((e=>e.blocks)).flat().filter((t=>t.id===e))}toLayer(e){const{name:t,canApply:i,type:n,blocks:s,margin:r}={...e};switch(n){case TD.Default:return new BD(t,i,s,r);case TD.FullSequential:return new ED(t,i,s,r);case TD.NoText:return new ID(t,i,s,r);case TD.NoTextSequential:return new SD(t,i,s,r)}}}function DD(e,t){return e.isTitle||t.isTitle?e.index-t.index:e.isEllipse||t.isEllipse?t.index-e.index:e.adaptivePriority===t.adaptivePriority||t.isEllipse?e.index>t.index?1:-1:e.adaptivePriority-t.adaptivePriority}class FD{constructor(){this._layers=[],this.checkpointsByLayers=new Map}get layers(){return this._layers.filter((e=>e.canApply))}initialize(e){var t;this._layers=e,this.checkpointsByLayers.clear();let i=0;for(const e of this.layers){const n=this.getPoints(e,i).filter((e=>0!==e)),s=n.filter((e=>this.getCheckpoints().indexOf(e)<0));this.checkpointsByLayers.set(e.type,s),i=null!==(t=n[n.length-1])&&void 0!==t?t:0}}getLayerTypeByWidth(e){for(const t of this.layers.map((e=>e.type))){if(this.checkpointsByLayers.get(t).indexOf(e)>-1)return t}return TD.Default}getCheckpointPair(e){const t=this.getCheckpoints();let i=0,n=0;for(const s of t){if(s<e){n=s;break}i=s}return[i,n]}getCheckpoints(){const e=[...this.checkpointsByLayers.values()].flat();return[...new Set(e.sort(((e,t)=>e<t?1:-1)))]}getPoints(e,t=0){switch(e.type){case TD.Default:return this.getConstantLayerPoints(e);case TD.FullSequential:return this.getSeqPoints(e,!0,t);case TD.NoText:return this.getConstantLayerPoints(e);case TD.NoTextSequential:return this.getSeqPoints(e,!0,t)}return[]}getConstantLayerPoints(e){return[e.blocks.map((e=>e.fullSize)).reduce(((e,t)=>e+t),0)]}getSeqPoints(e,t,i){const n=e.blocks.map((e=>e.fullSize)).reduce(((e,t)=>e+t),0),s=[];let r=n;for(const t of e.blocks.slice().reverse()){const e=r-(t.fullSize-t.minWidth);e!==r&&t.index>-1&&(!i||e<i)&&s.push(e),r=e}return s}}var TD,HD,UD;!function(e){e[e.Default=0]="Default",e[e.FullSequential=1]="FullSequential",e[e.NoText=2]="NoText",e[e.NoTextSequential=3]="NoTextSequential"}(TD||(TD={}));class PD{get syncPoint(){return this.ready}constructor(e){this.onLayerApplied=e,this.layers=[],this.blockCollection=null,this.currentLayer=null,this.currentWidth=null,this.currentHeight=null,this.ready=((e=!1)=>new JE(e))(),this._defaultLayer=null,this._sequentialLayer=null,this.minWidth=null,this.virtualLayout=new xD,this.layerCheckpointService=new FD,this.layersCheckpoints=[],this.prevPoint=0,this.nextPoint=0,this.toolbarWidthUpdate=()=>{},this.toolbarHeightUpdate=()=>{},this.toolbarIsVisible=()=>!0}initialize(e,t,i){this.blockCollection=e,this.disposeSubscriptions(),this.elementContentWidthSubscription=function(e,t){let i=ni(e,t);return{dispose:()=>{i&&(ii(i),i=void 0)}}}(t,(e=>{var t,n;this.currentWidth===e.width&&this.currentHeight===e.height||(null===this.currentWidth&&(null!==(t=this.blockCollectionSubscription)&&void 0!==t||(this.blockCollectionSubscription=null===(n=this.blockCollection)||void 0===n?void 0:n.subscribe((e=>{e.addedItems.forEach(this.addItemBlock.bind(this)),e.removedItems.forEach(this.removeItemBlock.bind(this))}))),this.ready.set()),this.getCheckpoints(),this.currentWidth=e.width,this.currentHeight&&this.currentHeight===e.height||(this.currentHeight=e.height,this.toolbarHeightUpdate(this.currentHeight)),this.minWidth||this.setMinWidth(),this.currentLayer&&!this.checkForLayoutUpdate()||(this.virtualLayout.isEmpty&&(this.virtualLayout.resetLayers(this.layers),this.getCheckpoints()),this.setCheckpoints(),this.setLayout()),i&&i(e))}))}addBlockToCollection(e){var t;null===(t=this.blockCollection)||void 0===t||t.add(e)}removeBlockToCollection(e){var t;null===(t=this.blockCollection)||void 0===t||t.remove(e)}dispose(){this.disposeSubscriptions(),this.ready.dispose()}getLastLayer(){return this.layers[this.layers.length-1]||null}setDefaultLayer(e,t){const i=this._defaultLayer=new ND("default",e,this,t);this.layers.push(i)}setSimultaneousTransitionLayer(e,t,i){this.layers.push(new LD(e,TD.NoText,t,this.getLastLayer(),i))}setSequentialTransitionLayer(e,t,i,n){const s=this._sequentialLayer=new RD(e,t,i,this.getLastLayer(),n);this.layers.push(s)}addItemBlock(e){this.layers.forEach((function(t){t.addBlock(e)}))}removeItemBlock(e){this.layers.forEach((function(t){t.removeBlock(e)}))}removeItemBlocks(e){for(const t of e)this.removeItemBlock(t)}checkForLayoutUpdate(){const e=this.currentWidth;return this.nextPoint>0&&e<this.nextPoint||this.prevPoint>0&&e>this.prevPoint}updateFromVirtualLayer(e){const t=this.layers.find((t=>t.type===e.type));t.canApply=e.canApply;for(const i of t.layoutBlocks){const t=e.blocks.find((e=>e.id===i.block.id));t&&(i.width=t.minWidth)}}orderFromVirtualLayer(e){const t=this.layers.find((t=>t.type===e.type)),i=t.layoutBlocks,n=e.blocks;for(const i of t.layoutBlocks){const t=e.blocks.find((e=>e.id===i.block.id));t&&(i.block.index=t.index)}t.layoutBlocks=[...i].sort(((e,t)=>n.indexOf(n.find((t=>t.id===e.block.id)))-n.indexOf(n.find((e=>e.id===t.block.id)))))}recalculateLayout(){this.setLayout()}setCheckpoints(){[this.prevPoint,this.nextPoint]=this.layerCheckpointService.getCheckpointPair(this.currentWidth)}updateCheckpoints(e){const[t,i]=[this.prevPoint,this.nextPoint];this.resetCheckpoints();const n=this.currentWidth;e&&(t!==this.prevPoint&&n<this.prevPoint||i!==this.nextPoint&&n>this.nextPoint)&&this.setLayout()}resetCheckpoints(){this.virtualLayout.resetLayers(this.layers),this.layerCheckpointService.initialize(this.virtualLayout.layers),this.layersCheckpoints=this.layerCheckpointService.getCheckpoints(),this.setCheckpoints(),this.setMinWidth()}setLayout(){const e=this.layerCheckpointService.getLayerTypeByWidth(this.nextPoint>0&&this.currentWidth>this.nextPoint?this.nextPoint:this.prevPoint),t=this.layers.find((t=>t.type===e));this.virtualLayout.resetLayers(this.layers),this.applyLayer(t)}setMinWidth(){const e=this.getCheckpoints();this.minWidth=e[e.length-1],this.toolbarWidthUpdate()}updateLayout(){const e=this.findLayersForWidth(this.currentWidth)[0];e&&(this.applyLayer(e),this.minWidth=Math.min(...this.layers.filter((e=>e.latestRange)).map((e=>e.latestRange.min))))}getCheckpoints(){return this.layersCheckpoints.length||this.virtualLayout.isEmpty||!this.toolbarIsVisible()||this.resetCheckpoints(),this.layersCheckpoints}resetToDefault(){this.applyLayer(this.layers[0],!0)}applyLayer(e,t=!1){if(this.currentLayer=e,t)e.activateAndReset(this.currentWidth);else{this.virtualLayout.initLayers(this.layers);const t=this.virtualLayout.layers.find((e=>e.type===this.currentLayer.type));e.activate(this.currentWidth,t.blocks)}this.onLayerApplied&&this.onLayerApplied(e)}findLayersForWidth(e){return this.layers.filter((function(t){return t.isValidWidth(e)}))}forceUpdate(){null!==this.currentWidth&&this.updateLayout()}getMinWidth(){return this.minWidth?this.minWidth:this._sequentialLayer?this._sequentialLayer.getActualBlocks().map((e=>e.getMinWidth())).reduce(((e,t)=>e+t),0):null}disposeSubscriptions(){var e,t;null===(e=this.elementContentWidthSubscription)||void 0===e||e.dispose(),this.elementContentWidthSubscription=void 0,null===(t=this.blockCollectionSubscription)||void 0===t||t.dispose(),this.blockCollectionSubscription=void 0}}class QD{constructor(e,t,i,n,s){this.stateName=e,this.type=t,this.blockUpdaterGetter=i,this.prevLayer=n,this.canApply=s,this.nextLayer=null,this.layoutBlocks=[],this.nextLayer=null,n&&(n.nextLayer=this)}getNextLayer(){return null!=this.nextLayer?this.nextLayer.canApply?this.nextLayer:this.nextLayer.getNextLayer():null}getPrevLayer(){return null!=this.prevLayer?this.prevLayer.canApply?this.prevLayer:this.prevLayer.getPrevLayer():null}requestUpdateLayoutModel(){var e;null===(e=this.getPrevLayer())||void 0===e||e.requestUpdateLayoutModel()}getBlockCollection(e){var t;return null===(t=this.getPrevLayer())||void 0===t?void 0:t.getBlockCollection(e)}isValidWidth(e){if(!this.canApply||!e)return!1;const t=this.getRangeNew();return!this.getNextLayer()&&t.min>e||!this.getPrevLayer()&&t.max<e||t.min<=e&&t.max>=e}getRange(){const e=new Set,t=this.latestRange=this.getActualBlocks().reduce(((t,i)=>(e.add(i.blockCollection),{min:t.min+i.getMinWidth(),max:t.max+i.getMaxWidth(this)})),{min:0,max:0});return e.forEach((e=>{t.min+=e.margins,t.max+=e.margins})),t}getRangeNew(){const e=dF(this.getActualBlocks(),this),t=this.type===TD.NoText&&this.prevLayer?dF(this.prevLayer.getActualBlocks(),this.prevLayer):[];return this.latestRange=this.rangeCalculator.getRange(e,0,t)}getActualBlocks(){const e=this.getPrevLayer();return e?e.getActualBlocks().map((e=>this.layoutBlocks.filter((function(t){return t.block===e.block}))[0]||e)):this.layoutBlocks}activate(e,t){e&&this.layoutBlocks.forEach((e=>{e.block.updateState(this.stateName)}))}addBlock(e){const t=this.blockUpdaterGetter(e);if(t){const i=this.createBlock(e,t);this.layoutBlocks.push(i)}}removeBlock(e){const t=this.layoutBlocks.find((t=>t.block.id===e));if(t){const e=this.layoutBlocks.indexOf(t);this.layoutBlocks.splice(e,1)}}activateAndReset(e){}}class ND extends QD{constructor(e,t,i,n){super(e,TD.Default,t,null,n),this.layoutModel=i,this.rangeCalculator=new vD,this.blockCollection=new Map}requestUpdateLayoutModel(){this.layoutModel.updateLayout()}createBlock(e,t){return new mD(this,e,t)}activateAndReset(e){this.activate(e,[]),this.layoutBlocks.forEach((e=>{e.block.reset()}))}getBlockCollection(e){return this.getBlockCollectionCore(e)}getBlockCollectionCore(e){let t=this.blockCollection.get(e);return t||this.blockCollection.set(e,t=new cD(e)),t}}class RD extends QD{constructor(){super(...arguments),this.rangeCalculator=new bD}activate(e,t){const i=this.getActualBlocks();this.getRangeNew();let n=this.latestRange.max,s=this.stateName;const r=new Map;for(let o=t.length-1;o>=0;o--){const a=t[o],l=i.find((e=>e.block.id===a.id));if(n>e){n-=a.fullSize-a.minSize;const t=l.blockCollection.id,i=(r.has(t)?r:r.set(t,l.blockCollection.toArray())).get(t);if(i&&i.splice(i.indexOf(l.block),1),n<=e){l.block.updateState(s);const e=this.getPrevLayer();s=e?e.stateName:"";continue}}l.block.updateState(s)}}getRange(){const e=new Set;return this.latestRange=this.getActualBlocks().reduce(((t,i)=>(e.add(i.blockCollection),{min:t.min+i.getMinWidth(),max:t.max+i.getMaxWidth(this)})),{min:0,max:0}),e.forEach((e=>{this.latestRange.max+=e.margins})),this.latestRange}createBlock(e,t){return new uD(this,e,t)}}class LD extends QD{constructor(){super(...arguments),this.rangeCalculator=new wD}createBlock(e,t){return new pD(this,e,t)}getRange(){const e=new Set;let t=this.getActualBlocks().reduce((function(t,i){return e.add(i.blockCollection),t+i.getMinWidth()}),0);e.forEach((e=>{t+=e.margins}));const i=this.getPrevLayerRangeMax();return this.latestRange={min:t,max:i}}getPrevLayerRangeMax(){const e=this.getPrevLayer();return e?e.getRangeNew().max-1:0}}!function(e){e[e.Contained=0]="Contained",e[e.Plain=1]="Plain"}(HD||(HD={})),function(e){e[e.Default=0]="Default",e[e.Large=1]="Large"}(UD||(UD={}));class MD{constructor(e,t){this.element=e,this.toolbar=t,this.index=new fy(-1),this.isVisible=new fy(this.defaultIsVisible()),this.isVisible.subscribe((e=>{this.onIsVisibleChanged(e)}),!0)}defaultIsVisible(){return!0}getElement(){return this.element}updateVisible(e){this.isVisible.update(e)}onIsVisibleChanged(e){const t=this.getElement();t&&(e?this.show(t):this.hide(t))}show(e){e.classList.remove(KS.ToolbarHiddenItem)}hide(e){e.classList.add(KS.ToolbarHiddenItem)}}class kD extends MD{constructor(){super(...arguments),this.isDisplayed=new fy(!0),this.text=new fy(""),this.iconCssClass=new fy("")}show(e){e.style.display=""}hide(e){e.style.display="none"}getGroupElement(){return null}}class KD extends kD{constructor(e,t,i){super(e,t),this.group=i,this.groupName=new fy(""),this.adaptivePriority=new fy(-1)}onIsVisibleChanged(e){super.onIsVisibleChanged(e),this.group.onItemVisibleChanged()}getElement(){return document.querySelector(`#${this.id}`)}getParent(){const e=this.getElement();return e&&e.parentElement?e.parentElement:null}getGroupElement(){return this.group.getElement()}}class OD extends kD{constructor(e,t){super(e,t)}defaultIsVisible(){return null}}class _D extends MD{constructor(e,t){super(e,t),this.items=[]}addItem(e){this.items.push(e)}onItemVisibleChanged(){if(0===this.items.length)return;const e=this.items.some((e=>e.isVisible.value));this.updateVisible(e)}getElement(){if(0===this.items.length)return null;const e=Ai(this.items[0].getElement(),AF(JD,this.toolbar.id));return e||this.items[0].getParent()}}class VD extends MD{constructor(e,t){super(null,e),this.elementSelector=t,this.hasTitle=new fy(!1),this.text=new fy(""),this.text.subscribe((e=>{this.hasTitle.update(null!=e&&""!==e)}))}getElement(){return document.querySelector(this.elementSelector)}}class zD{constructor(e,t){this.element=e,this.id=t,this.items=[],this.itemMap=new Map,this.groupMap=new Map,this.canHideRootItems=!1,this.canCollapseToIcons=!1,this.minRootItems=0}}const WD=[al,al].map((e=>e.toUpperCase())),$D=["DXBL-POPUP-PORTAL"];class GD{constructor(e){this.dataToolbarId=e,this.virtualElementCreator={[KS.ToolbarGroup]:this.createVirtualGroup,[KS.ToolbarItem]:this.createVirtualRootItem,[KS.ToolbarPlaceholder]:this.createVirtualPlaceholder,[KS.ButtonEllipsis]:this.createVirtualRootItem},this.toolbar=document.querySelector(`[${iF}='${this.dataToolbarId}']`),this.buttonToolbar=this.toolbar.querySelector(`.${KS.ButtonToolbar}`),this.virtualButtonToolbar=document.createElement("div"),this.copyToolbar(),this.toolbar.appendChild(this.virtualButtonToolbar)}destroy(){this.toolbar.removeChild(this.virtualButtonToolbar)}copyToolbar(){this.virtualButtonToolbar.classList.remove(...this.virtualButtonToolbar.classList),this.virtualButtonToolbar.classList.add(KS.VirtualToolbar),this.virtualButtonToolbar.classList.add(...this.buttonToolbar.classList);const e=[...this.buttonToolbar.children],t=[];for(const i of e){const e=[...i.classList].find((e=>null!=this.virtualElementCreator[e]));t.push(this.virtualElementCreator[e].bind(this,i)())}this.numberToolbarGroups(t.filter((e=>e.classList.contains(KS.ToolbarGroup)))),this.virtualButtonToolbar.innerHTML="",t.forEach((e=>this.virtualButtonToolbar.appendChild(e)))}numberToolbarGroups(e){for(let t=0;t<e.length;t++)0===t&&e[t].classList.add(rB.ButtonGroupFirst)}getElementWidth(e){this.buttonToolbar.style.width=this.buttonToolbar.offsetWidth+"px";const t=this.virtualButtonToolbar.querySelector(`[virtual-id=${e}]`),i=t.parentElement;let n=0,s=0;const r=[...i.children].find((e=>e.classList.contains(KS.ToolbarGroupSeparator)));let o=0;if(null!=t.parentElement&&t.parentElement.classList.contains(KS.ToolbarGroup)){const e=T.DomUtils.getCurrentStyle(t.parentElement);if(t.parentElement.lastElementChild===t&&(s=T.DomUtils.pxToInt(e.marginRight)),t.parentElement.firstElementChild===t&&(n=T.DomUtils.pxToInt(e.marginLeft)),i.classList.contains(rB.ButtonGroupFirst)&&i.children[1]===t)n=T.DomUtils.pxToInt(e.marginLeft);else if(i.firstElementChild===r&&r.nextElementSibling===t){const e=r;if(e){const t=T.DomUtils.getCurrentStyle(i),n=T.DomUtils.getCurrentStyle(e);o+=T.DomUtils.pxToInt(t.marginLeft)+e.offsetWidth+T.DomUtils.pxToInt(n.marginRight)}}}return this.buttonToolbar.style.width="",0===t.offsetWidth?0:t.offsetWidth+n+s+o}setRenderMode(e){e==HD.Plain?this.virtualButtonToolbar.classList.add(KS.ButtonPlainToolbar):this.virtualButtonToolbar.classList.remove(KS.ButtonPlainToolbar)}applyFullLayer(){this.applyAdaptivityState(KS.ToolbarDefaultLayer)}applyNoTextLayer(){this.applyAdaptivityState(KS.ToolbarNoItemText)}applyAdaptivityState(e){e.indexOf(KS.ToolbarNoItemText)>-1?this.virtualButtonToolbar.classList.add(KS.ToolbarNoItemText):this.virtualButtonToolbar.classList.remove(KS.ToolbarNoItemText)}createVirtualGroup(e){const t=document.createElement("div"),i=t.querySelectorAll(`.${KS.ToolbarItem} > .${rB.Button}`),n=i.length>0?i[0].id:"",s=i.length>0?i[i.length-1].id:"";for(const i of e.attributes)t.setAttribute(i.name,i.value);for(let i=0;i<e.children.length;i++)t.appendChild(this.createVirtualItem(e.children[i],n,s));return t.classList.remove(KS.ToolbarHiddenItem),t}createVirtualRootItem(e){return this.createVirtualItem(e,"","")}createVirtualItem(e,t,i){const n=document.createElement("div");for(const t of[...e.attributes].filter((e=>"id"!==e.name)))n.setAttribute(t.name,t.value);if(n.setAttribute("virtual-id",e.id),n.style.display="block",e.children.length>0)for(const s of e.children){const e=s.tagName===KS.ToolbarItem?this.createVirtualItem(s,t,i):this.createVirtualChild(s,t,i);n.appendChild(e)}else n.innerHTML=e.innerHTML;return n}createVirtualPlaceholder(e){const t=document.createElement("DIV");for(const i of[...e.attributes].filter((e=>"id"!==e.name)))t.setAttribute(i.name,i.value);return t.style.width=e.clientWidth+"px",t}createVirtualChild(e,t,i){const n=e.cloneNode(!0),s=(t,i=null)=>{if(!$D.some((e=>t.tagName===e))){if(i&&WD.indexOf(t.tagName)>-1){const n=document.createElement("DIV");return n.style.width=e.getBoundingClientRect().width+"px",void i.replaceChild(n,t)}for(const e of t.attributes)e.name.toLowerCase().endsWith("id")&&t.setAttribute(e.name,e.value+"__virtual");t.setAttribute(cn.virtualElementAttributeName,"true");for(const e of t.children)s(e,t)}};return s(n),n.setAttribute("virtual-id",e.id),n.classList.remove(KS.ToolbarHiddenItem),e.classList.contains(rB.Button)&&(t===n.id&&n.classList.add(rB.ButtonFirst),i===n.id&&n.classList.add(rB.ButtonLast)),n}}class qD{constructor(e,t,i){this.layoutModel=e,this.layoutOptions=t,this.minRootItemIds=[],this.virtualLayout=new xD,this.virtualToolbar=new GD(i),this.setRenderMode(this.layoutOptions.renderMode),this.setMinRootItems()}destroy(){this.virtualToolbar.destroy()}get syncPoint(){return this.layoutModel.syncPoint}updateMinRootItems(e){this.virtualLayout.resetLayers(this.layoutModel.layers);const t=this.virtualLayout.layers.find((e=>e.type===TD.FullSequential)),i=this.virtualLayout.layers.find((e=>e.type===TD.NoTextSequential));t.canApply=e>0;const n=this.virtualLayout.getItemsByName(this.layoutModel.currentLayer.stateName),s=this.getAffectedItemIds(n.map((e=>e.id)),this.layoutOptions.minRootItems,e);e-this.layoutOptions.minRootItems>0?(t.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=e.maxWidth)),i.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=e.maxWidth))):(t.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=0)),i.blocks.filter((e=>s.includes(e.id))).forEach((e=>e.minWidth=0))),this.layoutOptions.minRootItems=e,this.setMinRootItems(),this.layoutModel.updateFromVirtualLayer(t),this.layoutModel.updateFromVirtualLayer(i),this.layoutModel.updateCheckpoints(!0)}updateRenderMode(e){this.virtualLayout.resetLayers(this.layoutModel.layers),this.virtualToolbar.copyToolbar(),this.setRenderMode(e);for(const e of this.virtualLayout.blockIds){const t={id:e,width:0};for(const e of this.virtualLayout.layers){e.type===TD.NoText?this.virtualToolbar.applyNoTextLayer():this.virtualToolbar.applyFullLayer();const i=this.renderVirtualResizeModel(t);e.updateBlock(i,this.checkIfIsInMinRootItems(t.id))}}this.updateAllRealLayers(!0)}updateCanHideRootItems(e){if(this.refreshVirtualLayout(),this.layoutOptions.canHideRootItems===e)return;this.layoutOptions.canHideRootItems=e;const t=this.virtualLayout.layers.find((e=>e.type===TD.FullSequential)),i=this.virtualLayout.layers.find((e=>e.type===TD.NoTextSequential));t.canApply=this.layoutOptions.canHideRootItems&&(this.layoutOptions.minRootItems>0||!this.layoutOptions.canCollapseToIcons),i.canApply=this.layoutOptions.canHideRootItems,this.updateAllRealLayers(!0)}updateCanCollapseToIcons(e){if(this.refreshVirtualLayout(),this.layoutOptions.canCollapseToIcons===e)return;this.layoutOptions.canCollapseToIcons=e;const t=this.virtualLayout.layers.find((e=>e.type===TD.NoText)),i=this.virtualLayout.layers.find((e=>e.type===TD.NoTextSequential));t.canApply=this.layoutOptions.canCollapseToIcons,i.canApply=this.layoutOptions.canCollapseToIcons&&this.layoutOptions.canHideRootItems,this.updateAllRealLayers(!0)}addBlock(e){this.virtualLayout.initLayers(this.layoutModel.layers)}removeBlocks(e){this.virtualLayout.initLayers(this.layoutModel.layers),this.refreshVirtualToolbar(),this.layoutModel.updateCheckpoints(!0)}orderBlock(e){this.virtualLayout.orderBlock(e.id,e.index),this.setMinRootItems(),this.updateAllRealLayers(!0),this.orderAllRealLayers()}updateBlockSize(e,t){this.refreshVirtualLayout(),t&&this.virtualToolbar.copyToolbar();let i=!1;var n;i=e.isTitle?this.virtualLayout.updateBlock(e,this.checkIfIsInMinRootItems(e.id),(n=TD,Object.keys(n).filter((e=>Number.isNaN(Number(e)))).map((e=>n[e]))))||i:this.renderVirtualInLayers(e)||i,this.updateAllRealLayers(i)}setMinRootItems(){if(0===this.virtualLayout.layers.length)return;const e=this.virtualLayout.layers.find((e=>e.type===TD.FullSequential)),t=e.blocks.filter((e=>!e.isTitle&&!e.isEllipse));this.minRootItemIds=this.getAffectedItemIds(t.map((e=>e.id)),0,this.layoutOptions.minRootItems)}setRenderMode(e){this.layoutOptions.renderMode=e,this.virtualToolbar.setRenderMode(this.layoutOptions.renderMode)}refreshVirtualLayout(){this.virtualLayout.resetLayers(this.layoutModel.layers),this.setMinRootItems()}renderVirtualInLayers(e){let t=!1;for(const i of this.virtualLayout.layers){i.type===TD.NoText?this.virtualToolbar.applyNoTextLayer():this.virtualToolbar.applyFullLayer();const n=this.renderVirtualResizeModel(e);t=i.updateBlock(n,this.checkIfIsInMinRootItems(e.id))||t}return t}renderVirtualResizeModel(e){const t=this.virtualToolbar.getElementWidth(e.id);return{id:e.id,width:t}}getAffectedItemIds(e,t,i){const n=e.slice(0,t),s=e.slice(0,i);return i>t?s.filter((e=>!n.includes(e))):n.filter((e=>!s.includes(e)))}updateAllRealLayers(e){for(const e of this.virtualLayout.layers)this.layoutModel.updateFromVirtualLayer(e);this.layoutModel.updateCheckpoints(e)}orderAllRealLayers(){for(const e of this.virtualLayout.layers)this.layoutModel.orderFromVirtualLayer(e);this.layoutModel.updateCheckpoints(!0)}refreshVirtualToolbar(){this.virtualToolbar.copyToolbar()}checkIfIsInMinRootItems(e){return this.minRootItemIds.includes(e)}}C([jE],qD.prototype,"updateMinRootItems",null),C([jE],qD.prototype,"updateRenderMode",null),C([jE],qD.prototype,"updateCanHideRootItems",null),C([jE],qD.prototype,"updateCanCollapseToIcons",null),C([jE],qD.prototype,"addBlock",null),C([jE],qD.prototype,"removeBlocks",null),C([jE],qD.prototype,"orderBlock",null),C([jE],qD.prototype,"updateBlockSize",null);class XD{constructor(e,t,i,n,s,r,o,a){this.id=e,this.index=t,this.adaptivePriority=i,this.minWidth=n,this.maxWidth=s,this.margin=r,this.isTitle=o,this.isEllipse=a}get fullSize(){return this.maxWidth}get minSize(){return this.minWidth}}const YD=!1,JD="data-dxtoolbar-group-id",jD=".dxbl-btn-toolbar",ZD=".dxbl-image:not(.dxbl-toolbar-dropdown-toggle)",eF=".dxbl-image.dxbl-toolbar-dropdown-toggle",tF=".dxbl-toolbar-item-tmpl",iF="data-dxtoolbar-id",nF=1;function sF(e,t=!1,i=!1){if(!e)return 0;let n=Math.ceil(mi(e)+(t?0:oF(e)));if(e.parentElement&&!i){const t=[...e.parentElement.children].find((e=>e.classList.contains(KS.ToolbarGroupSeparator)));if(e.parentElement.lastElementChild===e){const t=T.DomUtils.getCurrentStyle(e.parentElement);n+=T.DomUtils.pxToInt(t.marginRight)}if(e.parentElement.firstElementChild===t&&t.nextElementSibling===e){const i=t;if(i){const t=T.DomUtils.getCurrentStyle(e.parentElement),s=T.DomUtils.getCurrentStyle(i);n+=0!==i.offsetWidth?i.offsetWidth:nF+T.DomUtils.pxToInt(t.marginLeft)+T.DomUtils.pxToInt(s.marginRight)}}if(e.parentElement.firstElementChild===e){const t=T.DomUtils.getCurrentStyle(e.parentElement);n+=T.DomUtils.pxToInt(t.marginLeft)}}return n}function rF(e){return[e.item.text,e.item.isDisplayed,e.item.iconCssClass]}function oF(e){return Kt(e)}function aF(e){return T.DomUtils.hasClassName(e,"popout")}function lF(e){return"absolute"!==T.DomUtils.getCurrentStyle(e).position}function AF(e,t){return`[${e}=${t}]`}function dF(e,t){return[...new Set(e)].map((e=>new XD(e.block.id,e.block.index,e.block.adaptivePriority,e.getMinWidth(),e.getMaxWidth(t),e.blockCollection.margins,e.block instanceof AD,e.block instanceof aD)))}class cF{constructor(e){this.items=e}}class hF extends CustomEvent{constructor(e){super(hF.eventName,{detail:new cF(e),bubbles:!0})}}hF.eventName="dxbl-toolbar.update",mt.register(hF.eventName,(e=>e.detail));class uF{constructor(e){this.state=e}}class pF extends CustomEvent{constructor(e){super(pF.eventName,{detail:new uF(e),bubbles:!0,composed:!0})}}pF.eventName="dxbl:toolbar-group.state-change",mt.register(pF.eventName,(e=>e.detail));class mF{constructor(e){this.item=e}}class gF extends CustomEvent{constructor(e){super(gF.eventName,{detail:new mF(e),bubbles:!0})}}gF.eventName="dxbl-toolbar-item.update";class CF{constructor(e,t=!1){this.size=e,this.force=t}}class fF extends CustomEvent{constructor(e,t=!1){super(fF.eventName,{detail:new CF(e,t),bubbles:!0})}}fF.eventName="dxbl-toolbar-item.resized";class vF extends CustomEvent{constructor(e){super(vF.eventName,{detail:{visible:e},bubbles:!0})}}vF.eventName="dxbl-toolbar-item.visibility-changed";class bF{constructor(e){this.item=e}}class wF extends CustomEvent{constructor(e){super(wF.eventName,{detail:new bF(e),bubbles:!0,composed:!0})}}wF.eventName="dxbl-toolbar-item.ordered";const yF=[...[".dxbl-btn:not([disabled]):not(.dxbl-toolbar-hidden-item)",".dxbl-btn-split:not(.dxbl-toolbar-hidden-item):has(.dxbl-btn:not([disabled]))"].map((e=>`.dxbl-toolbar-dropdown-item > .dxbl-toolbar-menu-item > ${e}`)),".dxbl-toolbar-dropdown-item.dxbl-toolbar-item-tmpl:not(.dxbl-toolbar-edit)",".dxbl-toolbar-dropdown-item.dxbl-toolbar-item-tmpl.dxbl-toolbar-edit:has(.dxbl-text-edit:not(.dxbl-disabled))"].join(",");class BF extends _x{constructor(e,t,i,n=yF){super(e,t,n,i)}switchToNestedContent(){return!this.isSplitButtonMenuItem(this.selectedItemElement)&&super.switchToNestedContent()}doAction(e){if(this.isSplitButtonMenuItem(this.selectedItemElement)){const t=this.selectedItemElement.querySelector(".dxbl-dropdown-item.dxbl-btn");if(t)return void this.doClick(t,e)}super.doAction(e)}isSplitButtonMenuItem(e){return Sx(e,rB.SplitButton)}}var EF,IF;!function(e){e[e.Header=0]="Header",e[e.Body=1]="Body"}(EF||(EF={})),function(e){e[e.Shown=0]="Shown",e[e.Closed=1]="Closed"}(IF||(IF={}));class SF extends Ha{constructor(e,t,i,n){super(e,t),this._dispatcherAction=new Je,this._activeSection=null,this._initialized=null,this._focusSemaphore=new Bx,this._parentStrategy=i,this._sectionElementMap={[EF.Header]:null,[EF.Body]:null},this._modalStatusSignal=new Ur,this._menuItemSelector=n}get headerElement(){return this._sectionElementMap[EF.Header]}set headerElement(e){this._sectionElementMap[EF.Header]=e}get bodyElement(){return this._sectionElementMap[EF.Body]}set bodyElement(e){this._sectionElementMap[EF.Body]=e}initialize(){this._initialized=this.initializeCore()}initializeCore(){return super.initialize(),this.headerElement&&this.bodyElement?Promise.resolve():this.shcheduleInitialization()}shcheduleInitialization(){return this._dispatcherAction.cancel(),new Promise((e=>{this._dispatcherAction.execute((()=>{super.initialize(),e()}))}))}queryItems(){return this.headerElement=this.targetElement.querySelector(".dxbl-modal-header"),this.bodyElement=this.targetElement.querySelector(".dxbl-modal-body"),[this.headerElement,this.bodyElement]}async activate(){var e;await this._initialized,pt.cancelRestoreFocus();const t=null!==(e=this._activeSection)&&void 0!==e?e:EF.Body;this.setActiveSection(t)}createItemStrategy(e){return e===this.headerElement?new xF(this.navigator,this.headerElement):e===this.bodyElement?new DF(this.navigator,this.bodyElement,this._parentStrategy,this._focusSemaphore,this._modalStatusSignal,this._menuItemSelector):null}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab?(this.setActiveSection(this.toggleActiveSection()),!0):super.handleKeyDown(e)}toggleActiveSection(){return this._activeSection===EF.Body?EF.Header:EF.Body}setActiveSection(e){const t=null!=e?e:EF.Body,i=this.navigator.getStrategy(this._sectionElementMap[t]);this._focusSemaphore.doAllowedAction((()=>{null==i||i.activate()})),this._activeSection=t}onPopupShown(){super.onPopupShown(),this._modalStatusSignal.raise(this.targetElement,IF.Shown)}onPopupClosed(){super.onPopupClosed(),this._modalStatusSignal.raise(this.targetElement,IF.Closed)}}class xF extends Li{initialize(){super.initialize(),this.selectedItemIndex=0}queryItems(){return this.queryItemsBySelector(".dxbl-btn").filter((e=>e&&!Sx(e,"dxbl-invisible")))}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.raiseClickEvent(this.selectedItemElement,e.ctrlKey,e.metaKey,e.shiftKey),!0;case Be.KeyCode.Left:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Right:return this.moveToNextItem(!0),!0;case Be.KeyCode.Up:case Be.KeyCode.Down:return!0;default:return super.handleKeyDown(e)}}}class DF extends BF{constructor(e,t,i,n,s,r){super(e,t,i,r),this._boundModalStatusChanged=this.modalStatusChanged.bind(this),this._levelController=new yx,this._focusSemaphore=n,this._modalStatusSignal=s,this._modalStatusSignal.subscribe(this._boundModalStatusChanged)}get menuLevel(){return this._levelController.currentLevel}modalStatusChanged(e,t){t===IF.Shown?this.onPopupShown():this.onPopupClosed()}initialize(){super.initialize(),this._levelController.updateState(this.selectedItemIndex,this.itemCount),this.selectedItemIndex=this._levelController.selectedItemIndex}activate(){this._focusSemaphore.doIfAllowed((()=>{super.activate()})),this._focusSemaphore.disallow()}handleLeftKey(e){return this.menuLevel>0?(this.moveToPrevLevel(e),!0):!!Ex(this.selectedItemElement)&&(this.moveToNextLevel(e,Fx.Last),!0)}handleRightKey(e){return!!Ex(this.selectedItemElement)&&(this.moveToNextLevel(e,Fx.First),!0)}doAction(e){Ex(this.selectedItemElement)&&this.moveToNextLevel(e,Fx.First),super.doAction(e)}moveToNextLevel(e,t){this.performShortcutEvent(e),this._levelController.moveToNextLevel(t),this._focusSemaphore.allow()}moveToPrevLevel(e){this.performShortcutEvent(e),this._levelController.moveToPrevLevel(),this._focusSemaphore.allow()}getShortcutContext(){return{level:this.menuLevel,selectedItemIndex:this.selectedItemIndex}}handlePopupClosed(){super.handlePopupClosed(),this._levelController.clearState()}addEventSubscriptions(){}removeEventSubscriptions(){this._modalStatusSignal.unsubscribe(this._boundModalStatusChanged)}}const FF=":scope > .dxbl-btn-toolbar:not(.dxbl-virtual-toolbar)",TF=[...[".dxbl-btn:not([disabled]):not(.dxbl-toolbar-hidden-item)",".dxbl-btn-split:not(.dxbl-toolbar-hidden-item) > .dxbl-btn:not([disabled])"].map((e=>`${FF} .dxbl-toolbar-item[visible]:not(.dxbl-toolbar-edit) > ${e}`)),`${FF} .dxbl-toolbar-btn-ellipsis[visible]:not([disabled]):not(.dxbl-toolbar-hidden-item) > .dxbl-btn`,`${FF} .dxbl-toolbar-item[visible].dxbl-toolbar-edit:has(.dxbl-text-edit:not(.dxbl-disabled))`,`${FF} .dxbl-toolbar-item[visible].dxbl-toolbar-item-tmpl:not(.dxbl-toolbar-edit)`,`${FF} .dxbl-toolbar-title`].join(",");class HF extends Kx{queryItems(){return this.queryItemsBySelector(TF)}getShortcutContext(){return{itemIndex:this.selectedItemIndex}}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Right:return this.subMenuStrategy||this.moveToNextItem(!0),!0;case Be.KeyCode.Left:return this.subMenuStrategy||this.moveToPrevItem(!0),!0;case Be.KeyCode.Home:return this.selectItem(0),!0;case Be.KeyCode.End:return this.selectItem(this.itemCount-1),!0;case Be.KeyCode.Up:if(e.altKey&&!e.shiftKey){if(this.isMenuExpanded())return this.requestSubMenuClose(),!0}else if(this.subMenuStrategy)return this.subMenuStrategy.focusLastItem(),!0;return!1;case Be.KeyCode.Down:if(e.altKey&&!e.shiftKey){if(this.hasMenu())return this.requestSubMenuOpen(),this.focusSubMenuItemAsync(Fx.First),!0}else if(this.subMenuStrategy)return this.subMenuStrategy.focusFirstItem(),!0;return!1;case Be.KeyCode.Tab:return!this.nestedContentSelected&&(this.requestSubMenuClose(),super.handleTabKeyDown(e));case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.hasMenu()&&this.focusSubMenuItemAsync(Fx.First),!1;default:return!1}}focusSubMenuItemAsync(e){return this.shouldRestoreFocus=xx(this.targetElement),super.focusSubMenuItemAsync(e)}requestSubMenuOpen(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Expand))}requestSubMenuClose(){var e;null===(e=this.selectedItemElement)||void 0===e||e.dispatchEvent(new Tx(Dx.Collapse))}createPopupStrategy(e,t){return new BF(e,t,this)}createModalStrategy(e,t){return new SF(e,t,this)}}class UF{}UF.Ribbon=he.Prefix+"-ribbon";const PF=new class{constructor(){this.toolbars=new Map}addToolbar(e){this.toolbars.set(e.id,e)}removeToolbar(e){this.toolbars.delete(e.id)}addToolbarItem(e){const t=this.getToolbar(e.id);if(t)return t.addItem(e),new vi((()=>this.removeToolbarItem(e)))}removeToolbarItem(e){for(const t of this.toolbars.values())t.removeItem(e)}getToolbar(e){const t=document.querySelector(`#${e}`);if(!t)return;const i=t.closest(`.${KS.Toolbar}`);return i?this.toolbars.get(i.id):void 0}};let QF=class extends Bs{constructor(){super(...arguments),this.isLoading=!0,this.isLayoutCalculated=!1,this.model=null,this._keyboardNavigator=null,this.layoutModel=null,this.minWidth=null,this.reinitRequested=!1,this.items=[],this.toolbarItemResizedHandler=this.resizeToolbarItem.bind(this),this.toolbarItemUpdatedHandler=this.updateToolbarItem.bind(this),this.toolbarItemVisibilityChangedHandler=this.toolbarItemVisibilityChanged.bind(this),this.toolbarItemOrderHandler=this.orderToolbarItem.bind(this),this.toolbarTitle="",this.minRootItemCount=0,this.collapseItemsToIcons=!1,this.hideRootItems=!1,this.itemSize=0,this.renderMode=HD.Contained,this.itemSpacingMode=UD.Default,this.ellipsisId=null,this.layoutUpdateService=null}connectedCallback(){super.connectedCallback(),PF.addToolbar(this),this.addEventListener(fF.eventName,this.toolbarItemResizedHandler),this.addEventListener(gF.eventName,this.toolbarItemUpdatedHandler),this.addEventListener(vF.eventName,this.toolbarItemVisibilityChangedHandler),this.addEventListener(wF.eventName,this.toolbarItemOrderHandler)}disconnectedCallback(){this.removeEventListener(fF.eventName,this.toolbarItemResizedHandler),this.removeEventListener(gF.eventName,this.toolbarItemUpdatedHandler),this.removeEventListener(vF.eventName,this.toolbarItemVisibilityChangedHandler),this.removeEventListener(wF.eventName,this.toolbarItemOrderHandler),PF.removeToolbar(this),super.disconnectedCallback()}updated(e){var t,i,n,s;super.updated(e),e.has("ellipsisId")&&this.initializeToolbar(null!=this.ellipsisId),e.has("collapseItemsToIcons")&&(null===(t=this.layoutUpdateService)||void 0===t||t.updateCanCollapseToIcons(this.collapseItemsToIcons)),e.has("hideRootItems")&&(null===(i=this.layoutUpdateService)||void 0===i||i.updateCanHideRootItems(this.hideRootItems)),e.has("minRootItemCount")&&(this.model&&(this.model.minRootItems=this.minRootItemCount),null===(n=this.layoutUpdateService)||void 0===n||n.updateMinRootItems(this.minRootItemCount)),e.has("renderMode")&&(null===(s=this.layoutUpdateService)||void 0===s||s.updateRenderMode(this.renderMode))}updateLayout(){var e;null===(e=this.layoutModel)||void 0===e||e.updateLayout()}addItem(e){var t,i,n,s;if(e.isEllipse)return;const r=null===(i=null===(t=this.model)||void 0===t?void 0:t.items)||void 0===i?void 0:i.find((t=>t.id===e.id));if(!r&&this.model){const t=this.initItem(e,!0),i=this.getItemsBlocks(this.model,[t]);null===(n=this.layoutModel)||void 0===n||n.addItemBlock(i[0])}e&&!this.items.some((t=>t.id===e.id))&&(this.items.push(e),null===(s=this.layoutUpdateService)||void 0===s||s.addBlock(e))}removeItem(e){var t,i,n,s;const r=null===(t=this.model)||void 0===t?void 0:t.items.find((t=>t.id===e.id));if(r&&this.model){const e=this.model.items.indexOf(r);null===(i=this.model)||void 0===i||i.items.splice(e,1),null===(n=this.layoutModel)||void 0===n||n.removeItemBlock(r.id),null===(s=this.layoutUpdateService)||void 0===s||s.removeBlocks([r.id])}}resizeToolbarItem(e){this.processToolbarItem(e.detail.size,e.detail.force)}updateToolbarItem(e){this.processToolbarItem(e.detail.item)}toolbarItemVisibilityChanged(e){this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator&&(this._keyboardNavigator.initialized?this._keyboardNavigator.reinitialize():this._keyboardNavigator.initialize(this,new HF(this._keyboardNavigator,this)))}orderToolbarItem(e){var t;const i=e.detail.item,n=this.items.find((e=>e.id===i.id));n&&(n.index=i.index,null===(t=this.layoutUpdateService)||void 0===t||t.orderBlock(i))}processToolbarItem(e,t=!1){var i;if(0===this.offsetHeight)return;const n=this.items.find((t=>t.id===e.id));n&&(n.width!==e.width||t)&&(n.width=e.width,"none"!==window.getComputedStyle(this).display&&(e.isEllipse||null===(i=this.layoutUpdateService)||void 0===i||i.updateBlockSize(e,!0)))}initializeToolbar(e){const t={mainElement:this,canCollapseToIcons:this.collapseItemsToIcons,canHideRootItems:this.hideRootItems,minRootItems:this.minRootItemCount,title:this.toolbarTitle,items:this.items,itemSize:this.itemSize,renderMode:this.renderMode,itemSpacingMode:this.itemSpacingMode,adaptiveMenuModel:{id:this.ellipsisId}};e?this.reinit(t):this.init(t)}initItem(e,t=!1){const i=document.querySelector(`#${e.id}[dxbl-toolbar-adaptive-item]`);const n=this.model.groupMap;i&&i.classList.remove(KS.ToolbarHiddenItem);const s=Ai(i,AF(JD,this.dataset.dxtoolbarId));let r=null;n.has(s)&&(r=n.get(s)),r||(r=new _D(s,this.model),n.set(s,r));const o=new KD(i,this.model,r);return o.text.update(e.text),o.groupName.update(e.groupName),o.adaptivePriority.update(e.adaptivePriority),o.iconCssClass.update(e.iconCssClass),o.isDisplayed.update(e.visible),o.index.update(e.index),o.id=e.id,this.model.itemMap.set(o.id,o),this.model.items.every((e=>e.id!==o.id))&&(r.addItem(o),this.model.items.push(o)),o}init(e){var t;const i=e.mainElement;if(!i)return;this.isLayoutCalculated=!1;const n=i.dataset.dxtoolbarId,s=AF("data-dxtoolbar-title-id",n),r=AF("data-dxtoolbar-ellipsis-id",n),o=document.querySelector(r),a=this.model=new zD(i,n),l=a.groupMap;Array.from(e.items).forEach((e=>this.initItem(e))),a.canHideRootItems=e.canHideRootItems,a.canCollapseToIcons=e.canCollapseToIcons,a.minRootItems=e.minRootItems,a.itemSize=e.itemSize,a.renderMode=e.renderMode,a.itemSpacing=e.itemSpacingMode;const A=new dD([]),d=new VD(a,s);d.text.update(e.title),a.title=d;const c=document.querySelector(s);A.add(new AD(a,d,null!==(t=null==c?void 0:c.id)&&void 0!==t?t:"-1"));const h=Array.from(l.values()),u=h.some((e=>e))?h.map((e=>e.items)).reduce(((e,t)=>e.concat(t))):[];A.addRange(this.getItemsBlocks(a,u.filter((e=>e.element))));const p=new OD(o,a);p.id=e.adaptiveMenuModel.id,A.add(new aD(a,p)),a.ellipsisViewModel=p,this._keyboardNavigator=[...this.children].filter((e=>e.tagName.toLowerCase()===Pi))[0],this.initializeKeyboardNavigator();const m=CD.contextItem(A);let g;const C=this.layoutModel=new PD((t=>{this.isLayoutCalculated||(this.isLayoutCalculated=!0,Zt((()=>{this.updateToolbarHeight(),this.isLoading=!1})));const n=a.element.querySelector(jD)||a.element;if(t.stateName.indexOf(KS.ToolbarNoItemText)>-1?T.DomUtils.addClassName(n,KS.ToolbarNoItemText):T.DomUtils.removeClassName(n,KS.ToolbarNoItemText),T.DomUtils.removeClassName(i,KS.Loading),ui(i))return;const s=n.classList.contains(KS.ToolbarNoItemText),r=a.items.concat(a.ellipsisViewModel).map((e=>({Id:e.id,IsVisible:e.isVisible.value,TextHidden:s}))),o=JSON.stringify(r);g!==o&&e.adaptiveMenuModel.id&&(g=o,this.dispatchEvent(new hF(Array.from(r))))}));C.setDefaultLayer((function(e){switch(e.getName()){case"item":return CD.fullWidthItem;case"title":return CD.titleItem}return CD.hiddenItem}),!0),C.setSequentialTransitionLayer(KS.ToolbarHasEllipsis,TD.FullSequential,(function(e){switch(e.getName()){case"ellipsis":return CD.fullWidthSystemItem;case"item":return m}}),a.canHideRootItems&&(a.minRootItems>0||!a.canCollapseToIcons)),C.setSimultaneousTransitionLayer(KS.ToolbarNoItemText,(function(e){switch(e.getName()){case"item":return CD.noTextItem;case"ellipsis":return CD.hiddenItem}}),a.canCollapseToIcons),C.setSequentialTransitionLayer(a.canCollapseToIcons?`${KS.ToolbarNoItemText} ${KS.ToolbarHasEllipsis}`:KS.ToolbarHasEllipsis,TD.NoTextSequential,(function(e){switch(e.getName()){case"item":return m;case"ellipsis":return CD.fullWidthSystemItem}}),a.canHideRootItems&&a.canCollapseToIcons),A.forEach((e=>e._width=e.getWidth())),C.initialize(A,a.element.querySelector(jD)||a.element,(e=>{this.height!==e.height&&(this.isLayoutCalculated=!1,this.height=e.height),this.checkUpdateMinWidth(a)})),C.toolbarWidthUpdate=()=>this.checkUpdateMinWidth(a),C.toolbarHeightUpdate=e=>this.updateToolbarHeight(),C.toolbarIsVisible=()=>"none"!==window.getComputedStyle(this).display&&0!==this.offsetWidth,setTimeout((()=>{document.querySelector(`#${this.id}`)&&(this.layoutUpdateService&&this.layoutUpdateService.destroy(),this.layoutUpdateService=new qD(C,{canCollapseToIcons:this.collapseItemsToIcons,canHideRootItems:this.hideRootItems,minRootItems:this.minRootItemCount,renderMode:this.renderMode},this.getAttribute(iF)))}))}reinit(e){this.reinitRequested||(this.reinitRequested=!0,$t((()=>{this.resetToDefault(),this.disposeModel(),$t((()=>{this.reinitRequested=!1,this.init(e)}))})))}resetToDefault(){var e;null===(e=this.layoutModel)||void 0===e||e.resetToDefault()}updateSettings(){}oldUpdateSettings(e){var t,i;if(!this.model)return;let n=!1,s=!1;if(this.model.canHideRootItems!==e.canHideRootItems&&(this.model.canHideRootItems=e.canHideRootItems,n=!0),this.model.canCollapseToIcons!==e.canCollapseToIcons&&(this.model.canCollapseToIcons=e.canCollapseToIcons,n=!0),this.model.minRootItems!==e.minRootItems&&(this.model.minRootItems=e.minRootItems,s=!0),this.model.itemSize!==e.itemSize&&(this.model.itemSize=e.itemSize,s=!0),this.model.renderMode!==e.renderMode&&(this.model.renderMode=e.renderMode,s=!0),this.model.itemSpacing!==e.itemSpacingMode&&(this.model.itemSpacing=e.itemSpacingMode,s=!0),null===(t=this.model.title)||void 0===t||t.text.update(e.title),!s){const t=Array.from(e.items).map((e=>e.id)),i=Array.from(this.model.itemMap.values()).map((e=>e.id));s=!((r=t).length===(o=i).length&&r.every(((e,t)=>e===o[t])))}var r,o;s?this.reinit(e):(Array.from(e.items).forEach((e=>{if(!this.model)return;const t=this.model.itemMap.get(e.id);t&&(t.text.update(e.text),t.groupName.update(e.groupName),t.adaptivePriority.update(e.adaptivePriority),t.index.update(e.index),t.iconCssClass.update(e.iconCssClass),t.isDisplayed.update(e.visible))})),n&&(null===(i=this.layoutModel)||void 0===i||i.forceUpdate()))}disposeModel(){var e;null===(e=this.layoutModel)||void 0===e||e.dispose()}dispose(){this.disposeModel()}getItemsBlocks(e,t){return t.reduce(((t,i)=>t.group&&t.group.tryAddItem(i)?t:i.groupName.value?{group:t.blocks[t.blocks.length]=new lD(e,i),blocks:t.blocks}:{group:null,blocks:t.blocks.concat([new oD(e,i)])}),{blocks:[],group:null}).blocks.sort((function(e,t){return e.item.adaptivePriority.value-t.item.adaptivePriority.value})).map((function(e,t){return e.index=t,e}))}updateToolbarHeight(){const e=this.querySelector(jD);this.style.height=(!this.isLoading&&e?e.offsetHeight:this.offsetHeight)+"px"}checkUpdateMinWidth(e){var t;const i=null===(t=this.layoutModel)||void 0===t?void 0:t.getMinWidth();i&&this.minWidth!==i&&(this.minWidth=i,e.element.style.minWidth=i+"px")}};C([An()],QF.prototype,"layoutModel",void 0),C([An()],QF.prototype,"items",void 0),C([ln({type:String,attribute:"toolbar-title"})],QF.prototype,"toolbarTitle",void 0),C([ln({type:Number,attribute:"min-root-item-count"})],QF.prototype,"minRootItemCount",void 0),C([ln({type:Boolean,attribute:"auto-collapse-items-to-icons"})],QF.prototype,"collapseItemsToIcons",void 0),C([ln({type:Boolean,attribute:"auto-hide-root-items"})],QF.prototype,"hideRootItems",void 0),C([ln({type:Number,attribute:"item-size"})],QF.prototype,"itemSize",void 0),C([ln({type:HD,attribute:"render-mode"})],QF.prototype,"renderMode",void 0),C([ln({type:UD,attribute:"item-spacing-mode"})],QF.prototype,"itemSpacingMode",void 0),C([ln({type:String,attribute:"ellipsis-id"})],QF.prototype,"ellipsisId",void 0),QF=C([rn(KS.Toolbar)],QF);const NF=new class{constructor(e){this.resizeObserver=new ResizeObserver(e)}observe(e){return this.resizeObserver.observe(e),new vi((()=>this.resizeObserver.unobserve(e)))}}((e=>{for(const t of e){const e=t.target;e&&e.updateSize()}}));let RF=class extends Bs{constructor(){super(...arguments),this.text="",this.groupName="",this.adaptivePriority=0,this.iconCssClass="",this.visible=!1,this.index=0,this.justHidden=!1}get isEllipse(){return this.classList.contains(KS.ButtonEllipsis)}get isTitle(){return this.classList.contains(KS.ToolbarTitle)}get isPlaceholder(){return this.classList.contains(KS.ToolbarPlaceholder)}get isHidden(){return"none"===this.style.display}update(e){this.isInRibbon||(e.has("text")&&this.updateSize(!0),e.has("visible")&&this.dispatchEvent(new vF(this.visible)),e.has("index")&&this.itemOrdered(),super.update(e))}updateSize(e=!1){(!this.isHidden||this.justHidden||(this.justHidden=!0,e))&&(this.isHidden||!this.justHidden?this.dispatchEvent(new fF({id:this.id,width:this.offsetWidth,isTitle:this.isTitle,isEllipse:this.isEllipse,isHidden:this.isHidden},e)):this.justHidden=!1)}connectedCallback(){super.connectedCallback(),this.isInRibbon||(this.subscriptions=new vi(PF.addToolbarItem(this.toolbarItem),this.isEllipse||this.isPlaceholder?void 0:NF.observe(this)))}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.subscriptions)||void 0===e||e.dispose(),this.subscriptions=void 0}itemOrdered(){this.index>-1&&this.dispatchEvent(new wF(this.toolbarItem))}get toolbarItem(){return{id:this.id,groupName:this.groupName,text:this.text,adaptivePriority:this.adaptivePriority,iconCssClass:this.iconCssClass,visible:this.visible,index:this.index,width:this.offsetWidth,isEllipse:this.isEllipse,isTitle:this.isTitle}}get isInRibbon(){return null!==this.closest(UF.Ribbon)}};C([ln({type:String,attribute:"text"})],RF.prototype,"text",void 0),C([ln({type:String,attribute:"group-name"})],RF.prototype,"groupName",void 0),C([ln({type:Number,attribute:"adaptive-priority"})],RF.prototype,"adaptivePriority",void 0),C([ln({type:String,attribute:"icon-css-class"})],RF.prototype,"iconCssClass",void 0),C([ln({type:Boolean,attribute:"visible"})],RF.prototype,"visible",void 0),C([ln({type:Number,attribute:"index"})],RF.prototype,"index",void 0),RF=C([rn(KS.ToolbarItem)],RF),customElements.define("dxbl-toolbar-menu-item",class extends px{constructor(){super(...arguments),this.boundOnButtonClick=this.onButtonClick.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.boundOnButtonClick)}disconnectedCallback(){this.removeEventListener("click",this.boundOnButtonClick),super.disconnectedCallback()}canHandlePointerDown(e){return K.containsInComposedPath(e,this)}onButtonClick(e){if(null===this.getAttribute("submit-form-on-click"))return;const t=this.getAttribute("data-dxtoolbar-container-id");if(t){const e=document.querySelector(`[${iF}=${t}]`);if(e){const t=document.createElement("input");t.type="submit",t.hidden=!0,e.appendChild(t),t.click(),e.removeChild(t)}}}});let LF=class extends Bs{};LF=C([rn("dxbl-ribbon-item")],LF);let MF=class extends Bs{constructor(){super(),this._keyboardNavigator=null,this.loading=!1}willUpdate(e){e.has("loading")&&!this.loading&&this.initializeNavigator()}initializeNavigator(){this._keyboardNavigator||(this._keyboardNavigator=this.querySelector(`:scope > ${Pi}`)),this._keyboardNavigator.initialized||this._keyboardNavigator.initialize(this,new HF(this._keyboardNavigator,this))}};C([ln({type:Boolean,attribute:"loading"})],MF.prototype,"loading",void 0),MF=C([rn(UF.Ribbon)],MF);class kF{constructor(e){this.container=null,this.owner=e}querySelectorAll(e){var t;return this.querySelectorAllInternal(e||"#"+(null===(t=this.getContainer())||void 0===t?void 0:t.id))}toggleClassName(e,t,i){return this.owner?this.owner.toggleClassName(e,t,i):this.toggleClassNameInternal(e,t,i)}toggleClassNameInternal(e,t,i){}querySelectorAllInternal(e){return this.owner?this.owner.querySelectorAll(e):this.getNodes(e)}getNodes(e){const t=this.container;let i=t.querySelectorAll(e);return i.length||(e="#"+t.id+e,t.parentNode&&(i=t.parentNode.querySelectorAll(e))),i}getContainer(){return this.owner?this.owner.getContainer():this.container}getBoxSize(e){return Math.ceil(mi(e))+this.getBoxOuterOffset(e)}getBoxInnerOffset(e){return _t(e)}getBoxOuterOffset(e){return Kt(e)}getBoxOffset(e){return this.getBoxOuterOffset(e)+this.getBoxInnerOffset(e)}getNodeWidth(e,t=!1){const i=e;return i?Math.ceil(i.offsetWidth+(t?0:this.getBoxOuterOffset(i)))+zt(i):0}dispose(){}setActive(e){}createLayoutEntity(e,...t){return null!==this.owner?this.owner.createLayoutEntity(e,...t):this.createLayoutEntityCore(e,...t)}createLayoutEntityCore(e,...t){return new(this.resolveLayoutEntityType(e))(...t)}resolveLayoutEntityType(e){return e}}const KF=`.${KS.ButtonToolbar}`,OF=`.${KS.ButtonEllipsis}`;class _F extends kF{constructor(e,t,i){super(e),this.nextBlock=null,this.prevBlock=null,this.ribbonOwner=e,this.group=t,this.element=i,this.width=0,this.isActiveValue=null,this.index=t.blocks.length,this.nextBlock=null,this.prevBlock=i.layoutBlockObj||null,this._element=i,this._element.layoutBlockObj=this._element.layoutBlockObj?this._element.layoutBlockObj.nextBlock=this:this,this._element.onHide=()=>{this.toggleClassName(this.element,KS.ToolbarHiddenItem,!0)},this._element.onShow=()=>{this.toggleClassName(this.element,KS.ToolbarHiddenItem,!1)}}dispose(){delete this._element.onHide,delete this._element.onShow,this.ribbonOwner=null,super.dispose()}afterCreate(e){delete this._element.layoutBlockObj,e.maxWidth+=this.width,e.minWidth+=this.getMinWidth(),0===this.width&&this.raiseVisibilityChange(!1)}setActive(e){this.isActiveValue!==e&&(this.isActiveValue=e,this.group.activeBlock=e?this:null,this.group.groupsCollection.lastGroup=this.group,this.group.state.prevState&&this.toggleClassName(this.group.element.parentNode,this.group.state.prevState.name,this.isActiveValue),this.toggleClassName(this.element,this.group.state.name,this.isActiveValue),this.toggleClassName(this.group.element,this.group.state.name,this.isActiveValue))}raiseVisibilityChange(e){var t,i;const n=e?this._element.onShow:this._element.onHide;n&&(null===(t=this.owner)||void 0===t||t.domChanges.push(n)),null===(i=this.ribbonOwner)||void 0===i||i.toggleVisibility(this.element,e)}getMinWidth(){return this.nextBlock?this.nextBlock.getMinWidth():this.width}getNextBlock(e){let t=this.group,i=t.blocks[this.index-e];return!i&&(t=t.groupsCollection.blockGroups[t.totalIndex+e])&&(i=t.blocks[Math.pow(t.blocks.length,e>0?1:0)-1]),i}}class VF extends kF{constructor(e,t,i,n){super(e),this.builders=t||[],this.name=i,this.index=n?n.index+1:0,this.prevState=n,this.nextState=null,n&&(n.nextState=this)}for(e){return this.builders[this.builders.length]=this.createLayoutEntity($F,this.owner,this.name,e)}}class zF extends kF{constructor(e,t,i,n,s){super(e),this.groupsCollection=t,this.state=n,this.element=i,this.elementOffset=this.getBoxOffset(i)+this.getMarginLeftOffset(i),this.blocks=[],this.activeBlock=null,this.fullWidth=this.elementOffset,this.isSmallest=!n.nextState,this.isLargest=!n.prevState,this.domIndex=s,this.totalIndex=this.groupsCollection.blockGroups.length,this.createBlocks(n.builders);const r=i;n.prevState&&(this.isSmallest||(r.layoutBlockGroupObj.isSmallest=0===this.blocks.length))?delete r.layoutBlockGroupObj:r.layoutBlockGroupObj=this}dispose(){for(let e=0;e<this.blocks.length;e++)this.blocks[e].dispose();super.dispose()}afterCreate(e){this.blocks.forEach((function(t){t.afterCreate(e)})),e.groupsOffset+=this.elementOffset,e.groupBlocksLengthLookup[this.domIndex]=this.blocks.length,e.lastGroup=this}setActive(e){let t=0;!this.isSmallest&&this.isLargest&&(t=this.blocks.length-1),this.blocks[t].setActive(e)}createBlocks(e){for(let t=0;t<e.length;t++){const i=e[t],n=i.findBlockElements(this.element);for(let e=0;e<n.length;e++){const t=this.createLayoutEntity(_F,this.owner,this,n[e]);this.fullWidth+=t.width=i.getBlockWidth(t),this.blocks.push(t)}}this.isLargest&&this.setActive(!0)}calculateWidth(e){return this!==e.group?this.fullWidth:this.getActualBlocks(e).reduce((function(e,t){return e+t.width}),this.elementOffset)}getActualBlocks(e){return this.blocks.map(function(t){return t.prevBlock&&t.index<e.index?t.prevBlock:t}.bind(this))}getBeforeOffset(e){const t=window.getComputedStyle(e,":before");return T.DomUtils.pxToInt(t.width)+T.DomUtils.pxToInt(t.marginRight)}getMarginLeftOffset(e){const t=window.getComputedStyle(e);return T.DomUtils.pxToInt(t.marginLeft)}}class WF extends kF{constructor(e,t,i){super(e),this.ribbonOwner=e,this.groupsContainer=t,this.testElement="function"==typeof i?i:function(e){return WS.elementMatchesSelector(e,i)},this.blockGroups=[],this.states=[],this.width=0,this.groupsOffset=0,this.maxWidth=0,this.minWidth=0,this.groupElementsCount=0,this.currentLayoutElements=[],this.lastGroup=null,this.selector=i,this.groupLookupMap={},this.groupBlocksLengthLookup={}}createBlockGroup(e,t,i){let n=this.createLayoutEntity(zF,this.owner,this,e,t,i);return n&&(n=n.blocks.length>0?this.blockGroups[this.blockGroups.length]=n:null),n&&(this.groupLookupMap[i]||(this.groupLookupMap[i]=[])).splice(0,0,n.totalIndex),n}createBlockGroups(){var e;const t=null===(e=this.ribbonOwner)||void 0===e?void 0:e.getGroupElements(this.groupsContainer,this.selector);if(t){this.groupElementsCount=t.length;for(let e=0;e<this.states.length;e++)for(let i=this.groupElementsCount-1;i>=0;i--){const n=t[i];!n||this.testElement(n)&&this.createBlockGroup(n,this.states[e],i)||(t[i]=null)}this.states=[];for(let e=0;e<this.blockGroups.length&&this.blockGroups[e].isLargest;e++)this.blockGroups[e].afterCreate(this);this.minWidth+=this.groupsOffset,this.maxWidth+=this.groupsOffset,this.width=this.maxWidth,this.currentLayoutElements=this.findActiveBlocks()}}defineState(e,t){const i=this.createLayoutEntity(VF,this.owner,[],e,this.states[this.states.length-1]||null);this.states.push(i),t(i)}initialize(){}applyLayout(e){this.currentLayoutElements&&this.currentLayoutElements.forEach((function(e){e.setActive(!1)})),this.currentLayoutElements=e,this.currentLayoutElements.forEach((function(e){e.setActive(!0)})),this.detectBlockItemVisibilityChanges()}adjust(e){if(e===this.width||e<=this.minWidth&&this.width===this.minWidth||e>=this.maxWidth&&this.width===this.maxWidth)return;const t=this.width;if(this.width=Math.max(this.minWidth,Math.min(this.maxWidth,e)),this.width===this.maxWidth)return this.applyLayout(this.blockGroups.filter((function(e){return e.isLargest})));if(this.width===this.minWidth)return this.applyLayout(this.blockGroups.filter((function(e){return e.isSmallest})));const i=t-this.width,n=i/Math.abs(i),s=this.findActiveBlocks();let r=s?s[0]:null,o=r;const a=r;for(;r;){if(e=this.calculateWidth(r),n>0&&e<=this.width||n<0&&e>=this.width){const e=n<0?o:r;e!==a&&null!==e&&this.applyLayout([e]);break}o=r,r=r.getNextBlock(n)}}detectBlockItemVisibilityChanges(){const e=this.findActualBlockGroups();for(let t=0;t<e.length;t++){const i=e[t];let n=!1;for(let e=0;e<i.blocks.length;e++){let t=i.blocks[e];i!==this.lastGroup||(n=n||t.isActiveValue)||(t=t.prevBlock||t),t.raiseVisibilityChange(t.width>0)}}}calculateWidth(e){if(!e){const t=this.findActiveBlocks();t&&(e=t[0])}return this.findActualBlockGroups(e.group).reduce((function(t,i){return t+i.calculateWidth(e)}),0)}findActualBlockGroups(e=null){const t=[];if(!(e=e||this.lastGroup))return t;for(let i=0;i<this.groupElementsCount;i++){const n=this.groupLookupMap[i];for(let s=0;s<n.length;s++){const r=this.blockGroups[n[s]];if(i<e.domIndex?r.state.index<e.state.index:r.state.index<=e.state.index){t.push(r);break}}}return t}findActiveBlocks(){return this.lastGroup?this.lastGroup.blocks.filter((function(e){return e.isActiveValue})):null}dispose(){for(let e=0;e<this.blockGroups.length;e++)this.blockGroups[e].dispose();this.blockGroups=[],super.dispose()}}class $F extends kF{constructor(e,t,i){super(e),this.name=t,this.selectorOrFunc=i,this.prepareBlockFunc=null}getBlockWidth(e){return this.prepareBlockFunc?this.prepareBlockFunc(e):0}findBlockElements(e){const t=WS.getChildElementNodesByPredicate(e,(e=>WS.elementMatchesSelector(e,this.selectorOrFunc)));return null!=t?t:[]}setPrepareFunc(e){return this.prepareBlockFunc=e,this}setWidth(){return this.setPrepareFunc((e=>this.getBoxSize(e.element)))}setHidden(){return this.setPrepareFunc((function(e){return 0}))}setOnlyImageWidth(){return this.setPrepareFunc((e=>{let t=this.getBoxSize(e.element),i=WS.getChildByClassName(e.element,`${he.Image}:not(.${KS.AdaptivePreviewImage})`);i||(i=WS.getChildByClassName(WS.getChildByClassName(e.element,KS.DropDownToggle),`${he.Image}:not(.${KS.AdaptivePreviewImage})`));let n=WS.getChildByClassName(e.element,KS.AdaptivePreviewImage);if(n||(n=WS.getChildByClassName(WS.getChildByClassName(e.element,KS.DropDownToggle),KS.AdaptivePreviewImage)),i){if(t=this.getBoxSize(i)-this.getBoxOuterOffset(i),n){const e=this.getBoxSize(n)-this.getBoxOuterOffset(n);t=Math.max(t,e)}let s=this.getBoxOffset(e.element),r=i.parentNode;for(;r!==e.element;)s+=this.getBoxOffset(r),r=r.parentNode;return t+s}return t}))}setNoTextWidth(){return this.setPrepareFunc((e=>{let t=this.getBoxSize(e.element);if(WS.getChildByClassName(e.element,KS.ToolbarEdit))return t;const i=WS.getChildByClassName(e.element,KS.ToolbarItem);if(WS.getChildByClassName(i,KS.ToolbarEdit))return t;const n=this.findImageElement(e.element);if(n){const e=n.nextElementSibling;e&&(t-=this.getBoxSize(e),t-=this.getBoxOuterOffset(n))}return t}))}findImageElement(e){var t;let i=WS.getChildByClassName(e,he.Image);if(i||(i=WS.getChildByClassName(WS.getChildByClassName(e,he.Button),he.Image)),!i&&(null===(t=null==e?void 0:e.classList)||void 0===t?void 0:t.contains(KS.ToolbarItem))){const t=WS.getChildByClassName(e,KS.ToolbarItem);return this.findImageElement(t)}return i}}class GF extends kF{constructor(e){super(null),this.clientStateMap=new Map,this.dotNetReference=e.dotNetReference,this.container=e.getMainElement(),this.containerOffsets=this.calculateContainerOffsets(),this.blockGroupsArray=[],this.isReady=!1,this.classesToApply=[],this.domChanges=[],this.nextAdjustGroupWidth=null}getClientState(e){if(null===e.getAttribute("dxbl-toolbar-adaptive-item"))return null;const t=e.id;if(!t)return null;let i=this.clientStateMap.get(t);return i||(i={id:t},this.clientStateMap.set(t,i)),i}toggleClassNameInternal(e,t,i){this.getBatchCssUpdateCache(e)[t]=i;const n=this.getClientState(e);n&&(n[t]=i)}getBatchCssUpdateCache(e){let t=e._layoutBuilderCache;return t||(t=e._layoutBuilderCache={},this.classesToApply.push(this.createBatchCssUpdateDelegate(e))),t}createBatchCssUpdateDelegate(e){return function(){const t=e._layoutBuilderCache;if(t){delete e._layoutBuilderCache;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&T.DomUtils.toggleClassName(e,i,t[i])}}}createBlockGroupsCore(e,t,i){const n=[],s=this.querySelectorAll(e);for(let e=0;e<s.length;e++){const r=this.createLayoutEntity(WF,this,s[e],t);this.blockGroupsArray.push(r),i&&i(r),r.createBlockGroups(),n.push(r)}return this.nextAdjustGroupWidth=this.getGroupsWidth(),n}initialize(){for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].initialize();this.isReady=!0,this.adjust()}adjust(e=null){if(this.isReady){const t=this.classesToApply,i=this.domChanges;let n=this.classesToApply=[],s=this.domChanges=[];const r=this.clientStateMap;let o;null!==this.nextAdjustGroupWidth?(o=this.nextAdjustGroupWidth,this.nextAdjustGroupWidth=null):o=this.getGroupsWidth();for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].adjust(o);e&&e(),n=t.concat(n),s=i.concat(s);const a=Array.from(r.values()).concat(Array.from(this.clientStateMap.values()));this.queueUpdates((()=>{for(;n.length;){const e=n.shift();e&&e()}this.queueUpdates((()=>{for(;s.length;){const e=s.shift();e&&e()}a.length&&this.dotNetReference.invokeMethodAsync("OnModelUpdated",a).catch((e=>{ui(this.container)||console.error(e)}))}))}))}}toggleVisibility(e,t){const i=this.getClientState(e);i&&(i.isVisible=t)}queueUpdates(e){$t(e)}getGroupsWidth(){const e=this.getContainer();return e?e.offsetWidth-this.containerOffsets:0}dispose(){this.containerOffsets=this.calculateContainerOffsets();for(let e=0;e<this.blockGroupsArray.length;e++)this.blockGroupsArray[e].dispose();this.blockGroupsArray=[],this.classesToApply=[],this.isReady=!1,super.dispose()}getGroupElements(e,t){return WS.getChildElementNodesByPredicate(e,(function(e){return WS.elementMatchesSelector(e,t)}))}createBlockGroups(){this.createBlockGroupsCore(`.${KS.Toolbar} > ${KF}`,`.${KS.ToolbarGroup}`,(function(e){e.defineState(KS.AdaptiveItem,(function(e){e.for(`:not(${OF})`).setWidth(),e.for(OF).setHidden()})),e.defineState(KS.AdaptiveItemTextHidden,(function(e){e.for(`:not(${OF})`).setNoTextWidth(),e.for(OF).setHidden()})),e.defineState(KS.AdaptiveItemHidden,(function(e){e.for(`:only-child:not(${OF})`).setWidth(),e.for(`:not(:only-child):not(${OF})`).setHidden(),e.for(OF).setWidth()})),e.defineState(KS.AdaptiveItemAllHidden,(function(e){e.for(`:only-child:not(${OF})`).setNoTextWidth(),e.for(`:not(:only-child):not(${OF})`).setHidden(),e.for(OF).setNoTextWidth()}))}))}calculateContainerOffsets(){var e;if(!this.container)return 0;let t=this.getBoxInnerOffset(this.container),i=null!==(e=this.container.querySelector(".dxbl-toolbar"))&&void 0!==e?e:this.container;for(;i!==this.container&&i;)t+=this.getBoxOffset(i),i=i.parentNode;return t}}class qF{constructor(e,t){this.currentWidth=null,this.currentHeight=null,this.elementContentWidthSubscription=null,this.mainElement=e,this.layoutBreakPoints=null,this.dotNetReference=t}getMainElement(){return this.mainElement}initialize(){$t((()=>{this.buildLayout()})),$t((()=>{this.adjustLayout()})),this.elementContentWidthSubscription=ni(this.getMainElement(),(e=>{this.currentWidth===e.width&&this.currentHeight===e.height||(this.currentWidth=e.width,this.currentHeight=e.height,this.onBrowserWindowResize())}))}applyLayoutStateAppearance(){var e;T.DomUtils.addClassName(this.getMainElement(),KS.Loaded),null===(e=this.layoutBreakPoints)||void 0===e||e.initialize(),setTimeout((()=>{T.DomUtils.removeClassName(this.getMainElement(),KS.Loading)}),500)}onBrowserWindowResize(){this.layoutBreakPoints&&this.layoutBreakPoints.adjust()}update(){this.layoutBreakPoints&&this.layoutBreakPoints.adjust()}dispose(){this.elementContentWidthSubscription&&ii(this.elementContentWidthSubscription),this.layoutBreakPoints&&this.layoutBreakPoints.dispose()}buildLayout(){this.layoutBreakPoints=this.layoutBreakPoints||new GF(this),this.layoutBreakPoints.createBlockGroups()}adjustLayout(){var e;this.applyLayoutStateAppearance(),null===(e=this.layoutBreakPoints)||void 0===e||e.adjust()}}let XF=class extends Bs{constructor(){super(),this._keyboardNavigator=null,this.loading=!1}willUpdate(e){e.has("loading")&&!this.loading&&this.initializeNavigator()}initializeNavigator(){this._keyboardNavigator||(this._keyboardNavigator=this.querySelector(`:scope > ${Pi}`)),this._keyboardNavigator.initialized||this._keyboardNavigator.initialize(this,new HF(this._keyboardNavigator,this))}};C([ln({type:Boolean,attribute:"loading"})],XF.prototype,"loading",void 0),XF=C([rn("dxbl-ribbon-internal")],XF);const YF=new Map;function JF(e,t,i){if(!e)return Promise.reject("failed");let n=YF.get(e);n?n.update():(n=new qF(e,i),n.initialize(),YF.set(e,n));return Di(e.querySelector(KF)||e),$t((()=>{e.setAttribute("data-dx-ribbon-toolbar-loaded","")})),Promise.resolve("ok")}function jF(e){return t(e,YF),Array.from(YF.keys()).forEach((e=>{ui(e)&&t(e,YF)})),Promise.resolve("ok");function t(e,t){if(!e)return;const i=e.querySelector(KF);i&&wi(i);const n=t.get(e);null==n||n.dispose(),t.delete(e)}}const ZF=Object.freeze({__proto__:null,init:JF,dispose:jF,default:{init:JF,dispose:jF}});var eT,tT;!function(e){e[e.Expand=0]="Expand",e[e.Collapse=1]="Collapse",e[e.Check=2]="Check"}(eT||(eT={}));class iT extends CustomEvent{constructor(e){super(iT.eventName,{detail:{action:e},bubbles:!0,composed:!1,cancelable:!0})}}iT.eventName="dxbl-navigation.action-request",mt.register(iT.eventName,(e=>e.detail));class nT{}tT=nT,nT.prefix="dxbl",nT.root=`${tT.prefix}-treeview`,nT.templatedItem=`${tT.root}-tmpl`,nT.item=`${tT.root}-item`,nT.itemsContainer=`${tT.root}-items-container`,nT.itemContent=`${tT.item}-content`,nT.itemContainer=`${tT.item}-container`,nT.checkAllBox=`${tT.root}-checkbox-check-all`,nT.filterPanel=`${tT.prefix}-navigation-filter`;class sT{}sT.parentId="parent-id",sT.notTemplatedItemSelector=`li > .${nT.itemContent}`,sT.templatedItemSelector=`li > .${nT.templatedItem}`;const rT=`:scope > .${nT.itemContainer}, :scope.${nT.templatedItem}`;class oT extends Li{constructor(e,t){super(e.getKeyBoardNavigator(),t),this._treeView=e}canSwitchToNestedContentMode(){return!0}queryItems(){return this.queryItemsBySelector(rT)}}const aT=`:scope ${sT.templatedItemSelector}, :scope ${sT.notTemplatedItemSelector}`;class lT extends Li{activate(){!this._activatedByClick&&this._focusedFromOutside&&null==this._treeView.getAttribute(Bi)&&(this.selectedItemIndex=this.navigator.focusedFromForwardElement?this.itemCount-1:0),this._focusedFromOutside=!1,this._activatedByClick=!1,super.activate()}onActiveStateChanged(e){this._focusedFromOutside=e,super.onActiveStateChanged(e)}onPointerDown(e){this._activatedByClick=!0}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._focusedFromOutside=!0,this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this._activatedByClick=!0,this._treeView=e,this.targetElement.addEventListener("pointerdown",this.boundOnPointerDownHandler)}queryItems(){return this.queryItemsBySelector(aT)}createItemStrategy(e){return new oT(this._treeView,e)}getFocusableContainer(){return this.isTemplatedItem()?this.selectedItemElement:this.selectedItemElement.querySelector(`:scope > .${nT.itemContainer}`)}selectedItemExpandedState(){const e=this.getFocusableContainer().getAttribute(N.ariaExpanded);return null===e?null:"true"===e}selectedItemIsCheckable(){return this.getFocusableContainer().hasAttribute(N.ariaChecked)}selectedItemIsParentNode(){return"1"===this.getFocusableContainer().getAttribute(N.ariaLevel)}selectedItemIsEndNode(){return null===this.getFocusableContainer().getAttribute(N.ariaExpanded)}getSelectedItemParent(){const e=this.getFocusableContainer(),t=this.isTemplatedItem()?e.parentElement:e,i=null==t?void 0:t.getAttribute(sT.parentId),n=document.querySelector(`#${i}`);return this.isTemplatedItem()?n.firstElementChild:n.parentElement}isTemplatedItem(){return this.selectedItemElement.classList.contains(nT.templatedItem)}handleKeyDown(e){return super.handleKeyDown(e),!this.nestedContentSelected&&this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:return this.raiseClickEvent(this.getFocusableContainer(),e.ctrlKey,e.metaKey,e.shiftKey),!0;case Be.KeyCode.Space:return this.handleSpace(),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!0),!0;case Be.KeyCode.Down:return this.moveToNextItem(!0),!0;case Be.KeyCode.Left:return!0===this.selectedItemExpandedState()?this.performAction(eT.Collapse):this.selectedItemIsParentNode()||this.moveToParent(),!0;case Be.KeyCode.Right:return!1===this.selectedItemExpandedState()?this.performAction(eT.Expand):this.selectedItemIsEndNode()||this.moveToFirstChild(),!0;case Be.KeyCode.Home:return this.selectItem(0),!0;case Be.KeyCode.End:return this.selectItem(this.itemCount-1),!0;default:return!1}}onDispose(){this.targetElement.removeEventListener("pointerdown",this.boundOnPointerDownHandler)}moveToParent(){const e=this.getSelectedItemParent(),t=this.items.indexOf(e);this.selectItem(t)}moveToFirstChild(){this.moveToNextItem(!1)}handleSpace(){this.handleChecking()}selectedItemIsSelectable(){return null!==this.getFocusableContainer().getAttribute(N.ariaSelected)}handleChecking(){(this.selectedItemIsCheckable()||this.selectedItemIsSelectable())&&this.performAction(eT.Check)}performAction(e){this.getFocusableContainer().dispatchEvent(new iT(e))}}class AT extends Li{constructor(e,t){super(e.getKeyBoardNavigator(),t),this._treeView=e}queryItems(){return this.queryItemsBySelector("input")}}class dT extends Li{get activatedByCheckAllClick(){return this._activatedByCheckAllClick}set activatedByCheckAllClick(e){this._activatedByCheckAllClick=e}constructor(e){super(e.getKeyBoardNavigator(),e),this.boundOnPointerDownHandler=this.onPointerDown.bind(this),this._activatedByCheckAllClick=!1,this._checkAllBox=null,this._treeView=e}onDispose(){if(this._checkAllBox){this._checkAllBox.querySelector("label").removeEventListener("pointerdown",this.boundOnPointerDownHandler)}}activate(){super.activate(),this.activatedByCheckAllClick||this._checkAllBox&&Ii(this._checkAllBox)}onActiveStateChanged(e){super.onActiveStateChanged(e),e||(this.activatedByCheckAllClick=!1)}onPointerDown(e){this._checkAllBox&&(Ei(this._checkAllBox),this.activatedByCheckAllClick=!0)}queryItems(){return this.queryItemsBySelector(`:scope .${nT.checkAllBox}, :scope .${nT.filterPanel} input, :scope .${nT.itemsContainer}[role=tree]`)}isItemsContainer(e){return e.classList.contains(nT.itemsContainer)}isCheckAllBox(e){return e.classList.contains(nT.checkAllBox)}createItemStrategy(e){if(this.isItemsContainer(e))return new lT(this._treeView,e);if(this.isCheckAllBox(e)){this._checkAllBox=e;return this._checkAllBox.querySelector("label").addEventListener("pointerdown",this.boundOnPointerDownHandler),new AT(this._treeView,e)}return null}handleKeyDown(e){return super.handleKeyDown(e),this.handleKeyDownCore(e)}handleKeyDownCore(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&(e.shiftKey?this.firstItemSelected?this.leaveBackward():this.moveToPrevItem(!1):this.lastItemSelected?this.leaveForward():this.moveToNextItem(!1),!0)}}var cT;!function(e){e.Disabled="Disabled",e.Multiple="Multiple",e.Recursive="Recursive"}(cT||(cT={}));class hT extends Bs{constructor(){super(...arguments),this._keyboardNavigator=null,this.checkMode=cT.Disabled}connectedOrContentChanged(){this._keyboardNavigator=this.querySelector(`:scope > ${Pi}`),this._keyboardNavigator&&this.initializeKeyboardNavigation(),super.connectedOrContentChanged()}initializeKeyboardNavigation(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new dT(this))}disconnectedCallback(){var e;null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}getKeyBoardNavigator(){return this._keyboardNavigator}}C([ln({type:cT,attribute:"check-mode"})],hT.prototype,"checkMode",void 0);let uT=class extends hT{};var pT;uT=C([rn("dxbl-treeview")],uT);class mT{}pT=mT,mT.prefix="dxbl",mT.root=`${pT.prefix}-accordion`,mT.group=`${pT.root}-group`,mT.header=`${pT.group}-header`,mT.body=`${pT.group}-body`,mT.item=`${pT.root}-item`,mT.itemContent=`${pT.item}-content`,mT.itemsContainer=`${pT.root}-items-container`,mT.itemTemplate=`${pT.root}-tmpl`;class gT extends Li{get selector(){return this.isTemplatedItem(this.targetElement)?`:scope.${mT.itemTemplate}`:`:scope.${mT.itemContent}`}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._accordion=e}canSwitchToNestedContentMode(){return!0}isTemplatedItem(e){return e.classList.contains(mT.itemTemplate)}queryItems(){return this.queryItemsBySelector(this.selector)}isExpanded(){return"true"===this.selectedItemElement.getAttribute(N.ariaExpanded)}handleKeyDown(e){return!!super.handleKeyDown(e)||!this.nestedContentSelected&&this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:return this.raiseClickEvent(this.targetElement,e.ctrlKey,e.metaKey,e.shiftKey),!0;case Be.KeyCode.Left:return!!this.isExpanded()&&(this.performAction(eT.Collapse),!0);case Be.KeyCode.Right:return!this.isExpanded()&&(this.performAction(eT.Expand),!0);default:return!1}}performAction(e){this.targetElement.dispatchEvent(new iT(e))}}class CT extends gT{get selector(){return`:scope.${mT.header}`}}class fT extends Li{get activateFirstItem(){return this._activateFirstItem}set activateFirstItem(e){this._activateFirstItem=e}constructor(e,t){super(e.getKeyBoardNavigator(),t),this._activateFirstItem=!0,this._accordion=e}activate(){this.focusedFromOutsideBody()&&(this.selectedItemIndex=this.activateFirstItem?0:this.itemCount-1),super.activate()}canSwitchToNestedContentMode(){return!0}focusedFromOutsideBody(){return!this.targetElement.contains(document.activeElement)}isTemplatedBody(){return null==this.targetElement.querySelector(`:scope .${mT.item}`)}isItem(e){return e.classList.contains(mT.itemContent)}queryItems(){return this.queryItemsBySelector(this.getBodyElementsSelector())}getBodyElementsSelector(){return this.isTemplatedBody()?`:scope.${mT.body}`:`:scope .${mT.itemContent}`}createItemStrategy(e){return this.isItem(e)?new gT(this._accordion,e):null}handleKeyDown(e){const t=super.handleKeyDown(e);return t||this.nestedContentSelected?t:this.handleKeyDownCore(e)}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Down:return!!this.canProcessUpDownKey()&&(this.moveToNextItem(!0),!0);case Be.KeyCode.Up:return!!this.canProcessUpDownKey()&&(this.moveToPrevItem(!0),!0);default:return!1}}canProcessUpDownKey(){return this.isItem(document.activeElement)}}const vT=`:scope .${mT.header},\n:scope .${mT.body}[expanded-state=True], :scope .${mT.itemTemplate}`;class bT extends Li{constructor(e){super(e.getKeyBoardNavigator(),e),this._accordion=e}isHeader(e){return e.classList.contains(mT.header)}isBody(e){return e.classList.contains(mT.body)}queryItems(){return this.queryItemsBySelector(vT)}createItemStrategy(e){return this.isHeader(e)?new CT(this._accordion,e):this.isBody(e)?new fT(this._accordion,e):new gT(this._accordion,e)}handleKeyDown(e){return super.handleKeyDown(e),!this.nestedContentSelected&&this.handleKeyDownCore(e)}activate(){var e,t;(null===(e=this.getSelectedItemStrategy())||void 0===e?void 0:e.targetElement.contains(document.activeElement))?null===(t=this.getSelectedItemStrategy())||void 0===t||t.activate():super.activate()}handleKeyDownCore(e){var t;switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Enter:return this.isBody(this.selectedItemElement)&&(null===(t=this.getSelectedItemStrategy())||void 0===t||t.activate()),!0;case Be.KeyCode.Esc:return document.activeElement!==this.selectedItemElement&&this.selectItem(this.selectedItemIndex),!0;case Be.KeyCode.Down:return this.moveToNextItem(!1),!0;case Be.KeyCode.Up:return this.moveToPrevItem(!1),!0;case Be.KeyCode.Tab:return e.shiftKey?this.leaveBackward():this.leaveForward(),!0}return!1}canFocusSelectedItem(){return super.canFocusSelectedItem()||this.isBody(this.selectedItemElement)}updateSelectedItemByIndex(e){const t=this.selectedItemIndex;super.updateSelectedItemByIndex(e),this.isBody(this.selectedItemElement)&&(this.getSelectedItemStrategy().activateFirstItem=t<this.selectedItemIndex)}}class wT extends Bs{constructor(){super(...arguments),this._keyboardNavigator=null}connectedOrContentChanged(){this._keyboardNavigator=this.querySelector(`:scope > ${Pi}`),this._keyboardNavigator&&this.initializeKeyboardNavigator(),super.connectedOrContentChanged()}initializeKeyboardNavigator(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new bT(this))}disconnectedCallback(){var e;null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}getKeyBoardNavigator(){return this._keyboardNavigator}}let yT=class extends wT{};yT=C([rn("dxbl-accordion")],yT);class BT extends Ux{constructor(e,t,i){super(e,t),this._menuClosing=!1,this.focusBorderVisible=!1,this._parentStrategy=i,this.selectedItemIndex=-1}makeFocusBorderVisible(){this.focusBorderVisible=!0}get parentStrategy(){return this._parentStrategy}initialize(){super.initialize(),this.targetElement.setAttribute(Nx,"")}activate(){this.selectedItemIndex>=0&&super.activate()}updateSelectedItemByIndex(e){e>=0&&super.updateSelectedItemByIndex(e)}queryItems(){return this.queryItemsBySelector(".dxbl-context-menu-item, .dxbl-context-menu-template")}onActiveStateChanged(e){e||(this.selectedItemElement&&Ci.removeTabIndex(this.selectedItemElement),Ci.removeTabIndex(this.targetElement))}doAction(e){this.selectedItemElement&&(this.doClick(this.selectedItemElement,e),Ex(this.selectedItemElement)&&this.openSubMenu(Fx.First))}async openSubMenu(e){this.requestSubMenuOpen();const t=await this.waitSubMenuShown();e===Fx.Last?t.focusLastItem():t.focusFirstItem()}handlePopupShown(){this.parentStrategy.onSubMenuShown(this),this.focusContainer()}handlePopupClosed(){this.parentStrategy.onSubMenuClosed(this)}onSubMenuClosed(e){super.onSubMenuClosed(e),this.focusBorderVisible||(Ei(this.targetElement),this.focusBorderVisible=!1),this._menuClosing||this.focusContainer(),this._menuClosing=!1}focusContainer(){const e=Ci.findFocusableElements(this.targetElement);e.length>0&&Ci.focusElement(e[0])}createSubMenuStrategy(e,t){return new IT(e,t,this)}handleKeyDown(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Esc:return this.closeSelf(Be.KeyCode.Esc)&&H.markHandled(e),!0;case Be.KeyCode.Tab:return this._menuClosing=!0,!1;default:return super.handleKeyDown(e)}}}class ET extends BT{closeSelf(e){return!(!Ex(this.selectedItemElement)||e===Be.KeyCode.Esc)&&(this.openSubMenu(Fx.Last),!0)}}class IT extends BT{closeSelf(e){const t=this.targetElement.placementTargetElement;return this.parentStrategy.makeFocusBorderVisible(),!!t&&(t.dispatchEvent(new Tx(Dx.Collapse)),this.parentStrategy.focusSelectedItem(),!0)}}class ST extends Li{constructor(e,t){super(e,t),this._prevActiveElement=null,this.boundHandlePopupKeyboardStrategyCreating=this.handlePopupKeyboardStrategyCreating.bind(this),this.targetElement.addEventListener(go.eventName,this.boundHandlePopupKeyboardStrategyCreating)}queryItems(){return this.queryItemsBySelector(".dxbl-dropdown-dialog")}onSubMenuShown(e){this._prevActiveElement||(this._prevActiveElement=document.activeElement)}onSubMenuClosed(e){e.targetElement.isConnected&&!xx(e.targetElement)||this.tryRestoreFocusedElement(),Ci.removeTabIndex(this.targetElement)}handlePopupKeyboardStrategyCreating(e){e.detail.factory={createPopup:(e,t)=>new ET(e,t,this)},e.stopPropagation()}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)!==Be.KeyCode.Tab||this.nestedContentSelected?super.handleKeyDown(e):(e.shiftKey?this.leaveBackward():this.leaveForward(),this.performShortcutEvent(e),!0)}tryRestoreFocusedElement(){this._prevActiveElement&&this._prevActiveElement instanceof HTMLElement&&(this._prevActiveElement.focus(),this._prevActiveElement=null)}canFocusSelectedItem(){return this.selectedItemElement===this.targetElement?this.selectedItemElement.hasAttribute("is-open"):!this.getSelectedItemStrategy()}makeFocusBorderVisible(){}}let xT=class extends Bs{constructor(){super(),this._keyboardNavigator=null,this.bindedOnChanged=this.onChanged.bind(this),this.isOpen=!1,this._observer=new MutationObserver(this.bindedOnChanged)}onChanged(e,t){null==e||e.forEach((e=>{e.addedNodes.forEach((e=>{e instanceof Ri&&(this._keyboardNavigator=e,this.initializeKeyboardNavigation())}))}))}connectedCallback(){this._keyboardNavigator=this.querySelector(Pi),this._keyboardNavigator?this.initializeKeyboardNavigation():this._observer.observe(this,{childList:!0})}initializeKeyboardNavigation(){this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new ST(this._keyboardNavigator,this)),Ci.removeTabIndex(this)}disconnectedCallback(){var e;this._observer.disconnect(),null===(e=this._keyboardNavigator)||void 0===e||e.disposeComponent()}};C([ln({type:Boolean,attribute:"is-open"})],xT.prototype,"isOpen",void 0),xT=C([rn("dxbl-context-menu")],xT);class DT{}DT.ClassName=he.Prefix+"-pivot-table",DT.TableDataClassName=DT.ClassName+"-data",DT.HeaderFieldClassName=DT.ClassName+"-header-field",DT.HeaderFieldEmptyClassName=DT.HeaderFieldClassName+"-empty",DT.HeaderFreeSpaceClassName=DT.ClassName+"-header-free-space",DT.RowFieldItemClassName=DT.ClassName+"-row-field-item",DT.AreaClassName=DT.ClassName+"-area",DT.AreaDataClassName=DT.AreaClassName+"-data",DT.AreaRowClassName=DT.AreaClassName+"-row",DT.AreaRowFieldClassName=DT.AreaClassName+"-row-field",DT.AreaColumnClassName=DT.AreaClassName+"-column",DT.AreaColumnInnerContainerClassName=DT.AreaColumnClassName+"-inner-container",DT.AreaMultipleHeadersInnerContainer=DT.AreaClassName+"-multiple-headers-inner-container",DT.AreaFilterClassName=DT.AreaClassName+"-filter",DT.FixedCellClassName=DT.ClassName+"-fixed-cell",DT.NoScrollClassName=DT.ClassName+"-no-scroll",DT.LastFixedLeftCellClassName=DT.ClassName+"-last-fixed-left-cell",DT.DraggableHeaderClassName=DT.ClassName+"-draggable-header",DT.HeaderContentClassName=DT.ClassName+"-header-content",DT.DraggingUpTargetClassName=DT.ClassName+"-dragging-up-target",DT.DraggingDownTargetClassName=DT.ClassName+"-dragging-down-target",DT.MoveCursorCssClassName=DT.ClassName+"-move-cursor",DT.NotAllowedCursorCssClassName=DT.ClassName+"-not-allowed-cursor",DT.FieldListClassName=DT.ClassName+"-field-list",DT.FieldListContainerClassName=DT.FieldListClassName+"-container",DT.FieldListContainerDataClassName=DT.FieldListContainerClassName+"-data",DT.FieldListContainerRowClassName=DT.FieldListContainerClassName+"-row",DT.FieldListContainerColumnClassName=DT.FieldListContainerClassName+"-column",DT.FieldListContainerFilterClassName=DT.FieldListContainerClassName+"-filter";class FT{constructor(){}}FT.Table=`.${DT.TableDataClassName}`,FT.BodyRows="tbody tr",FT.RowFieldItem=`.${DT.RowFieldItemClassName}`,FT.AreaData=`.${DT.AreaDataClassName}`,FT.AreaRow=`.${DT.AreaRowClassName}`,FT.AreaFilter=`.${DT.AreaFilterClassName}`,FT.AreaRowField=`.${DT.AreaRowFieldClassName}`,FT.AreaColumnInnerContainer=`.${DT.AreaColumnInnerContainerClassName}`,FT.ColElementSelector=`:scope > .${xe.ClassName} > .${xe.ContentContainerClassName} > .${DT.TableDataClassName} > colgroup > col`,FT.AreaMultipleHeadersInnerContainerSelector=`.${DT.AreaMultipleHeadersInnerContainer}`,FT.HeaderFieldSelector=`.${DT.HeaderFieldClassName}`;const TT="dxbl-pivot-table";class HT{constructor(){}}var UT;HT.DataColumnIndex="data-column-index",HT.TableState="table-state",HT.Uid="data-dx-pivot-uid",function(e){e[e.Disabled=0]="Disabled",e[e.LeftBorder=1]="LeftBorder",e[e.BetweenBorders=2]="BetweenBorders",e[e.RightBorder=3]="RightBorder"}(UT||(UT={}));class PT{constructor(e){this._pivotUid="",this._lastGeneratedStyle="",this._scrollStatus=UT.Disabled,this._pivot=e}get highlightLeftBorder(){switch(this._scrollStatus){case UT.BetweenBorders:case UT.RightBorder:return!0;default:return!1}}updateStyle(e){this._scrollStatus=this.calcScrollStatus(e),requestAnimationFrame((()=>this.updateFixedCellsStyle()))}hasAnyFixedColumn(){return this._pivot.columnsInfo.some((e=>!!e.fixedPosition))}updateFixedCellsStyle(){this._pivotUid=this._pivot.getAttribute(HT.Uid);const e=this._pivot.querySelector("style");if(!e)return;let t="";this.hasAnyFixedColumn()&&(t+=this.createPositionStyles(),t+=this.createBorderStyles()),this._lastGeneratedStyle!==t&&(e.innerText=t,this._lastGeneratedStyle=t)}createPositionStyles(){const e=this._pivot.getColElements(),t=this.getOffsetWidths(e),i=new Array(t.length);i[0]=0;for(let e=1;e<t.length;++e)i[e]=i[e-1]+t[e-1];let n="";for(let e=0;e<this._pivot.columnsInfo.length;++e){const t=this._pivot.columnsInfo[e].fixedPosition;t&&"left"===t&&(n+=this.createPositionStyleForColumn(e,t,i[e]))}return n}createPositionStyleForColumn(e,t,i){return this.getTableRowsSelector()+` > .${DT.FixedCellClassName}[data-column-index="${e}"]`+` { ${t}: ${i}px; }`}createBorderStyles(){const e=[];return this.highlightLeftBorder&&(e.push(this.createLeftBorderStyle("th")),e.push(this.createLeftBorderStyle("td"))),e.join("")}createLeftBorderStyle(e){return this.getTableRowsSelector()+` > ${e}.${DT.LastFixedLeftCellClassName} { border-right-color: var(--dxbl-pivot-table-fixed-column-border-color); border-right-width: var(--dxbl-pivot-table-border-width); }`}getTableRowsSelector(){return[`${TT}[${HT.Uid}="${this._pivotUid}"]`,`.${xe.ClassName}`,`.${xe.ContentContainerClassName}`,`.${DT.TableDataClassName}`,"*","tr"].join(" > ")}getOffsetWidths(e){const t=[];for(let i=0;i<e.length;++i)t.push(this._pivot.getColElementOffsetWidth(i));return t}calcScrollStatus(e){if(!(this._pivot&&this._pivot.getTable()))return UT.Disabled;const t=this._pivot.getTable().clientWidth;return t===e.clientWidth?UT.Disabled:0===e.scrollLeft?UT.LeftBorder:Math.abs(t-e.clientWidth-e.scrollLeft)<1?UT.RightBorder:UT.BetweenBorders}}class QT{get uID(){return this._uID}get width(){return this._width}get minWidth(){return this._minWidth}get hasWidth(){return!!this._width}get isPercentWidth(){return this.hasWidth&&-1!==this.width.indexOf("%")}get isAbsoluteWidth(){return this.hasWidth&&!this.isPercentWidth}get colElementWidth(){return this._colElementWidth}set colElementWidth(e){this._colElementWidth=e}get fixedPosition(){return this._fixedPosition}constructor(e,t,i,n){this._uID=e,this._width=t,this._colElementWidth=t,this._minWidth=i,this._fixedPosition=n}updateWidth(e){this._width=e,this._colElementWidth=e}}var NT,RT;!function(e){e[e.Row=0]="Row",e[e.Column=1]="Column",e[e.Filter=2]="Filter",e[e.Data=3]="Data"}(NT||(NT={})),function(e){e[e.Row=1]="Row",e[e.Column=2]="Column",e[e.Filter=4]="Filter",e[e.Data=8]="Data",e[e.All=15]="All"}(RT||(RT={}));class LT extends QA{constructor(e){super(),this.draggableContext=null,this.boundOnDocumentPointerUpHandler=this.onDocumentPointerUp.bind(this),this.boundOnHeaderMouseMoveHandler=this.onHeaderMouseMove.bind(this),this.boundOnElementMouseOutHandler=this.onElementMouseOut.bind(this),this._pivotTable=e}start(e,t){this.isHeaderDraggingAllowed(e)&&super.start(e,t)}stop(){var e;null===(e=this.draggableContext)||void 0===e||e.targets.dispose(),super.stop(),document.body.classList.remove(DT.MoveCursorCssClassName),document.body.classList.remove(DT.NotAllowedCursorCssClassName)}getDraggableElement(e){return LT.addDraggableHeaderToDOM(e)}hideDraggableElement(){LT.removeDraggableHeaderFromDom()}updateDraggableContextByEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);this.updateDraggableContextByElement(t,e)}onDocumentPointerUp(e){var t;const i=null===(t=this.draggableContext)||void 0===t?void 0:t.srcElement;i&&!i.isConnected&&this.stop()}onHeaderMouseMove(e){this.updateDraggableContextByElement(e.target,e)}isHeaderDraggingAllowed(e){var t;const i=this._pivotTable.getFieldInfo(e);return null!==(t=null==i?void 0:i.allowDrag)&&void 0!==t&&t}isPossibleDropToCurrentArea(){var e;return!!(null===(e=this.draggableContext)||void 0===e?void 0:e.draggedField.allowedAreas)&&LT.isAreaAllowed(this.draggableContext.dropArea,this.draggableContext.draggedField.allowedAreas)}static isAreaAllowed(e,t){return 0!=(t&this.flagOf(e))}static flagOf(e){return 1<<e}createFieldDraggedHandlerArgs(){return this.draggableContext&&this.draggableContext.isPossibleDropItem&&this.draggableContext.draggedField.uID?{fieldUid:this.draggableContext.draggedField.uID,newArea:this.draggableContext.dropArea,nextFieldUid:this.draggableContext.nextFieldUid}:null}updateDraggableContextByElement(e,t){if(!e)return;if(null==this.draggableContext)return;const i=this._pivotTable.findFieldHeaderElement(e);if(i)this.updateDraggableContext(i,t);else{const t=e,i=t.classList.contains(DT.HeaderFieldEmptyClassName)||t.classList.contains(DT.HeaderFreeSpaceClassName);if(!i)return;const n=this._pivotTable.getLastFieldHeaderInArea(t);if(this.draggableContext.srcElement===t||this.draggableContext.srcElement===n)return;this.draggableContext.dropArea=this.getClosestArea(t),this.draggableContext.nextFieldUid=null,this.draggableContext.isPossibleDropItem=this.isPossibleDropToCurrentArea();const s=null!=n?n:i?t:null;s&&(this.setMouseOverElementInfo(s),this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,n?LA.Right:LA.Left))}}updateDraggableContext(e,t){var i;if(this.clearMoveStateFromDraggableContext(),null==this.draggableContext)return;if(this.draggableContext.srcElement===e)return;if(this.setMouseOverElementInfo(e),!this.isPossibleDropToCurrentArea())return;const n=this.isThereCursorInLeftPart(t),s=this._pivotTable.getFieldHeaderSiblings(e);if(!s)return void this.clearMoveStateFromDraggableContext();const r=Array.from(s),o=r.findIndex((t=>t.isSameNode(e)))+(n?-1:1);if(r[o]!==this.draggableContext.srcElement){const t=this._pivotTable.getFieldInfo(n?e:r[o]);this.draggableContext.nextFieldUid=null!==(i=null==t?void 0:t.uID)&&void 0!==i?i:null,this.draggableContext.isPossibleDropItem=this.isPossibleDropToCurrentArea()}else this.clearMoveStateFromDraggableContext();this.draggableContext.isPossibleDropItem&&this.draggableContext.targets.setPositionRelativeToElement(this.draggableContext.mouseOverElementRect,n?LA.Left:LA.Right)}refreshUICore(){super.refreshUICore();const e=this.draggableContext;if(!e)return;e.isPossibleDropItem?e.targets.show():e.targets.hide();const t=this.isPossibleDropToCurrentArea();document.body.classList.toggle(DT.MoveCursorCssClassName,t),document.body.classList.toggle(DT.NotAllowedCursorCssClassName,!t)}setMouseOverElementInfo(e){super.setMouseOverElementInfo(e),this.draggableContext&&(this.draggableContext.dropArea=this.getClosestArea(e))}isThereCursorInLeftPart(e){if(!this.draggableContext||!this.draggableContext.mouseOverElementRect)return!1;const t=this.draggableContext.mouseOverElementRect;return e.pageX<t.x+t.width/2}updateDraggableElementPosition(){if(!this.draggableContext)return;const e=this.draggableContext;e.draggableElementPosition={x:e.srcElementPosition.x+(e.currentCursorPosition.x-e.initialCursorPosition.x)+(e.currentScrollPosition.x-e.initialScrollPosition.x)+e.currentScrollPosition.x,y:e.srcElementPosition.y+(e.currentCursorPosition.y-e.initialCursorPosition.y)+(e.currentScrollPosition.y-e.initialScrollPosition.y)+e.currentScrollPosition.y}}addEventSubscriptions(){super.addEventSubscriptions(),document.addEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.addHeaderEventSubscriptions()}addHeaderEventSubscriptions(){const e=this._pivotTable.getHeaderAreas();for(let t=0;t<e.length;t++){const i=e[t];i.addEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.addEventListener("pointerout",this.boundOnElementMouseOutHandler)}}removeEventSubscriptions(){super.removeEventSubscriptions(),document.removeEventListener("pointerup",this.boundOnDocumentPointerUpHandler),this.removeHeaderEventSubscriptions()}removeHeaderEventSubscriptions(){const e=this._pivotTable.getHeaderAreas();for(let t=0;t<e.length;t++){const i=e[t];i.removeEventListener("pointermove",this.boundOnHeaderMouseMoveHandler),i.removeEventListener("pointerout",this.boundOnElementMouseOutHandler)}}static addDraggableHeaderToDOM(e){const t=document.createElement("div");t.className=DT.DraggableHeaderClassName;const i=e.getBoundingClientRect();t.style.width=`${i.width}px`,t.style.height=`${i.height}px`;const n=getComputedStyle(e);t.style.padding=n.padding,t.style.font=n.font,t.style.whiteSpace=n.whiteSpace;const s=e.cloneNode(!0);return t.appendChild(s),document.body.appendChild(t),t}static removeDraggableHeaderFromDom(){const e=document.querySelectorAll(`.${DT.DraggableHeaderClassName}`);for(let t=0;t<e.length;t++)e[t].remove()}createDraggableContext(e,t,i){const n=super.createDraggableContext(e,t,i),s=this._pivotTable.getScrollViewer(),r=this._pivotTable.getFieldInfo(e);return{...n,scrollViewerRect:s&&s.getRectangle(),draggedField:r,nextFieldUid:null,srcArea:this.getClosestArea(e),dropArea:this.getClosestArea(e),targets:new OA(DT.DraggingUpTargetClassName,DT.DraggingDownTargetClassName)}}getClosestArea(e){const t=e.closest(`.${DT.AreaClassName}`);if(t.classList.contains(DT.AreaDataClassName))return NT.Data;if(t.classList.contains(DT.AreaRowClassName))return NT.Row;if(t.classList.contains(DT.AreaColumnClassName))return NT.Column;if(t.classList.contains(DT.AreaFilterClassName))return NT.Filter;throw Error("draggable area not found")}clearMoveStateFromDraggableContext(){super.clearMoveStateFromDraggableContext(),this.draggableContext&&(this.draggableContext.nextFieldUid=null)}}class MT extends CustomEvent{constructor(e){super(MT.eventName,{detail:new kT(e),bubbles:!0,composed:!0,cancelable:!0})}}MT.eventName="dxbl-pivot-table.field-moved";class kT{constructor(e){this.FieldUid=e.fieldUid,this.NewArea=e.newArea,this.NextFieldUid=e.nextFieldUid}}mt.register(MT.eventName,(e=>e.detail));customElements.define(TT,class extends de{constructor(){super(),this.boundOnMouseDownHandler=this.onMouseDown.bind(this),this.boundOnDragStartHandler=this.onDragStart.bind(this),this.boundOnDragStopHandler=this.onDragStop.bind(this),this.boundOnDragCancelHandler=this.onDragCancel.bind(this),this.boundOnScrollViewerScrollHandler=this.onScrollViewerScroll.bind(this),this.boundOnScrollViewerUpdateHandler=this.onScrollViewerUpdate.bind(this),this._columnsInfo=[],this._styleGenerator=null,this._componentResizeObserver=new ResizeObserver(this.onSizeChanged.bind(this)),this._pointerEventsHelper=new q(this),this._fieldDraggingHelper=new LT(this)}getHeaderAreas(){return this.querySelectorAll(`.${DT.AreaClassName}`)}findFieldHeaderElement(e){const t=e;return t?this.isHeaderElement(t)?t:t.closest(`.${DT.HeaderFieldClassName}`):null}isHeaderElement(e){return e&&e.classList.contains(DT.HeaderFieldClassName)}getHeaderCell(e,t){throw new Error("Method not implemented.")}getFieldHeaderSiblings(e){const t=e.closest(`.${DT.AreaClassName}`);return t&&t.querySelectorAll(`.${DT.HeaderFieldClassName}`)}getLastFieldHeaderInArea(e){const t=e.closest(`.${DT.AreaClassName}`).querySelectorAll(FT.HeaderFieldSelector);return t.length?t[t.length-1]:null}getFieldInfo(e){return{uID:null==e?void 0:e.dataset.uid,allowedAreas:null==e?void 0:e.dataset.allowedAreas,allowDrag:void 0!==(null==e?void 0:e.dataset.allowDrag)}}getHeaderDataArea(){return this.querySelector(FT.AreaData)}getHeaderFilterArea(){return this.querySelector(FT.AreaFilter)}getAreaMultipleHeadersInnerContainer(e){return e.querySelector(FT.AreaMultipleHeadersInnerContainerSelector)}get styleGenerator(){return this._styleGenerator}get fieldsInfo(){return Array.from(this.querySelectorAll(`.${DT.HeaderFieldClassName}`)).map((e=>({uID:e.dataset.id})))}get columnsInfo(){return this._columnsInfo}get uId(){return this.getAttribute(HT.Uid)}getScrollViewer(){return this.querySelector(`.${xe.ClassName}`)}getScrollViewerContent(){return this.querySelector(`.${xe.ContentContainerClassName}`)}getTable(){return this.querySelector(FT.Table)}getColElements(){return this.querySelectorAll(FT.ColElementSelector)}getTableContainerWidth(){const e=this.getScrollViewerContent();return e?null==e?void 0:e.getBoundingClientRect().width:0}getColElementOffsetWidth(e){return this.getColElements()[e].getBoundingClientRect().width}initializeComponent(){super.initializeComponent(),this._styleGenerator=new PT(this),this._componentResizeObserver.observe(this),this._pointerEventsHelper.initialize(),this.addEventSubscriptions(),this.setupBottomBorderForLastDataRow()}disposeComponent(){this._pointerEventsHelper.dispose(),this.removeEventSubscriptions(),this._componentResizeObserver.disconnect(),super.disposeComponent()}notifyColumnsChanged(e){this._columnsInfo=e}addEventSubscriptions(){this.addEventListener(a.eventName,this.boundOnDragStartHandler),this.addEventListener(l.eventName,this.boundOnDragStopHandler),this.addEventListener(A.eventName,this.boundOnDragCancelHandler),h.Browser.Firefox&&this.addEventListener("mousedown",this.boundOnMouseDownHandler),setTimeout((()=>{const e=this.getScrollViewer();e&&e.subscribeToScroll&&e.subscribeToScroll(this.boundOnScrollViewerScrollHandler),this.addEventListener(ke.eventName,this.boundOnScrollViewerUpdateHandler)}))}removeEventSubscriptions(){this.removeEventListener(a.eventName,this.boundOnDragStartHandler),this.removeEventListener(l.eventName,this.boundOnDragStopHandler),this.removeEventListener(A.eventName,this.boundOnDragCancelHandler),h.Browser.Firefox&&this.removeEventListener("mousedown",this.boundOnMouseDownHandler),setTimeout((()=>{const e=this.getScrollViewer();e&&e.unsubscribeFromScroll&&e.unsubscribeFromScroll()}))}onScrollViewerScroll(){this.styleGenerator.updateStyle(this.getScrollViewerContent())}setupBottomBorderForLastDataRow(){const e=this.getScrollViewerContent(),t=this.getTable();e&&t&&(t.offsetHeight<e.clientHeight?T.DomUtils.addClassName(t,DT.NoScrollClassName):T.DomUtils.removeClassName(t,DT.NoScrollClassName))}onScrollViewerUpdate(e){this.setupBottomBorderForLastDataRow(),e.stopPropagation()}onMouseDown(e){e.ctrlKey&&e.preventDefault()}onSizeChanged(e){const t=this.getScrollViewer();t&&t.refreshUI&&t.refreshUI()}invokeHeaderFieldMoved(e){e&&this.dispatchEvent(new MT(e))}findHeaderFieldElement(e){return e?e.closest(`.${DT.HeaderFieldClassName}`):null}onDragStart(e){const t=e.detail.source,i=this.findHeaderFieldElement(t.target);i&&(this._fieldDraggingHelper.start(i,t),i.addEventListener("click",(e=>e.stopImmediatePropagation()),{once:!0})),e.stopPropagation()}onDragStop(e){if(this._fieldDraggingHelper.isStarted()){const e=this._fieldDraggingHelper.createFieldDraggedHandlerArgs();this._fieldDraggingHelper.stop(),this.invokeHeaderFieldMoved(e)}e.stopPropagation()}onDragCancel(e){this._fieldDraggingHelper.isStarted()&&this._fieldDraggingHelper.stop(),e.stopPropagation()}updateStyle(){const e=this.getScrollViewerContent();e&&this.styleGenerator.updateStyle(e);const t=this.getScrollViewer();t&&t.reconnectResizeObservers()}get handlePointerEventsMode(){return r.Dragging}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}static get observedAttributes(){return["update-style"]}attributeChangedCallback(e,t,i){if("update-style"===e)setTimeout((()=>{this.updateStyle()}))}}),customElements.define("dxbl-pivot-table-columns-info",class extends de{get data(){return this.getAttribute("data")}get columns(){return null!==this.data?this.parseColumns(this.data):[]}connectedCallback(){var e;super.connectedCallback(),this.pivot=this.closest(`.${DT.ClassName}`),null===(e=this.pivot)||void 0===e||e.notifyColumnsChanged(this.columns)}parseColumns(e){const t=JSON.parse(e),i=[];for(let e=0;e<t.length;e++){const n=t[e],s=new QT(n.UID,n.Width,n.MinWidth,n.FixedPosition);i.push(s)}return i}static get observedAttributes(){return["data"]}attributeChangedCallback(e,t,i){var n;if("data"===e)null===(n=this.pivot)||void 0===n||n.notifyColumnsChanged(this.parseColumns(i))}}),customElements.define("dxbl-pivot-table-drag-mediator",class extends de{isDropAllowed(e,t){var i;if(!t)return!0;const n=null===(i=e.querySelector(`.${DT.HeaderFieldClassName}`))||void 0===i?void 0:i.dataset.allowedAreas;if(!n)return!0;const s=this.getClosestArea(t);return!s||LT.isAreaAllowed(s,n)}getClosestArea(e){const t=e.closest(`.${DT.FieldListContainerClassName}`);return t.classList.contains(DT.FieldListContainerDataClassName)?NT.Data:t.classList.contains(DT.FieldListContainerRowClassName)?NT.Row:t.classList.contains(DT.FieldListContainerColumnClassName)?NT.Column:t.classList.contains(DT.FieldListContainerFilterClassName)?NT.Filter:null}});class KT{}KT.TimeCellsContainerClassName="dxbl-sc-timecells-container",KT.VerticalAppointmentsClassName="dxbl-sc-vertical-apts",KT.HorizontalAppointmentsClassName="dxbl-sc-horizontal-apts",KT.VerticalEditableAppointmentsClassName="dxbl-sc-editable-vertical-apts",KT.HorizontalEditableAppointmentsClassName="dxbl-sc-editable-horizontal-apts",KT.VerticalAppointmentClassName="dxbl-sc-vertical-apt",KT.HorizontalAppointmentClassName="dxbl-sc-horizontal-apt",KT.CompactAppointmentClassName="dxbl-sc-apt-compact",KT.EditableAppointmentClassName="dxbl-sc-apt-edited",KT.DateCellHeadClassName="dxbl-date-cell-head",KT.MonthViewClassName="dxbl-sc-month",KT.DateHeaderClassName="dxbl-sc-date-hr",KT.TimeCellClassName="dxbl-sc-time-cell",KT.TodayClassName="dxbl-sc-today",KT.HorizontalViewClassName="dxbl-sc-horizontal-view",KT.TimeMarkerWrapperClassName="dxbl-sc-time-marker-wrapper",KT.TimeMarkerWrapperInvisibleClassName="dxbl-sc-time-marker-wrapper-invisible",KT.TimeMarkerClassName="dxbl-sc-time-marker",KT.TimeMarkerImageClassName="dxbl-sc-time-marker-image",KT.TimeMarkerLineClassName="dxbl-sc-time-marker-line",KT.TimeIndicatorClassName="dxbl-sc-time-indicator",KT.AppointmentClassName="dxbl-sc-apt",KT.SelectedAppointmentClassName="dxbl-sc-apt-selected",KT.DisableAppointmentClassName="dxbl-sc-apt-disable",KT.VerticalResourceHeaderClassName="dxbl-v-resource-header",KT.ResourcesContainerClassName="dxbl-sc-resources-container",KT.HeadersContainerClassName="dxbl-sc-headers-container",KT.AllDayAreaClassName="dxbl-sc-all-day-area",KT.TimelineViewClassName="dxbl-sc-timeline",KT.TopHandleClassName="dxbl-top-handle",KT.BottomHandleClassName="dxbl-bottom-handle",KT.LeftHandleClassName="dxbl-left-handle",KT.RightHandleClassName="dxbl-right-handle",KT.VerticalViewClassName="dxbl-sc-vertical-view",KT.View="dxbl-view",KT.ToolbarWrapper="dxbl-sc-tb-wrapper",KT.ResourceNavigatorFooter="dxbl-rn-footer",KT.ResourceNavigatorListBoxContainer="dxbl-resource-navigator-list-box-container",KT.AppointmentTooltip="dxbl-sc-tooltip";class OT{constructor(){this.TIMEOUT=6e4,this.subscriptions=[],this.timerId=-1}subscribe(e,t){if(-1===this.getSubscriptionIndex(e)){this.subscriptions.push({scheduler:e,updateAction:t}),-1===this.timerId&&this.startTimer()}}unsubscribe(e){const t=this.getSubscriptionIndex(e);-1!==t&&this.unsubscribeByIndex(t),0===this.subscriptions.length&&this.stopTimer()}unsubscribeByIndex(e){this.subscriptions.splice(e,1)}getSubscriptionIndex(e){for(let t,i=0;t=this.subscriptions[i];i++)if(t.scheduler===e)return i;return-1}startTimer(){this.timerId=setTimeout(this.onTimeout.bind(this),this.TIMEOUT)}stopTimer(){-1!==this.timerId&&(clearTimeout(this.timerId),this.timerId=-1)}onTimeout(){for(let e,t=0;e=this.subscriptions[t];t++)if(OT.isElementValid(e.scheduler))try{e.updateAction()}catch(e){}else this.unsubscribeByIndex(t),t--;this.startTimer()}static isElementValid(e){for(;null!=e;){if("BODY"===e.tagName)return!0;e=e.parentNode}return!1}}class _T{}_T.ContainerIndex="data-container-index",_T.FirstContainerIndex="data-first-container-index",_T.LastContainerIndex="data-last-container-index",_T.FirstCellIndex="data-first-cell-index",_T.LastCellIndex="data-last-cell-index",_T.ColumnsCount="data-columns-count",_T.Column="data-column",_T.Row="data-row",_T.RowSpan="data-row-span",_T.Key="data-key",_T.Start="data-start",_T.End="data-end",_T.Duration="data-duration",_T.AllDay="data-allday",_T.Resource="data-resource",_T.SnapToCellsMode="snap-to-cells-mode",_T.AppointmentTopPosition="data-appointment-top-position",_T.IsNew="data-is-new",_T.UtcOffset="data-uct-offset";class VT{constructor(e,t){this.start=e,this.duration=t,this.isLongerOrEqualDay=t>=zT.DaySpan}getStart(){return this.start}getDuration(){return this.duration}getEnd(){return zT.dateIncreaseWithUtcOffset(this.start,this.duration)}intersectsWith(e){return e.getEnd().valueOf()-this.getStart().valueOf()>=0&&e.getStart().valueOf()-this.getEnd().valueOf()<=0}}class zT{static dateSubsWithTimezone(e,t){return e.valueOf()-t.valueOf()+(t.getTimezoneOffset()-e.getTimezoneOffset())*zT.HourSpan}static truncToDate(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}static calculateDaysDifference(e,t){const i=zT.truncToDate(e),n=zT.truncToDate(t);return zT.dateSubsWithTimezone(n,i)/zT.DaySpan}static dateIncreaseWithUtcOffset(e,t){const i=zT.dateIncrease(e,t),n=(i.getTimezoneOffset()-e.getTimezoneOffset())*zT.HourSpan;return zT.dateIncrease(i,n)}static dateIncrease(e,t){return new Date(e.valueOf()+t)}static addTimeSpan(e,t){return new Date(e.valueOf()+t)}static toDayTime(e){return e.valueOf()-zT.truncToDate(e).valueOf()}static getCellInterval(e){const t=qT.Attr.getStart(e),i=qT.Attr.getEnd(e);return new VT(t,this.dateSubsWithTimezone(i,t))}static dateTimeComparer(e,t){const i=t.getTime()-e.getTime();return 0===i?0:i<0?1:-1}static dateTimeIndexComparer(e,t,i){return zT.dateTimeComparer(e[t],i)}static getUtcTimezoneOffset(e){return e.getTimezoneOffset()*zT.HourSpan*-1}static getCurrentLocalTime(){const e=(new Date).getTime();return new Date(e)}}var WT;zT.HourSpan=6e4,zT.HalfHourSpan=18e5,zT.DaySpan=864e5,function(e){e[e.None=0]="None",e[e.Auto=1]="Auto",e[e.Always=2]="Always"}(WT||(WT={}));const $T=WT;class GT{getContainerIndex(e){return GT.getAttributeIntValue(e,_T.ContainerIndex,-1)}getFirstContainerIndex(e){return GT.getAttributeIntValue(e,_T.FirstContainerIndex,-1)}getLastContainerIndex(e){return GT.getAttributeIntValue(e,_T.LastContainerIndex,-1)}getAppointmentFirstCellIndex(e){return GT.getAttributeIntValue(e,_T.FirstCellIndex,-1)}getAppointmentLastCellIndex(e){return GT.getAttributeIntValue(e,_T.LastCellIndex,-1)}getAppointmentColumnsCount(e){return GT.getAttributeIntValue(e,_T.ColumnsCount,0)}setAppointmentColumnsCount(e,t){e.setAttribute(_T.ColumnsCount,t)}getAppointmentColumn(e){return GT.getAttributeIntValue(e,_T.Column,0)}setAppointmentColumn(e,t){e.setAttribute(_T.Column,t)}getAppointmentRow(e){return GT.getAttributeFloatValue(e,_T.Row,-1)}getAppointmentRowSpan(e){return GT.getAttributeFloatValue(e,_T.RowSpan,0)}getAppointmentKey(e){return e.getAttribute(_T.Key)||""}getAppointmentTopPosition(e){return GT.getAttributeIntValue(e,_T.AppointmentTopPosition,0)}setAppointmentTopPosition(e,t){e.setAttribute(_T.AppointmentTopPosition,t)}removeAppointmentTopPosition(e){e.removeAttribute(_T.AppointmentTopPosition)}getStart(e){const t=new Date(parseInt(e.getAttribute(_T.Start)||""));return zT.dateIncreaseWithUtcOffset(t,t.getTimezoneOffset()*zT.HourSpan)}getEnd(e){const t=parseInt(e.getAttribute(_T.Start)||""),i=parseInt(e.getAttribute(_T.End)||"");return zT.dateIncreaseWithUtcOffset(this.getStart(e),i-t)}getDuration(e){return parseInt(e.getAttribute(_T.Duration)||"")}getAppointmentEnd(e){const t=this.getStart(e),i=this.getDuration(e);return new Date(t.getTime()+i)}getAllDay(e){return""===e.getAttribute(_T.AllDay)}getResourceKey(e){return e.getAttribute(_T.Resource)||""}getSnapToCellsMode(e){const t=e.getAttribute(_T.SnapToCellsMode);return null===t?null:$T[t]}getUtcOffset(e){return GT.getAttributeIntValue(e,_T.UtcOffset,0)}static getAttributeIntValue(e,t,i){return GT.getAttributeParsedNumberValue(e,t,parseInt,i)}static getAttributeFloatValue(e,t,i){return GT.getAttributeParsedNumberValue(e,t,parseFloat,i)}static getAttributeParsedNumberValue(e,t,i,n){const s=e.getAttribute(t);return s?i(s):n}}class qT{static getVerticalAppointmentsContainer(e){return e.querySelector(`.${KT.VerticalAppointmentsClassName}`)}static getHorizontalAppointmentsContainer(e){return e.querySelector(`.${KT.HorizontalAppointmentsClassName}`)}static getHorizontalAppointments(e){const t=e.querySelectorAll(`.${KT.HorizontalAppointmentClassName}`);return Array.from(t)}static getHorizontalEditableAppointments(e){const t=e.querySelectorAll(`.${KT.HorizontalEditableAppointmentsClassName} .${KT.HorizontalAppointmentClassName}`);return Array.from(t)}static getVerticalAppointments(e){const t=e.querySelectorAll(`.${KT.VerticalAppointmentClassName}`);return Array.from(t)}static getVerticalEditableAppointments(e){const t=e.querySelectorAll(`.${KT.VerticalEditableAppointmentsClassName} .${KT.VerticalAppointmentClassName}`);return Array.from(t)}static getHorizontalView(e){return e.querySelectorAll(`.${KT.HorizontalViewClassName}`)[0]}static getTimeMarkerWrappers(e){return e.querySelectorAll(`.${KT.TimeMarkerWrapperClassName}`)}static getTimeMarkerContainer(e){return e.querySelectorAll(`.${KT.TimeMarkerClassName}`)[0]}static getTimeMarkerImages(e){const t=e.querySelectorAll(`.${KT.TimeMarkerImageClassName}`);return Array.from(t)}static getTimeMarkerLine(e){return e.querySelectorAll(`.${KT.TimeMarkerLineClassName}`)[0]}static getTimeIndicatorContainer(e){return e.querySelectorAll(`.${KT.TimeIndicatorClassName}`)[0]}static getAppointmentContainer(e){return Nt(e,KT.AppointmentClassName)}static getTimeCellContainer(e){return Qt(e,"",(function(e,t){return qT.isTimeCellElement(e)}))}static getSelectedAppointment(e){return e.querySelectorAll(`.${KT.SelectedAppointmentClassName}:not(.${KT.DisableAppointmentClassName})`)[0]}static getEditableAppointments(e){const t=e.querySelectorAll(`.${KT.EditableAppointmentClassName}`);return Array.from(t)}static isEditableAppointment(e){return T.DomUtils.hasClassName(e,KT.EditableAppointmentClassName)}static isNewEditableAppointment(e){return e.hasAttribute(_T.IsNew)}static getVerticalResourceHeaders(e){return e.querySelectorAll(`.${KT.VerticalResourceHeaderClassName}`)}static getDateHeaders(e){const t=qT.isMonthView(e)?KT.TimeCellClassName:KT.DateHeaderClassName;return e.querySelectorAll(`.${t}`)}static getTodayDateHeaders(e){return e.querySelectorAll(`.${KT.DateHeaderClassName}.${KT.TodayClassName}`)}static getResourcesViewport(e){return e.querySelectorAll(`.${KT.ResourcesContainerClassName}`)[0]}static getTimescaleViewport(e){return e.querySelectorAll(`.${KT.HeadersContainerClassName}`)[0]}static getTimeCellsViewport(e){return e.querySelectorAll(`.${KT.TimeCellsContainerClassName}`)[0]}static getParentTimeCellsViewport(e){return Nt(e,KT.TimeCellsContainerClassName)}static isVerticalAppointment(e){return T.DomUtils.hasClassName(e,KT.VerticalAppointmentClassName)}static isHorizontalAppointment(e){return T.DomUtils.hasClassName(e,KT.HorizontalAppointmentClassName)}static isTimeCellElement(e){return T.DomUtils.hasClassName(e,KT.AllDayAreaClassName)||T.DomUtils.hasClassName(e,KT.TimeCellClassName)}static isTimelineView(e){return T.DomUtils.hasClassName(e,KT.TimelineViewClassName)}static isMonthView(e){return T.DomUtils.hasClassName(e,KT.MonthViewClassName)}static isTopHandleElement(e){return T.DomUtils.hasClassName(e,KT.TopHandleClassName)}static isBottomHandleElement(e){return T.DomUtils.hasClassName(e,KT.BottomHandleClassName)}static isLeftHandleElement(e){return T.DomUtils.hasClassName(e,KT.LeftHandleClassName)}static isRightHandleElement(e){return T.DomUtils.hasClassName(e,KT.RightHandleClassName)}static isAppointmentSelected(e){return T.DomUtils.hasClassName(e,KT.SelectedAppointmentClassName)}static isHorizontalAppointmentsContainer(e){return T.DomUtils.hasClassName(e,KT.HorizontalAppointmentsClassName)}static isDateCellHeader(e){return T.DomUtils.hasClassName(e,KT.DateCellHeadClassName)}static getToolbarWrapper(e){return e.querySelectorAll(`.${KT.ToolbarWrapper}`)[0]}static getAppointmentTooltip(e){return document.querySelector(`.${KT.AppointmentTooltip}.dxbl-scheduler-instance-${e.id}`)}}qT.Attr=new GT;class XT{constructor(e,t){this._element=e,this._cellSelector=t,this.containers=null,this.timeCells=null}get element(){return this._element}get cellSelector(){return this._cellSelector}getContainers(){if(!this.containers){const e=this.getTimeCells();this.containers={};for(let t,i=0;t=e[i];i++){const e=qT.Attr.getContainerIndex(t);this.containers[e]||(this.containers[e]={cells:[]}),this.containers[e].cells.push(t)}}return this.containers}clearObjects(){this.timeCells=null,this.containers=null}getTimeCells(){return this.timeCells||(this.timeCells=this.element.querySelectorAll(this.cellSelector)),this.timeCells}getFirstContainer(){const e=this.getContainers();for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}findCell(e){const t=this.getContainers();for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(let n,s=0;n=t[i].cells[s];s++){const t=qT.Attr.getStart(n),i=qT.Attr.getEnd(n);if(t.valueOf()-e.valueOf()<=0&&e.valueOf()-i.valueOf()<0)return n}return null}findStartCell(e){const t=this.getContainers();for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(let n,s=0;n=t[i].cells[s];s++){const t=qT.Attr.getStart(n);if(e.valueOf()-t.valueOf()<=0)return n}return null}findEndCell(e){const t=this.getContainers();for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i))for(let n,s=0;n=t[i].cells[s];s++){const t=qT.Attr.getEnd(n);if(e.valueOf()-t.valueOf()<=0)return n}return null}findCellByPos(e,t){const i=this.getTimeCells();for(let n,s=0;n=i[s];s++){const i=n.getBoundingClientRect();if(i.top<=t&&t<i.bottom&&i.left<=e&&e<i.right)return n}return null}}var YT;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(YT||(YT={}));const JT=YT;class jT{}jT.state="state",jT.snapToCellsMode="snap-to-cells-mode",jT.editableAppointmentKey="editable-appointment-key",jT.selectedAppointmentKey="selected-appointment-key",jT.allowCreateAppointment="allow-create-appointment",jT.allowEditAppointment="allow-edit-appointment",jT.allowDragAppointment="allow-drag-appointment",jT.allowResizeAppointment="allow-resize-appointment",jT.enableAppointmentTooltip="enable-appointment-tooltip",jT.activeFormType="active-form-type",jT.clientUtcOffset="client-utc-offset",jT.startInterval="start-interval",jT.endInterval="end-interval",jT.resources="resources",jT.appointmentStart="appointment-start",jT.appointmentEnd="appointment-end",jT.appointmentAllDay="appointment-allday",jT.appointmentResources="appointment-resources",jT.showWorkTimeOnly="show-work-time-only";class ZT{constructor(e,t,i){this.date=e,this.recurrenceIndex=t,this.resource=i}static from(e){const[t,i,n]=e.split(ZT.ClientKeyPartSeparator);return new ZT(t,i,n)}static to(e){let t=e.date+ZT.ClientKeyPartSeparator+e.recurrenceIndex;return e.resource&&(t=t+ZT.ClientKeyPartSeparator+e.resource),t}static IsSame(e,t,i=!1){const n=e.date===t.date&&e.recurrenceIndex===t.recurrenceIndex;return i?n:n&&e.resource===t.resource}}ZT.ClientKeyPartSeparator="_";class eH{static selectSameAppointments(e,t){t.filter((t=>{const i=qT.Attr.getAppointmentKey(t),n=ZT.from(i);return ZT.IsSame(e,n,!0)})).forEach((e=>{T.DomUtils.hasClassName(e,KT.SelectedAppointmentClassName)||T.DomUtils.addClassName(e,KT.SelectedAppointmentClassName)}))}}class tH{static throttle(e,t){let i=!1,n=null,s=this;return function r(o){if(i)return n=o,void(s=this);e.apply(this,[o]),i=!0,setTimeout((()=>{i=!1,n&&(r.apply(s,[n]),n=null)}),t)}}}class iH{constructor(e,t,i){this.id=e,this.views=t,this.interval=i,this.allDay=qT.Attr.getAllDay(t[0]),this.resourceKey=qT.Attr.getResourceKey(t[0]),this.sourceView=this.views[0].cloneNode(!0),this.aptCont=this.views[0].parentElement}getStart(){return this.interval.start}getDuration(){return this.interval.duration}getEnd(){return this.interval.getEnd()}clearViews(){this.views.forEach((e=>{e.parentElement&&e.parentElement.removeChild(e)})),this.views=[]}static createItem(e,t){return new iH(e,t,iH.getAppointmentInterval(t))}static getAppointmentInterval(e){const t=qT.Attr.getStart(e[0]),i=qT.Attr.getDuration(e[0]);return new VT(t,i)}static createItems(e){const t={};for(let i,n=0;i=e[n];n++){const e=qT.Attr.getAppointmentKey(i);t[e]||(t[e]=[]),t[e].push(i)}const i=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(iH.createItem(e,t[e]));return i}}var nH,sH,rH,oH;!function(e){e[e.None=0]="None",e[e.DragAppointment=1]="DragAppointment",e[e.DragAppointmentStart=2]="DragAppointmentStart",e[e.DragAppointmentEnd=3]="DragAppointmentEnd",e[e.DragNewAppointment=4]="DragNewAppointment"}(nH||(nH={})),function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"}(sH||(sH={}));class aH{constructor(e){this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseMoveInternalHandler=this.onMouseMoveInternal.bind(this),this.schedulerView=e,this.appointmentInfo=null,this.sourceAppointmentInfo=null,this.startCellInfo=null,this.currentCellInfo=null,this.dateDiff=0,this.horizontalAppointmentDragged=!1,this.lastCellChanged=!1,this.initialPageY=0,this.initialTop=0,this.initialScrollTop=0,this.lastTop=0,this.lastCell=null,this.direction=sH.Top,this.mode=nH.None,this.throttledDrag=tH.throttle(this.onMouseMoveInternalHandler,20)}dragAppointmentStart(e,t,i){this.mode=nH.DragAppointmentStart,this.startDrag(e,t,i)}dragAppointmentEnd(e,t,i){this.mode=nH.DragAppointmentEnd,this.startDrag(e,t,i)}dragAppointment(e,t,i){this.mode=nH.DragAppointment,this.startDrag(e,t,i)}dragNewAppointment(e){this.mode=nH.DragNewAppointment,this.startDragNewAppointment(e)}dropAppointment(){this.mode!==nH.None&&(this.schedulerView.removeEventListener("pointermove",this.onMouseMoveHandler),this.stopAutoScrolling(),this.mode===nH.DragNewAppointment?this.schedulerView.dispatchDropNewAppointmentEvent():(this.removeAppointmentTopPositionInfo(),this.schedulerView.dispatchDropAppointmentEvent()),this.mode=nH.None)}cancelDragAppointment(){this.mode!==nH.None&&(this.schedulerView.removeEventListener("pointermove",this.onMouseMoveHandler),this.stopAutoScrolling(),this.mode!==nH.DragNewAppointment&&this.removeAppointmentTopPositionInfo(),this.schedulerView.dispatchCancelDragAppointmentEvent(),this.mode=nH.None)}startDrag(e,t,i){this.beforeStart(t),this.appointmentInfo=new iH(e.id,e.views,e.interval),this.sourceAppointmentInfo=e,this.currentCellInfo=t,this.dateDiff=zT.dateSubsWithTimezone(e.getStart(),t.interval.start),this.horizontalAppointmentDragged=t.layoutType===JT.Horizontal,this.initialTop=this.findAppointmentViewByInterval(this.appointmentInfo.views,t.interval).offsetTop,this.initialPageY=i.pageY,this.lastTop=this.initialTop,this.lastCell=t.cell,this.initialScrollTop=this.getViewportScrollTop(),this.saveAppointmentTopPositionInfo(),this.schedulerView.dispatchStartDragAppointmentEvent(e.id,this.mode===nH.DragAppointmentStart||this.mode===nH.DragAppointmentEnd,qT.isHorizontalAppointmentsContainer(e.aptCont)),this.startAutoScrolling()}startDragNewAppointment(e){this.beforeStart(e);const t=e.interval.start,i=zT.dateIncreaseWithUtcOffset(t,e.interval.duration),n=this.schedulerView.getUtcOffset(t,e.utcOffset),s=this.schedulerView.getUtcOffset(i,e.utcOffset);this.schedulerView.dispatchStartDragNewAppointmentEvent(zT.addTimeSpan(t,n),zT.addTimeSpan(i,s),e.allDay,qT.Attr.getResourceKey(e.cell)),this.startAutoScrolling()}beforeStart(e){this.startCellInfo=e,this.schedulerView.addEventListener("pointermove",this.onMouseMoveHandler)}onMouseMove(e){this.mode!==nH.None&&this.throttledDrag(e)}onMouseMoveInternal(e){const t=this.schedulerView.findCellByCoordinates(e.clientX,e.clientY);if(!t)return;this.schedulerView.getEditableAppointmentView()&&(this.mode===nH.DragNewAppointment?this.resizeNewAppointment(t):this.mode===nH.DragAppointment?this.drag(t,e):this.resize(t,this.mode===nH.DragAppointmentStart))}drag(e,t){var i;if(!(this.startCellInfo&&this.currentCellInfo&&this.appointmentInfo&&this.sourceAppointmentInfo))return;const n=this.currentCellInfo.interval;this.lastCellChanged=!1,this.updateEditedAppointmentPosition(t);const s=e.cell;if(this.lastCellChanged=this.lastCell!==s,this.lastCell=s,e.layoutType===JT.Horizontal&&!this.horizontalAppointmentDragged){const e=(null===(i=s.offsetParent)||void 0===i?void 0:i.getBoundingClientRect().top)||0;this.initialTop=t.clientY-e,this.initialPageY=t.pageY,this.initialScrollTop=this.getViewportScrollTop(s),this.lastTop=this.initialTop}const r=e.interval;if(0===zT.dateSubsWithTimezone(n.start,r.start)&&n.duration===r.duration){const e=qT.Attr.getResourceKey(s);if(!this.appointmentInfo.resourceKey||this.appointmentInfo.resourceKey===e)return}if(this.currentCellInfo.allDay!==e.allDay)this.dateDiff=0,this.appointmentInfo.interval=e.allDay?this.sourceAppointmentInfo.allDay?new VT(r.start,this.sourceAppointmentInfo.interval.duration):r:this.startCellInfo.allDay?r:new VT(r.start,this.sourceAppointmentInfo.interval.duration),this.appointmentInfo.allDay=e.allDay;else{let e=zT.addTimeSpan(r.start,this.dateDiff||0);this.appointmentInfo.allDay&&(e=zT.truncToDate(e)),this.appointmentInfo.interval=new VT(e,this.appointmentInfo.interval.duration)}this.updateResource(s),this.saveAppointmentTopPositionInfo();const o=this.schedulerView.getUtcOffset(r.getStart(),e.utcOffset),a=this.schedulerView.getUtcOffset(r.getEnd(),e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(zT.addTimeSpan(this.appointmentInfo.getStart(),o),zT.addTimeSpan(this.appointmentInfo.getEnd(),a),e.allDay,this.appointmentInfo.resourceKey),this.currentCellInfo=e}resize(e,t){if(!this.appointmentInfo||!this.currentCellInfo||!this.sourceAppointmentInfo)return;const i=e.interval,n=this.currentCellInfo.interval;if(0===zT.dateSubsWithTimezone(n.start,i.start)&&n.duration===i.duration||n.isLongerOrEqualDay!==i.isLongerOrEqualDay)return;if(t){const e=this.sourceAppointmentInfo.interval.duration+zT.dateSubsWithTimezone(this.sourceAppointmentInfo.interval.start,i.start);e>=0&&(this.appointmentInfo.interval=new VT(i.start,e))}else this.appointmentInfo.interval.duration=zT.dateSubsWithTimezone(i.getEnd(),this.sourceAppointmentInfo.interval.start);this.updateResource(this.currentCellInfo.cell);const s=this.schedulerView.getUtcOffset(this.appointmentInfo.getStart(),e.utcOffset),r=this.schedulerView.getUtcOffset(this.appointmentInfo.getEnd(),e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(zT.addTimeSpan(this.appointmentInfo.getStart(),s),zT.addTimeSpan(this.appointmentInfo.getEnd(),r),e.allDay,this.appointmentInfo.resourceKey),this.currentCellInfo=e}resizeNewAppointment(e){if(!this.startCellInfo)return;const t=e.interval,i=zT.dateSubsWithTimezone(t.start,this.startCellInfo.interval.start);if(0===i&&this.startCellInfo.interval.duration===t.duration)return;i<0&&this.startCellInfo.interval.duration===t.duration?this.direction=sH.Top:i>0&&this.startCellInfo.interval.duration===t.duration&&(this.direction=sH.Bottom),this.direction===sH.Bottom?this.startCellInfo.interval.duration=i+t.duration:this.direction===sH.Top&&(this.startCellInfo.interval.start=t.start,this.startCellInfo.interval.duration+=-1*i);const n=this.startCellInfo.interval.start,s=zT.dateIncreaseWithUtcOffset(n,this.startCellInfo.interval.duration),r=qT.Attr.getResourceKey(e.cell),o=this.schedulerView.getUtcOffset(n,e.utcOffset),a=this.schedulerView.getUtcOffset(s,e.utcOffset);this.schedulerView.dispatchDragAppointmentEvent(zT.addTimeSpan(n,o),zT.addTimeSpan(s,a),e.allDay,r)}findAppointmentViewByInterval(e,t){return e.find((e=>{if(t&&e.firstCell&&e.lastCell){const i=zT.getCellInterval(e.firstCell).getStart(),n=zT.getCellInterval(e.lastCell).getEnd();if(t.intersectsWith(new VT(i,zT.dateSubsWithTimezone(n,i))))return e}}))}updateEditedAppointmentPosition(e){const t=this.schedulerView.getEditableAppointments();if(!this.lastCell||!t||0===t.length||!this.currentCellInfo)return;const i=this.findAppointmentViewByInterval(t,this.currentCellInfo.interval);if(!i)return;if(!qT.isHorizontalAppointment(i))return void(this.horizontalAppointmentDragged=!1);let n=!1;if(this.horizontalAppointmentDragged||(this.initialTop-=i.offsetHeight/2,this.lastTop=this.initialTop,this.horizontalAppointmentDragged=!0,n=!0),e){const t=this.getViewportScrollTop(),i=e.pageY-this.initialPageY+(t-this.initialScrollTop);this.lastTop=this.initialTop+i,n=n||0!==i}if(n||this.lastCellChanged){const e=this.lastCell.offsetTop+1;this.lastTop=Math.min(this.lastTop,e+this.lastCell.offsetHeight-i.offsetHeight-2),this.lastTop=Math.max(e,this.lastTop)}const s=this.lastTop-this.lastCell.offsetTop;t.forEach((e=>{const t=e,i=t.firstCell,n=i.offsetTop+i.offsetHeight-t.offsetHeight-2;let r=i.offsetTop+s;r>=n&&(r=n),t.style.top=r+"px",t.style.zIndex="1000"}))}saveAppointmentTopPositionInfo(){if(!this.lastCell)return;qT.Attr.setAppointmentTopPosition(this.schedulerView,(this.lastTop-this.lastCell.offsetTop).toString())}removeAppointmentTopPositionInfo(){qT.Attr.removeAppointmentTopPosition(this.schedulerView)}updateResource(e){this.appointmentInfo&&this.appointmentInfo.resourceKey&&(this.appointmentInfo.resourceKey=qT.Attr.getResourceKey(e))}getViewportScrollTop(e){const t=e||this.lastCell;if(!t)return 0;const i=qT.getParentTimeCellsViewport(t);return(null==i?void 0:i.scrollTop)||0}startAutoScrolling(){var e;null===(e=this.schedulerView.getScrollViewer())||void 0===e||e.startAutoScrolling(Ne.Horizontal)}stopAutoScrolling(){var e;null===(e=this.schedulerView.getScrollViewer())||void 0===e||e.stopAutoScrolling()}}class lH{}rH=lH,lH.prefix="dxbl",lH.SchedulerComponentName=rH.prefix+"-scheduler";class AH extends CustomEvent{constructor(e,t,i,n){super(AH.eventName,{bubbles:!0,composed:!0,detail:new dH(e,t,i,n)})}}AH.eventName=`${lH.SchedulerComponentName}.create-appointment`;class dH{constructor(e,t,i,n){this.start=e,this.end=t,this.allDay=i,this.resourceKey=n}}class cH extends CustomEvent{constructor(e,t){super(cH.eventName,{bubbles:!0,composed:!0,detail:new hH(e,t)})}}cH.eventName=`${lH.SchedulerComponentName}.select-appointment`;class hH{constructor(e,t){this.key=e,this.showToolTip=t}}class uH extends CustomEvent{constructor(e,t,i,n){super(uH.eventName,{bubbles:!0,composed:!0,detail:new pH(e,t,i,n)})}}uH.eventName=`${lH.SchedulerComponentName}.start-drag-new-appointment`;class pH{constructor(e,t,i,n){this.start=e,this.end=t,this.allDay=i,this.resourceKey=n}}class mH extends kd{constructor(){super(mH.eventName)}}mH.eventName=`${lH.SchedulerComponentName}.drop-new-appointment`;class gH extends CustomEvent{constructor(e,t){super(gH.eventName,{bubbles:!0,composed:!0,detail:new CH(e,t)})}}gH.eventName=`${lH.SchedulerComponentName}.start-drag-appointment`;class CH{constructor(e,t){this.key=e,this.resize=t}}class fH extends CustomEvent{constructor(e,t,i,n){super(fH.eventName,{bubbles:!0,composed:!0,detail:new vH(e,t,i,n)})}}fH.eventName=`${lH.SchedulerComponentName}.drag-appointment`;class vH{constructor(e,t,i,n){this.start=e,this.end=t,this.allDay=i,this.resourceKey=n}}class bH extends kd{constructor(){super(bH.eventName)}}bH.eventName=`${lH.SchedulerComponentName}.drop-appointment`;class wH extends kd{constructor(){super(wH.eventName)}}wH.eventName=`${lH.SchedulerComponentName}.cancel-drag-appointment`;class yH extends kd{constructor(){super(yH.eventName)}}yH.eventName=`${lH.SchedulerComponentName}.show-appointment-tooltip`;class BH extends kd{constructor(){super(BH.eventName)}}BH.eventName=`${lH.SchedulerComponentName}.hide-appointment-tooltip`,mt.register(AH.eventName,(e=>e.detail)),mt.register(cH.eventName,(e=>e.detail)),mt.register(uH.eventName,(e=>e.detail)),mt.register(mH.eventName,(e=>e.detail)),mt.register(gH.eventName,(e=>e.detail)),mt.register(fH.eventName,(e=>e.detail)),mt.register(bH.eventName,(e=>e.detail)),mt.register(wH.eventName,(e=>e.detail)),mt.register(yH.eventName,(e=>e.detail)),mt.register(BH.eventName,(e=>e.detail)),function(e){e[e.None=0]="None",e[e.AppointmentEditForm=1]="AppointmentEditForm",e[e.AppointmentCompactEditForm=2]="AppointmentCompactEditForm",e[e.AppointmentToolTip=3]="AppointmentToolTip",e[e.RecurrentAppointmentEditForm=4]="RecurrentAppointmentEditForm",e[e.RecurrentAppointmentDeleteForm=5]="RecurrentAppointmentDeleteForm",e[e.GotoDateForm=6]="GotoDateForm"}(oH||(oH={}));const EH=oH;class IH extends Bs{constructor(){super(),this.onClickEventHandler=this.onDelayedClickEvent.bind(this),this.onDoubleClickEventHandler=this.onDoubleClickEvent.bind(this),this.onDragStartEventHandler=this.onDragStartEvent.bind(this),this.onDragStopEventHandler=this.onDragStopEvent.bind(this),this.onDragCancelEventHandler=this.onDragCancelEvent.bind(this),this._handlePointerEventsMode=r.Click|r.DblClick|r.Dragging,this.startInterval=0,this.endInterval=0,this.resources="",this.snapToCellsMode=$T.Auto,this.allowCreateAppointment=!1,this.allowEditAppointment=!1,this.allowDragAppointment=!1,this.allowResizeAppointment=!1,this.enableAppointmentTooltip=!1,this.showWorkTimeOnly=!1,this.unforcedFunctions={},this.appointmentDragController=new aH(this),this._pointerEventsHelper=new q(this),this.activeFormType=EH.None,this.sourceDraggedAppointment=null}connectedCallback(){this.timeMarkerUpdater=new OT,this._pointerEventsHelper.initialize(),this.addEventSubscriptions(),super.connectedCallback()}contentChanged(){super.contentChanged(),this.scrollViewer||(this.scrollViewer=this.querySelector(`.${xe.ClassName}`),this.addScrollViewerEventSubscriptions())}disconnectedCallback(){this.removeEventSubscriptions(),this.removeScrollViewerEventSubscriptions(),this._pointerEventsHelper.dispose(),super.disconnectedCallback()}initializeLayout(){this.initializeDateHeaders(),this.initializeTimeCells()}adjust(){this.calculateAppointments(),this.updateTimeMarkersEventHandler()}calculateAppointments(){this.getHorizontalAppointmentsContainer().calculateAppointments()}recalculateAppointmentsByInterval(){this.getHorizontalAppointmentsContainer().recalculateAppointmentsByInterval(this.startInterval,this.endInterval,this.resources)}getHorizontalAppointmentsContainer(){return this.querySelector(`.${KT.HorizontalAppointmentsClassName}`)}getHorizontalEditableAppointmentsContainer(){return this.querySelector(`.${KT.HorizontalEditableAppointmentsClassName}`)}getAppointmentsContainer(e){return this.getHorizontalAppointmentsContainer()}getEditableAppointmentKey(){return this.getHorizontalEditableAppointmentsContainer().editableAppointmentKey}getSelectedAppointmentKey(){return this.getHorizontalAppointmentsContainer().selectedAppointmentKey}getAppointments(){return this.getHorizontalAppointmentsContainer().getAppointments()}getEditableAppointments(){return this.getHorizontalEditableAppointmentsContainer().getAppointments()}findCellByCoordinates(e,t){var i;const n=null===(i=this.horizontalView)||void 0===i?void 0:i.findCellByPos(e,t);return n?this.createCellInfo(n,JT.Horizontal):null}getScrollViewer(){return this.scrollViewer}restoreFocusedAppointment(e){if(!e)return;const t=this.closest(qH.TagName);if(!(null==t?void 0:t.contains(document.activeElement)))return;const i=this.querySelector(`[${_T.Key}='${e}']`);if(i)document.activeElement!==i&&(Ci.makeElementFocusable(i),Ci.focusElement(i));else{const t=ZT.from(e);if(null===t.resource)return;const i=new ZT(t.date,t.recurrenceIndex,null),n=ZT.to(i),s=this.querySelector(`[${_T.Key}^='${n}']`);s&&(Ci.makeElementFocusable(s),Ci.focusElement(s))}}dispatchDragAppointmentEvent(e,t,i,n){this.getHorizontalEditableAppointmentsContainer().dispatchDragAppointmentEvent(e,t,i,n)}dispatchStartDragNewAppointmentEvent(e,t,i,n){this.getHorizontalEditableAppointmentsContainer().dispatchStartDragNewAppointmentEvent(e,t,i,n)}dispatchStartDragAppointmentEvent(e,t,i){this.getHorizontalEditableAppointmentsContainer().dispatchStartDragAppointmentEvent(e,t)}dispatchDropNewAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchDropNewAppointmentEvent()}dispatchDropAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchDropAppointmentEvent()}dispatchCancelDragAppointmentEvent(){this.getHorizontalEditableAppointmentsContainer().dispatchCancelDragAppointmentEvent()}dispatchCreateAppointmentEvent(e,t,i,n){this.getHorizontalEditableAppointmentsContainer().dispatchCreateAppointmentEvent(e,t,i,n)}dispatchSelectAppointmentEvent(e,t){this.getHorizontalAppointmentsContainer().dispatchSelectAppointmentEvent(qT.Attr.getAppointmentKey(e),t)}onClickEvent(e){const t=e.detail.source.target,i=qT.getAppointmentContainer(t),n=this.getEditableAppointmentKey(),s=this.getSelectedAppointmentKey(),r=i?qT.Attr.getAppointmentKey(i):null,o=qT.getTimeCellContainer(t);if(i||o)if(!n||i&&n===r){if(i)s!==r?this.selectAppointment(i,n!==r):this.isTooltipShown()||qT.isNewEditableAppointment(i)||this.dispatchEvent(new yH),e.stopPropagation();else if(this.activeFormType===EH.None){const i=qT.getTimeCellContainer(t);this.allowCreateAppointment&&i&&(this.createAppointmentByTimeCell(i),e.stopPropagation())}}else this.dispatchEvent(new BH);else{Nt(t,KT.View)&&this.dispatchEvent(new BH)}}onDelayedClickEvent(e){this.unforcedFunctionCall(this.onClickEvent.bind(this,e),"ClickEvent",200,!0)}onDoubleClickEvent(e){const t=qT.getAppointmentContainer(e.detail.source.target);if(t&&this.getEditableAppointmentKey()!==qT.Attr.getAppointmentKey(t)){this.getSelectedAppointmentKey()!==qT.Attr.getAppointmentKey(t)&&this.selectAppointment(t,!1),this.clearUnforcedFunctionByKey("ClickEvent")}}selectAppointment(e,t){if(!e)return;T.DomUtils.addClassName(e,KT.SelectedAppointmentClassName);const i=qT.Attr.getAppointmentKey(e);this.getAppointmentsContainer(e).selectAppointment(i),this.selectSameAppointments(i),this.dispatchSelectAppointmentEvent(e,t)}createAppointmentByTimeCell(e){const t=qT.Attr.getStart(e),i=qT.Attr.getEnd(e),n=this.getUtcOffset(t,qT.Attr.getUtcOffset(e)),s=this.getUtcOffset(i,qT.Attr.getUtcOffset(e));this.dispatchCreateAppointmentEvent(zT.addTimeSpan(t,n),zT.addTimeSpan(i,s),qT.Attr.getAllDay(e),qT.Attr.getResourceKey(e))}getEditableAppointmentView(){const e=this.getHorizontalEditableAppointmentsContainer();return e.getAppointmentView(e.editableAppointmentKey)}onDragStartEvent(e){const t=e.detail.source.target;if(!t||this.getEditableAppointmentKey())return;const i=this.findCellByCoordinates(e.detail.source.clientX,e.detail.source.clientY);if(!i)return;const n=qT.getAppointmentContainer(t);if(n){this.sourceDraggedAppointment=n;const s=qT.Attr.getAppointmentKey(n),r=this.getAppointmentsContainer(n).getAppointmentView(s);this.allowEditAppointment&&r&&(n.classList.add(KT.DisableAppointmentClassName),n.classList.add(KT.SelectedAppointmentClassName),this.allowResizeAppointment&&(qT.isTopHandleElement(t)||qT.isLeftHandleElement(t))?this.appointmentDragController.dragAppointmentStart(r,i,e.detail.source):this.allowResizeAppointment&&(qT.isBottomHandleElement(t)||qT.isRightHandleElement(t))?this.appointmentDragController.dragAppointmentEnd(r,i,e.detail.source):this.allowDragAppointment&&this.appointmentDragController.dragAppointment(r,i,e.detail.source))}else this.allowCreateAppointment&&this.allowResizeAppointment&&this.appointmentDragController.dragNewAppointment(i);e.stopPropagation()}onDragStopEvent(e){this.removeDraggedAppointmentStyles(this.sourceDraggedAppointment),this.appointmentDragController.dropAppointment(),e.stopPropagation()}onDragCancelEvent(e){this.removeDraggedAppointmentStyles(this.sourceDraggedAppointment),this.appointmentDragController.cancelDragAppointment(),e.stopPropagation()}removeDraggedAppointmentStyles(e){e&&(e.classList.remove(KT.DisableAppointmentClassName),e.classList.remove(KT.SelectedAppointmentClassName))}createCellInfo(e,t){return{cell:e,layoutType:t,allDay:qT.Attr.getAllDay(e),interval:zT.getCellInterval(e),utcOffset:qT.Attr.getUtcOffset(e)}}initializeTimeCells(){var e;null===(e=this.getHorizontalViewPart())||void 0===e||e.clearObjects()}findTimelineResourceHeader(e,t){if(""===t)return null;const i=qT.getVerticalResourceHeaders(e);for(let e,n=0;e=i[n];n++)if(this.getElementResourceKey(e)===t)return e;return null}getElementResourceKey(e){return qT.Attr.getResourceKey(e)}getResourceHeadersByContainers(e){const t={};for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const n=this.getElementResourceKey(e[i].cells[0]),s=this.findTimelineResourceHeader(this,n);s&&(s.style.height="",null==t[n]?t[n]={element:s,height:0,minHeight:0,lastContainerIndex:i}:t[n].lastContainerIndex=i)}for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e].minHeight=t[e].element.offsetHeight);return t}initializeDateHeaders(){const e=qT.getDateHeaders(this),t=zT.getCurrentLocalTime();e.forEach((e=>{const i=qT.Attr.getStart(e),n=qT.Attr.getEnd(e);n.valueOf()-i.valueOf()>zT.DaySpan||(t.valueOf()-i.valueOf()>=0&&n.valueOf()-t.valueOf()>0?e.classList.add(KT.TodayClassName):e.classList.remove(KT.TodayClassName))}))}addEventSubscriptions(){var e;null===(e=this.timeMarkerUpdater)||void 0===e||e.subscribe(this,this.updateTimeMarkersEventHandler.bind(this)),this.addEventListener(d.eventName,this.onClickEventHandler),this.addEventListener(c.eventName,this.onDoubleClickEventHandler),this.addEventListener(a.eventName,this.onDragStartEventHandler),this.addEventListener(l.eventName,this.onDragStopEventHandler),this.addEventListener(A.eventName,this.onDragCancelEventHandler)}removeEventSubscriptions(){var e;null===(e=this.timeMarkerUpdater)||void 0===e||e.unsubscribe(this),this.removeEventListener(d.eventName,this.onClickEventHandler),this.removeEventListener(c.eventName,this.onDoubleClickEventHandler),this.removeEventListener(a.eventName,this.onDragStartEventHandler),this.removeEventListener(l.eventName,this.onDragStopEventHandler),this.removeEventListener(A.eventName,this.onDragCancelEventHandler)}addScrollViewerEventSubscriptions(){var e;null===(e=this.scrollViewer)||void 0===e||e.subscribeToScroll(this.viewportScrollViewerEventHandler.bind(this))}removeScrollViewerEventSubscriptions(){var e;null===(e=this.scrollViewer)||void 0===e||e.unsubscribeFromScroll()}updateTimeMarkersEventHandler(){var e;this.calculateHorizontalTimeMarker(this,null===(e=this.horizontalView)||void 0===e?void 0:e.getFirstContainer())}calculateHorizontalTimeMarker(e,t){const i=qT.getTimeMarkerImages(e),n=qT.getTimeMarkerLine(e);if(!i.length||!n||!t)return;const s=zT.getCurrentLocalTime(),r=t.cells[t.cells.length-1],o=qT.Attr.getStart(t.cells[0]),a=qT.Attr.getEnd(r).valueOf()-o.valueOf(),l=zT.dateSubsWithTimezone(s,o)/a;if(l>0&&l<1){i.forEach((e=>{e.style.display="unset"})),n.style.display="unset";const e=Math.round(1e4*l)/100,t=n.offsetWidth/2,s=`calc(${e}% - ${i[0].offsetWidth/2}px)`;i.forEach((e=>{e.style.left=s})),n.style.left=`calc(${e}% - ${t}px)`}else i.forEach((e=>{e.style.display="none"})),n.style.display="none"}viewportScrollViewerEventHandler(e,t){const i=qT.getResourcesViewport(this);i&&(i.scrollTop=e);const n=qT.getTimescaleViewport(this);n&&(n.scrollLeft=t)}getHorizontalViewPart(){return this.horizontalView||(this.horizontalView=this.createHorizontalDateTimeTableLayout()),this.horizontalView}createHorizontalDateTimeTableLayout(){return new XT(this,`.${KT.AllDayAreaClassName}, .${KT.HorizontalViewClassName} .${KT.TimeCellClassName}`)}selectSameAppointments(e){const t=ZT.from(e);null!==t.resource&&eH.selectSameAppointments(t,this.getAppointments())}getUtcOffset(e,t){return zT.getUtcTimezoneOffset(e)+-1*t}syncronizeScrollViewWithHeader(){}unforcedFunctionCall(e,t,i,n){n&&this.hasUnforcedFunction(t)?this.clearUnforcedFunctionByKey(t):void 0===this.unforcedFunctions[t]&&(this.unforcedFunctions[t]=setTimeout((()=>{e(),delete this.unforcedFunctions[t]}),i))}hasUnforcedFunction(e){return!!this.unforcedFunctions[e]}clearUnforcedFunctionByKey(e){clearTimeout(this.unforcedFunctions[e]),delete this.unforcedFunctions[e]}isTooltipShown(){const e=T.DomUtils.getParentByTagName(this,qH.TagName);return!!e&&!!qT.getAppointmentTooltip(e)}get handlePointerEventsMode(){return this._handlePointerEventsMode}get handlePointerEventsTarget(){return this}get hoverTitleElementsSelector(){return null}get bypassNonInlineHoverTitleElementChildSelector(){return null}shouldProcessPointerEvent(e){return!0}handlePointerEventsDelay(e){return s.Default}updated(e){(e.has("startInterval")||e.has("endInterval")||e.has("resources")||e.has("showWorkTimeOnly"))&&(this.initializeLayout(),this.updateTimeMarkersEventHandler(),setTimeout((()=>{this.recalculateAppointmentsByInterval()}),0)),super.updated(e)}}C([ln({type:Number,attribute:jT.startInterval})],IH.prototype,"startInterval",void 0),C([ln({type:Number,attribute:jT.endInterval})],IH.prototype,"endInterval",void 0),C([ln({type:String,attribute:jT.resources})],IH.prototype,"resources",void 0),C([ln({attribute:jT.snapToCellsMode})],IH.prototype,"snapToCellsMode",void 0),C([ln({attribute:jT.activeFormType,type:EH,converter:{fromAttribute:e=>parseInt(e),toAttribute:e=>parseInt(e)}})],IH.prototype,"activeFormType",void 0),C([ln({attribute:jT.allowCreateAppointment,type:Boolean})],IH.prototype,"allowCreateAppointment",void 0),C([ln({attribute:jT.allowEditAppointment,type:Boolean})],IH.prototype,"allowEditAppointment",void 0),C([ln({attribute:jT.allowDragAppointment,type:Boolean})],IH.prototype,"allowDragAppointment",void 0),C([ln({attribute:jT.allowResizeAppointment,type:Boolean})],IH.prototype,"allowResizeAppointment",void 0),C([ln({attribute:jT.enableAppointmentTooltip,type:Boolean})],IH.prototype,"enableAppointmentTooltip",void 0),C([ln({attribute:jT.showWorkTimeOnly,type:Boolean})],IH.prototype,"showWorkTimeOnly",void 0);class SH extends IH{constructor(){super()}}SH.TagName="dxbl-timeline-view";class xH extends IH{constructor(){super(),this.verticalAppointments=[]}updateTimeMarkersEventHandler(){var e;this.calculateVerticalTimeMarkers(this,null===(e=this.verticalView)||void 0===e?void 0:e.getTimeCells())}getVerticalAppointmentsContainer(){return this.querySelector(`.${KT.VerticalAppointmentsClassName}`)}getVerticalEditableAppointmentsContainer(){return this.querySelector(`.${KT.VerticalEditableAppointmentsClassName}`)}getAppointmentsContainer(e){return e&&(T.DomUtils.hasClassName(e,KT.VerticalAppointmentClassName)||T.DomUtils.hasClassName(e,KT.TimeCellClassName))?this.getVerticalAppointmentsContainer():super.getAppointmentsContainer(e)}getEditableAppointmentKey(){const e=this.getVerticalEditableAppointmentsContainer().editableAppointmentKey;return e||super.getEditableAppointmentKey()}getSelectedAppointmentKey(){const e=this.getVerticalAppointmentsContainer().selectedAppointmentKey;return e||super.getSelectedAppointmentKey()}getAppointments(){return super.getAppointments().concat(this.getVerticalAppointmentsContainer().getAppointments())}getEditableAppointments(){return super.getEditableAppointments().concat(this.getVerticalEditableAppointmentsContainer().getAppointments())}findCellByCoordinates(e,t){var i;const n=null===(i=this.verticalView)||void 0===i?void 0:i.findCellByPos(e,t);return n?this.createCellInfo(n,JT.Vertical):super.findCellByCoordinates(e,t)}dispatchDragAppointmentEvent(e,t,i,n){i?super.dispatchDragAppointmentEvent(e,t,i,n):this.getVerticalEditableAppointmentsContainer().dispatchDragAppointmentEvent(e,t,i,n)}dispatchStartDragNewAppointmentEvent(e,t,i,n){i?super.dispatchStartDragNewAppointmentEvent(e,t,i,n):this.getVerticalEditableAppointmentsContainer().dispatchStartDragNewAppointmentEvent(e,t,i,n)}dispatchStartDragAppointmentEvent(e,t,i){i?super.dispatchStartDragAppointmentEvent(e,t,i):this.getVerticalEditableAppointmentsContainer().dispatchStartDragAppointmentEvent(e,t)}dispatchDropNewAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchDropNewAppointmentEvent():super.dispatchDropNewAppointmentEvent()}dispatchDropAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchDropAppointmentEvent():super.dispatchDropAppointmentEvent()}dispatchCancelDragAppointmentEvent(){this.getVerticalEditableAppointmentsContainer().editableAppointmentKey?this.getVerticalEditableAppointmentsContainer().dispatchCancelDragAppointmentEvent():super.dispatchCancelDragAppointmentEvent()}dispatchCreateAppointmentEvent(e,t,i,n){i?super.dispatchCreateAppointmentEvent(e,t,i,n):this.getVerticalEditableAppointmentsContainer().dispatchCreateAppointmentEvent(e,t,i,n)}dispatchSelectAppointmentEvent(e,t){const i=qT.Attr.getAppointmentKey(e);T.DomUtils.hasClassName(e,KT.VerticalAppointmentClassName)?this.getVerticalAppointmentsContainer().dispatchSelectAppointmentEvent(i,t):super.dispatchSelectAppointmentEvent(e,t)}initializeTimeCells(){var e;super.initializeTimeCells(),null===(e=this.getVerticalViewPart())||void 0===e||e.clearObjects()}calculateAppointments(){super.calculateAppointments(),this.getVerticalAppointmentsContainer().calculateAppointments()}recalculateAppointmentsByInterval(){super.recalculateAppointmentsByInterval(),this.getVerticalAppointmentsContainer().recalculateAppointmentsByInterval(this.startInterval,this.endInterval,this.resources)}calculateVerticalTimeMarkers(e,t){if(!t)return;const i=zT.getCurrentLocalTime(),n=zT.truncToDate(i),s=this.getTimeMarkerInfos(e);if(0!==s.length)for(let r,o=0;r=s[o];o++)this.calculateVerticalTimeMarker(r,e,t,n,i)}getTimeMarkerInfos(e){const t=[],i=qT.getTimeMarkerWrappers(e);for(let e,n=0;e=i[n];n++){const i={wrapper:e,timeMarker:qT.getTimeMarkerContainer(e),timeIndicator:qT.getTimeIndicatorContainer(e),firstContainerIndex:qT.Attr.getFirstContainerIndex(e),lastContainerIndex:qT.Attr.getLastContainerIndex(e),startFromContainer:n>0};t.push(i)}return t}calculateVerticalTimeMarker(e,t,i,n,s){const r=e.wrapper,o=this.findCellsByTime(i,s,e.firstContainerIndex,e.lastContainerIndex);if(!o.length)return void r.classList.add(KT.TimeMarkerWrapperInvisibleClassName);r.classList.remove(KT.TimeMarkerWrapperInvisibleClassName);const a=e.timeMarker,l=e.timeIndicator,A=a.offsetHeight/2,d=o[0].offsetLeft;let c=0;if(e.startFromContainer){const t=this.findFirstCellInContainer(i,e.firstContainerIndex);t&&(c=t.offsetLeft===d?d-A:t.offsetLeft)}const h=Math.floor(this.calculateTop(s,o[0],n));if(a.style.top=h-A+"px",a.style.left=c+"px",a.style.width=d-c+A+1+"px",this.isElementDisplayed(r)){const e=qT.getTodayDateHeaders(this)[0].clientWidth;l.style.top=h-1+"px",l.style.width=e+"px",l.style.left=d+"px"}}findCellsByTime(e,t,i,n){const s=[];for(let r,o=0;r=e[o];o++)qT.Attr.getContainerIndex(r)<i||qT.Attr.getContainerIndex(r)>n||t.valueOf()-qT.Attr.getStart(r).valueOf()>=0&&qT.Attr.getEnd(r).valueOf()-t.valueOf()>0&&s.push(r);return s}getVerticalViewPart(){return this.verticalView||(this.verticalView=this.createVerticalDateTimeTableLayout()),this.verticalView}createVerticalDateTimeTableLayout(){return new XT(this,`.${KT.VerticalViewClassName} .${KT.TimeCellClassName}`)}getEditableAppointmentView(){const e=this.getVerticalEditableAppointmentsContainer(),t=e.getAppointmentView(e.editableAppointmentKey);return t||super.getEditableAppointmentView()}findFirstCellInContainer(e,t){for(let i,n=0;i=e[n];n++)if(qT.Attr.getContainerIndex(i)===t)return i;return null}isElementDisplayed(e){return e&&"none"!==e.style.display}calculateTop(e,t,i){const n=this.getAdaptedContainerTime(i,e),s=qT.Attr.getStart(t),r=qT.Attr.getEnd(t),o=zT.dateSubsWithTimezone(n,s);return t.offsetTop+t.offsetHeight*o/(r.valueOf()-s.valueOf())}getAdaptedContainerTime(e,t){const i=e,n=zT.dateSubsWithTimezone(t,i);let s=Math.abs(n)%zT.DaySpan;return n<0&&(s=zT.DaySpan-s),zT.dateIncreaseWithUtcOffset(i,s)}selectSameAppointments(e){const t=ZT.from(e);null!==t.resource&&(super.selectSameAppointments(e),eH.selectSameAppointments(t,this.verticalAppointments))}syncronizeScrollViewWithHeader(){const e=this.getScrollViewer();if(e){const t=e.querySelector(`.${xe.ContentContainerClassName}`);if(t){const e=qT.getTimescaleViewport(this),i=e?e.scrollLeft:-1;i>-1&&t.scrollTo&&t.scrollTo(i,0)}}}}class DH extends xH{constructor(){super()}}DH.TagName="dxbl-day-view";class FH extends IH{constructor(){super()}}FH.TagName="dxbl-month-view";class TH extends Li{constructor(e,t,i=!1){super(e.getKeyboardNavigator(),t,i),this.scheduler=e}canSwitchToNestedContentMode(){return!0}getToolbarWrapper(){return qT.getToolbarWrapper(this.scheduler)}getVerticalAppointmentsContainer(){const e=qT.getVerticalAppointmentsContainer(this.scheduler);return(null==e?void 0:e.childElementCount)>0?e:null}getHorizontalAppointmentsContainer(){const e=qT.getHorizontalAppointmentsContainer(this.scheduler);return(null==e?void 0:e.childElementCount)>0?e:null}handleTabKeyDown(e,t=!1){if(!t&&e.altKey)return!1;if(e.shiftKey){if(this.firstItemSelected)return!1;this.moveToPrevItem()}else{if(this.lastItemSelected)return!1;this.moveToNextItem()}return!0}}class HH extends TH{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${KT.HorizontalAppointmentClassName}`}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(t===Be.KeyCode.Tab)return this.handleTabKeyDown(e);switch(t){case Be.KeyCode.Enter:case Be.KeyCode.Delete:case Be.KeyCode.Key_n:case Be.KeyCode.Key_r:return this.performShortcutEvent(e),!0}return!1}handleTabKeyDown(e){return!!super.handleTabKeyDown(e,e.altKey)}getShortcutContext(){var e;return{AppointmentKey:null===(e=this.selectedItemElement.getAttributeNode("data-key"))||void 0===e?void 0:e.value}}focusSelectedItem(){var e;super.focusSelectedItem(),null===(e=this.scheduler.getView())||void 0===e||e.syncronizeScrollViewWithHeader()}}class UH extends TH{constructor(e,t){super(e,t,!0)}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Key_n&&(this.performShortcutEvent(e),!0)}}class PH extends TH{constructor(e,t){super(e,t),this.itemSelector=`:scope > .${KT.VerticalAppointmentClassName}`}queryItems(){return this.queryItemsBySelector(this.itemSelector)}handleKeyDown(e){const t=Be.KeyUtils.getEventKeyCode(e);if(t===Be.KeyCode.Tab)return this.handleTabKeyDown(e);switch(t){case Be.KeyCode.Enter:case Be.KeyCode.Delete:case Be.KeyCode.Key_n:case Be.KeyCode.Key_r:return this.performShortcutEvent(e),!0}return!1}handleTabKeyDown(e){return!!super.handleTabKeyDown(e,e.altKey)}getShortcutContext(){var e;return{AppointmentKey:null===(e=this.selectedItemElement.getAttributeNode("data-key"))||void 0===e?void 0:e.value}}}class QH extends TH{constructor(e){super(e,e)}queryItems(){return new Array(this.getToolbarWrapper(),this.getHorizontalAppointmentsContainer(),this.getVerticalAppointmentsContainer())}createItemStrategy(e){if(e===this.getToolbarWrapper())return new UH(this.scheduler,e);if(e===this.getVerticalAppointmentsContainer())return new PH(this.scheduler,e);if(e===this.getHorizontalAppointmentsContainer())return new HH(this.scheduler,e);throw new Error("Not implemented")}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab&&this.handleTabKeyDown(e)}handleTabKeyDown(e){return super.handleTabKeyDown(e,e.altKey)||(e.shiftKey?this.leaveBackward():this.leaveForward()),!0}}class NH extends Li{constructor(e,t){super(e.getKeyboardNavigator(),t,!0),this._dateNavigator=e}canSwitchToNestedContentMode(){return!0}leaveTransitContainer(e){const t=this._dateNavigator.getCalendar();if(t){const i=Nr.getTabbables(t,!1);if(!i.length||e===Qi.None)return;(e===Qi.Forward?i[0]:i[i.length-1]).focus()}}}class RH extends Bs{getKeyboardNavigator(){return this._keyboardNavigator}getCalendar(){return this.querySelector(el)}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(Pi),this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new NH(this,this))}}RH.TagName="dxbl-date-navigator";class LH extends Li{constructor(e,t){super(e.getKeyboardNavigator(),t),this._resourceNavigator=e}queryItems(){return new Array(this._resourceNavigator.getResourceListBoxContainer(),this._resourceNavigator.getOkButton(),this._resourceNavigator.getCancelButton())}createItemStrategy(e){return e.matches(this._resourceNavigator.getResourceListBoxContainerSelector())?new MH(this._resourceNavigator.getKeyboardNavigator(),e,this):null}handleKeyDown(e){return Be.KeyUtils.getEventKeyCode(e)===Be.KeyCode.Tab?(e.shiftKey?this.moveToPrevItem(!0):this.moveToNextItem(!0),!0):super.handleKeyDown(e)}canSwitchToNestedContentMode(){return!0}moveForward(){this.moveToNextItem(!0)}moveBackward(){super.moveToPrevItem(!0)}}class MH extends Li{constructor(e,t,i){super(e,t,!0),this._rootStrategy=i}leaveTransitContainer(e){e===Qi.Forward?this._rootStrategy.moveForward():e===Qi.Backward&&this._rootStrategy.moveBackward()}canSwitchToNestedContentMode(){return!0}}class kH extends Bs{getKeyboardNavigator(){return this._keyboardNavigator}getResourceListBoxContainerSelector(){return`.${KT.ResourceNavigatorListBoxContainer}`}getResourceListBoxContainer(){return this.querySelector(this.getResourceListBoxContainerSelector())}getOkButton(){return this.querySelector(`.${KT.ResourceNavigatorFooter} button:first-child`)}getCancelButton(){return this.querySelector(`.${KT.ResourceNavigatorFooter} button:last-child`)}contentChanged(){super.contentChanged(),this.initializeKeyboardNavigator()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(Pi),this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new LH(this,this))}}kH.TagName="dxbl-resource-navigator";class KH{constructor(e,t){this.start=e,this.end=t}containsExcludeEndBound(e){return this.start<=e&&this.end>e}}function OH(e,t,i){const n=e[t];return n===i?0:n<i?-1:1}function _H(e,t,i,n,s){i||(i=OH);let r=null==n?0:n;null==s&&(s=e.length-r);let o=r+s-1;for(;r<=o;){const n=r+(o-r>>1),s=i(e,n,t);if(0===s)return n;s<0?r=n+1:o=n-1}return-(r+1)}class VH extends Bs{constructor(){super(),this.editableAppointmentKey="",this.selectedAppointmentKey="",this.elements=[],this.appointments=[],this.dateTimeTableLayout=null,this.observer=new MutationObserver((()=>{this.handleMutations()})),this.startInterval=0,this.endInterval=0,this.resources=""}connectedCallback(){super.connectedCallback(),this.initObserver()}contentChanged(){super.contentChanged(),this.contentChangedCore()}disconnectedCallback(){super.disconnectedCallback(),this.observer.disconnect()}initObserver(){this.observer.observe(this,{subtree:!0,characterData:!0,attributes:!0,attributeFilter:["data-key","data-container-index","data-first-cell-index","data-last-cell-index","data-columns-count","data-column","data-row","data-row-span","data-start","data-duration","data-allday","data-resource"]})}contentChangedCore(){this.recalculateAppointments()}handleMutations(){this.recalculateAppointments()}recalculateAppointmentsByInterval(e,t,i){e===this.startInterval&&t===this.endInterval&&i===this.resources||this.recalculateAppointments()}getDateTimeTableLayout(){return this.dateTimeTableLayout||(this.dateTimeTableLayout=this.createDateTimeTableLayout()),this.dateTimeTableLayout}recalculateAppointments(){this.dateTimeTableLayout=null,this.initializeAppointments(),this.calculateAppointments()}initializeAppointments(){var e;this.elements=this.getAppointments(),this.prepareAppointments(null===(e=this.getDateTimeTableLayout())||void 0===e?void 0:e.getTimeCells(),this.elements),this.appointments=iH.createItems(this.elements)}selectAppointment(e){this.selectedAppointmentKey=e}getEditableAppointments(){return qT.getEditableAppointments(this)}getAppointmentView(e){return this.appointments.filter((t=>t.id===e))[0]}isEditableAppointment(e){return qT.Attr.getAppointmentKey(e)===this.editableAppointmentKey}dispatchDragAppointmentEvent(e,t,i,n){this.dispatchEvent(new fH(e,t,i,n))}dispatchStartDragNewAppointmentEvent(e,t,i,n){this.dispatchEvent(new uH(e,t,i,n))}dispatchStartDragAppointmentEvent(e,t){this.dispatchEvent(new gH(e,t))}dispatchDropNewAppointmentEvent(){this.dispatchEvent(new mH)}dispatchDropAppointmentEvent(){this.dispatchEvent(new bH)}dispatchCancelDragAppointmentEvent(){this.dispatchEvent(new wH)}dispatchCreateAppointmentEvent(e,t,i,n){this.dispatchEvent(new AH(e,t,i,n))}dispatchSelectAppointmentEvent(e,t){this.dispatchEvent(new cH(e,t))}showContainer(){this.style.setProperty("display","")}hideContainer(){this.style.setProperty("display","none")}cacheAppointmentsHeight(e){for(let t,i=0;t=e[i];i++)t.cachedOffsetHeight=t.offsetHeight}updateAppointmentCompactStyle(e,t){T.DomUtils.toggleClassName(e.children[0],KT.CompactAppointmentClassName,t<50)}initIntersects(e){e.intersects=[]}prepareAppointments(e,t){if(!e)return;const i={};for(let t,n=0;t=e[n];n++){this.initIntersects(t);const e=qT.Attr.getContainerIndex(t);i[e]||(i[e]=[]),i[e].push(t)}for(let e,n=0;e=t[n];n++){const t=qT.Attr.getContainerIndex(e),n=qT.Attr.getAppointmentFirstCellIndex(e),s=qT.Attr.getAppointmentLastCellIndex(e);if(i[t]){e.firstCell=i[t][n],e.lastCell=i[t][s],e.info={cellCount:s-n+1};for(let r=n;r<=s;r++){this.addIntersect(i[t][r],e)}}}}addIntersect(e,t){const i=e.intersects;i.findIndex((e=>qT.Attr.getAppointmentKey(e)===qT.Attr.getAppointmentKey(t)))<0&&i.push(t)}}C([ln({attribute:jT.editableAppointmentKey})],VH.prototype,"editableAppointmentKey",void 0),C([ln({attribute:jT.selectedAppointmentKey})],VH.prototype,"selectedAppointmentKey",void 0);class zH extends VH{constructor(){super()}calculateAppointments(){var e;const t=null===(e=this.getDateTimeTableLayout())||void 0===e?void 0:e.getContainers(),i=qT.getHorizontalAppointments(this);t&&i.length>0&&(this.hideContainer(),this.calculateHorizontalAppointmentsWidthAndLeftPosition(i),this.showContainer(),this.cacheAppointmentsHeight(i)),this.calculateHorizontalAppointmentsAndCells(t),this.saveCalculatedParameters()}getAppointments(){return qT.getHorizontalAppointments(this)}createDateTimeTableLayout(){return this.getView().createHorizontalDateTimeTableLayout()}getView(){return this.view||(this.view=this.closest(`.${KT.View}`)),this.view}calculateHorizontalAppointmentsWidthAndLeftPosition(e){for(let t,i=0;t=e[i];i++)t.info={cellCount:t.info.cellCount},this.calculateHorizontalAppointmentWidthAndLeft(t,-1)}calculateHorizontalAppointmentsInCell(e){const t=this.getCalculatedHorizontalAppointmentsInCell(e),i=this.getNotCalculatedHorizontalAppointmentsInCell(e);t.forEach((e=>e.calculated=!0)),i.forEach((e=>e.calculated=!1)),this.calculateHorizontalAptsInCellCore(e,t.concat(i),t.length)}calculateHorizontalAptsInCellCore(e,t,i){this.calculateAppointmentRelativeTopOffset(t,i),this.calculateAppointmentsTopPosition(e,t)}calculateAppointmentsTopPosition(e,t){let i=e.offsetTop;if(e.firstElementChild&&qT.isDateCellHeader(e.firstElementChild)){const t=window.getComputedStyle(e).paddingTop;i+=e.firstElementChild.offsetHeight+parseInt(t)}for(let e=0;e<t.length;e++){const n=t[e];let s=n.relativePosition+i;if(this.isEditableAppointment(n)){const e=t.find((e=>e.classList.contains(KT.DisableAppointmentClassName)));if(!e)continue;s=e.relativePosition+i}n.info.calculatedTop=s}}calculateAppointmentRelativeTopOffset(e,t){this.adjustAppointmentCellIndexes(e),this.calculateAppointmentRelativePositionsCore(e,t)}calculateAppointmentRelativePositionsCore(e,t){const i=e.length,n=this.createBusyIntervals(2*i);let s=0;for(;s<t;)this.isEditableAppointment(e[s])||this.makeIntervalBusy(e[s],n),s++;for(;s<i;){const t=e[s];if(!t.calculated){const e=this.findAvailableRelativePosition(t,n);t.relativePosition=e}this.isEditableAppointment(t)||this.makeIntervalBusy(t,n),s++}}findAvailableRelativePosition(e,t){e.relativePosition=0;let i=0;const n=e.info.busyIntervalFirstCellIndex,s=e.info.busyIntervalLastCellIndex;let r=n;for(;r<=s;){const s=this.findPossibleIntersectionInterval(t[r],i);null===s||s.start>=i+e.offsetHeight?r++:(i=s.end,r=n)}return i}findPossibleIntersectionInterval(e,t){for(let i=0;i<e.length;i++){const n=e[i];if(n.containsExcludeEndBound(t)||n.start>t)return new KH(n.start,n.end)}return null}calculateHorizontalAppointmentsAndCells(e){var t;const i=null===(t=this.view)||void 0===t?void 0:t.getResourceHeadersByContainers(e);if(!i)return;this.view&&(this.view.style.height=Te.toPx(this.view.offsetHeight)),this.resetCellHeight(e);for(const t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;let n=0;const s=e[t].cells;for(let e,t=0;e=s[t];t++){this.calculateHorizontalAppointmentsInCell(e);const t=this.getHorizontalCellHeight(e);t>n&&(n=t)}const r=s[0];let o=n?n+15:0;o=Math.max(r.offsetHeight,o);const a=i[qT.Attr.getResourceKey(r)];a&&(a.lastContainerIndex===t&&(o=Math.max(a.minHeight-a.height,o)),a.height+=o),r.style.height=Te.toPx(o)}this.view&&(this.view.style.height="");for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e].element.style.height=i[e].height+"px");const n=qT.getHorizontalAppointments(this);for(let e,t=0;e=n[t];t++)e.style.top=e.info.calculatedTop+"px"}calculateHorizontalAppointmentWidthAndLeft(e,t){const i=e.firstCell,n=i.offsetWidth,s=qT.Attr.getAppointmentRow(e)-qT.Attr.getAppointmentFirstCellIndex(e),r=i.offsetLeft+Math.floor(n*s);let o=n-Math.floor(n*s),a=i.nextElementSibling,l=0;const A=qT.Attr.getAppointmentRowSpan(e);for(let e=1;e<Math.trunc(A)&&null!=a;e++)l=a.offsetWidth,o+=l,a=a.nextElementSibling;const d=A-Math.trunc(A);d>0&&(A<1?o-=n-n*d:null!=a&&(o+=(l||a.offsetWidth)*d)),this.updateAppointmentCompactStyle(e,o);const c=t>=0?i.offsetTop+t:-1e4;e.style.height="",e.style.width=`${o}px`,e.style.left=`${r}px`,e.style.top=`${c}px`}getCalculatedHorizontalAppointmentsInCell(e){return e.intersects.filter((e=>void 0!==e.info.calculatedTop)).sort(((e,t)=>e.info.calculatedTop-t.info.calculatedTop))}getNotCalculatedHorizontalAppointmentsInCell(e){return e.intersects.filter((e=>void 0===e.info.calculatedTop)).sort(((e,t)=>{const i=t.info.cellCount-e.info.cellCount;return i||qT.Attr.getStart(e).valueOf()-qT.Attr.getStart(t).valueOf()}))}getHorizontalCellHeight(e){let t=-1,i=null;return e.intersects.forEach((e=>{e.info.calculatedTop>t&&(t=e.info.calculatedTop,i=e)})),i?t-e.offsetTop+i.cachedOffsetHeight:0}createBusyIntervals(e){const t=[];for(let i=0;i<e;i++)t.push([]);return t}makeIntervalBusy(e,t){const i=e.info.busyIntervalLastCellIndex;for(let n=e.info.busyIntervalFirstCellIndex;n<=i;n++)this.addBusyInterval(t[n],new KH(e.relativePosition,e.relativePosition+e.cachedOffsetHeight))}addBusyInterval(e,t){if(!this.checkBusyIntervalExists(e,t)){let i=e.findIndex((e=>e.start>t.start));-1===i&&(i=e.length),e.splice(i,0,t)}}checkBusyIntervalExists(e,t){return e.some((e=>e.start===t.start&&e.end===t.end))}adjustAppointmentCellIndexes(e){const t=this.createAptsDateTimeCollection(e);this.calculateAdjustedCellIndexes(e,t)}createAptsDateTimeCollection(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i],{startTime:s,endTime:r}=this.getAptAdjustedStartEndTime(n);this.addDateTime(t,s),this.addDateTime(t,r)}return t.sort(zT.dateTimeComparer),t}addDateTime(e,t){this.isAlreadyAdded(e,t)||e.push(t)}isAlreadyAdded(e,t){const i=e.length;for(let n=0;n<i;n++)if(e[n].valueOf()===t.valueOf())return!0;return!1}calculateAdjustedCellIndexes(e,t){for(let i=0;i<e.length;i++)this.calculateAdjustedCellIndexesCore(e[i],t)}resetCellHeight(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].cells[0].style.height="")}calculateAdjustedCellIndexesCore(e,t){const{startTime:i,endTime:n}=this.getAptAdjustedStartEndTime(e),s=_H(t,i,zT.dateTimeIndexComparer),r=_H(t,n,zT.dateTimeIndexComparer)-1;e.info.busyIntervalFirstCellIndex=s,e.info.busyIntervalLastCellIndex=r}getAptAdjustedStartEndTime(e){const t=qT.Attr.getSnapToCellsMode(this.view),i=qT.Attr.getAppointmentFirstCellIndex(e),n=qT.Attr.getAppointmentLastCellIndex(e),s=t===$T.Always||t===$T.Auto&&i-n<=1;return{startTime:qT.Attr.getStart(s?e.firstCell:e),endTime:s?qT.Attr.getEnd(e.lastCell):qT.Attr.getAppointmentEnd(e)}}saveCalculatedParameters(){this.startInterval=this.getView().startInterval,this.endInterval=this.getView().endInterval,this.resources=this.getView().resources}}class WH extends zH{constructor(){super(),this.appointmentStart=0,this.appointmentEnd=0,this.appointmentAllDay=!1,this.appointmentResources=""}showContainer(){}hideContainer(){}initObserver(){}contentChangedCore(){}initIntersects(e){}addIntersect(e,t){}saveCalculatedParameters(){}calculateAppointments(){var e;if(null===(e=this.getView().horizontalView)||void 0===e?void 0:e.getContainers()){const e=qT.Attr.getAppointmentTopPosition(this.getView());for(let t,i=0;t=this.elements[i];i++)t.info={cellCount:t.info.cellCount},this.calculateHorizontalAppointmentWidthAndLeft(t,e)}}updated(e){this.recalculateAppointments(),super.updated(e)}}C([ln({type:Number,attribute:jT.appointmentStart})],WH.prototype,"appointmentStart",void 0),C([ln({type:Number,attribute:jT.appointmentEnd})],WH.prototype,"appointmentEnd",void 0),C([ln({type:Boolean,attribute:jT.appointmentAllDay})],WH.prototype,"appointmentAllDay",void 0),C([ln({type:String,attribute:jT.appointmentResources})],WH.prototype,"appointmentResources",void 0);class $H extends VH{constructor(){super()}calculateAppointments(){for(let e,t=0;e=this.elements[t];t++)this.calculateAppointment(e);this.showContainer(),this.saveCalculatedParameters()}getView(){return this.view||(this.view=this.closest(`.${KT.View}`)),this.view}createDateTimeTableLayout(){return this.getView().createVerticalDateTimeTableLayout()}getAppointments(){return qT.getVerticalAppointments(this)}calculateAppointment(e){const t=e.firstCell;if(!t)return;const i=(t.offsetWidth-10)/qT.Attr.getAppointmentColumnsCount(e),n=t.getBoundingClientRect().height,s=qT.Attr.getAppointmentRow(e)-qT.Attr.getAppointmentFirstCellIndex(e),r=Math.floor(n*s),o=t.offsetTop+r,a=qT.Attr.getAppointmentColumn(e),l=t.offsetLeft+i*a,A=Math.floor(n*qT.Attr.getAppointmentRowSpan(e))-r;this.updateAppointmentCompactStyle(e,i),e.style.top=`${o}px`,e.style.left=`${l}px`,e.style.width=`${i}px`,e.style.height=`${A}px`}saveCalculatedParameters(){this.startInterval=this.getView().startInterval,this.endInterval=this.getView().endInterval,this.resources=this.getView().resources}}class GH extends $H{constructor(){super(),this.appointmentStart="",this.appointmentEnd="",this.appointmentAllDay=!1,this.appointmentResources=""}initObserver(){}contentChangedCore(){}saveCalculatedParameters(){}getAppointments(){return qT.getVerticalEditableAppointments(this)}updated(e){this.recalculateAppointments(),super.updated(e)}}C([ln({type:String,attribute:jT.appointmentStart})],GH.prototype,"appointmentStart",void 0),C([ln({type:String,attribute:jT.appointmentEnd})],GH.prototype,"appointmentEnd",void 0),C([ln({type:Boolean,attribute:jT.appointmentAllDay})],GH.prototype,"appointmentAllDay",void 0),C([ln({type:String,attribute:jT.appointmentResources})],GH.prototype,"appointmentResources",void 0);class qH extends de{constructor(){super()}initializeComponent(){super.initializeComponent(),this.addEventSubscriptions(),this.initializeKeyboardNavigator()}disposeComponent(){this.removeEventSubscriptions(),super.disposeComponent()}getView(){return this.querySelector(`.${KT.View}`)}getKeyboardNavigator(){return this.keyboardNavigator}adjustControl(e,t){var i;e.width!==t.width&&(null===(i=this.getView())||void 0===i||i.adjust())}addEventSubscriptions(){this.elementContentSizeSubscription=ni(this,this.adjustControl.bind(this))}removeEventSubscriptions(){this.elementContentSizeSubscription&&ii(this.elementContentSizeSubscription)}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(`:scope > ${Pi}`),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,new QH(this))}}qH.TagName="dxbl-scheduler",customElements.define(qH.TagName,qH),customElements.define(DH.TagName,DH),customElements.define(FH.TagName,FH),customElements.define(SH.TagName,SH),customElements.define(RH.TagName,RH),customElements.define(kH.TagName,kH),customElements.define("dxbl-scheduler-horizontal-appointments-container",zH),customElements.define("dxbl-scheduler-horizontal-editable-appointments-container",WH),customElements.define("dxbl-scheduler-vertical-appointments-container",$H),customElements.define("dxbl-scheduler-vertical-editable-appointments-container",GH);class XH{}class YH extends CustomEvent{constructor(){super(YH.eventName,{detail:new XH,bubbles:!0})}}YH.eventName="dxbl:loading-panel.click",mt.register(YH.eventName,(e=>e.detail));class JH extends Bs{constructor(){super(...arguments),this.attachPanelHandler=this.attachPanel.bind(this),this.resizePanelHandler=this.resizePanel.bind(this),this.clickPanelHandler=this.clickPanel.bind(this),this.panel=null,this.targetElement=null,this.targetResizeObserver=null,this.panelItems=[],this.positionTarget=null,this.panelVisible=!1,this.blockedContent=!1,this.hasContent=!1,this.zIndex=null,this.width="unset",this.height="unset",this.translateState="translate(0px; 0px)",this.trackingInterval=null,this.targetCurrentRect=null}render(){return Xn`
            <style>
                :host {
                    display: ${this.getDisplayProp()};
                    position: ${this.hasContent?"relative":"fixed"};
                    pointer-events: ${this.blockedContent||this.hasContent?"unset":"none"};
                    width: ${this.hasContent?"var(--dxbl-loading-panel-width)":this.width};
                    height: ${this.hasContent?"var(--dxbl-loading-panel-height)":this.height};
                    transform: ${this.hasContent?"none":this.translateState};
                    z-index: ${this.panelVisible&&this.zIndex&&!this.hasContent?this.zIndex:"auto"};
                }
            </style>
            <slot></slot>
        `}connectedOrContentChanged(){super.connectedOrContentChanged(),this.setAttribute(he.Loaded,"")}connectedCallback(){super.connectedCallback(),this.hasContent||window.addEventListener("resize",this.resizePanelHandler),this.panel=document.querySelector(`#${this.id}`),this.addEventListener("click",this.clickPanelHandler)}disconnectedCallback(){var e;super.disconnectedCallback(),this.targetElement&&(null===(e=this.targetResizeObserver)||void 0===e||e.unobserve(this.targetElement),this.unsubscribeTargetScroll()),window.removeEventListener("resize",this.resizePanelHandler),this.removeEventListener("click",this.clickPanelHandler),this.disablePersistentAttaching()}updated(e){super.updated(e),e.has("positionTarget")&&(this.setTargetElement(),this.processPanelElements(),this.attachPanel(),this.resizePanel()),e.has("panelVisible")&&(!this.targetElement&&this.panelVisible&&this.setTargetElement(),this.attachPanel(),this.resizePanel(),this.checkBlockPanelTabIndexes()),e.has("blockedContent")&&this.checkBlockPanelTabIndexes()}setTargetElement(){var e;if(this.positionTarget){if(this.targetElement=document.querySelector(this.positionTarget),!this.targetElement)return;this.targetCurrentRect=this.targetElement.getBoundingClientRect(),this.subscribeTargetResize(),this.subscribeTargetScroll(),this.enablePersistentAttaching()}else this.targetElement&&(null===(e=this.targetResizeObserver)||void 0===e||e.unobserve(this.targetElement),this.targetElement=null)}attachPanel(){!this.hasContent&&this.targetElement&&this.panel&&requestAnimationFrame((()=>{const e=this.targetElement.getBoundingClientRect();this.translateState=`translate(${e.left+this.scrollLeft}px, ${e.top+this.scrollTop}px)`}))}resizePanel(){this.targetElement&&this.panel&&requestAnimationFrame((()=>{const e=this.targetElement.getBoundingClientRect();this.width=e.width+"px",this.height=e.height+"px"}))}clickPanel(){this.panelVisible&&this.dispatchEvent(new YH)}processPanelElements(){this.targetElement&&(this.checkAndAddElementTabIndex(this.targetElement),this.processPanelChildElements(this.targetElement))}checkAndAddElementTabIndex(e){this.panelItems.map((e=>e.element)).indexOf(e)<0&&this.panelItems.push({element:e,tabIndex:e.hasAttribute("tabIndex")?e.tabIndex:null})}processPanelChildElements(e){const t=e.childNodes;for(let e=0;e<t.length;e++){const i=t[e];i instanceof HTMLElement&&(this.checkAndAddElementTabIndex(i),this.processPanelChildElements(i))}}checkBlockPanelTabIndexes(){this.panelItems.length&&this.panelItems.forEach((e=>{this.blockedContent&&this.panelVisible?e.element.tabIndex=-1:null!==e.tabIndex?e.element.tabIndex=e.tabIndex:e.element.removeAttribute("tabIndex")}))}subscribeTargetResize(){this.targetResizeObserver=new ResizeObserver((()=>this.resizePanel())),this.targetResizeObserver.observe(this.targetElement)}enablePersistentAttaching(){this.trackingInterval=setInterval((()=>{const e=this.targetElement.getBoundingClientRect();e.top===this.targetCurrentRect.top&&e.left===this.targetCurrentRect.left||(this.targetCurrentRect=e,this.attachPanel())}),0)}disablePersistentAttaching(){this.trackingInterval&&clearInterval(this.trackingInterval)}subscribeTargetScroll(){this.getTargetRootElements().forEach((e=>e.addEventListener("scroll",this.attachPanelHandler)))}unsubscribeTargetScroll(){this.getTargetRootElements().forEach((e=>e.removeEventListener("scroll",this.attachPanelHandler)))}getTargetRootElements(){return[...rt.getRootPath(this.targetElement)].filter((e=>e instanceof HTMLElement)).map((e=>e))}getDisplayProp(){return this.hasContent||this.positionTarget?this.hasContent||this.panelVisible?"inline-block":"none":"block"}}C([ln({type:String,attribute:"position-target",reflect:!0})],JH.prototype,"positionTarget",void 0),C([ln({type:Boolean,attribute:"panel-visible"})],JH.prototype,"panelVisible",void 0),C([ln({type:Boolean,attribute:"blocked-content"})],JH.prototype,"blockedContent",void 0),C([ln({type:Boolean,attribute:"has-content"})],JH.prototype,"hasContent",void 0),C([ln({type:Number,attribute:"z-index"})],JH.prototype,"zIndex",void 0),C([An()],JH.prototype,"width",void 0),C([An()],JH.prototype,"height",void 0),C([An()],JH.prototype,"translateState",void 0),iD(customElements,"dxbl-loading-panel",JH);let jH=class extends Bs{constructor(){super(...arguments),this.width="",this.zIndex=0}updated(e){e.has("width")&&(this.style.width=this.width),e.has("zIndex")&&(this.style.zIndex=this.zIndex.toString())}};jH.shadowRootOptions={...ms.shadowRootOptions,mode:"open"},C([ln()],jH.prototype,"width",void 0),C([ln({type:Number,attribute:"z-index"})],jH.prototype,"zIndex",void 0),jH=C([rn("dxbl-toast-portal")],jH);class ZH{}ZH.Toast=he.Prefix+"-toast",ZH.ToastText=ZH.Toast+"-text";let eU=class extends Bs{constructor(){super(...arguments),this.maxHeight=""}updated(e){e.has("maxHeight")&&this.calculateHeight()}calculateHeight(){this.style.maxHeight=this.maxHeight;const e=this.querySelector(`.${ZH.ToastText}`);if(e){const t=parseInt(window.getComputedStyle(e).lineHeight),i=Math.floor(e.offsetHeight/t);this.style.setProperty("--dxbl-toast-line-clamp",i.toString())}}};C([ln({attribute:"max-height"})],eU.prototype,"maxHeight",void 0),eU=C([rn("dxbl-toast")],eU);class tU{}tU.ProgressBar=he.Prefix+"-progress-bar",tU.ProgressCircularBar=he.Prefix+"-progress-circular-bar",tU.ProgressCircularBarTrack=tU.ProgressCircularBar+"-track",tU.ProgressCircularBarIndicator=tU.ProgressCircularBar+"-indicator",tU.ProgressBarLabel=tU.ProgressBar+"-label",tU.ProgressBarLabelContainer=tU.ProgressBarLabel+"-container";class iU{static convertRemToPixels(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}static convertToPixels(e){const t=document.createElement("div");t.style.fontSize="1rem",t.style.position="absolute",t.style.visibility="hidden",t.style.width=e,document.body.appendChild(t);const i=t.offsetWidth;return document.body.removeChild(t),i}}var nU,sU;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(nU||(nU={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Circular=2]="Circular"}(sU||(sU={}));let rU=class extends Bs{constructor(){super(...arguments),this.value=null,this.visible=!1,this.type=null,this.size="",this.sizeMode=null,this.thickness="",this.indeterminate=!1,this.emptyOffset=!1,this.thicknessPixel=0,this.circularSizeObserver=null}get radius(){return this.thicknessPixel?50-this.thicknessPixel/2:50}get isVertical(){return this.type===sU.Vertical}get isHorizontal(){return this.type===sU.Horizontal}get isCircular(){return this.type===sU.Circular}get offset(){return this.emptyOffset?0:this.indeterminate?.7*this.circumference:this.circumference*(100-this.value)/100}get circumference(){return Math.round(2*Math.PI*this.radius)}connectedCallback(){super.connectedCallback(),this.updateSize(),this.style.visibility="visible"}render(){return Xn`
            <style>
                :host {
                    --dxbl-progress-bar-indicator-width: ${this.isHorizontal?this.value+"%":"100%"};
                    --dxbl-progress-bar-indicator-height: ${this.isVertical?this.value+"%":"100%"};
                }
            </style>
            <slot></slot>
        `}updated(e){super.updated(e),e.has("visible")&&(this.style.display=this.visible?"":"none"),e.has("type")&&this.updateType(),(e.has("thickness")||e.has("sizeMode"))&&this.updateThickness(),(e.has("value")||e.has("indeterminate")||e.has("emptyOffset"))&&this.isCircular&&this.updateCircularValue(),(e.has("size")||e.has("type"))&&this.updateSize()}updateSize(){this.calculateSize(),this.updateCircular()}calculateSize(){this.style.width=this.isHorizontal||this.isCircular?this.size:"",this.style.height=this.isVertical||this.isCircular?this.size:"",this.style.setProperty("--dxbl-progress-bar-width",this.style.width),this.style.setProperty("--dxbl-progress-bar-height",this.style.height)}updateType(){this.updateCircular()}updateCircular(){this.isCircular&&(this.updateThickness(),this.updatePercentCircularSize())}updateThickness(){this.thickness?this.style.setProperty("--dxbl-progress-bar-thickness",this.thickness):this.style.removeProperty("--dxbl-progress-bar-thickness"),this.isCircular&&(this.thicknessPixel=iU.convertToPixels(getComputedStyle(this).getPropertyValue("--dxbl-progress-bar-thickness")),this.updateCircularValue(),this.updateCircularLabelSize())}updateCircularValue(){if(!this.isCircular||!this.thicknessPixel)return;const e=this.querySelector(`.${tU.ProgressCircularBarTrack}`),t=this.querySelector(`.${tU.ProgressCircularBarIndicator}`);e&&t&&(e.setAttribute("r",this.radius.toString()),t.setAttribute("r",this.radius.toString()),t.setAttribute("stroke-dasharray",this.circumference.toFixed(2)),t.setAttribute("stroke-dashoffset",this.offset.toFixed(2)),t.style.display=0===this.value?"none":"")}updatePercentCircularSize(){this.size.indexOf("%")<0?this.unsubscribeCircularSizeObserver():(this.subscribeCircularSizeObserver(),this.updateCircularPercentHeight())}subscribeCircularSizeObserver(){this.circularSizeObserver||(this.circularSizeObserver=new ResizeObserver((()=>this.updateCircularPercentHeight())),this.circularSizeObserver.observe(this))}unsubscribeCircularSizeObserver(){this.circularSizeObserver&&(this.circularSizeObserver.unobserve(this),this.circularSizeObserver=null,this.calculateSize())}updateCircularPercentHeight(){this.style.height=this.offsetWidth+"px",this.updateCircularLabelSize()}updateCircularLabelSize(){const e=(()=>{const e=this.querySelector(`.${tU.ProgressBarLabelContainer}`);if(!e)return 0;const t=e.querySelector(".dxbl-image");return t?t.clientWidth+iU.convertToPixels(getComputedStyle(e).gap):0})(),t=this.offsetWidth-2*Math.PI*this.thicknessPixel-e;this.style.setProperty("--dxbl-progress-bar-label-width",t.toFixed(2)+"px")}};C([ln({type:Number})],rU.prototype,"value",void 0),C([ln({type:Boolean})],rU.prototype,"visible",void 0),C([ln({type:sU,converter:bE(sU)})],rU.prototype,"type",void 0),C([ln()],rU.prototype,"size",void 0),C([ln({type:nU,converter:bE(nU)})],rU.prototype,"sizeMode",void 0),C([ln()],rU.prototype,"thickness",void 0),C([ln({type:Boolean})],rU.prototype,"indeterminate",void 0),C([ln({attribute:"empty-offset",type:Boolean})],rU.prototype,"emptyOffset",void 0),rU=C([rn("dxbl-progress-bar")],rU);class oU extends BF{constructor(e,t,i,n){super(e,t,i,n),this._parentTargetElement=i.targetElement}get parentTargetElement(){return this._parentTargetElement}handlePopupShown(){super.handlePopupShown(),this.focusFirstItem(),this.synchronizeFocusState()}handlePopupClosed(){this.closedWithKeyboard&&this.parentStrategy.allowRestoreFocus(),super.handlePopupClosed()}synchronizeFocusState(){Si(this.parentTargetElement)&&Ei(this.targetElement)}focusSelectedItem(){this._focusSemaphore.doAllowedAction((()=>{super.focusSelectedItem()}))}doAction(e){Ex(this.selectedItemElement)||(this.closedWithKeyboard=!0),super.doAction(e)}}const aU=".dxbl-btn:not([disabled])",lU=".dxbl-btn-dropdown-content-template";class AU extends Kx{constructor(e,t){super(e,t),this._timeoutId=null,this.boundWaitForCustomSubMenuInitialization=this.waitForCustomSubMenuInitialization.bind(this),this.verticalOrientation=t.verticalOrientation}queryItems(){return[...this.targetElement.querySelectorAll(aU)]}handleKeyDownCore(e){switch(Be.KeyUtils.getEventKeyCode(e)){case Be.KeyCode.Home:return this.moveToFirstItem(),!0;case Be.KeyCode.End:return this.moveToLastItem(),!0;case Be.KeyCode.Up:return!(!e.altKey||e.shiftKey)&&this.performCloseShortcutEvent(e);case Be.KeyCode.Down:return!(!e.altKey||e.shiftKey)&&this.performOpenShortcutEvent(e);case Be.KeyCode.Tab:return this.handleTabKeyDown(e);case Be.KeyCode.Enter:case Be.KeyCode.Space:return this.performOpenShortcutEvent(e);default:return!1}}performOpenShortcutEvent(e){return!!this.hasMenu()&&(this.performShortcutEvent(e),this.focusSubMenuItemAsync(Fx.First),!0)}performCloseShortcutEvent(e){return this.isMenuExpanded()&&(this.allowRestoreFocus(),this.performShortcutEvent(e)),!0}handleTabKeyDown(e){return this.performCloseShortcutEvent(e),e.shiftKey?this.selectedItemIndex>0?this.moveToPrevItem(!1):this.leaveBackward():this.selectedItemIndex<this.itemCount-1?this.moveToNextItem(!1):this.leaveForward(),!0}onSubMenuShown(e){const t=e.targetElement.querySelector(Pi);t&&!t.initialized?this.waitForCustomSubMenuInitialization(t,(()=>super.onSubMenuShown(e))):super.onSubMenuShown(e),this.disallowRestoreFocus()}onSubMenuClosed(e){this.shouldRestoreFocus=this.shouldRestoreFocus&&this.allowedToRestoreFocus,super.onSubMenuClosed(e)}waitForCustomSubMenuInitialization(e,t){this._timeoutId&&clearTimeout(this._timeoutId),e.initialized?t():this._timeoutId=setTimeout((()=>this.boundWaitForCustomSubMenuInitialization(e,t)),50)}createPopupStrategy(e,t){return new oU(e,t,this,[aU,lU].join(","))}createModalStrategy(e,t){return new SF(e,t,this,[aU,lU].join(","))}}const dU="data-dxbutton-id";let cU=class extends Bs{constructor(){super(...arguments),this.verticalOrientation=!1}connectedOrContentChanged(){this.initializeKeyboardNavigator(),super.connectedOrContentChanged()}disconnectedCallback(){delete this._keyboardNavigator,super.disconnectedCallback()}initializeKeyboardNavigator(){this._keyboardNavigator=this.querySelector(`:scope > ${Pi}`),this._keyboardNavigator&&"initialized"in this._keyboardNavigator&&!this._keyboardNavigator.initialized&&this._keyboardNavigator.initialize(this,new AU(this._keyboardNavigator,this))}};C([ln({attribute:"vertical-orientation",type:Boolean})],cU.prototype,"verticalOrientation",void 0),cU=C([rn("dxbl-button")],cU),customElements.define("dxbl-button-dropdown-item",class extends px{constructor(){super(...arguments),this.boundOnButtonClick=this.onButtonClick.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.boundOnButtonClick)}disconnectedCallback(){this.removeEventListener("click",this.boundOnButtonClick),super.disconnectedCallback()}canHandlePointerDown(e){return K.containsInComposedPath(e,this)}onButtonClick(e){if(null===this.getAttribute("submit-form-on-click"))return;const t=this.getAttribute(dU);if(t){const e=document.querySelector(`[${dU}=${t}]`);if(e){const t=document.createElement("input");t.type="submit",t.hidden=!0,e.appendChild(t),t.click(),e.removeChild(t)}}}});class hU extends CustomEvent{constructor(e,t,i){super(hU.eventName,{detail:new uU(e,t,i),bubbles:!0,composed:!0,cancelable:!0})}}hU.eventName=nl+".oncolorchanged";class uU{constructor(e,t,i){this.Red=e,this.Green=t,this.Blue=i}}mt.register(hU.eventName,(e=>e.detail));class pU{static rgbToHtml(e){return"rgb("+e.red+", "+e.green+", "+e.blue+")"}static hsbToHtml(e){return this.rgbToHtml(this.hsbToRgb(e))}static htmlToHsb(e){return this.rgbToHsb(this.htmlToRgb(e))}static htmlToRgb(e){const t=(e=e.replace("rgb","").replace("(","").replace(")","")).split(",").map((e=>parseInt(e.trim())));return{red:t[0],green:t[1],blue:t[2]}}static rgbToHsb(e){const t=e.red/255,i=e.green/255,n=e.blue/255,s=Math.max(t,i,n),r=s-Math.min(t,i,n);let o;o=0===r?0:s===t?(i-n)/r%6:s===i?(n-t)/r+2:(t-i)/r+4,o*=60,o<0&&(o+=360);let a,l=s;return a=0===l?0:r/l,a*=100,l*=100,{hue:o,saturation:a,brightness:l}}static hsbToRgb(e){const t=Math.floor(e.hue/60),i=(pU.maxHsb.saturation-e.saturation)*e.brightness/pU.maxHsb.brightness,n=e.hue%60*(e.brightness-i)/60,s=i+n,r=e.brightness-n;let o={red:0,green:0,blue:0};switch(t){case 0:o={red:e.brightness,green:s,blue:i};break;case 1:o={red:r,green:e.brightness,blue:i};break;case 2:o={red:i,green:e.brightness,blue:s};break;case 3:o={red:i,green:r,blue:e.brightness};break;case 4:o={red:s,green:i,blue:e.brightness};break;case 5:o={red:e.brightness,green:i,blue:r}}return o.red=Math.round(2.55*o.red),o.green=Math.round(2.55*o.green),o.blue=Math.round(2.55*o.blue),o}}pU.maxHsb={hue:359,saturation:100,brightness:100};class mU{}mU.Prefix="dxbl-blazor-colorpicker",mU.HueAreaIndicator=mU.Prefix+"-hue-selection-rect",mU.SaturationBrightnessAreaIndicator=mU.Prefix+"-color-selection";class gU{}gU.ColorAttribute="data-color";class CU extends de{constructor(){super(),this._onColorChanged=null}get indicator(){return this.querySelector(this.getIndicatorCssCelector())}get _indicatorSize(){return{width:this.indicator.offsetWidth,height:this.indicator.offsetHeight}}get _containerSize(){return{width:this.offsetWidth,height:this.offsetHeight}}getIndicatorHeight(){return this._indicatorSize.height}getIndicatorWidth(){return this._indicatorSize.width}getContainerHeight(){return this._containerSize.height}getContainerWidth(){return this._containerSize.width}connectedCallback(){super.connectedCallback(),this.initializeEvents()}disposeComponent(){wi(this),super.disposeComponent()}setColorChangedCallback(e){this._onColorChanged=e}raiseColorChanged(e){null!=this._onColorChanged&&this._onColorChanged(e)}initializeEvents(){const e=e=>{TI.TouchUtils.isTouchEvent(e)&&e.preventDefault(),this.addEventListener(TI.TouchUtils.touchMouseUpEventName,t),this.addEventListener(TI.TouchUtils.touchMouseMoveEventName,i),this.moveIndicator(e)},t=e=>{this.removeEventListener(TI.TouchUtils.touchMouseUpEventName,t),this.removeEventListener(TI.TouchUtils.touchMouseMoveEventName,i)},i=e=>{TI.TouchUtils.isTouchEvent(e)&&e.preventDefault(),HI.EvtUtils.isLeftButtonPressed(e)&&this.moveIndicator(e)};this.addEventListener(TI.TouchUtils.touchMouseDownEventName,e),yi(this,(()=>{this.removeEventListener(TI.TouchUtils.touchMouseDownEventName,e),this.removeEventListener(TI.TouchUtils.touchMouseUpEventName,t),this.removeEventListener(TI.TouchUtils.touchMouseMoveEventName,i)}))}updateBackground(e){}}customElements.define(rl,class extends CU{getIndicatorCssCelector(){return`.${mU.SaturationBrightnessAreaIndicator}`}moveIndicator(e){let t=It(HI.EvtUtils.getEventX(e),this.indicator,!0),i=It(HI.EvtUtils.getEventY(e),this.indicator,!1);t=Math.min(this.getContainerWidth(),Math.max(0,t))-this.getIndicatorWidth()/2,i=Math.min(this.getContainerHeight(),Math.max(0,i))-this.getIndicatorHeight()/2,this.indicator.style.top=i+"px",this.indicator.style.left=t+"px";const n={hue:pU.maxHsb.hue,saturation:this.getSaturationValue(t),brightness:this.getBrightnessValue(i)};this.raiseColorChanged(n)}updateColor(e){this.setIndicatorPosition(e),this.updateBackground(e)}updateBackground(e){this.style.backgroundColor=pU.hsbToHtml({hue:e.hue,saturation:pU.maxHsb.saturation,brightness:pU.maxHsb.brightness}),this.indicator.style.backgroundColor=pU.hsbToHtml(e)}setIndicatorPosition(e){this.indicator.style.left=this.convertSaturationToXCoordinate(e.saturation)+"px",this.indicator.style.top=this.convertBrightnessToYCoordinate(e.brightness)+"px"}convertSaturationToXCoordinate(e){const t=this.getContainerWidth()*e/pU.maxHsb.saturation-this.getIndicatorWidth()/2;return Math.floor(t)}convertBrightnessToYCoordinate(e){const t=this.getContainerHeight(),i=t-t*e/pU.maxHsb.brightness-this.getIndicatorHeight()/2;return Math.floor(i)}getSaturationValue(e){const t=(e+this.getIndicatorWidth()/2)*pU.maxHsb.saturation/this.getContainerWidth();return Math.floor(t)}getBrightnessValue(e){const t=pU.maxHsb.brightness-(e+this.getIndicatorHeight()/2)*pU.maxHsb.brightness/this.getContainerHeight();return Math.floor(t)}}),customElements.define(sl,class extends CU{getIndicatorCssCelector(){return`.${mU.HueAreaIndicator}`}moveIndicator(e){let t=It(HI.EvtUtils.getEventY(e),this.indicator,!1);t=Math.min(this.getContainerHeight()-Math.round(this.getIndicatorHeight()/2),Math.max(0-this.getIndicatorHeight()/2,t)),this.indicator.style.top=t+"px";const i={hue:this.getHueValue(t),saturation:pU.maxHsb.saturation,brightness:pU.maxHsb.brightness};this.indicator.style.backgroundColor=pU.hsbToHtml(i),this.raiseColorChanged(i)}updateColor(e){this.indicator.style.top=this.calculateHueIndicatorPosition(e.hue)+"px",this.indicator.style.backgroundColor=pU.hsbToHtml({hue:e.hue,saturation:pU.maxHsb.saturation,brightness:pU.maxHsb.brightness})}calculateHueIndicatorPosition(e){const t=this.getContainerHeight(),i=this.getIndicatorHeight();let n=t-t*e/pU.maxHsb.hue;const s=Math.round(i/2);return n=Math.min(t-s,Math.max(0-i/2,n-s)),Math.round(n)}getHueValue(e){let t=(e+=e<0?this.getIndicatorHeight()/2:Math.round(this.getIndicatorHeight()/2))*pU.maxHsb.hue/this.getContainerHeight();return t=pU.maxHsb.hue-t,Math.round(t)}}),customElements.define(nl,class extends de{constructor(){super(...arguments),this._hueArea=null,this._colorArea=null,this._color=pU.maxHsb}initializeComponent(){if(this._hueArea=this.querySelector(sl),this._colorArea=this.querySelector(rl),!this._hueArea||!this._colorArea)throw new Error("ColorAreas elements not found");this.setupHueArea(),this.setupSaturationBrightnessArea(),this.setupColorValue()}setupHueArea(){var e;null===(e=this._hueArea)||void 0===e||e.setColorChangedCallback((e=>{if(this._color.hue=e.hue,null==this._colorArea)return;this._colorArea.updateBackground(this._color);const t=pU.hsbToRgb(this._color);this.raiseOnColorChanged(t.red,t.green,t.blue)}))}setupSaturationBrightnessArea(){var e;null===(e=this._colorArea)||void 0===e||e.setColorChangedCallback((e=>{this._color.saturation=e.saturation,this._color.brightness=e.brightness;const t=pU.hsbToRgb(this._color);null!=this._colorArea&&(this._colorArea.indicator.style.backgroundColor=pU.rgbToHtml(t),this.raiseOnColorChanged(t.red,t.green,t.blue))}))}setupColorValue(){const e=this.getAttribute(gU.ColorAttribute);if(null==e)return;const t=pU.htmlToHsb(e);this.updateColor(t)}updateColor(e){var t,i;this._color=e,null===(t=this._hueArea)||void 0===t||t.updateColor(e),null===(i=this._colorArea)||void 0===i||i.updateColor(e)}raiseOnColorChanged(e,t,i){this.dispatchEvent(new hU(e,t,i))}});const fU=document.createElement("style");fU.type="text/css";class vU extends HTMLElement{constructor(){super(),this.resourceStyleElement=fU.cloneNode()}static get observedAttributes(){return["css"]}attributeChangedCallback(e,t,i){"css"===e&&async function(e,t){e&&await jt((()=>t.innerHTML=e))}(i,this.resourceStyleElement)}connectedCallback(){this.resourceStyleElement.isConnected||document.head.appendChild(this.resourceStyleElement)}disconnectedCallback(){this.resourceStyleElement.isConnected&&this.resourceStyleElement.remove()}}iD(customElements,"dxbl-dynamic-stylesheet",vU);const bU=[],wU=["src"],yU=document.createElement("DIV");yU.style.display="none",requestAnimationFrame((()=>{document.body.appendChild(yU)}));class BU extends HTMLElement{connectedCallback(){this.style.display="none"}static get observedAttributes(){return wU}attributeChangedCallback(e,t,i){bU.includes(i)||(bU.push(i),"src"===e&&BU.loadAndEmbedSpriteAsync(i).then((e=>{})).catch((e=>{})))}static async loadAndEmbedSpriteAsync(e){const t=await fetch(e).then((e=>e.text())),i=document.createElement("DIV");i.innerHTML=t,yU.appendChild(i)}}var EU,IU,SU;iD(customElements,"dxbl-webview-sprite-preloader",BU),function(e){e.Default="dxbl-adaptive-group-state-default",e.Text="dxbl-adaptive-group-state-text",e.NoText="dxbl-adaptive-group-state-no-text",e.Collapsed="dxbl-adaptive-group-state-collapsed"}(EU||(EU={})),function(e){e.Default="dxbl-adaptive-item-state-default",e.NoText="dxbl-adaptive-item-state-no-text",e.Collapsed="dxbl-adaptive-item-state-collapsed"}(IU||(IU={})),function(e){e.Default="dxbl-adaptive-ellipsis-state-default",e.Hidden="dxbl-toolbar-hidden-item"}(SU||(SU={}));const xU=Object.values(EU).map((e=>e));var DU;Object.values(IU).map((e=>e)),Object.values(SU).map((e=>e)),function(e){e.Default="dxbl-adaptive-state-default",e.FullSequential="dxbl-adaptive-state-full-seq",e.NoText="dxbl-adaptive-state-no-text",e.NoTextSequential="dxbl-adaptive-state-no-text-seq",e.Group="dxbl-adaptive-state-group-text",e.GroupNoText="dxbl-adaptive-state-grouping-no-text"}(DU||(DU={}));const FU=Object.values(DU).map((e=>e));class TU{}TU.Adaptive=he.Prefix+"-adaptive",TU.AdaptiveContainer=TU.Adaptive+"-container",TU.AdaptiveContainerContent=TU.AdaptiveContainer+"-content",TU.AdaptiveGroup=TU.Adaptive+"-group",TU.AdaptiveItem=TU.Adaptive+"-item",TU.EllipsisGroup=TU.Adaptive+"-ellipsis-group",TU.EllipsisGroupText=TU.EllipsisGroup+"-text",TU.EllipsisGroupNoText=TU.EllipsisGroup+"-no-text",TU.ItemCollapsed=TU.AdaptiveItem+"-collapsed",TU.ItemNoText=TU.AdaptiveItem+"-no-text",TU.VirtualContainer=TU.Adaptive+"-virtual-container",TU.VirtualTestContainer=TU.VirtualContainer+"-test";const HU=[TU.EllipsisGroupNoText,TU.EllipsisGroupText,SU.Default,SU.Hidden];class UU{renderContainerDefaultState(e){var t,i,n;for(const t of e.groups)this.resetGroupToDefault(t),this.resetItems(t.items),this.expandGroup(t);e.root.classList.remove(...FU),null===(t=e.ellipsis)||void 0===t||t.classList.remove(...HU),null===(i=e.ellipsis)||void 0===i||i.classList.add(SU.Hidden),null===(n=e.separator)||void 0===n||n.classList.add(KS.ToolbarHiddenItem)}renderContainerNoTextState(e,t){t.forEach((t=>{const i=e.root.querySelector(`#${t}`);i&&i.classList.add(IU.NoText)}))}renderGroupState(e,t){const i=e.element;i&&(i.classList.add(t),e.items.forEach((e=>this.hideElement(e))),this.showEllipsis(e))}renderContainerCollapsedState(e,t){if(t.forEach((t=>{const i=e.root.querySelector(`#${t}`);i&&i.classList.add(IU.Collapsed)})),t.size>0){const i=e.groups.filter((e=>e.items.some((e=>t.has(e.id)))));i.forEach((e=>this.showEllipsis(e)))}}showGlobalEllipsis(e){var t,i,n;null===(t=e.ellipsis)||void 0===t||t.classList.remove(...HU),null===(i=e.ellipsis)||void 0===i||i.classList.remove(SU.Hidden),null===(n=e.separator)||void 0===n||n.classList.remove(KS.ToolbarHiddenItem)}hideGlobalEllipsis(e){var t,i,n;null===(t=e.ellipsis)||void 0===t||t.classList.remove(...HU),null===(i=e.ellipsis)||void 0===i||i.classList.add(SU.Hidden),null===(n=e.separator)||void 0===n||n.classList.add(KS.ToolbarHiddenItem)}collapseGroup(e){e.items.forEach((e=>this.hideElement(e))),this.showEllipsis(e)}expandGroup(e){e.items.forEach((e=>this.showElement(e))),this.hideEllipsis(e)}resetGroupToDefault(e){e.element.classList.remove(...xU),e.element.classList.remove(...FU),e.ellipsis.classList.remove(...HU)}resetItems(e){e.forEach((e=>{e.classList.remove(TU.ItemNoText,TU.ItemCollapsed,IU.NoText.toString(),IU.Collapsed.toString(),"dxbl-toolbar-item-collapsed","dxbl-toolbar-hidden-item"),e.classList.add(IU.Default)}))}showEllipsis(e){e.ellipsis.classList.remove(KS.ToolbarHiddenItem),e.ellipsis.classList.add(SU.Default)}hideEllipsis(e){e.ellipsis.classList.remove(SU.Default),e.ellipsis.classList.add(KS.ToolbarHiddenItem)}showElement(e){e.classList.remove(TU.ItemCollapsed)}hideElement(e){e.classList.add(TU.ItemCollapsed)}}class PU{createDefaultState(e){return{layout:DU.Default,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,state:EU.Default,order:e.order,items:e.items.map((t=>({id:t.id,state:IU.Default,groupId:e.element.id}))),ellipsis:{id:e.ellipsis.id,state:SU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:SU.Hidden}}}createNoTextState(e,t,i=new Set,n=EU.Default){return{layout:DU.NoText,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:i.has(e.element.id)?EU.Text:EU.Default,items:e.items.map((n=>{return{id:n.id,groupId:e.element.id,state:(s=n.id,r=e.element.id,i.has(r)?IU.Collapsed:t.has(s)?IU.NoText:IU.Default)};var s,r})),ellipsis:{id:e.ellipsis.id,state:i.has(e.element.id)?SU.Default:SU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:function(t){const i=e.groups.filter((e=>t.has(e.element.id)));return i.flatMap((e=>e.blocks)).some((e=>e.collapseInGlobalGroup))}(i)?SU.Default:SU.Hidden}}}createCollapseState(e,t,i,n){function s(e){const n=e.blocks.filter((e=>!e.collapseInGlobalGroup)).map((e=>e.id)).some((e=>t.has(e))),s=i.has(e.element.id);return n||s}return{layout:DU.NoTextSequential,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:i.has(e.element.id)?EU.Text:EU.Default,items:e.items.map((s=>{return{id:s.id,groupId:e.element.id,state:(r=s.id,o=e.element.id,i.has(o)||t.has(r)?IU.Collapsed:n)};var r,o})),ellipsis:{id:e.ellipsis.id,state:s(e)?SU.Default:SU.Hidden}}))),ellipsis:{id:e.ellipsis.id,state:e.groups.flatMap((e=>e.blocks)).filter((e=>t.has(e.id)||i.has(e.groupId))).some((e=>e.collapseInGlobalGroup))?SU.Default:SU.Hidden}}}createGroupNoTextState(e,t){return{layout:DU.GroupNoText,width:e.content.offsetWidth,groups:e.groups.map((e=>({id:e.element.id,order:e.order,state:t.has(e.element.id)?EU.NoText:EU.Text,items:e.items.map((t=>({id:t.id,groupId:e.element.id,state:IU.Collapsed}))),ellipsis:{id:e.ellipsis.id,state:SU.Default}}))),ellipsis:{id:e.ellipsis.id,state:e.groups.flatMap((e=>e.blocks)).some((e=>e.collapseInGlobalGroup))?SU.Default:SU.Hidden}}}}class QU{constructor(){this.renderer=new UU,this.factory=new PU}getStates(e,t,i){const n=[],s=this.getBlocks(e),r=[];if(i.toGroups&&r.push(...this.getGroupLimits(e)),n.push(...this.getDefaultState(e,r)),i.toIcons&&n.push(...this.getNoTextStates(e,s,r)),i.hideItems){const t=n.filter((e=>e.layout===DU.NoText)).sort(((e,t)=>e.width-t.width)).map((e=>e.width))[0];n.push(...this.getCollapsedStates(e,s,r,i.toIcons?IU.NoText:IU.Default,t))}return i.toGroups&&n.push(...this.getGroupNoTextStates(e,n)),n}getBlocks(e){const t=e.groups.flatMap((e=>e.blocks.reverse()));return t.sort(((e,t)=>t.adaptivePriority-e.adaptivePriority))}getNoTextStates(e,t,i){const n=[],s=new Set,r=new Set;this.renderer.hideGlobalEllipsis(e);for(const o of t){s.add(o.id),this.renderer.renderContainerNoTextState(e,s);const t=e.groups.find((e=>e.element.id===o.groupId)),a=i.find((e=>e.groupId===t.element.id));if(a&&!this.compareGroupWidth(t,a)){if(r.has(a.groupId))continue;this.renderer.renderGroupState(t,EU.Text),r.add(a.groupId)}n.push(this.factory.createNoTextState(e,s,r))}return n}getGroupLimits(e){const t=[];this.renderer.renderContainerDefaultState(e);for(const i of e.groups)this.renderer.renderGroupState(i,EU.Text),t.push({groupId:i.element.id,width:i.element.offsetWidth});return t}getCollapsedStates(e,t,i,n,s){const r=[],o=new Set,a=new Set;let l=!1;for(const A of t){if(o.add(A.id),A.collapseInGlobalGroup&&!l&&(this.renderer.showGlobalEllipsis(e),l=!0),this.renderer.renderContainerCollapsedState(e,o),e.content.offsetWidth>s)continue;const t=e.groups.find((e=>e.element.id===A.groupId)),d=i.find((e=>e.groupId===t.element.id));if(d&&!this.compareGroupWidth(t,d)){if(a.has(d.groupId))continue;this.renderer.renderGroupState(t,EU.Text),a.add(d.groupId)}r.push(this.factory.createCollapseState(e,o,a,n))}return r}getGroupNoTextStates(e,t){const i=[],n=t.filter((e=>e.groups.every((e=>e.state===EU.Text)))),s=new Set,r=new Set(n.flatMap((e=>e.groups)).sort(((e,t)=>e.order-t.order)).map((e=>e.id)));for(const t of r){const n=e.groups.find((e=>e.element.id===t));n.hasIcon&&(s.add(t),this.renderer.renderGroupState(n,EU.NoText),i.push(this.factory.createGroupNoTextState(e,s)))}return i}compareGroupWidth(e,t){return e.element.offsetWidth>t.width}getDefaultState(e,t){this.renderer.renderContainerDefaultState(e);for(const i of e.groups){const e=t.find((e=>e.groupId===i.element.id));e&&!this.compareGroupWidth(i,e)&&this.renderer.renderGroupState(i,EU.Text)}return[this.factory.createDefaultState(e)]}}const NU=Object.values(EU).map((e=>e)),RU=Object.values(IU).map((e=>e)),LU=Object.values(SU).map((e=>e));class MU{constructor(){this.appliedState=null,this.states=[],this.currentCheckpoint=0,this.calculator=new QU,this.containerItemsUpdate=null}async configure(e,t,i){const n=this.copyContainer(e),s=this.createAdaptiveContainer(n,t);0!==s.content.offsetWidth&&(this.states=this.calculator.getStates(s,t,i),s.root.remove(),await this.adjust(e,t))}async adjust(e,t){const i=this.createAdaptiveContainer(e,t),n=i.root.offsetWidth,s=this.states.map((e=>e.width)).sort(((e,t)=>t-e)),r=s.find((e=>e<n));if(this.appliedState&&this.currentCheckpoint&&this.currentCheckpoint===r)return;e.querySelector(`.${TU.AdaptiveContainerContent}`);const o=this.states.filter((e=>e.width===r))[0];o&&(this.currentCheckpoint=r,await this.waitForAnimationFrame((()=>{if(this.applyNewState(i,o),this.containerItemsUpdate&&o.groups.length>0){const e=o.groups.map((e=>e.items)).reduce(((e,t)=>e.concat(t))).map((e=>({Id:e.id,TextHidden:e.state===IU.NoText,IsVisible:e.state!==IU.Collapsed})));this.containerItemsUpdate(e)}})))}applyNewState(e,t){for(const i of t.groups)this.applyGroupState(e,i);t.ellipsis&&this.applyEllipsisState(e,t.ellipsis),this.appliedState=t}waitForAnimationFrame(e){return new Promise((t=>{requestAnimationFrame((i=>{e(),t(i)}))}))}applyGroupState(e,t){const i=e.root.querySelector(`#${t.id}`);if(i){i.classList.remove(...NU),i.classList.add(t.state),i.dispatchEvent(new pF(t.state.toString()));for(const i of t.items)this.applyItemState(e,i);t.ellipsis&&this.applyEllipsisState(e,t.ellipsis)}}applyItemState(e,t){const i=e.root.querySelector(`#${t.id}`);i&&(i.classList.remove(...RU),i.classList.add(t.state))}applyEllipsisState(e,t){const i=e.root.querySelector(`#${t.id}`);i&&(i.classList.remove(...LU),i.classList.add(t.state))}copyContainer(e){const t=e.cloneNode(!0);t.classList.add(TU.VirtualContainer),t.style.visibility="hidden",t.style.position="absolute";return e.parentElement.appendChild(t),t}createAdaptiveContainer(e,t){const i=e.querySelector(`.${TU.AdaptiveContainerContent}`),n=i.querySelectorAll(`.${TU.AdaptiveGroup}`);let s=0;const r=[...n].reverse().map((e=>{s++;const i=e.querySelectorAll(t),n=e;return{element:e,order:s,hasText:n.hasAttribute("has-adaptive-text"),hasIcon:n.hasAttribute("has-adaptive-icon"),items:[...i],blocks:[...i].map((t=>({id:t.id,groupOrder:s,groupId:e.id,collapsed:!1,noText:!1,adaptivePriority:parseInt(t.getAttribute("adaptive-priority")),collapseInGlobalGroup:t.hasAttribute("collapse-in-global-group")}))),ellipsis:e.querySelector(`.${KS.ButtonEllipsis}`)}}));return{root:e,content:i,groups:r,separator:e.querySelector(".dxbl-ribbon-general-separator"),ellipsis:e.querySelector(".dxbl-toolbar-btn-ellipsis-general")}}}class kU{constructor(e){this.id=e}}class KU extends CustomEvent{constructor(e){super(KU.eventName,{detail:new kU(e),bubbles:!0})}}KU.eventName="dxbl-ribbon-item.resized";class OU{constructor(e,t){this.id=e,this.adaptivePriority=t}}class _U extends CustomEvent{constructor(e,t){super(_U.eventName,{detail:new OU(e,t),bubbles:!0,composed:!0})}}_U.eventName="dxbl-ribbon-item.updated";let VU=class extends Bs{constructor(){super(...arguments),this.containerResizeObserver=null,this.contentResizeObserver=null,this.isAdaptivityEnabled=!1,this.virtualContainer=new MU,this.itemResizedHandler=this.itemResized.bind(this),this.adaptiveItemUpdatedHandler=this.adaptiveItemUpdated.bind(this),this.initialized=!1,this.collapseToIcons=!1,this.canHideItems=!1,this.collapseToGroups=!1,this.minRootItemCount=0,this.itemSelector=".dxbl-adaptive-item:not(.dxbl-toolbar-btn-ellipsis)"}get settings(){return{toIcons:this.collapseToIcons,toGroups:this.collapseToGroups,hideItems:this.canHideItems}}firstUpdated(){this.tryAdapt()}updated(e){super.updated(e),(e.has("collapseToIcons")||e.has("canHideItems")||e.has("collapseToGroups"))&&this.configure()}connectedCallback(){super.connectedCallback(),this.addEventListener(KU.eventName,this.itemResizedHandler),this.addEventListener(_U.eventName,this.adaptiveItemUpdatedHandler),this.virtualContainer.containerItemsUpdate=e=>{this.dispatchEvent(new hF(Array.from(e)))}}disconnectedCallback(){var e;super.disconnectedCallback(),this.removeEventListener(KU.eventName,this.itemResizedHandler),this.removeEventListener(_U.eventName,this.adaptiveItemUpdatedHandler),null===(e=this.containerResizeObserver)||void 0===e||e.unobserve(this)}tryAdapt(){this.classList.contains(TU.VirtualContainer)||(this.containerResizeObserver=new ResizeObserver((()=>new Promise((()=>this.adjust())))),this.containerResizeObserver.observe(this),this.contentResizeObserver=new ResizeObserver((()=>{0!==this.offsetWidth&&this.configure()})),this.contentResizeObserver.observe(this.querySelector(`.${TU.AdaptiveContainerContent}`)),this.initialized=!0,this.configure())}async configure(){this.initialized&&await this.virtualContainer.configure(this,this.itemSelector,this.settings)}async adjust(){await this.virtualContainer.adjust(this,this.itemSelector)}itemResized(e){super.getUpdateComplete().then((()=>this.virtualContainer.configure(this,this.itemSelector,this.settings)))}adaptiveItemUpdated(e){}};VU.shadowRootOptions={...ms.shadowRootOptions,mode:"open"},C([ln({attribute:"collapse-to-icons",type:Boolean})],VU.prototype,"collapseToIcons",void 0),C([ln({attribute:"can-hide-items",type:Boolean})],VU.prototype,"canHideItems",void 0),C([ln({attribute:"collapse-to-groups",type:Boolean})],VU.prototype,"collapseToGroups",void 0),C([ln({attribute:"min-root-item-count",type:Number})],VU.prototype,"minRootItemCount",void 0),VU=C([rn("dxbl-adaptive-container")],VU);const zU="dxbl-filter-builder",WU=`${zU}-node`,$U=`${WU}-value`,GU=`${$U}-btn`,qU="index",XU="dxbl-filter-builder";class YU extends kd{constructor(){super(YU.eventName)}}YU.eventName=`${XU}.close-editor`;class JU{constructor(e,t){this.nodeIndex=e,this.nodeValueIndex=t}}class jU extends CustomEvent{constructor(e,t){super(jU.eventName,{detail:new JU(e,t),bubbles:!0,composed:!0,cancelable:!0})}}jU.eventName=`${XU}.show-editor`,mt.register(YU.eventName,(e=>e.detail)),mt.register(jU.eventName,(e=>e.detail));class ZU extends qa{onDocumentFocusOut(e){const t=e.target;if(!this.filterBuilder.isEditing||t.classList.contains(GU))return;const i=this.getClosestElement(t,$U,!0);if(null==i)return;const n=this.getClosestElement(e.relatedTarget,$U,!0)||this.getClosestElement(this.activePopup,$U,!0);if(null==n)return void this.closeEditor();const s=this.getNodeValueElementIndexes(i),r=this.getNodeValueElementIndexes(n);r.nodeIndex===s.nodeIndex&&r.nodeValueIndex==r.nodeValueIndex||this.closeEditor()}isPopupFromEditor(e){return this.filterBuilder.isEditing&&null!==this.getClosestElement(e,$U,!0)}closeEditor(){this.filterBuilder.dispatchEvent(new YU)}onDocumentClick(e){const t=this.getClosestElement(e.target,$U,!0);if(null==t)return;const i=this.getNodeValueElementIndexes(t);this.openEditor(i)}openEditor(e){null!==e&&this.filterBuilder.dispatchEvent(new jU(e.nodeIndex,e.nodeValueIndex))}constructor(e){super(),this.boundOnDocumentClickHandler=this.onDocumentClick.bind(this),this.filterBuilder=e}initialize(){document.addEventListener("click",this.boundOnDocumentClickHandler),super.initialize()}dispose(){document.removeEventListener("click",this.boundOnDocumentClickHandler),super.dispose()}getClosestElement(e,t,i=!1){var n;if(!e)return null;let s=null;if(this.filterBuilder.contains(e)&&(s=e.closest(`.${t}`)),!s&&i){const i=Oa.getPortalFrom(e);i&&this.filterBuilder.contains(i)&&(s=null!==(n=i.closest(`.${t}`))&&void 0!==n?n:null)}return s}getNodeValueElementIndexes(e){const t=parseInt(e.getAttribute(qU)||""),i=this.getClosestElement(e,WU);if(null===i)return{nodeIndex:null,nodeValueIndex:null};const n=parseInt(i.getAttribute(qU)||"");return{nodeIndex:isNaN(n)?null:n,nodeValueIndex:isNaN(t)?null:t}}}let eP=class extends Bs{constructor(){super(),this.isEditing=!1,this.editorManager=new ZU(this)}connectedCallback(){this.editorManager.initialize(),super.connectedCallback()}disconnectedCallback(){this.editorManager.dispose(),super.disconnectedCallback()}};C([ln({type:Boolean,attribute:"is-editing"})],eP.prototype,"isEditing",void 0),eP=C([rn(zU)],eP);const tP="dxbl-stylesheet-warning";let iP=class extends bs{render(){return Xn`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12ZM10 18C10 16.8954 10.8954 16 12 16C13.1046 16 14 16.8954 14 18C14 19.1046 13.1046 20 12 20C10.8954 20 10 19.1046 10 18ZM12 4C10.8954 4 10 4.89543 10 6V12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12V6C14 4.89543 13.1046 4 12 4Z" fill="currentColor" fill-opacity="0.75"/>
            </svg>
            <div>
                <p>This application references outdated DevExpress Blazor CSS resources. Refer to the following article for upgrade instructions: <a href="https://supportcenter.devexpress.com/ticket/details/t1081253" target="_blank">The location of CSS resources for DevExpress Blazor controls has changed</a>.</p>
            </div>
        `}static isStyleSheetDeprecated(e){return null!==e&&/\/dx-blazor(\.bs5)*\.css$/gi.test(e)}static create(){return document.createElement(tP)}};iP.styles=Cn`
        :host {
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            left: 0px;
            bottom: 0px;
            width: 100%;
            padding: 1.5rem;
            color: var(--bs-dark, var(--dark, rgb(33, 37, 41)));
            background-color: var(--bs-warning, var(--warning, rgb(255, 193, 7)));
            z-index: 10000;
            font-size: 0.875rem;
        }
        :host > svg {
            flex: 0 0 auto;
            margin-right: 1rem;
        }
        p {
            margin: 0;
        }
        a, span {
            font-weight: 600;
        }
        a {
            color: inherit;
        }`,iP=C([rn(tP)],iP);const nP=-1e4;class sP{constructor(e,t){this._name=e,this._value=t}get name(){return this._name}get value(){return this._value}}class rP{constructor(e,t){this._selectors=e,this._rules=t}get selectors(){return this._selectors}get rules(){return this._rules}toString(e){let t=this.rules.join("\n");for(let i=0;i<e.length;i++){const n=e[i];t=t.replace(new RegExp(`${n.name}`,"g"),n.value)}return`${this.selectors.join(",\n")} { ${t} }`}}class oP{constructor(){this._rules=[],this._dummyContainer=null,this._ieCssStyles=[],this._styleElement=null,this.initialize()}get styleElement(){return null==this._styleElement&&(this._styleElement=this.createStyleElement()),this._styleElement}createStyleElement(){const e=document.createElement("STYLE");return document.head.appendChild(e),e}initialize(){this.initializeIeCssStyles(),this.initializeDummyElements(),this.initializeRules(),this.updateStyleElement(),this.removeDummyElements()}getAccentColor(){if(!this._dummyContainer)return"";const e=this._dummyContainer.querySelector("a");return window.getComputedStyle(e).color}getAccentShadowColor(e){const t=e.replace("rgb","").replace("(","").replace(")","").split(",").map((e=>e.trim()));t.push(".25");return`rgba(${t.join(",")})`}updateStyleElement(){h.Browser.IE?this.updateIEStyleElement():this.updateStyleElementCore()}updateIEStyleElement(){this._ieCssStyles&&(this.styleElement.innerHTML=this._ieCssStyles.map((e=>e.toString(this._rules))).join("\n"))}updateStyleElementCore(){if(this._rules){const e=this._rules.map((e=>`${e.name}: ${e.value}`)).join(";\n");this.styleElement.innerHTML=`:root{ ${e} }`}}update(){this._rules=[],this.initialize()}initializeIeCssStyles(){}initializeDummyElements(){}initializeRules(){}removeDummyElements(){}}class aP extends oP{initializeIeCssStyles(){this._ieCssStyles=[new rP(["th:focus .dxColumnResizeAnchor"],["box-shadow: 0 0 0 1px --dx-accent-shadow-color;"]),new rP(["th:focus .dxColumnResizeAnchor::after"],["border-left: 1px solid --dx-accent-color;","border-right: 1px solid --dx-accent-color;"]),new rP([".table th:focus:before"],["box-shadow: 0 0 0 2px --dx-accent-color;"])]}initializeDummyElements(){const e=this.createDummyContainer(),t=this.createDummyLink();e.appendChild(t),document.documentElement.appendChild(e),this._dummyContainer=e}createDummyContainer(){const e=document.createElement("DIV");return e.style.top=hi(nP),e.style.left=hi(nP),e.className="dxAIFE",e.setAttribute("aria-hidden","true"),e}createDummyLink(){const e=document.createElement("A");return e.innerHTML="test",e.href="javascript:;",e}removeDummyElements(){this._dummyContainer&&document.documentElement.removeChild(this._dummyContainer),this._dummyContainer=null}initializeRules(){const e=this.getAccentColor();this._rules&&(this._rules.push(new sP("--dx-accent-color",e)),this._rules.push(new sP("--dx-accent-shadow-color",this.getAccentShadowColor(e))))}}const lP={ensureAccentColorStyle:function(){window.dxAccentColorStyle||(window.dxAccentColorStyle=new aP)},showDeprecatedStyleSheetWarningIfNeeded:function(){const e=Array.from(document.styleSheets).map((e=>e.href)).filter(iP.isStyleSheetDeprecated);e.length>0&&e.forEach((e=>{const t=iP.create();document.body.appendChild(t)}))}};class AP{constructor(e,t,i){this.defaultValueSource=e,this.computedValueSource=t,this.valueDestination=i}}const dP=[new AP("--bs-body-bg","background-color","--dxbl-body-bg"),new AP("--bs-body-color","color","--dxbl-body-color")],cP=["--primary","--bs-primary"],hP=50,uP=200;function pP(){const e=document.body,t=window.getComputedStyle(e);dP.forEach((t=>{e.style.removeProperty(t.valueDestination)})),dP.filter((e=>!t.getPropertyValue(e.defaultValueSource))).forEach((i=>{e.style.setProperty(i.valueDestination,t.getPropertyValue(i.computedValueSource))}))}function mP(e,t){if(0===t)return e();const i=window.getComputedStyle(document.body),n=cP.map((e=>!!i.getPropertyValue(e))).reduce(((e,t)=>e||t),!1);if(n)return e();setTimeout((()=>mP(e,t-1)),uP)}function gP(){return new Promise(((e,t)=>{const i=document.createElement("IFRAME");i.style.cssText="position: absolute; display: none; top: -10000px; left: -10000px;",i.onload=()=>{e(i)},document.body.appendChild(i)}))}let CP=gP();function fP(e){return new Promise(((t,i)=>{(async function(){const e=await CP;return e.parentNode?e:(CP=gP(),await CP)})().then((i=>{const n=i.contentDocument,s=n.createElement("link");s.href=e,s.rel="stylesheet",s.onload=()=>{t(),s.remove()},s.onerror=()=>{t(),s.remove()},n.head.appendChild(s)}))}))}function vP(e){return new Promise(((t,i)=>{fP(e).then((()=>{mP(t,hP)}))}))}async function bP(e){if(e.nodeType===Node.ELEMENT_NODE){if("LINK"===e.tagName){const t=e;if("stylesheet"===t.rel)return await vP(t.href),!0}}return!1}function wP(e){bP(e).then((e=>{e&&pP()}))}const yP={initializeThemeCssRuntimeVariables:function(){const e=document.head;new MutationObserver(((e,t)=>{for(const t of e)"childList"===t.type&&t.addedNodes?t.addedNodes.forEach(wP):"attributes"===t.type&&"href"===t.attributeName&&wP(t.target)})).observe(e,{attributes:!0,childList:!0,subtree:!0}),Promise.all(Array.from(document.head.childNodes).map((e=>bP(e)))).then((()=>pP()))}};let BP;const EP={init:async function(e,t,i){return BP||(BP=Promise.resolve().then((()=>ZF))),(await BP).init(e,t,i)},dispose:async function(e){return BP||(BP=Promise.resolve().then((()=>ZF))),(await BP).dispose(e)}},IP=document.body,SP=new WeakMap,xP=new Map,DP={subtree:!0,childList:!0},FP=new MutationObserver((function(e){e.forEach(TP)}));function TP(e){e.removedNodes.forEach(HP)}function HP(e){const t=xP.get(e);xP.delete(e)&&(0===xP.size&&FP.disconnect(),t())}const UP="show",PP="\\s*matrix\\(\\s*"+[0,0,0,0,0,0].map((function(){return"(\\-?\\d+\\.?\\d*)"})).join(",\\s*")+"\\)\\s*",QP="above",NP="below",RP="above-inner",LP="below-inner",MP="top-sides",kP="bottom-sides",KP="outside-left",OP="outside-right",_P="left-sides",VP="right-sides",zP="resizing";function WP(e){let t=0;if(null!=e&&""!==e)try{const i=e.indexOf("px");i>-1&&(t=parseFloat(e.substr(0,i)))}catch(e){}return Math.ceil(t)}function $P(e,t,i){const n=e.getBoundingClientRect(),s={left:t(n.left),top:t(n.top),right:i(n.right),bottom:i(n.bottom)};return s.width=s.right-s.left,s.height=s.bottom-s.top,s}function GP(e){return $P(e,Math.floor,Math.ceil)}function qP(e){return $P(e,Math.ceil,Math.floor)}class XP{constructor(e,t){this.key=e,this.info=t}checkMargin(){return!0}allowScroll(){return"height"===this.info.size}canApplyToElement(e){return e.className.indexOf("dxbs-align-"+this.key)>-1}getRange(e){const t=this.getTargetBox(e)[this.info.to],i=t+this.info.sizeM*(e.elementBox[this.info.size]+(this.checkMargin()?e.margin:0));return{from:Math.min(t,i),to:Math.max(t,i),windowOverflow:0}}getTargetBox(e){return null}validate(e,t){const i=t[this.info.size];return e.windowOverflow=Math.abs(Math.min(0,e.from-i.from)+Math.min(0,i.to-e.to)),e.validTo=Math.min(e.to,i.to),e.validFrom=Math.max(e.from,i.from),0===e.windowOverflow}applyRange(e,t){t.appliedModifierKeys[this.info.size]=this.key;const i="width"===this.info.size?"left":"top",n=t.styles;let s=e.from;this.allowScroll()&&e.windowOverflow>0&&(t.limitBox.scroll.width||(t.limitBox.scroll.width=!0,t.limitBox.width.to-=vt()),t.isScrollable&&(n["max-height"]=t.height-e.windowOverflow+"px",t.width+=vt(),t.elementBox.width+=vt(),s=e.validFrom)),n.width=t.width+"px",this.checkMargin()&&(s+=Math.max(0,this.info.sizeM)*t.margin),t.elementBox[i]+=s,function(e,t,i){e.transform="matrix(1, 0, 0, 1, "+t+", "+i+")"}(n,t.elementBox.left,t.elementBox.top)}dockElementToTarget(e){const t=this.getRange(e);this.dockElementToTargetInternal(t,e)||this.applyRange(t,e)}dockElementToTargetInternal(e,t){}}class YP extends XP{constructor(e,t,i){super(e,t,i),this.oppositePointName=i||null}getTargetBox(e){return this.info.useInnerTargetBox?e.targetBox.inner:e.targetBox.outer}getOppositePoint(){return this._oppositePoint||(this._oppositePoint=jP.filter(function(e){return e.key===this.oppositePointName}.bind(this))[0])}dockElementToTargetInternal(e,t){if(this.validate(e,t.limitBox))this.applyRange(e,t);else{const i=this.getOppositePoint(),n=i.getRange(t);if(!(i.validate(n,t.limitBox)||n.windowOverflow<e.windowOverflow))return!1;i.applyRange(n,t)}return!0}}class JP extends XP{checkMargin(){return!1}getTargetBox(e){return e.targetBox.inner}dockElementToTargetInternal(e,t){return(this.info.isHorizontal&&t.fitHorizontally||!this.info.isHorizontal&&t.fitVertically)&&this.validate(e,t.limitBox),!1}validate(e,t){const i=Math.min(e.from,Math.max(0,e.to-t[this.info.size].to));return i>0&&(e.from-=i,e.to-=i),super.validate(e,t)}}const jP=[new YP(QP,{to:"top",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1},NP),new YP(NP,{to:"bottom",from:"top",size:"height",sizeM:1,isHorizontal:!1},QP),new YP(RP,{to:"top",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1,useInnerTargetBox:!1},LP),new YP(LP,{to:"bottom",from:"top",size:"height",sizeM:1,isHorizontal:!1,useInnerTargetBox:!0},RP),new JP(MP,{to:"top",from:"top",size:"height",sizeM:1,isHorizontal:!1}),new JP(kP,{to:"bottom",from:"bottom",size:"height",sizeM:-1,isHorizontal:!1}),new YP(KP,{to:"left",from:"right",size:"width",sizeM:-1,isHorizontal:!0},OP),new YP(OP,{to:"right",from:"left",size:"width",sizeM:1,isHorizontal:!0},KP),new JP(_P,{to:"left",from:"left",size:"width",sizeM:1,isHorizontal:!0}),new JP(VP,{to:"right",from:"right",size:"width",sizeM:-1,isHorizontal:!0})];function ZP(e,t,i){const n=Ut(),s=GP(e),r=qP(t),o=e.ownerDocument.documentElement,a={isScrollable:T.DomUtils.hasClassName(e,"dxbs-scrollable"),specifiedOffsetModifiers:jP.filter((function(t){return t.canApplyToElement(e)})),margin:WP(n.marginTop),width:i?Math.max(i.width,Math.ceil(e.offsetWidth)):Math.ceil(e.offsetWidth),height:Math.ceil(e.offsetHeight),appliedModifierKeys:{height:null,width:null},fitHorizontally:i.fitHorizontally,fitVertically:i.fitVertically},l=function(e){const t=new RegExp(PP).exec(e.transform);return t?{left:parseInt(t[5]),top:parseInt(t[6])}:{left:0,top:0}}(n),A=e.classList.contains(he.InvisibleOffScreen)||e[zP]?r.left:s.left;a.elementBox=function(e,t,i,n){return{left:e,top:t,right:e+i,bottom:t+n,width:i,height:n}}(l.left-A,l.top-s.top,s.width,s.height),a.targetBox={outer:GP(t),inner:qP(t)},a.limitBox={scroll:{width:o.clientWidth<window.innerWidth,height:o.clientHeight<window.innerHeight},width:{from:0,to:o.clientWidth},height:{from:0,to:o.clientHeight}},a.styles={};const d=(e.getAttribute("data-popup-align")||i&&i.align).split(/\s+/);return a.offsetModifiers=jP.filter((function(e){return d.some((function(t){return e.key===t}))})),a}function eQ(e,t,i,n){return jt((function(){const s=ZP(e,t,i);for(let e=0;e<s.offsetModifiers.length;e++)s.offsetModifiers[e].dockElementToTarget(s);var r;n(s),r=s.styles,oi(e,(function(e){if(null===e.inlineStyles)e.inlineStyles=r;else for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e.inlineStyles[t]=r[t])}))}))}function tQ(e,t,i,n=!0,s=!0,r=(e=>{})){null!==t&&(eQ(e,t,{align:i,fitHorizontally:n,fitVertically:s},r),li(e,UP,!0),ai(e))}function iQ(e){return parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))}function nQ(){return window.innerWidth-document.body.getBoundingClientRect().width}class sQ{constructor(e,t){this.x=e,this.y=t}clone(){return new sQ(this.x,this.y)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}equal(e){return this.x===e.x&&this.y===e.y}limitByRectangle(e){const t=Math.min(Math.max(this.y,e.top),e.bottom),i=Math.min(Math.max(this.x,e.left),e.right);return new sQ(i,t)}isInRect(e){return e.left<=this.x&&this.x<=e.right&&e.top<=this.y&&this.y<=e.bottom}}class rQ{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}clone(){return new rQ(this.x,this.y,this.width,this.height)}get left(){return this.x}get top(){return this.y}get bottom(){return this.y+this.height}get right(){return this.x+this.width}get size(){return new rQ(0,0,this.width,this.height)}get location(){return new rQ(this.x,this.y,0,0)}get center(){return new rQ(this.x+this.width/2,this.y+this.height/2,0,0)}get scalarLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}equal(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}limitByRectangle(e){const t=Math.min(Math.max(this.y,e.top),e.bottom),i=Math.min(Math.max(this.x,e.left),e.right);return new rQ(i,t,0,0)}}function oQ(e,t){const i=lQ(e),n=lQ(t);return new rQ(i.x+n.x,i.y+n.y,i.width+n.width,i.height+n.height)}function aQ(e,t){const i=lQ(e),n=lQ(t);return new rQ(i.x-n.x,i.y-n.y,i.width-n.width,i.height-n.height)}function lQ(e){if(e.getBoundingClientRect)return AQ(e);if(e===window)return{x:0,y:0,width:window.innerWidth,height:window.innerHeight};let t=0,i=0,n=0,s=0;return e.x&&(t=e.x),e.y&&(i=e.y),e.width&&(n=e.width),e.height&&(s=e.height),{x:t,y:i,width:n,height:s}}function AQ(e){const t=e.getBoundingClientRect();return!t||t.x&&t.y||(t.x=Math.min(t.left,t.right),t.y=Math.min(t.top,t.bottom)),new rQ(t.x,t.y,t.width,t.height)}function dQ(e){const t=AQ(e),i=window.getComputedStyle(e),n=cQ(i.marginLeft),s=cQ(i.marginRight),r=cQ(i.marginTop),o=cQ(i.marginBottom);return new rQ(t.x-n,t.y-r,t.width+n+s,t.height+r+o)}function cQ(e){return Math.max(parseFloat(e),0)}class hQ{constructor(e,t){this.element=e,this.getClientRect=t}get leftTopCorner(){const e=this;return new uQ(this.element,(function(t){return e.getClientRect(t)}),(function(e){return{x:0,y:0}}))}get leftBottomCorner(){const e=this;return new uQ(this.element,(function(t){const i=e.getClientRect(t);return new sQ(i.x,i.bottom)}),(function(t){const i=e.getClientRect(t);return new sQ(0,-i.height)}))}get rightTopCorner(){const e=this;return new uQ(this.element,(function(t){const i=e.getClientRect(t);return new sQ(i.right,i.y)}),(function(t){const i=e.getClientRect(t);return new sQ(-i.width,0)}))}get rightBottomCorner(){const e=this;return new uQ(this.element,(function(t){const i=e.getClientRect(t);return new sQ(i.right,i.bottom)}),(function(t){const i=e.getClientRect(t);return new sQ(-i.width,-i.height)}))}get center(){const e=this;return new uQ(this.element,(function(t){return e.getClientRect(t).center}))}}class uQ{constructor(e,t,i){this.element=e,this.getLocation=t,this.getDelta=i}get location(){return this.getLocation(this.element)}get delta(){return this.getDelta(this.element)}anchorTo(e){return new pQ(this,e)}}class pQ{constructor(e,t){this.point=e,this.anchor=t,this.events=new GI(this);const i=[];if(i.push([window,"resize"]),i.push([window,"scroll"]),this.containers=function(e,t){const i=[];for(;null!==e&&"BODY"!==e.tagName&&"#document"!==e.nodeName;)t(e)&&i.push(e),e=e.parentNode;return 0===i.length?null:i}(this.anchor.element.parentNode,this.isElementScrollable),this.containers&&this.containers.forEach((function(e){i.push([e,"scroll"])})),this.checkInCasesInt(i),"undefined"!=typeof ResizeObserver){const e=this;this.resizeObserver=new window.ResizeObserver((function(){e.update()})),this.resizeObserver.observe(this.anchor.element),this.resizeObserver.observe(this.point.element)}else this.resizeObserver=null;let n=this.point.element.offsetParent;this.notStaticParent=null===n?{x:0,y:0,scrollTop:0,scrollLeft:0}:pi(n)?n:window,this.update()}isElementScrollable(e){const t=window.getComputedStyle(e);return"static"===t.position&&("scroll"===t["overflow-x"]||"scroll"===t["overflow-y"]||"auto"===t["overflow-x"]||"auto"===t["overflow-y"])}update(){const e=this.notStaticParent===window?{x:window.scrollX,y:window.scrollY}:{x:this.notStaticParent.scrollLeft,y:this.notStaticParent.scrollTop},t=function(){const e=Array.from(arguments),t=[],i=[];e.forEach((function(e){"-"===e||"+"===e?t.push(e):i.push(e)}));const n=[];for(;i.length>0;)n.push(i.pop());for(;t.length>0;)n.push(t.shift());for(;n.length>0;){const e=n.shift();t.push("+"===e?oQ(t.pop(),t.pop()):"-"===e?aQ(t.pop(),t.pop()):e)}return t.pop()}(this.anchor.location,"+",this.point.delta,"-",this.notStaticParent,"+",e),i=this.point.element;jt((function(){i.style.left=t.x+"px",i.style.top=t.y+"px"}))}checkInCasesInt(e){const t=this.events;e.forEach((function(e){t.attachEvent(e[0],e[1],(function(e){this.update()}))}))}checkInCases(){return this.containers?(this.checkInCasesInt(Array.from(arguments)),this.update(),this):this}dispose(){this.events&&(this.events.dispose(),this.events=null,this.dropDownStartPos=null,this.containers=null,this.resizeObserver&&this.resizeObserver.disconnect())}}function mQ(e){return new hQ(e,dQ)}function gQ(e){return new hQ(e,AQ)}var CQ,fQ;!function(e){e[e.Popup=0]="Popup",e[e.Modal=1]="Modal"}(CQ||(CQ={})),function(e){e[e.Down=1]="Down",e[e.Up=2]="Up"}(fQ||(fQ={}));const vQ=8,bQ=new WeakMap;let wQ;const yQ=[];const BQ=[{value:0,text:""},{value:1,text:QP},{value:2,text:NP},{value:4,text:MP},{value:8,text:kP},{value:16,text:KP},{value:32,text:OP},{value:64,text:_P},{value:128,text:VP},{value:256,text:RP},{value:512,text:LP}];const EQ={init:function(e,t,i,n){if(e=Lt(e),t=Lt(t),i=Lt(i),!e)return Promise.reject("failed");if(wi(e),i){const s=s=>{!function(e,t,i){let n=e.target;for(;n;){if(n===t)return;n=n.parentElement}i&&i()}(s,e,(function(){document.body.contains(e)||wi(e);const s=document.activeElement===t,r=i&&("hidden"!==(o=i).style.visibility||o.classList.contains("dxbs-visually-hidden"));var o;(s||r)&&n.invokeMethodAsync("OnDropDownLostFocus",t.value).catch((e=>console.error(e)))}))};document.addEventListener(TI.TouchUtils.touchMouseDownEventName,s),yi(e,(function(){document.removeEventListener(TI.TouchUtils.touchMouseDownEventName,s)}))}return Promise.resolve("ok")},dispose:function(e){return(e=Lt(e))&&wi(e),wQ&&wQ.dispose(),Promise.resolve("ok")},showAdaptiveDropdown:function(e,t,i,n,s,r){if(!(e=Lt(e)))return Promise.reject();const o=Nt(e,i);if(!o)return Promise.reject();const a=document.documentElement,l=document.documentElement.style.overflow,A=document.body.style.overflow,d=document.body.scroll,c=t.dialogType,h=t.alignment,u=function(e){let t="";return BQ.forEach((i=>{0!=(i.value&e)&&(t&&(t+=" "),t+=i.text)})),t}(h),p=c===CQ.Modal,m=new ResizeObserver((function(i,n){if(i.length<1)return;C&&C.height!==i[0].contentRect.height&&(ai(e),Rt(e,zP,!0),tQ(e,o,u,t.fitHorizontally,t.fitVertically,f),jt((()=>{Rt(e,zP,!1)})));C=i[0].contentRect}));if(c===CQ.Popup)0===h?function(e,t,i){bQ.has(e)&&(bQ.get(e).disconnect(),bQ.delete(e));const n=t.offsetParent;if(!n)return void jt((function(){t.style.visibility=""}));const s=n.getBoundingClientRect(),r=e.getBoundingClientRect(),o=r.top-s.top,a=s.bottom-r.bottom;let l;const A=window.getComputedStyle(t),d=t.offsetHeight+Math.max(parseFloat(A.marginTop),0)+Math.max(parseFloat(A.marginBottom),0)+vQ;if(i===fQ.Up)l=!0,s.top+(o-d)<=0&&s.top+o+e.offsetHeight+d+window.pageYOffset<=Math.max(document.body.scrollHeight,window.innerHeight)&&(l=!1);else l=!1,s.bottom-(a-d)>=window.innerHeight&&s.top+o-d+window.pageYOffset>=0&&(l=!0);const c=r.left+t.offsetWidth+vQ>=document.body.clientWidth&&r.right-t.offsetWidth-vQ>0;jt((()=>{wQ&&wQ.dispose(),wQ=l?c?mQ(t).rightBottomCorner.anchorTo(gQ(e).rightTopCorner):mQ(t).leftBottomCorner.anchorTo(gQ(e).leftTopCorner):c?mQ(t).rightTopCorner.anchorTo(gQ(e).rightBottomCorner):mQ(t).leftTopCorner.anchorTo(gQ(e).leftBottomCorner),t.style.visibility=""}))}(o,e,t.dropDownDirection):tQ(e,o,u,t.fitHorizontally,t.fitVertically,f),t.handleResize&&m.observe(e);else{yQ.push(e),e.style.paddingRight=iQ(e)+nQ()+"px";const t=iQ(document.body)+nQ();document.body.style.paddingRight=String(t),document.body.classList.add("dxbl-modal-open")}let g=!1,C=null;function f(i){let n;i.appliedModifierKeys.height===NP||i.appliedModifierKeys.height===LP?n=t.bottomAlignmentCssClass:i.appliedModifierKeys.height!==QP&&i.appliedModifierKeys.height!==RP||(n=t.topAlignmentCssClass),n&&li(e,n,!0)}function v(t){const i=t.srcElement;e&&i&&(!e.contains(i)||c===CQ.Modal&&e===i)&&w(e)}function b(t){const i=t.target;i&&(a.removeEventListener("focusin",b),null===t.relatedTarget&&e&&e.contains(i)&&i.focus())}function w(e){if(!g){if(g=!0,ui(e))return;y(),s.invokeMethodAsync("CloseDialog").catch((function(t){ui(e)||console.error(t)}))}}function y(){if(a.removeEventListener(TI.TouchUtils.touchMouseDownEventName,v),window.removeEventListener("resize",E),m.disconnect(),c===CQ.Modal){if(e){const t=yQ.indexOf(e);t>-1&&yQ.splice(t,1)}yQ.length||(I(c,!1),document.body.classList.remove("dxbl-modal-open"),document.body.style.paddingRight=String(iQ(document.body)-nQ()))}e=null}function B(){if(!e)return;const t=e.querySelector(k);t&&t.focus()}function E(){if(!e||!Nt(e,"modal-dialog-owner"))return;const t=e.firstElementChild;if(!t)return;const i=t.classList,n=function(e,t,i){if(i!==CQ.Modal)return-1;const n=e.getBoundingClientRect(),s=t.getBoundingClientRect(),r=Nt(e,"dxbs-gridview"),o=r&&r.querySelector("thead");if(!o)return-1;const a=o.getBoundingClientRect(),l=(a||n).bottom;if(l>.5*t.clientHeight)return l-n.top<.5*t.clientHeight?l-s.top-.5*t.clientHeight:n.top-s.top-2;return-1}(o,a,c),s=a.clientHeight>a.clientWidth?"topVertical":"topHorizontal";$t((function(){i.contains("topVertical")||i.contains("topHorizontal")?i.remove("transition"):i.add("transition"),n&&(a.scrollTop=n),i.remove("topVertical","topHorizontal"),i.add(s)}))}function I(e,t){if(e!==CQ.Modal)return;let i,n,s;t?(i="hidden",n="hidden",s=()=>{}):(i=l,n=A,s=d),document.documentElement.style.overflow=i,document.body.style.overflow=n,document.body.scroll=s}return a.addEventListener(TI.TouchUtils.touchMouseDownEventName,v),e.addEventListener("keydown",(function(t){e&&t.keyCode===Be.KeyCode.Esc&&w(e)})),e.addEventListener("focusout",(function(t){const i=t.relatedTarget;!g&&e&&(i&&!e.contains(i)?function(t){if(!e)return;const i=e.compareDocumentPosition(t);i&window.Node.DOCUMENT_POSITION_PRECEDING?function(){if(!e)return;const t=function(e){const t=e.querySelectorAll(k);return t[t.length-1]}(e);t&&t.focus()}():i&window.Node.DOCUMENT_POSITION_FOLLOWING&&B()}(i):null===i&&a.addEventListener("focusin",b))})),function(e,t,i,n){e&&t.addEventListener("touchmove",(e=>{e.srcElement===t&&e.preventDefault()}));if(n===CQ.Modal){let e;i.addEventListener("touchstart",(t=>{e=t})),i.addEventListener("touchmove",(t=>{(function(e,t){if(!t)return!1;const i=Nt(e.srcElement,"modal-header");if(i)return!0;const n=Nt(e.srcElement,"column-chooser-elements-container"),s=Nt(n,"modal-body");if(!n||!s)return!1;if(s.clientHeight>=n.clientHeight)return!0;const r=e.touches[0].pageY-t.touches[0].pageY,o=e=>e.getBoundingClientRect().top,a=n.querySelector(".column-chooser-element-container");if(a&&o(a)===o(s)&&r>=0&&e.cancelable)return!0;const l=e=>Math.round(e.getBoundingClientRect().bottom),A=n.querySelector(".column-chooser-element-container:last-child");return A&&l(A)===l(s)&&r<=0&&e.cancelable})(t,e)&&t.preventDefault(),e=t}))}}(p,e,o,c),function(e){if(SP.has(e))return SP.get(e);const t=new Promise((function(t){0===xP.size&&FP.observe(IP,DP),xP.set(e,(()=>{t(void 0)}))}));return SP.set(e,t),t}(e).then((()=>{y(),e=null})),I(c,!0),jt((function(){e&&(t.showFocus||(Ei(e),Di(e)),c===CQ.Popup&&(B(),function(e,t){const i=Nt(e,t);if(e&&i){const t=Nt(e,"dx-menu-bar");t&&t.classList.contains("vertical")||(ni(i,n),n())}function n(){const t=e.getBoundingClientRect(),n=i.getBoundingClientRect(),s=parseFloat(e.style.marginLeft);if(s&&(t.x=t.x-s),Math.round(t.x+t.width)>Math.round(n.x+n.width)&&n.width>t.width){const i=Nt(e.parentNode,"dropdown-menu");if(i){const n=i.getBoundingClientRect(),s=parseFloat(window.getComputedStyle(i,null).getPropertyValue("border-right-width"));e.style.marginLeft="-"+(t.x+t.width-n.x-s)+"px"}else e.style.marginLeft="-"+(t.x+t.width-n.x-n.width)+"px"}else s&&(e.style.marginLeft="")}}(e,r)))})),c===CQ.Modal&&(window.addEventListener("resize",E),E()),Promise.resolve()},setInlineModalSize:function(e){if(!(e=Lt(e)))return;const t=e.getElementsByClassName("modal-body")[0];t.style.width=t.offsetWidth+"px",t.style.height=t.offsetHeight+"px"}},IQ=[],SQ={width:0,height:0};function xQ(e,t){e.invokeMethodAsync("OnWindowResize",t).catch((e=>console.error(e)))}window.addEventListener("resize",(e=>{const t=window.innerWidth,i=window.innerHeight;SQ.height===i&&SQ.width===t||(SQ.height=i,SQ.width=t,IQ.forEach((e=>e(SQ))))}),{passive:!0});const DQ={init:function(e){return function(e){if(IQ.indexOf(e)>-1)throw new Error("already subscribed");IQ.push(e)}((t=>{xQ(e,t.width)})),xQ(e,window.innerWidth),Promise.resolve("ok")},dispose:function(){return Promise.resolve("ok")}};function FQ(e,t){const i=document.createElement("link");return i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),i.setAttribute("data-theme-id",t),i}function TQ(e,t){const i=document.createElement("style");return i.setAttribute("data-theme-id",t),i.innerHTML=e,i}function HQ(e,t){e?e.insertAdjacentElement("afterend",t):document.head.appendChild(t)}const UQ={setTheme:async function(e,{paths:t,styles:i}){const n=document.querySelectorAll("[data-theme-id]");let s=n[n.length-1];for(const t of i){const i=TQ(t,e);HQ(s,i),s=i}const r=[],o=[];for(const i of t){if(!i)continue;const t=FQ(i,e);r.push(new Promise((e=>{t.onload=()=>{e()},t.onerror=()=>{o.push(i),e()}}))),HQ(s,t),s=t}return await Promise.all(r),n.forEach((e=>e.remove())),o},dispose:function(){return Promise.resolve("ok")}};class PQ{constructor(e,t,i,n,s,r,o,a){this.targetWidth=0,this.targetHeight=0,this.targetPositionX=0,this.targetPositionY=0,this.viewPortWidth=0,this.viewPortHeight=0,this.viewPortScrollHeight=0,this.viewPortScrollWidth=0,this.targetWidth=e,this.targetHeight=t,this.targetPositionX=i,this.targetPositionY=n,this.viewPortWidth=s,this.viewPortHeight=r,this.viewPortScrollWidth=o,this.viewPortScrollHeight=a}}const QQ={getReference:function(e){return function(e){if(!e)throw new Error("failed");return e}(e)},initResizeHelper:function(e){return DQ.init(e)},setTheme:function(e,t){return UQ.setTheme(e,t)},setInputValue:function(e,t){e.value=t},getInputValue:function(e){return e.value},getDeviceInfo:function(e,t){return G.getDeviceInfo(e,t)},getLayoutAttributes:function(e){const t=document.querySelector(e);if(null===e)throw new Error("Position target does not exist");if(null===t)return console.warn("Could not find an element by the specified position target"),function(){const e=document.querySelector("body").getBoundingClientRect();return new PQ(Math.floor(e.width/2),Math.floor(e.height),Math.floor(e.width/2),Math.floor(e.height),Math.floor(window.innerWidth),Math.floor(window.innerHeight),Math.floor(window.scrollX),Math.floor(window.scrollY))}();const i=t.getBoundingClientRect();return new PQ(Math.floor(i.width),Math.floor(i.height),Math.floor(i.x),Math.floor(i.y),Math.floor(window.innerWidth),Math.floor(window.innerHeight),Math.floor(window.scrollX),Math.floor(window.scrollY))},copyToClipboard:async function(e){if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e);const t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",t.style.height="0px",t.style.width="0px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove()}},showFileSelectorDialog:async function(e){const t=e.isConnected?e:null;return null!==t&&t.showFileSelectorDialog(),Promise.resolve()},waitUntilElementLoaded:async function(e){customElements.get(e)||await customElements.whenDefined(e)},sendFileOptions:async function(e,t){const i=e.isConnected?e:null;if(null!==i){const e=await t.arrayBuffer(),n=new TextDecoder("utf-8").decode(e),s=JSON.parse(n);i.processUploadedFilesOptions(s)}return Promise.resolve()},downloadFileFromStream:async function(e,t){const i=await t.arrayBuffer(),n=URL.createObjectURL(new Blob([i])),s=document.createElement("a");return document.body.appendChild(s),s.href=n,s.download=null!=e?e:"",s.click(),s.remove(),URL.revokeObjectURL(n),Promise.resolve()},scrollIntoView:function(e,t){const i=e.ownerDocument.getElementById(t);if(null!==i){const t=i.getBoundingClientRect(),n=e.getBoundingClientRect();return new Promise(((s,r)=>{requestAnimationFrame((r=>{!(e.compareDocumentPosition(document.body)&Node.DOCUMENT_POSITION_DISCONNECTED)&&t.top>n.top&&i.scrollTop>0&&(i.scrollTop=0),s()}))}))}return Promise.resolve()}};yP.initializeThemeCssRuntimeVariables(),lP.showDeprecatedStyleSheetWarningIfNeeded();const NQ=gi,RQ=LI,LQ=RI,MQ=sB,kQ=EQ,KQ=QQ,OQ=EP;function _Q(){const e=document.querySelector(lr);if(!e)throw new Error("Error when trying to get CaptureManager in DxPopupRoot");return e.captureManager}const VQ=new MutationObserver((e=>{const t=e[0].target;if(t){const e=(h.Browser.Info||"").split(" ").filter((e=>e&&!t.classList.contains(e)));e.length>0&&t.classList.add(...e)}}));VQ.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});export{NQ as DOMModule,kQ as EditorsDropDownModule,RQ as FileInputModule,OQ as RibbonModule,MQ as RollerModule,LQ as UploadModule,KQ as UtilsModule,_Q as getCaptureManagerSingletonForTests};
